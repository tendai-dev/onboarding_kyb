"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/auth/callback/page",{

/***/ "(app-pages-browser)/./src/app/auth/callback/page.tsx":
/*!****************************************!*\
  !*** ./src/app/auth/callback/page.tsx ***!
  \****************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ AuthCallbackPage; }\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_navigation__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/navigation */ \"(app-pages-browser)/./node_modules/next/dist/api/navigation.js\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @chakra-ui/react */ \"(app-pages-browser)/./node_modules/@chakra-ui/react/dist/esm/components/box/index.js\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @chakra-ui/react */ \"(app-pages-browser)/./node_modules/@chakra-ui/react/dist/esm/components/stack/v-stack.js\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @chakra-ui/react */ \"(app-pages-browser)/./node_modules/@chakra-ui/react/dist/esm/components/spinner/spinner.js\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @chakra-ui/react */ \"(app-pages-browser)/./node_modules/@chakra-ui/react/dist/esm/components/text/index.js\");\n/* harmony import */ var _chakra_ui_react__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @chakra-ui/react */ \"(app-pages-browser)/./node_modules/@chakra-ui/react/dist/esm/components/button/button.js\");\n/* harmony import */ var _config_auth__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/config/auth */ \"(app-pages-browser)/./src/config/auth.ts\");\n/* harmony import */ var _lib_auth_pkce__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/auth/pkce */ \"(app-pages-browser)/./src/lib/auth/pkce.ts\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$();\n\n\n\n\n\n// Removed: backupTokens - tokens are now stored server-side in Redis\nasync function exchangeCodeForTokens(code, codeVerifier) {\n    const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        client_id: _config_auth__WEBPACK_IMPORTED_MODULE_3__.authConfig.clientId,\n        code,\n        redirect_uri: _config_auth__WEBPACK_IMPORTED_MODULE_3__.authConfig.redirectUri,\n        code_verifier: codeVerifier\n    });\n    const res = await fetch(_config_auth__WEBPACK_IMPORTED_MODULE_3__.authConfig.tokenUrl, {\n        method: \"POST\",\n        headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n        },\n        body: body.toString()\n    });\n    if (!res.ok) {\n        const text = await res.text();\n        throw new Error(text || \"Token exchange failed: \".concat(res.status));\n    }\n    return res.json();\n}\nfunction hasRequiredRole(accessTokenPayload) {\n    try {\n        var _ra_REQUIRED_RESOURCE, _accessTokenPayload_realm_access;\n        var _accessTokenPayload_resource_access;\n        // 1) Preferred: client role on the specified resource\n        const ra = (_accessTokenPayload_resource_access = accessTokenPayload === null || accessTokenPayload === void 0 ? void 0 : accessTokenPayload.resource_access) !== null && _accessTokenPayload_resource_access !== void 0 ? _accessTokenPayload_resource_access : {};\n        const preferredRoles = ra === null || ra === void 0 ? void 0 : (_ra_REQUIRED_RESOURCE = ra[_config_auth__WEBPACK_IMPORTED_MODULE_3__.REQUIRED_RESOURCE]) === null || _ra_REQUIRED_RESOURCE === void 0 ? void 0 : _ra_REQUIRED_RESOURCE.roles;\n        if (Array.isArray(preferredRoles) && preferredRoles.includes(_config_auth__WEBPACK_IMPORTED_MODULE_3__.REQUIRED_ROLE)) {\n            return true;\n        }\n        // 2) Fallback: role granted on any client resource (some setups map to a different client)\n        const anyClientHas = Object.values(ra).some((v)=>Array.isArray(v === null || v === void 0 ? void 0 : v.roles) && v.roles.includes(_config_auth__WEBPACK_IMPORTED_MODULE_3__.REQUIRED_ROLE));\n        if (anyClientHas) return true;\n        // 3) Fallback: realm role\n        const realmRoles = accessTokenPayload === null || accessTokenPayload === void 0 ? void 0 : (_accessTokenPayload_realm_access = accessTokenPayload.realm_access) === null || _accessTokenPayload_realm_access === void 0 ? void 0 : _accessTokenPayload_realm_access.roles;\n        if (Array.isArray(realmRoles) && realmRoles.includes(_config_auth__WEBPACK_IMPORTED_MODULE_3__.REQUIRED_ROLE)) {\n            return true;\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\nfunction decodeJwt(token) {\n    try {\n        const [, payload] = token.split(\".\");\n        const json = atob(payload.replace(/-/g, \"+\").replace(/_/g, \"/\"));\n        return JSON.parse(json);\n    } catch (e) {\n        return null;\n    }\n}\nfunction AuthCallbackPage() {\n    _s();\n    const router = (0,next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter)();\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [phase, setPhase] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(\"checking\");\n    const hasRunRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Prevent double execution in React Strict Mode\n        if (hasRunRef.current) {\n            return;\n        }\n        hasRunRef.current = true;\n        const run = async ()=>{\n            setPhase(\"checking\");\n            const url = new URL(window.location.href);\n            // Check for Keycloak error parameters first\n            const errorParam = url.searchParams.get(\"error\");\n            const errorDescription = url.searchParams.get(\"error_description\");\n            if (errorParam) {\n                let errorMessage = \"Authentication failed.\";\n                if (errorDescription) {\n                    errorMessage = decodeURIComponent(errorDescription);\n                } else {\n                    // Map common Keycloak error codes to user-friendly messages\n                    const errorMessages = {\n                        \"access_denied\": \"Access was denied. Please try again.\",\n                        \"invalid_request\": \"Invalid authentication request. Please try again.\",\n                        \"invalid_client\": \"Authentication configuration error. Please contact support.\",\n                        \"invalid_grant\": \"Authentication session expired. Please try again.\",\n                        \"unauthorized_client\": \"Client not authorized. Please contact support.\",\n                        \"unsupported_grant_type\": \"Authentication method not supported. Please contact support.\",\n                        \"invalid_scope\": \"Requested permissions are invalid. Please contact support.\",\n                        \"server_error\": \"Authentication server error. Please try again later.\",\n                        \"temporarily_unavailable\": \"Authentication service is temporarily unavailable. Please try again later.\"\n                    };\n                    errorMessage = errorMessages[errorParam] || errorMessage;\n                }\n                setError(errorMessage);\n                setPhase(\"error\");\n                return;\n            }\n            const code = url.searchParams.get(\"code\");\n            const returnedState = url.searchParams.get(\"state\");\n            const { codeVerifier, state } = (0,_lib_auth_pkce__WEBPACK_IMPORTED_MODULE_4__.getCodeVerifierAndState)();\n            // If code is missing, user navigated directly to callback: start flow\n            if (!code || !codeVerifier) {\n                (0,_lib_auth_pkce__WEBPACK_IMPORTED_MODULE_4__.startAuthorization)(_config_auth__WEBPACK_IMPORTED_MODULE_3__.authConfig);\n                return;\n            }\n            // Validate state parameter (CSRF protection)\n            if (state && returnedState && state !== returnedState) {\n                setError(\"Security validation failed. Please try again.\");\n                setPhase(\"error\");\n                return;\n            }\n            // If no state was sent but one was returned, that's also suspicious\n            if (!state && returnedState) {\n                setError(\"Security validation failed. Please try again.\");\n                setPhase(\"error\");\n                return;\n            }\n            try {\n                setPhase(\"exchanging\");\n                // Retry logic for network failures\n                let tokens;\n                let lastError = null;\n                const maxRetries = 3;\n                for(let attempt = 1; attempt <= maxRetries; attempt++){\n                    try {\n                        tokens = await exchangeCodeForTokens(code, codeVerifier);\n                        break;\n                    } catch (e) {\n                        var _e_message, _e_message1, _e_message2, _e_message3;\n                        lastError = e;\n                        // Don't retry on client errors (4xx)\n                        if (((_e_message = e.message) === null || _e_message === void 0 ? void 0 : _e_message.includes(\"400\")) || ((_e_message1 = e.message) === null || _e_message1 === void 0 ? void 0 : _e_message1.includes(\"401\")) || ((_e_message2 = e.message) === null || _e_message2 === void 0 ? void 0 : _e_message2.includes(\"403\")) || ((_e_message3 = e.message) === null || _e_message3 === void 0 ? void 0 : _e_message3.includes(\"404\"))) {\n                            throw e;\n                        }\n                        // Retry on network/server errors\n                        if (attempt < maxRetries) {\n                            await new Promise((resolve)=>setTimeout(resolve, 1000 * attempt)); // Exponential backoff\n                            continue;\n                        }\n                        throw e;\n                    }\n                }\n                if (!tokens) {\n                    throw lastError || new Error(\"Failed to exchange authorization code\");\n                }\n                const access = tokens.access_token;\n                const refresh = tokens.refresh_token;\n                // Validate access token format\n                if (!access || typeof access !== \"string\") {\n                    setError(\"Received invalid authentication token. Please try again.\");\n                    setPhase(\"error\");\n                    return;\n                }\n                const tokenParts = access.split(\".\");\n                if (tokenParts.length !== 3) {\n                    setError(\"Received invalid authentication token format. Please try again.\");\n                    setPhase(\"error\");\n                    return;\n                }\n                const payload = decodeJwt(access);\n                if (!payload) {\n                    setError(\"Failed to process authentication token. Please try again.\");\n                    setPhase(\"error\");\n                    return;\n                }\n                if (_config_auth__WEBPACK_IMPORTED_MODULE_3__.ENFORCE_ROLE && !hasRequiredRole(payload)) {\n                    setError(\"Your account lacks the required business-user role.\");\n                    setPhase(\"error\");\n                    return;\n                }\n                // SECURITY: Tokens are now stored server-side in Redis via NextAuth\n                // DO NOT store tokens in localStorage - this is a security risk\n                // This callback page handles legacy PKCE flow, but NextAuth handles OAuth callbacks at /api/auth/callback/keycloak\n                // If we reach here, it means the user completed PKCE flow - redirect to NextAuth to complete properly\n                (0,_lib_auth_pkce__WEBPACK_IMPORTED_MODULE_4__.clearPkceState)();\n                // Note: This callback page should ideally not be used anymore\n                // NextAuth handles OAuth callbacks at /api/auth/callback/keycloak\n                // If user reaches here, redirect to NextAuth sign-in\n                console.log(\"[Auth Callback] Legacy PKCE flow - redirecting to NextAuth for proper token storage\");\n                setPhase(\"success\");\n                // Redirect to NextAuth sign-in which will handle token storage in Redis\n                router.replace(\"/auth/login\");\n            } catch (e) {\n                var _e_message4, _e_message5, _e_message6, _e_message7;\n                let errorMessage = \"Authentication failed. Please try again.\";\n                // Try to parse JSON error response from Keycloak\n                let errorData = null;\n                try {\n                    if (e.message && typeof e.message === \"string\") {\n                        errorData = JSON.parse(e.message);\n                    }\n                } catch (e) {\n                // Not JSON, use string as-is\n                }\n                // Handle specific Keycloak error codes\n                if ((errorData === null || errorData === void 0 ? void 0 : errorData.error) === \"invalid_grant\") {\n                    errorMessage = errorData.error_description ? decodeURIComponent(errorData.error_description) : \"Your authentication session has expired. Please sign in again.\";\n                    // Clear PKCE state and redirect to login\n                    (0,_lib_auth_pkce__WEBPACK_IMPORTED_MODULE_4__.clearPkceState)();\n                    setTimeout(()=>{\n                        router.replace(\"/auth/login\");\n                    }, 2000);\n                    setError(errorMessage);\n                    setPhase(\"error\");\n                    return;\n                }\n                // Provide more specific error messages\n                if (((_e_message4 = e.message) === null || _e_message4 === void 0 ? void 0 : _e_message4.includes(\"NetworkError\")) || ((_e_message5 = e.message) === null || _e_message5 === void 0 ? void 0 : _e_message5.includes(\"Failed to fetch\"))) {\n                    errorMessage = \"Network error. Please check your connection and try again.\";\n                } else if ((_e_message6 = e.message) === null || _e_message6 === void 0 ? void 0 : _e_message6.includes(\"401\")) {\n                    errorMessage = \"Authentication failed. Please sign in again.\";\n                } else if ((_e_message7 = e.message) === null || _e_message7 === void 0 ? void 0 : _e_message7.includes(\"400\")) {\n                    // Parse JSON error if possible\n                    if (errorData === null || errorData === void 0 ? void 0 : errorData.error_description) {\n                        errorMessage = decodeURIComponent(errorData.error_description);\n                    } else if ((errorData === null || errorData === void 0 ? void 0 : errorData.error) === \"invalid_grant\") {\n                        // Handle \"code already used\" scenario (common in React Strict Mode)\n                        errorMessage = \"The authorization code has already been used. This may happen if the page reloaded. Please sign in again.\";\n                        // Clear PKCE state and redirect to login\n                        (0,_lib_auth_pkce__WEBPACK_IMPORTED_MODULE_4__.clearPkceState)();\n                        setTimeout(()=>{\n                            router.replace(\"/\");\n                        }, 2000);\n                    } else {\n                        errorMessage = \"Invalid authentication request. The authorization code may have expired or already been used. Please try again.\";\n                    }\n                } else if (errorData === null || errorData === void 0 ? void 0 : errorData.error_description) {\n                    errorMessage = decodeURIComponent(errorData.error_description);\n                } else if (e.message) {\n                    errorMessage = e.message;\n                }\n                // Don't log expected errors (like invalid_grant from expired codes)\n                if (!errorData || errorData.error !== \"invalid_grant\") {\n                    console.error(\"Authentication error:\", e);\n                }\n                setError(errorMessage);\n                setPhase(\"error\");\n            }\n        };\n        run();\n    }, [\n        router\n    ]);\n    // Unified full-screen loader overlay for all non-error states\n    if (phase !== \"error\") {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_5__.Box, {\n            minH: \"100vh\",\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_6__.VStack, {\n                gap: 4,\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_7__.Spinner, {}, void 0, false, {\n                        fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n                        lineNumber: 282,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.Text, {\n                        children: \"Completing sign-inâ€¦\"\n                    }, void 0, false, {\n                        fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n                        lineNumber: 283,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n                lineNumber: 281,\n                columnNumber: 9\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n            lineNumber: 280,\n            columnNumber: 7\n        }, this);\n    }\n    // Error state\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_5__.Box, {\n        minH: \"100vh\",\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_6__.VStack, {\n            gap: 4,\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_8__.Text, {\n                    color: \"red.500\",\n                    fontWeight: \"bold\",\n                    children: error\n                }, void 0, false, {\n                    fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n                    lineNumber: 293,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_chakra_ui_react__WEBPACK_IMPORTED_MODULE_9__.Button, {\n                    onClick: ()=>(0,_lib_auth_pkce__WEBPACK_IMPORTED_MODULE_4__.startAuthorization)(_config_auth__WEBPACK_IMPORTED_MODULE_3__.authConfig),\n                    children: \"Back to sign in\"\n                }, void 0, false, {\n                    fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n                    lineNumber: 294,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n            lineNumber: 292,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/auth/callback/page.tsx\",\n        lineNumber: 291,\n        columnNumber: 5\n    }, this);\n}\n_s(AuthCallbackPage, \"cS4kRvp5OAPyHJxGgoO6UcprOlk=\", false, function() {\n    return [\n        next_navigation__WEBPACK_IMPORTED_MODULE_2__.useRouter\n    ];\n});\n_c = AuthCallbackPage;\nvar _c;\n$RefreshReg$(_c, \"AuthCallbackPage\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvYXV0aC9jYWxsYmFjay9wYWdlLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUVvRDtBQUNSO0FBQzBCO0FBQ3FCO0FBQ0c7QUFDOUYscUVBQXFFO0FBRXJFLGVBQWVnQixzQkFBc0JDLElBQVksRUFBRUMsWUFBb0I7SUFDckUsTUFBTUMsT0FBTyxJQUFJQyxnQkFBZ0I7UUFDL0JDLFlBQVk7UUFDWkMsV0FBV2Isb0RBQVVBLENBQUNjLFFBQVE7UUFDOUJOO1FBQ0FPLGNBQWNmLG9EQUFVQSxDQUFDZ0IsV0FBVztRQUNwQ0MsZUFBZVI7SUFDakI7SUFFQSxNQUFNUyxNQUFNLE1BQU1DLE1BQU1uQixvREFBVUEsQ0FBQ29CLFFBQVEsRUFBRTtRQUMzQ0MsUUFBUTtRQUNSQyxTQUFTO1lBQUUsZ0JBQWdCO1FBQW9DO1FBQy9EWixNQUFNQSxLQUFLYSxRQUFRO0lBQ3JCO0lBQ0EsSUFBSSxDQUFDTCxJQUFJTSxFQUFFLEVBQUU7UUFDWCxNQUFNQyxPQUFPLE1BQU1QLElBQUlPLElBQUk7UUFDM0IsTUFBTSxJQUFJQyxNQUFNRCxRQUFRLDBCQUFxQyxPQUFYUCxJQUFJUyxNQUFNO0lBQzlEO0lBQ0EsT0FBT1QsSUFBSVUsSUFBSTtBQUNqQjtBQUVBLFNBQVNDLGdCQUFnQkMsa0JBQXVCO0lBQzlDLElBQUk7WUFHMkNDLHVCQVVKRDtZQVg5QkE7UUFEWCxzREFBc0Q7UUFDdEQsTUFBTUMsS0FBS0QsQ0FBQUEsc0NBQUFBLCtCQUFBQSx5Q0FBQUEsbUJBQW9CRSxlQUFlLGNBQW5DRixpREFBQUEsc0NBQXVDLENBQUM7UUFDbkQsTUFBTUcsaUJBQXVDRixlQUFBQSwwQkFBQUEsd0JBQUFBLEVBQUksQ0FBQzlCLDJEQUFpQkEsQ0FBQyxjQUF2QjhCLDRDQUFBQSxzQkFBeUJHLEtBQUs7UUFDM0UsSUFBSUMsTUFBTUMsT0FBTyxDQUFDSCxtQkFBbUJBLGVBQWVJLFFBQVEsQ0FBQ25DLHVEQUFhQSxHQUFH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ekM7Z0JBRUF4QixTQUFTZTtnQkFDVGIsU0FBUztZQUNYO1FBQ0Y7UUFDQUc7SUFDRixHQUFHO1FBQUNQO0tBQU87SUFFWCw4REFBOEQ7SUFDOUQsSUFBSUcsVUFBVSxTQUFTO1FBQ3JCLHFCQUNFLDhEQUFDOUQsaURBQUdBO1lBQUNvRyxNQUFLO1lBQVFDLFNBQVE7WUFBT0MsWUFBVztZQUFTQyxnQkFBZTtzQkFDbEUsNEVBQUNuRyxvREFBTUE7Z0JBQUNvRyxLQUFLOztrQ0FDWCw4REFBQ3ZHLHFEQUFPQTs7Ozs7a0NBQ1IsOERBQUNDLGtEQUFJQTtrQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFJZDtJQUVBLGNBQWM7SUFDZCxxQkFDRSw4REFBQ0YsaURBQUdBO1FBQUNvRyxNQUFLO1FBQVFDLFNBQVE7UUFBT0MsWUFBVztRQUFTQyxnQkFBZTtrQkFDbEUsNEVBQUNuRyxvREFBTUE7WUFBQ29HLEtBQUs7OzhCQUNYLDhEQUFDdEcsa0RBQUlBO29CQUFDdUcsT0FBTTtvQkFBVUMsWUFBVzs4QkFBUTlDOzs7Ozs7OEJBQ3pDLDhEQUFDekQsb0RBQU1BO29CQUFDd0csU0FBUyxJQUFNbEcsa0VBQWtCQSxDQUFDSixvREFBVUE7OEJBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSS9EO0dBeE93QnFEOztRQUNQM0Qsc0RBQVNBOzs7S0FERjJEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9hcHAvYXV0aC9jYWxsYmFjay9wYWdlLnRzeD80YzA4Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVN0YXRlLCB1c2VSZWYgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gXCJuZXh0L25hdmlnYXRpb25cIjtcbmltcG9ydCB7IEJveCwgU3Bpbm5lciwgVGV4dCwgQnV0dG9uLCBWU3RhY2sgfSBmcm9tIFwiQGNoYWtyYS11aS9yZWFjdFwiO1xuaW1wb3J0IHsgYXV0aENvbmZpZywgUkVRVUlSRURfUkVTT1VSQ0UsIFJFUVVJUkVEX1JPTEUsIEVORk9SQ0VfUk9MRSB9IGZyb20gXCJAL2NvbmZpZy9hdXRoXCI7XG5pbXBvcnQgeyBzdGFydEF1dGhvcml6YXRpb24sIGdldENvZGVWZXJpZmllckFuZFN0YXRlLCBjbGVhclBrY2VTdGF0ZSB9IGZyb20gXCJAL2xpYi9hdXRoL3BrY2VcIjtcbi8vIFJlbW92ZWQ6IGJhY2t1cFRva2VucyAtIHRva2VucyBhcmUgbm93IHN0b3JlZCBzZXJ2ZXItc2lkZSBpbiBSZWRpc1xuXG5hc3luYyBmdW5jdGlvbiBleGNoYW5nZUNvZGVGb3JUb2tlbnMoY29kZTogc3RyaW5nLCBjb2RlVmVyaWZpZXI6IHN0cmluZykge1xuICBjb25zdCBib2R5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgZ3JhbnRfdHlwZTogXCJhdXRob3JpemF0aW9uX2NvZGVcIixcbiAgICBjbGllbnRfaWQ6IGF1dGhDb25maWcuY2xpZW50SWQsXG4gICAgY29kZSxcbiAgICByZWRpcmVjdF91cmk6IGF1dGhDb25maWcucmVkaXJlY3RVcmksXG4gICAgY29kZV92ZXJpZmllcjogY29kZVZlcmlmaWVyLFxuICB9KTtcblxuICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChhdXRoQ29uZmlnLnRva2VuVXJsLCB7XG4gICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICBoZWFkZXJzOiB7IFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIgfSxcbiAgICBib2R5OiBib2R5LnRvU3RyaW5nKCksXG4gIH0pO1xuICBpZiAoIXJlcy5vaykge1xuICAgIGNvbnN0IHRleHQgPSBhd2FpdCByZXMudGV4dCgpO1xuICAgIHRocm93IG5ldyBFcnJvcih0ZXh0IHx8IGBUb2tlbiBleGNoYW5nZSBmYWlsZWQ6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuICByZXR1cm4gcmVzLmpzb24oKTtcbn1cblxuZnVuY3Rpb24gaGFzUmVxdWlyZWRSb2xlKGFjY2Vzc1Rva2VuUGF5bG9hZDogYW55KTogYm9vbGVhbiB7XG4gIHRyeSB7XG4gICAgLy8gMSkgUHJlZmVycmVkOiBjbGllbnQgcm9sZSBvbiB0aGUgc3BlY2lmaWVkIHJlc291cmNlXG4gICAgY29uc3QgcmEgPSBhY2Nlc3NUb2tlblBheWxvYWQ/LnJlc291cmNlX2FjY2VzcyA/PyB7fTtcbiAgICBjb25zdCBwcmVmZXJyZWRSb2xlczogc3RyaW5nW10gfCB1bmRlZmluZWQgPSByYT8uW1JFUVVJUkVEX1JFU09VUkNFXT8ucm9sZXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocHJlZmVycmVkUm9sZXMpICYmIHByZWZlcnJlZFJvbGVzLmluY2x1ZGVzKFJFUVVJUkVEX1JPTEUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyAyKSBGYWxsYmFjazogcm9sZSBncmFudGVkIG9uIGFueSBjbGllbnQgcmVzb3VyY2UgKHNvbWUgc2V0dXBzIG1hcCB0byBhIGRpZmZlcmVudCBjbGllbnQpXG4gICAgY29uc3QgYW55Q2xpZW50SGFzID0gT2JqZWN0LnZhbHVlcyhyYSkuc29tZSgodjogYW55KSA9PiBBcnJheS5pc0FycmF5KHY/LnJvbGVzKSAmJiB2LnJvbGVzLmluY2x1ZGVzKFJFUVVJUkVEX1JPTEUpKTtcbiAgICBpZiAoYW55Q2xpZW50SGFzKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIDMpIEZhbGxiYWNrOiByZWFsbSByb2xlXG4gICAgY29uc3QgcmVhbG1Sb2xlczogc3RyaW5nW10gfCB1bmRlZmluZWQgPSBhY2Nlc3NUb2tlblBheWxvYWQ/LnJlYWxtX2FjY2Vzcz8ucm9sZXM7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVhbG1Sb2xlcykgJiYgcmVhbG1Sb2xlcy5pbmNsdWRlcyhSRVFVSVJFRF9ST0xFKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGVjb2RlSnd0KHRva2VuOiBzdHJpbmcpOiBhbnkgfCBudWxsIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBbLCBwYXlsb2FkXSA9IHRva2VuLnNwbGl0KFwiLlwiKTtcbiAgICBjb25zdCBqc29uID0gYXRvYihwYXlsb2FkLnJlcGxhY2UoLy0vZywgXCIrXCIpLnJlcGxhY2UoL18vZywgXCIvXCIpKTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uKTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXV0aENhbGxiYWNrUGFnZSgpIHtcbiAgY29uc3Qgcm91dGVyID0gdXNlUm91dGVyKCk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwaGFzZSwgc2V0UGhhc2VdID0gdXNlU3RhdGU8XCJjaGVja2luZ1wiIHwgXCJleGNoYW5naW5nXCIgfCBcInN1Y2Nlc3NcIiB8IFwiZXJyb3JcIj4oXCJjaGVja2luZ1wiKTtcbiAgY29uc3QgaGFzUnVuUmVmID0gdXNlUmVmKGZhbHNlKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFByZXZlbnQgZG91YmxlIGV4ZWN1dGlvbiBpbiBSZWFjdCBTdHJpY3QgTW9kZVxuICAgIGlmIChoYXNSdW5SZWYuY3VycmVudCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYXNSdW5SZWYuY3VycmVudCA9IHRydWU7XG5cbiAgICBjb25zdCBydW4gPSBhc3luYyAoKSA9PiB7XG4gICAgICBzZXRQaGFzZShcImNoZWNraW5nXCIpO1xuICAgICAgY29uc3QgdXJsID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBLZXljbG9hayBlcnJvciBwYXJhbWV0ZXJzIGZpcnN0XG4gICAgICBjb25zdCBlcnJvclBhcmFtID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJlcnJvclwiKTtcbiAgICAgIGNvbnN0IGVycm9yRGVzY3JpcHRpb24gPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImVycm9yX2Rlc2NyaXB0aW9uXCIpO1xuICAgICAgaWYgKGVycm9yUGFyYW0pIHtcbiAgICAgICAgbGV0IGVycm9yTWVzc2FnZSA9IFwiQXV0aGVudGljYXRpb24gZmFpbGVkLlwiO1xuICAgICAgICBpZiAoZXJyb3JEZXNjcmlwdGlvbikge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGRlY29kZVVSSUNvbXBvbmVudChlcnJvckRlc2NyaXB0aW9uKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBNYXAgY29tbW9uIEtleWNsb2FrIGVycm9yIGNvZGVzIHRvIHVzZXItZnJpZW5kbHkgbWVzc2FnZXNcbiAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2VzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgICAgICAgXCJhY2Nlc3NfZGVuaWVkXCI6IFwiQWNjZXNzIHdhcyBkZW5pZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gICAgICAgICAgICBcImludmFsaWRfcmVxdWVzdFwiOiBcIkludmFsaWQgYXV0aGVudGljYXRpb24gcmVxdWVzdC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgICAgICAgICAgIFwiaW52YWxpZF9jbGllbnRcIjogXCJBdXRoZW50aWNhdGlvbiBjb25maWd1cmF0aW9uIGVycm9yLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LlwiLFxuICAgICAgICAgICAgXCJpbnZhbGlkX2dyYW50XCI6IFwiQXV0aGVudGljYXRpb24gc2Vzc2lvbiBleHBpcmVkLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgICAgICAgICAgXCJ1bmF1dGhvcml6ZWRfY2xpZW50XCI6IFwiQ2xpZW50IG5vdCBhdXRob3JpemVkLiBQbGVhc2UgY29udGFjdCBzdXBwb3J0LlwiLFxuICAgICAgICAgICAgXCJ1bnN1cHBvcnRlZF9ncmFudF90eXBlXCI6IFwiQXV0aGVudGljYXRpb24gbWV0aG9kIG5vdCBzdXBwb3J0ZWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuXCIsXG4gICAgICAgICAgICBcImludmFsaWRfc2NvcGVcIjogXCJSZXF1ZXN0ZWQgcGVybWlzc2lvbnMgYXJlIGludmFsaWQuIFBsZWFzZSBjb250YWN0IHN1cHBvcnQuXCIsXG4gICAgICAgICAgICBcInNlcnZlcl9lcnJvclwiOiBcIkF1dGhlbnRpY2F0aW9uIHNlcnZlciBlcnJvci4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5cIixcbiAgICAgICAgICAgIFwidGVtcG9yYXJpbHlfdW5hdmFpbGFibGVcIjogXCJBdXRoZW50aWNhdGlvbiBzZXJ2aWNlIGlzIHRlbXBvcmFyaWx5IHVuYXZhaWxhYmxlLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLlwiLFxuICAgICAgICAgIH07XG4gICAgICAgICAgZXJyb3JNZXNzYWdlID0gZXJyb3JNZXNzYWdlc1tlcnJvclBhcmFtXSB8fCBlcnJvck1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgc2V0RXJyb3IoZXJyb3JNZXNzYWdlKTtcbiAgICAgICAgc2V0UGhhc2UoXCJlcnJvclwiKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBjb2RlID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJjb2RlXCIpO1xuICAgICAgY29uc3QgcmV0dXJuZWRTdGF0ZSA9IHVybC5zZWFyY2hQYXJhbXMuZ2V0KFwic3RhdGVcIik7XG4gICAgICBjb25zdCB7IGNvZGVWZXJpZmllciwgc3RhdGUgfSA9IGdldENvZGVWZXJpZmllckFuZFN0YXRlKCk7XG5cbiAgICAgIC8vIElmIGNvZGUgaXMgbWlzc2luZywgdXNlciBuYXZpZ2F0ZWQgZGlyZWN0bHkgdG8gY2FsbGJhY2s6IHN0YXJ0IGZsb3dcbiAgICAgIGlmICghY29kZSB8fCAhY29kZVZlcmlmaWVyKSB7XG4gICAgICAgIHN0YXJ0QXV0aG9yaXphdGlvbihhdXRoQ29uZmlnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBWYWxpZGF0ZSBzdGF0ZSBwYXJhbWV0ZXIgKENTUkYgcHJvdGVjdGlvbilcbiAgICAgIGlmIChzdGF0ZSAmJiByZXR1cm5lZFN0YXRlICYmIHN0YXRlICE9PSByZXR1cm5lZFN0YXRlKSB7XG4gICAgICAgIHNldEVycm9yKFwiU2VjdXJpdHkgdmFsaWRhdGlvbiBmYWlsZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCIpO1xuICAgICAgICBzZXRQaGFzZShcImVycm9yXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIG5vIHN0YXRlIHdhcyBzZW50IGJ1dCBvbmUgd2FzIHJldHVybmVkLCB0aGF0J3MgYWxzbyBzdXNwaWNpb3VzXG4gICAgICBpZiAoIXN0YXRlICYmIHJldHVybmVkU3RhdGUpIHtcbiAgICAgICAgc2V0RXJyb3IoXCJTZWN1cml0eSB2YWxpZGF0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgIHNldFBoYXNlKFwiZXJyb3JcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0UGhhc2UoXCJleGNoYW5naW5nXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gUmV0cnkgbG9naWMgZm9yIG5ldHdvcmsgZmFpbHVyZXNcbiAgICAgICAgbGV0IHRva2VucztcbiAgICAgICAgbGV0IGxhc3RFcnJvcjogRXJyb3IgfCBudWxsID0gbnVsbDtcbiAgICAgICAgY29uc3QgbWF4UmV0cmllcyA9IDM7XG4gICAgICAgIFxuICAgICAgICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgdG9rZW5zID0gYXdhaXQgZXhjaGFuZ2VDb2RlRm9yVG9rZW5zKGNvZGUsIGNvZGVWZXJpZmllcik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9IGNhdGNoIChlOiBhbnkpIHtcbiAgICAgICAgICAgIGxhc3RFcnJvciA9IGU7XG4gICAgICAgICAgICAvLyBEb24ndCByZXRyeSBvbiBjbGllbnQgZXJyb3JzICg0eHgpXG4gICAgICAgICAgICBpZiAoZS5tZXNzYWdlPy5pbmNsdWRlcygnNDAwJykgfHwgZS5tZXNzYWdlPy5pbmNsdWRlcygnNDAxJykgfHwgXG4gICAgICAgICAgICAgICAgZS5tZXNzYWdlPy5pbmNsdWRlcygnNDAzJykgfHwgZS5tZXNzYWdlPy5pbmNsdWRlcygnNDA0JykpIHtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJldHJ5IG9uIG5ldHdvcmsvc2VydmVyIGVycm9yc1xuICAgICAgICAgICAgaWYgKGF0dGVtcHQgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwICogYXR0ZW1wdCkpOyAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmXG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmICghdG9rZW5zKSB7XG4gICAgICAgICAgdGhyb3cgbGFzdEVycm9yIHx8IG5ldyBFcnJvcihcIkZhaWxlZCB0byBleGNoYW5nZSBhdXRob3JpemF0aW9uIGNvZGVcIik7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFjY2VzcyA9IHRva2Vucy5hY2Nlc3NfdG9rZW4gYXMgc3RyaW5nO1xuICAgICAgICBjb25zdCByZWZyZXNoID0gdG9rZW5zLnJlZnJlc2hfdG9rZW4gYXMgc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgICAgICBcbiAgICAgICAgLy8gVmFsaWRhdGUgYWNjZXNzIHRva2VuIGZvcm1hdFxuICAgICAgICBpZiAoIWFjY2VzcyB8fCB0eXBlb2YgYWNjZXNzICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIHNldEVycm9yKFwiUmVjZWl2ZWQgaW52YWxpZCBhdXRoZW50aWNhdGlvbiB0b2tlbi4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgICAgc2V0UGhhc2UoXCJlcnJvclwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRva2VuUGFydHMgPSBhY2Nlc3Muc3BsaXQoJy4nKTtcbiAgICAgICAgaWYgKHRva2VuUGFydHMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgc2V0RXJyb3IoXCJSZWNlaXZlZCBpbnZhbGlkIGF1dGhlbnRpY2F0aW9uIHRva2VuIGZvcm1hdC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgICAgc2V0UGhhc2UoXCJlcnJvclwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBheWxvYWQgPSBkZWNvZGVKd3QoYWNjZXNzKTtcbiAgICAgICAgaWYgKCFwYXlsb2FkKSB7XG4gICAgICAgICAgc2V0RXJyb3IoXCJGYWlsZWQgdG8gcHJvY2VzcyBhdXRoZW50aWNhdGlvbiB0b2tlbi4gUGxlYXNlIHRyeSBhZ2Fpbi5cIik7XG4gICAgICAgICAgc2V0UGhhc2UoXCJlcnJvclwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoRU5GT1JDRV9ST0xFICYmICFoYXNSZXF1aXJlZFJvbGUocGF5bG9hZCkpIHtcbiAgICAgICAgICBzZXRFcnJvcihcIllvdXIgYWNjb3VudCBsYWNrcyB0aGUgcmVxdWlyZWQgYnVzaW5lc3MtdXNlciByb2xlLlwiKTtcbiAgICAgICAgICBzZXRQaGFzZShcImVycm9yXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNFQ1VSSVRZOiBUb2tlbnMgYXJlIG5vdyBzdG9yZWQgc2VydmVyLXNpZGUgaW4gUmVkaXMgdmlhIE5leHRBdXRoXG4gICAgICAgIC8vIERPIE5PVCBzdG9yZSB0b2tlbnMgaW4gbG9jYWxTdG9yYWdlIC0gdGhpcyBpcyBhIHNlY3VyaXR5IHJpc2tcbiAgICAgICAgLy8gVGhpcyBjYWxsYmFjayBwYWdlIGhhbmRsZXMgbGVnYWN5IFBLQ0UgZmxvdywgYnV0IE5leHRBdXRoIGhhbmRsZXMgT0F1dGggY2FsbGJhY2tzIGF0IC9hcGkvYXV0aC9jYWxsYmFjay9rZXljbG9ha1xuICAgICAgICAvLyBJZiB3ZSByZWFjaCBoZXJlLCBpdCBtZWFucyB0aGUgdXNlciBjb21wbGV0ZWQgUEtDRSBmbG93IC0gcmVkaXJlY3QgdG8gTmV4dEF1dGggdG8gY29tcGxldGUgcHJvcGVybHlcbiAgICAgICAgXG4gICAgICAgIGNsZWFyUGtjZVN0YXRlKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBOb3RlOiBUaGlzIGNhbGxiYWNrIHBhZ2Ugc2hvdWxkIGlkZWFsbHkgbm90IGJlIHVzZWQgYW55bW9yZVxuICAgICAgICAvLyBOZXh0QXV0aCBoYW5kbGVzIE9BdXRoIGNhbGxiYWNrcyBhdCAvYXBpL2F1dGgvY2FsbGJhY2sva2V5Y2xvYWtcbiAgICAgICAgLy8gSWYgdXNlciByZWFjaGVzIGhlcmUsIHJlZGlyZWN0IHRvIE5leHRBdXRoIHNpZ24taW5cbiAgICAgICAgY29uc29sZS5sb2coJ1tBdXRoIENhbGxiYWNrXSBMZWdhY3kgUEtDRSBmbG93IC0gcmVkaXJlY3RpbmcgdG8gTmV4dEF1dGggZm9yIHByb3BlciB0b2tlbiBzdG9yYWdlJyk7XG4gICAgICAgIFxuICAgICAgICBzZXRQaGFzZShcInN1Y2Nlc3NcIik7XG4gICAgICAgIC8vIFJlZGlyZWN0IHRvIE5leHRBdXRoIHNpZ24taW4gd2hpY2ggd2lsbCBoYW5kbGUgdG9rZW4gc3RvcmFnZSBpbiBSZWRpc1xuICAgICAgICByb3V0ZXIucmVwbGFjZShcIi9hdXRoL2xvZ2luXCIpO1xuICAgICAgfSBjYXRjaCAoZTogYW55KSB7XG4gICAgICAgIGxldCBlcnJvck1lc3NhZ2UgPSBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIjtcbiAgICAgICAgXG4gICAgICAgIC8vIFRyeSB0byBwYXJzZSBKU09OIGVycm9yIHJlc3BvbnNlIGZyb20gS2V5Y2xvYWtcbiAgICAgICAgbGV0IGVycm9yRGF0YTogYW55ID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZiAoZS5tZXNzYWdlICYmIHR5cGVvZiBlLm1lc3NhZ2UgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBlcnJvckRhdGEgPSBKU09OLnBhcnNlKGUubWVzc2FnZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBOb3QgSlNPTiwgdXNlIHN0cmluZyBhcy1pc1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgc3BlY2lmaWMgS2V5Y2xvYWsgZXJyb3IgY29kZXNcbiAgICAgICAgaWYgKGVycm9yRGF0YT8uZXJyb3IgPT09ICdpbnZhbGlkX2dyYW50Jykge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IGVycm9yRGF0YS5lcnJvcl9kZXNjcmlwdGlvbiBcbiAgICAgICAgICAgID8gZGVjb2RlVVJJQ29tcG9uZW50KGVycm9yRGF0YS5lcnJvcl9kZXNjcmlwdGlvbilcbiAgICAgICAgICAgIDogXCJZb3VyIGF1dGhlbnRpY2F0aW9uIHNlc3Npb24gaGFzIGV4cGlyZWQuIFBsZWFzZSBzaWduIGluIGFnYWluLlwiO1xuICAgICAgICAgIC8vIENsZWFyIFBLQ0Ugc3RhdGUgYW5kIHJlZGlyZWN0IHRvIGxvZ2luXG4gICAgICAgICAgY2xlYXJQa2NlU3RhdGUoKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHJvdXRlci5yZXBsYWNlKCcvYXV0aC9sb2dpbicpO1xuICAgICAgICAgIH0sIDIwMDApO1xuICAgICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgc2V0UGhhc2UoXCJlcnJvclwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFByb3ZpZGUgbW9yZSBzcGVjaWZpYyBlcnJvciBtZXNzYWdlc1xuICAgICAgICBpZiAoZS5tZXNzYWdlPy5pbmNsdWRlcygnTmV0d29ya0Vycm9yJykgfHwgZS5tZXNzYWdlPy5pbmNsdWRlcygnRmFpbGVkIHRvIGZldGNoJykpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBcIk5ldHdvcmsgZXJyb3IuIFBsZWFzZSBjaGVjayB5b3VyIGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChlLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDEnKSkge1xuICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiQXV0aGVudGljYXRpb24gZmFpbGVkLiBQbGVhc2Ugc2lnbiBpbiBhZ2Fpbi5cIjtcbiAgICAgICAgfSBlbHNlIGlmIChlLm1lc3NhZ2U/LmluY2x1ZGVzKCc0MDAnKSkge1xuICAgICAgICAgIC8vIFBhcnNlIEpTT04gZXJyb3IgaWYgcG9zc2libGVcbiAgICAgICAgICBpZiAoZXJyb3JEYXRhPy5lcnJvcl9kZXNjcmlwdGlvbikge1xuICAgICAgICAgICAgZXJyb3JNZXNzYWdlID0gZGVjb2RlVVJJQ29tcG9uZW50KGVycm9yRGF0YS5lcnJvcl9kZXNjcmlwdGlvbik7XG4gICAgICAgICAgfSBlbHNlIGlmIChlcnJvckRhdGE/LmVycm9yID09PSAnaW52YWxpZF9ncmFudCcpIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBcImNvZGUgYWxyZWFkeSB1c2VkXCIgc2NlbmFyaW8gKGNvbW1vbiBpbiBSZWFjdCBTdHJpY3QgTW9kZSlcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiVGhlIGF1dGhvcml6YXRpb24gY29kZSBoYXMgYWxyZWFkeSBiZWVuIHVzZWQuIFRoaXMgbWF5IGhhcHBlbiBpZiB0aGUgcGFnZSByZWxvYWRlZC4gUGxlYXNlIHNpZ24gaW4gYWdhaW4uXCI7XG4gICAgICAgICAgICAvLyBDbGVhciBQS0NFIHN0YXRlIGFuZCByZWRpcmVjdCB0byBsb2dpblxuICAgICAgICAgICAgY2xlYXJQa2NlU3RhdGUoKTtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICByb3V0ZXIucmVwbGFjZSgnLycpO1xuICAgICAgICAgICAgfSwgMjAwMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZSA9IFwiSW52YWxpZCBhdXRoZW50aWNhdGlvbiByZXF1ZXN0LiBUaGUgYXV0aG9yaXphdGlvbiBjb2RlIG1heSBoYXZlIGV4cGlyZWQgb3IgYWxyZWFkeSBiZWVuIHVzZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGVycm9yRGF0YT8uZXJyb3JfZGVzY3JpcHRpb24pIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBkZWNvZGVVUklDb21wb25lbnQoZXJyb3JEYXRhLmVycm9yX2Rlc2NyaXB0aW9uKTtcbiAgICAgICAgfSBlbHNlIGlmIChlLm1lc3NhZ2UpIHtcbiAgICAgICAgICBlcnJvck1lc3NhZ2UgPSBlLm1lc3NhZ2U7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIERvbid0IGxvZyBleHBlY3RlZCBlcnJvcnMgKGxpa2UgaW52YWxpZF9ncmFudCBmcm9tIGV4cGlyZWQgY29kZXMpXG4gICAgICAgIGlmICghZXJyb3JEYXRhIHx8IGVycm9yRGF0YS5lcnJvciAhPT0gJ2ludmFsaWRfZ3JhbnQnKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignQXV0aGVudGljYXRpb24gZXJyb3I6JywgZSk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHNldEVycm9yKGVycm9yTWVzc2FnZSk7XG4gICAgICAgIHNldFBoYXNlKFwiZXJyb3JcIik7XG4gICAgICB9XG4gICAgfTtcbiAgICBydW4oKTtcbiAgfSwgW3JvdXRlcl0pO1xuXG4gIC8vIFVuaWZpZWQgZnVsbC1zY3JlZW4gbG9hZGVyIG92ZXJsYXkgZm9yIGFsbCBub24tZXJyb3Igc3RhdGVzXG4gIGlmIChwaGFzZSAhPT0gXCJlcnJvclwiKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIDxCb3ggbWluSD1cIjEwMHZoXCIgZGlzcGxheT1cImZsZXhcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIj5cbiAgICAgICAgPFZTdGFjayBnYXA9ezR9PlxuICAgICAgICAgIDxTcGlubmVyIC8+XG4gICAgICAgICAgPFRleHQ+Q29tcGxldGluZyBzaWduLWlu4oCmPC9UZXh0PlxuICAgICAgICA8L1ZTdGFjaz5cbiAgICAgIDwvQm94PlxuICAgICk7XG4gIH1cblxuICAvLyBFcnJvciBzdGF0ZVxuICByZXR1cm4gKFxuICAgIDxCb3ggbWluSD1cIjEwMHZoXCIgZGlzcGxheT1cImZsZXhcIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIganVzdGlmeUNvbnRlbnQ9XCJjZW50ZXJcIj5cbiAgICAgIDxWU3RhY2sgZ2FwPXs0fT5cbiAgICAgICAgPFRleHQgY29sb3I9XCJyZWQuNTAwXCIgZm9udFdlaWdodD1cImJvbGRcIj57ZXJyb3J9PC9UZXh0PlxuICAgICAgICA8QnV0dG9uIG9uQ2xpY2s9eygpID0+IHN0YXJ0QXV0aG9yaXphdGlvbihhdXRoQ29uZmlnKX0+QmFjayB0byBzaWduIGluPC9CdXR0b24+XG4gICAgICA8L1ZTdGFjaz5cbiAgICA8L0JveD5cbiAgKTtcbn1cblxuXG4iXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJ1c2VSZWYiLCJ1c2VSb3V0ZXIiLCJCb3giLCJTcGlubmVyIiwiVGV4dCIsIkJ1dHRvbiIsIlZTdGFjayIsImF1dGhDb25maWciLCJSRVFVSVJFRF9SRVNPVVJDRSIsIlJFUVVJUkVEX1JPTEUiLCJFTkZPUkNFX1JPTEUiLCJzdGFydEF1dGhvcml6YXRpb24iLCJnZXRDb2RlVmVyaWZpZXJBbmRTdGF0ZSIsImNsZWFyUGtjZVN0YXRlIiwiZXhjaGFuZ2VDb2RlRm9yVG9rZW5zIiwiY29kZSIsImNvZGVWZXJpZmllciIsImJvZHkiLCJVUkxTZWFyY2hQYXJhbXMiLCJncmFudF90eXBlIiwiY2xpZW50X2lkIiwiY2xpZW50SWQiLCJyZWRpcmVjdF91cmkiLCJyZWRpcmVjdFVyaSIsImNvZGVfdmVyaWZpZXIiLCJyZXMiLCJmZXRjaCIsInRva2VuVXJsIiwibWV0aG9kIiwiaGVhZGVycyIsInRvU3RyaW5nIiwib2siLCJ0ZXh0IiwiRXJyb3IiLCJzdGF0dXMiLCJqc29uIiwiaGFzUmVxdWlyZWRSb2xlIiwiYWNjZXNzVG9rZW5QYXlsb2FkIiwicmEiLCJyZXNvdXJjZV9hY2Nlc3MiLCJwcmVmZXJyZWRSb2xlcyIsInJvbGVzIiwiQXJyYXkiLCJpc0FycmF5IiwiaW5jbHVkZXMiLCJhbnlDbGllbnRIYXMiLCJPYmplY3QiLCJ2YWx1ZXMiLCJzb21lIiwidiIsInJlYWxtUm9sZXMiLCJyZWFsbV9hY2Nlc3MiLCJkZWNvZGVKd3QiLCJ0b2tlbiIsInBheWxvYWQiLCJzcGxpdCIsImF0b2IiLCJyZXBsYWNlIiwiSlNPTiIsInBhcnNlIiwiQXV0aENhbGxiYWNrUGFnZSIsInJvdXRlciIsImVycm9yIiwic2V0RXJyb3IiLCJwaGFzZSIsInNldFBoYXNlIiwiaGFzUnVuUmVmIiwiY3VycmVudCIsInJ1biIsInVybCIsIlVSTCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImVycm9yUGFyYW0iLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJlcnJvckRlc2NyaXB0aW9uIiwiZXJyb3JNZXNzYWdlIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiZXJyb3JNZXNzYWdlcyIsInJldHVybmVkU3RhdGUiLCJzdGF0ZSIsInRva2VucyIsImxhc3RFcnJvciIsIm1heFJldHJpZXMiLCJhdHRlbXB0IiwiZSIsIm1lc3NhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJhY2Nlc3MiLCJhY2Nlc3NfdG9rZW4iLCJyZWZyZXNoIiwicmVmcmVzaF90b2tlbiIsInRva2VuUGFydHMiLCJsZW5ndGgiLCJjb25zb2xlIiwibG9nIiwiZXJyb3JEYXRhIiwiZXJyb3JfZGVzY3JpcHRpb24iLCJtaW5IIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsImdhcCIsImNvbG9yIiwiZm9udFdlaWdodCIsIm9uQ2xpY2siXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/auth/callback/page.tsx\n"));

/***/ })

});