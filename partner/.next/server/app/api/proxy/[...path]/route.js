"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/proxy/[...path]/route";
exports.ids = ["app/api/proxy/[...path]/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "dns/promises":
/*!*******************************!*\
  !*** external "dns/promises" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("dns/promises");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "node:assert":
/*!******************************!*\
  !*** external "node:assert" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:assert");

/***/ }),

/***/ "node:crypto":
/*!******************************!*\
  !*** external "node:crypto" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:crypto");

/***/ }),

/***/ "node:diagnostics_channel":
/*!*******************************************!*\
  !*** external "node:diagnostics_channel" ***!
  \*******************************************/
/***/ ((module) => {

module.exports = require("node:diagnostics_channel");

/***/ }),

/***/ "node:events":
/*!******************************!*\
  !*** external "node:events" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:events");

/***/ }),

/***/ "node:net":
/*!***************************!*\
  !*** external "node:net" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:net");

/***/ }),

/***/ "node:timers/promises":
/*!***************************************!*\
  !*** external "node:timers/promises" ***!
  \***************************************/
/***/ ((module) => {

module.exports = require("node:timers/promises");

/***/ }),

/***/ "node:tls":
/*!***************************!*\
  !*** external "node:tls" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:tls");

/***/ }),

/***/ "node:url":
/*!***************************!*\
  !*** external "node:url" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("node:url");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&page=%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproxy%2F%5B...path%5D%2Froute.ts&appDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&page=%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproxy%2F%5B...path%5D%2Froute.ts&appDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_mukurusystemsadministrator_Desktop_onboarding_kyc_copy_partner_src_app_api_proxy_path_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/proxy/[...path]/route.ts */ \"(rsc)/./src/app/api/proxy/[...path]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"standalone\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/proxy/[...path]/route\",\n        pathname: \"/api/proxy/[...path]\",\n        filename: \"route\",\n        bundlePath: \"app/api/proxy/[...path]/route\"\n    },\n    resolvedPagePath: \"/Users/mukurusystemsadministrator/Desktop/onboarding_kyc copy/partner/src/app/api/proxy/[...path]/route.ts\",\n    nextConfigOutput,\n    userland: _Users_mukurusystemsadministrator_Desktop_onboarding_kyc_copy_partner_src_app_api_proxy_path_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/proxy/[...path]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm94eSUyRiU1Qi4uLnBhdGglNUQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnByb3h5JTJGJTVCLi4ucGF0aCU1RCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnByb3h5JTJGJTVCLi4ucGF0aCU1RCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRm11a3VydXN5c3RlbXNhZG1pbmlzdHJhdG9yJTJGRGVza3RvcCUyRm9uYm9hcmRpbmdfa3ljJTIwY29weSUyRnBhcnRuZXIlMkZzcmMlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGbXVrdXJ1c3lzdGVtc2FkbWluaXN0cmF0b3IlMkZEZXNrdG9wJTJGb25ib2FyZGluZ19reWMlMjBjb3B5JTJGcGFydG5lciZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD1zdGFuZGFsb25lJnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzBEO0FBQ3ZJO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXVrdXJ1LWFwcC8/MDNjNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvbXVrdXJ1c3lzdGVtc2FkbWluaXN0cmF0b3IvRGVza3RvcC9vbmJvYXJkaW5nX2t5YyBjb3B5L3BhcnRuZXIvc3JjL2FwcC9hcGkvcHJveHkvWy4uLnBhdGhdL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcInN0YW5kYWxvbmVcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJveHkvWy4uLnBhdGhdL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJveHkvWy4uLnBhdGhdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm94eS9bLi4ucGF0aF0vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvbXVrdXJ1c3lzdGVtc2FkbWluaXN0cmF0b3IvRGVza3RvcC9vbmJvYXJkaW5nX2t5YyBjb3B5L3BhcnRuZXIvc3JjL2FwcC9hcGkvcHJveHkvWy4uLnBhdGhdL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcm94eS9bLi4ucGF0aF0vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&page=%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproxy%2F%5B...path%5D%2Froute.ts&appDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/proxy/[...path]/route.ts":
/*!**********************************************!*\
  !*** ./src/app/api/proxy/[...path]/route.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   OPTIONS: () => (/* binding */ OPTIONS),\n/* harmony export */   PATCH: () => (/* binding */ PATCH),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/jwt */ \"(rsc)/./node_modules/next-auth/jwt/index.js\");\n/* harmony import */ var next_auth_jwt__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_redis_session__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/redis-session */ \"(rsc)/./src/lib/redis-session.ts\");\n\n\n\nconst DEFAULT_TARGET = process.env.PROXY_TARGET || \"http://localhost:8090\";\nconst MESSAGING_TARGET = process.env.PROXY_TARGET_MESSAGING || process.env.MESSAGING_TARGET || \"http://localhost:8087\";\nconst PROJECTIONS_TARGET = process.env.PROXY_TARGET_PROJECTIONS || process.env.PROJECTIONS_TARGET || \"http://localhost:8007\";\nconst ONBOARDING_TARGET = process.env.PROXY_TARGET_ONBOARDING || process.env.ONBOARDING_TARGET || \"http://localhost:8001\";\nconst DOCUMENT_TARGET = process.env.PROXY_TARGET_DOCUMENT || process.env.DOCUMENT_TARGET || \"http://localhost:8008\";\nconst AUTH_TARGET = process.env.PROXY_TARGET_AUTH || process.env.AUTH_TARGET || \"http://localhost:8090\";\nfunction resolveUpstream(pathname, search) {\n    // Supports service-specific proxying by prefixing the path after /api/proxy\n    // Examples:\n    //  - /api/proxy/messaging/api/v1/messages -> PROXY_TARGET_MESSAGING\n    //  - /api/proxy/projections/api/v1/* -> PROXY_TARGET_PROJECTIONS\n    //  - /api/proxy/... -> DEFAULT_TARGET\n    const afterProxy = pathname.split(\"/api/proxy\")[1] || \"\";\n    if (afterProxy.startsWith(\"/messaging\")) {\n        const trimmed = afterProxy.replace(\"/messaging\", \"\");\n        return `${MESSAGING_TARGET}${trimmed}${search}`;\n    }\n    if (afterProxy.startsWith(\"/projections/v1\")) {\n        const trimmed = afterProxy.replace(\"/projections/v1\", \"\");\n        return `${PROJECTIONS_TARGET}${trimmed}${search}`;\n    }\n    if (afterProxy.startsWith(\"/projections\")) {\n        const trimmed = afterProxy.replace(\"/projections\", \"\");\n        return `${PROJECTIONS_TARGET}${trimmed}${search}`;\n    }\n    // Route /api/users/* to authentication service\n    if (afterProxy.startsWith(\"/api/users\")) {\n        return `${AUTH_TARGET}${afterProxy}${search}`;\n    }\n    // Route /api/v1/cases/* to onboarding API\n    if (afterProxy.startsWith(\"/api/v1/cases\")) {\n        return `${ONBOARDING_TARGET}${afterProxy}${search}`;\n    }\n    // Route /api/v1/documents/* to document service\n    if (afterProxy.startsWith(\"/api/v1/documents\")) {\n        return `${DOCUMENT_TARGET}${afterProxy}${search}`;\n    }\n    // Route /api/v1/sync to projections API (for syncing cases)\n    if (afterProxy.startsWith(\"/api/v1/sync\")) {\n        return `${PROJECTIONS_TARGET}${afterProxy}${search}`;\n    }\n    // Route /api/v1/risk-assessments to risk service\n    if (afterProxy.startsWith(\"/api/v1/risk-assessments\") || afterProxy.startsWith(\"/risk-assessments\")) {\n        const riskPath = afterProxy.replace(\"/api/v1\", \"\");\n        return `${RISK_TARGET}/api/v1${riskPath}${search}`;\n    }\n    // Route /api/v1/entitytypes, /api/v1/requirements, /api/v1/wizardconfigurations to entity config service\n    if (afterProxy.startsWith(\"/api/v1/entitytypes\") || afterProxy.startsWith(\"/api/v1/requirements\") || afterProxy.startsWith(\"/api/v1/wizardconfigurations\")) {\n        return `${ENTITY_CONFIG_TARGET}${afterProxy}${search}`;\n    }\n    // Route /projections/v1 to projections API\n    if (afterProxy.startsWith(\"/projections/v1\")) {\n        const trimmed = afterProxy.replace(\"/projections/v1\", \"/api/v1\");\n        return `${PROJECTIONS_TARGET}${trimmed}${search}`;\n    }\n    return `${DEFAULT_TARGET}${afterProxy}${search}`;\n}\nasync function forward(req) {\n    const url = resolveUpstream(req.nextUrl.pathname, req.nextUrl.search);\n    // Debug logging for document uploads\n    if (req.nextUrl.pathname.includes(\"/documents/upload\")) {\n        console.log(`[Proxy] Document upload request - routing to: ${url}`);\n    }\n    const headers = {};\n    // Get NextAuth session token from httpOnly cookie (BFF pattern)\n    // sessionId is stored in JWT cookie, never exposed to client-side JS\n    let accessToken = null;\n    try {\n        const token = await (0,next_auth_jwt__WEBPACK_IMPORTED_MODULE_1__.getToken)({\n            req,\n            secret: process.env.NEXTAUTH_SECRET\n        });\n        if (token?.sessionId) {\n            // Fetch tokens from Redis using sessionId from httpOnly JWT cookie\n            const tokenSession = await (0,_lib_redis_session__WEBPACK_IMPORTED_MODULE_2__.getTokenSession)(token.sessionId);\n            if (tokenSession) {\n                // Check if token needs refresh (within 60 seconds of expiry)\n                const needsRefresh = !tokenSession.accessTokenExpiryTime || Date.now() >= tokenSession.accessTokenExpiryTime - 60 * 1000;\n                if (needsRefresh && tokenSession.refreshToken) {\n                    // Token expired or expiring soon - refresh it automatically\n                    try {\n                        const tokenUrl = process.env.KEYCLOAK_TOKEN_URL || \"https://keycloak-staging.app-stg.mukuru.io/realms/mukuru/protocol/openid-connect/token\";\n                        const refreshResponse = await fetch(tokenUrl, {\n                            method: \"POST\",\n                            headers: {\n                                \"Content-Type\": \"application/x-www-form-urlencoded\"\n                            },\n                            body: new URLSearchParams({\n                                client_id: process.env.KEYCLOAK_CLIENT_ID || \"kyb-connect-portal\",\n                                grant_type: \"refresh_token\",\n                                refresh_token: tokenSession.refreshToken,\n                                client_secret: process.env.KEYCLOAK_CLIENT_SECRET || \"\"\n                            })\n                        });\n                        if (refreshResponse.ok) {\n                            const refreshedTokens = await refreshResponse.json();\n                            const newAccessToken = refreshedTokens.access_token;\n                            const newRefreshToken = refreshedTokens.refresh_token ?? tokenSession.refreshToken;\n                            const newExpiryTime = Date.now() + refreshedTokens.expires_in * 1000;\n                            // Update Redis with new tokens\n                            await (0,_lib_redis_session__WEBPACK_IMPORTED_MODULE_2__.storeTokenSession)(token.sessionId, {\n                                ...tokenSession,\n                                accessToken: newAccessToken,\n                                refreshToken: newRefreshToken,\n                                accessTokenExpiryTime: newExpiryTime\n                            });\n                            accessToken = newAccessToken;\n                        } else {\n                            // Refresh failed - use existing token and let backend handle 401\n                            accessToken = tokenSession.accessToken;\n                        }\n                    } catch (refreshError) {\n                        // Refresh failed - use existing token\n                        console.warn(\"[Proxy] Token refresh failed:\", refreshError);\n                        accessToken = tokenSession.accessToken;\n                    }\n                } else {\n                    // Token still valid\n                    accessToken = tokenSession.accessToken;\n                }\n            }\n        }\n    } catch (error) {\n        console.warn(\"Failed to get token from session:\", error);\n    // Continue without token - backend will return 401 if auth required\n    }\n    // Inject Authorization header from Redis-stored token (do NOT forward from client)\n    if (accessToken) {\n        headers[\"authorization\"] = `Bearer ${accessToken}`;\n        headers[\"Authorization\"] = `Bearer ${accessToken}`;\n    }\n    const contentType = req.headers.get(\"content-type\") || req.headers.get(\"Content-Type\");\n    if (contentType) {\n        headers[\"content-type\"] = contentType;\n        headers[\"Content-Type\"] = contentType;\n    } else {\n        // Only set default JSON content-type if not multipart/form-data\n        if (!contentType?.includes(\"multipart/form-data\")) {\n            headers[\"content-type\"] = \"application/json\";\n            headers[\"Content-Type\"] = \"application/json\";\n        }\n    }\n    // Forward user identification headers to backend services\n    const userHeaders = [\n        \"X-User-Id\",\n        \"X-User-Email\",\n        \"X-User-Name\",\n        \"X-User-Role\"\n    ];\n    for (const headerName of userHeaders){\n        const value = req.headers.get(headerName) || req.headers.get(headerName.toLowerCase());\n        if (value) {\n            headers[headerName] = value;\n            headers[headerName.toLowerCase()] = value; // Also set lowercase for compatibility\n        }\n    }\n    // Forward schema-driven form headers (CRITICAL for dynamic validation)\n    const schemaHeaders = [\n        \"X-Entity-Type\",\n        \"X-Form-Config-Id\",\n        \"X-Form-Version\"\n    ];\n    for (const headerName of schemaHeaders){\n        const value = req.headers.get(headerName) || req.headers.get(headerName.toLowerCase());\n        if (value) {\n            headers[headerName] = value;\n            headers[headerName.toLowerCase()] = value; // Also set lowercase for compatibility\n            console.log(`[Proxy] Forwarding ${headerName}: ${value}`);\n        }\n    }\n    // Add additional headers for better debugging\n    headers[\"user-agent\"] = \"NextJS-Proxy/1.0\";\n    // Handle request body\n    let body;\n    if ([\n        \"GET\",\n        \"HEAD\"\n    ].includes(req.method)) {\n        body = undefined;\n    } else if (contentType?.includes(\"multipart/form-data\")) {\n        // For file uploads, parse FormData and reconstruct it\n        // This preserves the multipart structure that the backend expects\n        const formData = await req.formData();\n        body = formData;\n        // Remove Content-Type header - fetch will set it with the correct boundary\n        delete headers[\"content-type\"];\n        delete headers[\"Content-Type\"];\n    } else {\n        // For JSON and other text-based content, read as text\n        body = await req.text();\n    }\n    const init = {\n        method: req.method,\n        headers,\n        body,\n        redirect: \"manual\"\n    };\n    try {\n        const res = await fetch(url, init);\n        const body = await res.arrayBuffer();\n        const respHeaders = new Headers();\n        res.headers.forEach((v, k)=>respHeaders.set(k, v));\n        // ensure CORS for browser even though this is same-origin\n        respHeaders.set(\"Access-Control-Allow-Origin\", \"*\");\n        respHeaders.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS, PATCH\");\n        respHeaders.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization, X-User-Id, X-User-Email, X-User-Name, X-User-Role, X-Entity-Type, X-Form-Config-Id, X-Form-Version, X-Request-Id\");\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(body, {\n            status: res.status,\n            headers: respHeaders\n        });\n    } catch (error) {\n        console.error(\"[Proxy] Error:\", error, \"URL:\", url);\n        const errorMessage = error instanceof Error ? error.message : \"Unknown error\";\n        // If it's a connection error, provide more helpful message\n        if (errorMessage.includes(\"ECONNREFUSED\") || errorMessage.includes(\"fetch failed\") || errorMessage.includes(\"ECONNREFUSED\")) {\n            console.error(`[Proxy] Connection failed to ${url} - service may not be running`);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n                error: \"Backend service unavailable\",\n                details: `Cannot connect to ${url}. Please ensure the backend service is running.`,\n                originalError: errorMessage\n            }), {\n                status: 503,\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            });\n        }\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(JSON.stringify({\n            error: \"Proxy request failed\",\n            details: errorMessage\n        }), {\n            status: 502,\n            headers: {\n                \"Content-Type\": \"application/json\"\n            }\n        });\n    }\n}\nconst GET = forward;\nconst POST = forward;\nconst PUT = forward;\nconst PATCH = forward;\nconst DELETE = forward;\nconst OPTIONS = forward;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9wcm94eS9bLi4ucGF0aF0vcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUF3RDtBQUNmO0FBQ2dDO0FBRXpFLE1BQU1JLGlCQUFpQkMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZLElBQUk7QUFDbkQsTUFBTUMsbUJBQW1CSCxRQUFRQyxHQUFHLENBQUNHLHNCQUFzQixJQUFJSixRQUFRQyxHQUFHLENBQUNFLGdCQUFnQixJQUFJO0FBQy9GLE1BQU1FLHFCQUFxQkwsUUFBUUMsR0FBRyxDQUFDSyx3QkFBd0IsSUFBSU4sUUFBUUMsR0FBRyxDQUFDSSxrQkFBa0IsSUFBSTtBQUNyRyxNQUFNRSxvQkFBb0JQLFFBQVFDLEdBQUcsQ0FBQ08sdUJBQXVCLElBQUlSLFFBQVFDLEdBQUcsQ0FBQ00saUJBQWlCLElBQUk7QUFDbEcsTUFBTUUsa0JBQWtCVCxRQUFRQyxHQUFHLENBQUNTLHFCQUFxQixJQUFJVixRQUFRQyxHQUFHLENBQUNRLGVBQWUsSUFBSTtBQUM1RixNQUFNRSxjQUFjWCxRQUFRQyxHQUFHLENBQUNXLGlCQUFpQixJQUFJWixRQUFRQyxHQUFHLENBQUNVLFdBQVcsSUFBSTtBQUVoRixTQUFTRSxnQkFBZ0JDLFFBQWdCLEVBQUVDLE1BQWM7SUFDdkQsNEVBQTRFO0lBQzVFLFlBQVk7SUFDWixvRUFBb0U7SUFDcEUsaUVBQWlFO0lBQ2pFLHNDQUFzQztJQUN0QyxNQUFNQyxhQUFhRixTQUFTRyxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUUsSUFBSTtJQUV0RCxJQUFJRCxXQUFXRSxVQUFVLENBQUMsZUFBZTtRQUN2QyxNQUFNQyxVQUFVSCxXQUFXSSxPQUFPLENBQUMsY0FBYztRQUNqRCxPQUFPLENBQUMsRUFBRWpCLGlCQUFpQixFQUFFZ0IsUUFBUSxFQUFFSixPQUFPLENBQUM7SUFDakQ7SUFFQSxJQUFJQyxXQUFXRSxVQUFVLENBQUMsb0JBQW9CO1FBQzVDLE1BQU1DLFVBQVVILFdBQVdJLE9BQU8sQ0FB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LFFBQVE7QUFDdEIsTUFBTTJFLFNBQVMzRSxRQUFRO0FBQ3ZCLE1BQU00RSxVQUFVNUUsUUFBUSIsInNvdXJjZXMiOlsid2VicGFjazovL211a3VydS1hcHAvLi9zcmMvYXBwL2FwaS9wcm94eS9bLi4ucGF0aF0vcm91dGUudHM/YjRlMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICduZXh0LWF1dGgvand0JztcbmltcG9ydCB7IGdldFRva2VuU2Vzc2lvbiwgc3RvcmVUb2tlblNlc3Npb24gfSBmcm9tICdAL2xpYi9yZWRpcy1zZXNzaW9uJztcblxuY29uc3QgREVGQVVMVF9UQVJHRVQgPSBwcm9jZXNzLmVudi5QUk9YWV9UQVJHRVQgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA5MCc7XG5jb25zdCBNRVNTQUdJTkdfVEFSR0VUID0gcHJvY2Vzcy5lbnYuUFJPWFlfVEFSR0VUX01FU1NBR0lORyB8fCBwcm9jZXNzLmVudi5NRVNTQUdJTkdfVEFSR0VUIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwODcnO1xuY29uc3QgUFJPSkVDVElPTlNfVEFSR0VUID0gcHJvY2Vzcy5lbnYuUFJPWFlfVEFSR0VUX1BST0pFQ1RJT05TIHx8IHByb2Nlc3MuZW52LlBST0pFQ1RJT05TX1RBUkdFVCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDA3JztcbmNvbnN0IE9OQk9BUkRJTkdfVEFSR0VUID0gcHJvY2Vzcy5lbnYuUFJPWFlfVEFSR0VUX09OQk9BUkRJTkcgfHwgcHJvY2Vzcy5lbnYuT05CT0FSRElOR19UQVJHRVQgfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMSc7XG5jb25zdCBET0NVTUVOVF9UQVJHRVQgPSBwcm9jZXNzLmVudi5QUk9YWV9UQVJHRVRfRE9DVU1FTlQgfHwgcHJvY2Vzcy5lbnYuRE9DVU1FTlRfVEFSR0VUIHx8ICdodHRwOi8vbG9jYWxob3N0OjgwMDgnO1xuY29uc3QgQVVUSF9UQVJHRVQgPSBwcm9jZXNzLmVudi5QUk9YWV9UQVJHRVRfQVVUSCB8fCBwcm9jZXNzLmVudi5BVVRIX1RBUkdFVCB8fCAnaHR0cDovL2xvY2FsaG9zdDo4MDkwJztcblxuZnVuY3Rpb24gcmVzb2x2ZVVwc3RyZWFtKHBhdGhuYW1lOiBzdHJpbmcsIHNlYXJjaDogc3RyaW5nKSB7XG4gIC8vIFN1cHBvcnRzIHNlcnZpY2Utc3BlY2lmaWMgcHJveHlpbmcgYnkgcHJlZml4aW5nIHRoZSBwYXRoIGFmdGVyIC9hcGkvcHJveHlcbiAgLy8gRXhhbXBsZXM6XG4gIC8vICAtIC9hcGkvcHJveHkvbWVzc2FnaW5nL2FwaS92MS9tZXNzYWdlcyAtPiBQUk9YWV9UQVJHRVRfTUVTU0FHSU5HXG4gIC8vICAtIC9hcGkvcHJveHkvcHJvamVjdGlvbnMvYXBpL3YxLyogLT4gUFJPWFlfVEFSR0VUX1BST0pFQ1RJT05TXG4gIC8vICAtIC9hcGkvcHJveHkvLi4uIC0+IERFRkFVTFRfVEFSR0VUXG4gIGNvbnN0IGFmdGVyUHJveHkgPSBwYXRobmFtZS5zcGxpdCgnL2FwaS9wcm94eScpWzFdIHx8ICcnO1xuXG4gIGlmIChhZnRlclByb3h5LnN0YXJ0c1dpdGgoJy9tZXNzYWdpbmcnKSkge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBhZnRlclByb3h5LnJlcGxhY2UoJy9tZXNzYWdpbmcnLCAnJyk7XG4gICAgcmV0dXJuIGAke01FU1NBR0lOR19UQVJHRVR9JHt0cmltbWVkfSR7c2VhcmNofWA7XG4gIH1cblxuICBpZiAoYWZ0ZXJQcm94eS5zdGFydHNXaXRoKCcvcHJvamVjdGlvbnMvdjEnKSkge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBhZnRlclByb3h5LnJlcGxhY2UoJy9wcm9qZWN0aW9ucy92MScsICcnKTtcbiAgICByZXR1cm4gYCR7UFJPSkVDVElPTlNfVEFSR0VUfSR7dHJpbW1lZH0ke3NlYXJjaH1gO1xuICB9XG4gIFxuICBpZiAoYWZ0ZXJQcm94eS5zdGFydHNXaXRoKCcvcHJvamVjdGlvbnMnKSkge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBhZnRlclByb3h5LnJlcGxhY2UoJy9wcm9qZWN0aW9ucycsICcnKTtcbiAgICByZXR1cm4gYCR7UFJPSkVDVElPTlNfVEFSR0VUfSR7dHJpbW1lZH0ke3NlYXJjaH1gO1xuICB9XG5cbiAgLy8gUm91dGUgL2FwaS91c2Vycy8qIHRvIGF1dGhlbnRpY2F0aW9uIHNlcnZpY2VcbiAgaWYgKGFmdGVyUHJveHkuc3RhcnRzV2l0aCgnL2FwaS91c2VycycpKSB7XG4gICAgcmV0dXJuIGAke0FVVEhfVEFSR0VUfSR7YWZ0ZXJQcm94eX0ke3NlYXJjaH1gO1xuICB9XG5cbiAgLy8gUm91dGUgL2FwaS92MS9jYXNlcy8qIHRvIG9uYm9hcmRpbmcgQVBJXG4gIGlmIChhZnRlclByb3h5LnN0YXJ0c1dpdGgoJy9hcGkvdjEvY2FzZXMnKSkge1xuICAgIHJldHVybiBgJHtPTkJPQVJESU5HX1RBUkdFVH0ke2FmdGVyUHJveHl9JHtzZWFyY2h9YDtcbiAgfVxuXG4gIC8vIFJvdXRlIC9hcGkvdjEvZG9jdW1lbnRzLyogdG8gZG9jdW1lbnQgc2VydmljZVxuICBpZiAoYWZ0ZXJQcm94eS5zdGFydHNXaXRoKCcvYXBpL3YxL2RvY3VtZW50cycpKSB7XG4gICAgcmV0dXJuIGAke0RPQ1VNRU5UX1RBUkdFVH0ke2FmdGVyUHJveHl9JHtzZWFyY2h9YDtcbiAgfVxuXG4gIC8vIFJvdXRlIC9hcGkvdjEvc3luYyB0byBwcm9qZWN0aW9ucyBBUEkgKGZvciBzeW5jaW5nIGNhc2VzKVxuICBpZiAoYWZ0ZXJQcm94eS5zdGFydHNXaXRoKCcvYXBpL3YxL3N5bmMnKSkge1xuICAgIHJldHVybiBgJHtQUk9KRUNUSU9OU19UQVJHRVR9JHthZnRlclByb3h5fSR7c2VhcmNofWA7XG4gIH1cblxuICAvLyBSb3V0ZSAvYXBpL3YxL3Jpc2stYXNzZXNzbWVudHMgdG8gcmlzayBzZXJ2aWNlXG4gIGlmIChhZnRlclByb3h5LnN0YXJ0c1dpdGgoJy9hcGkvdjEvcmlzay1hc3Nlc3NtZW50cycpIHx8IGFmdGVyUHJveHkuc3RhcnRzV2l0aCgnL3Jpc2stYXNzZXNzbWVudHMnKSkge1xuICAgIGNvbnN0IHJpc2tQYXRoID0gYWZ0ZXJQcm94eS5yZXBsYWNlKCcvYXBpL3YxJywgJycpO1xuICAgIHJldHVybiBgJHtSSVNLX1RBUkdFVH0vYXBpL3YxJHtyaXNrUGF0aH0ke3NlYXJjaH1gO1xuICB9XG5cbiAgLy8gUm91dGUgL2FwaS92MS9lbnRpdHl0eXBlcywgL2FwaS92MS9yZXF1aXJlbWVudHMsIC9hcGkvdjEvd2l6YXJkY29uZmlndXJhdGlvbnMgdG8gZW50aXR5IGNvbmZpZyBzZXJ2aWNlXG4gIGlmIChhZnRlclByb3h5LnN0YXJ0c1dpdGgoJy9hcGkvdjEvZW50aXR5dHlwZXMnKSB8fCBcbiAgICAgIGFmdGVyUHJveHkuc3RhcnRzV2l0aCgnL2FwaS92MS9yZXF1aXJlbWVudHMnKSB8fCBcbiAgICAgIGFmdGVyUHJveHkuc3RhcnRzV2l0aCgnL2FwaS92MS93aXphcmRjb25maWd1cmF0aW9ucycpKSB7XG4gICAgcmV0dXJuIGAke0VOVElUWV9DT05GSUdfVEFSR0VUfSR7YWZ0ZXJQcm94eX0ke3NlYXJjaH1gO1xuICB9XG5cbiAgLy8gUm91dGUgL3Byb2plY3Rpb25zL3YxIHRvIHByb2plY3Rpb25zIEFQSVxuICBpZiAoYWZ0ZXJQcm94eS5zdGFydHNXaXRoKCcvcHJvamVjdGlvbnMvdjEnKSkge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBhZnRlclByb3h5LnJlcGxhY2UoJy9wcm9qZWN0aW9ucy92MScsICcvYXBpL3YxJyk7XG4gICAgcmV0dXJuIGAke1BST0pFQ1RJT05TX1RBUkdFVH0ke3RyaW1tZWR9JHtzZWFyY2h9YDtcbiAgfVxuXG4gIHJldHVybiBgJHtERUZBVUxUX1RBUkdFVH0ke2FmdGVyUHJveHl9JHtzZWFyY2h9YDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZm9yd2FyZChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IHVybCA9IHJlc29sdmVVcHN0cmVhbShyZXEubmV4dFVybC5wYXRobmFtZSwgcmVxLm5leHRVcmwuc2VhcmNoKTtcbiAgXG4gIC8vIERlYnVnIGxvZ2dpbmcgZm9yIGRvY3VtZW50IHVwbG9hZHNcbiAgaWYgKHJlcS5uZXh0VXJsLnBhdGhuYW1lLmluY2x1ZGVzKCcvZG9jdW1lbnRzL3VwbG9hZCcpKSB7XG4gICAgY29uc29sZS5sb2coYFtQcm94eV0gRG9jdW1lbnQgdXBsb2FkIHJlcXVlc3QgLSByb3V0aW5nIHRvOiAke3VybH1gKTtcbiAgfVxuXG4gIGNvbnN0IGhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgXG4gIC8vIEdldCBOZXh0QXV0aCBzZXNzaW9uIHRva2VuIGZyb20gaHR0cE9ubHkgY29va2llIChCRkYgcGF0dGVybilcbiAgLy8gc2Vzc2lvbklkIGlzIHN0b3JlZCBpbiBKV1QgY29va2llLCBuZXZlciBleHBvc2VkIHRvIGNsaWVudC1zaWRlIEpTXG4gIGxldCBhY2Nlc3NUb2tlbjogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHRyeSB7XG4gICAgY29uc3QgdG9rZW4gPSBhd2FpdCBnZXRUb2tlbih7IHJlcSwgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQgfSk7XG4gICAgaWYgKHRva2VuPy5zZXNzaW9uSWQpIHtcbiAgICAgIC8vIEZldGNoIHRva2VucyBmcm9tIFJlZGlzIHVzaW5nIHNlc3Npb25JZCBmcm9tIGh0dHBPbmx5IEpXVCBjb29raWVcbiAgICAgIGNvbnN0IHRva2VuU2Vzc2lvbiA9IGF3YWl0IGdldFRva2VuU2Vzc2lvbih0b2tlbi5zZXNzaW9uSWQgYXMgc3RyaW5nKTtcbiAgICAgIGlmICh0b2tlblNlc3Npb24pIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdG9rZW4gbmVlZHMgcmVmcmVzaCAod2l0aGluIDYwIHNlY29uZHMgb2YgZXhwaXJ5KVxuICAgICAgICBjb25zdCBuZWVkc1JlZnJlc2ggPSAhdG9rZW5TZXNzaW9uLmFjY2Vzc1Rva2VuRXhwaXJ5VGltZSB8fCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBEYXRlLm5vdygpID49IHRva2VuU2Vzc2lvbi5hY2Nlc3NUb2tlbkV4cGlyeVRpbWUgLSA2MCAqIDEwMDA7XG4gICAgICAgIFxuICAgICAgICBpZiAobmVlZHNSZWZyZXNoICYmIHRva2VuU2Vzc2lvbi5yZWZyZXNoVG9rZW4pIHtcbiAgICAgICAgICAvLyBUb2tlbiBleHBpcmVkIG9yIGV4cGlyaW5nIHNvb24gLSByZWZyZXNoIGl0IGF1dG9tYXRpY2FsbHlcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5VcmwgPSBwcm9jZXNzLmVudi5LRVlDTE9BS19UT0tFTl9VUkwgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnaHR0cHM6Ly9rZXljbG9hay1zdGFnaW5nLmFwcC1zdGcubXVrdXJ1LmlvL3JlYWxtcy9tdWt1cnUvcHJvdG9jb2wvb3BlbmlkLWNvbm5lY3QvdG9rZW4nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZWZyZXNoUmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0b2tlblVybCwge1xuICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgYm9keTogbmV3IFVSTFNlYXJjaFBhcmFtcyh7XG4gICAgICAgICAgICAgICAgY2xpZW50X2lkOiBwcm9jZXNzLmVudi5LRVlDTE9BS19DTElFTlRfSUQgfHwgJ2t5Yi1jb25uZWN0LXBvcnRhbCcsXG4gICAgICAgICAgICAgICAgZ3JhbnRfdHlwZTogJ3JlZnJlc2hfdG9rZW4nLFxuICAgICAgICAgICAgICAgIHJlZnJlc2hfdG9rZW46IHRva2VuU2Vzc2lvbi5yZWZyZXNoVG9rZW4sXG4gICAgICAgICAgICAgICAgY2xpZW50X3NlY3JldDogcHJvY2Vzcy5lbnYuS0VZQ0xPQUtfQ0xJRU5UX1NFQ1JFVCB8fCAnJyxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlZnJlc2hSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICBjb25zdCByZWZyZXNoZWRUb2tlbnMgPSBhd2FpdCByZWZyZXNoUmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgICBjb25zdCBuZXdBY2Nlc3NUb2tlbiA9IHJlZnJlc2hlZFRva2Vucy5hY2Nlc3NfdG9rZW47XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1JlZnJlc2hUb2tlbiA9IHJlZnJlc2hlZFRva2Vucy5yZWZyZXNoX3Rva2VuID8/IHRva2VuU2Vzc2lvbi5yZWZyZXNoVG9rZW47XG4gICAgICAgICAgICAgIGNvbnN0IG5ld0V4cGlyeVRpbWUgPSBEYXRlLm5vdygpICsgKHJlZnJlc2hlZFRva2Vucy5leHBpcmVzX2luICogMTAwMCk7XG5cbiAgICAgICAgICAgICAgLy8gVXBkYXRlIFJlZGlzIHdpdGggbmV3IHRva2Vuc1xuICAgICAgICAgICAgICBhd2FpdCBzdG9yZVRva2VuU2Vzc2lvbih0b2tlbi5zZXNzaW9uSWQsIHtcbiAgICAgICAgICAgICAgICAuLi50b2tlblNlc3Npb24sXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG5ld0FjY2Vzc1Rva2VuLFxuICAgICAgICAgICAgICAgIHJlZnJlc2hUb2tlbjogbmV3UmVmcmVzaFRva2VuLFxuICAgICAgICAgICAgICAgIGFjY2Vzc1Rva2VuRXhwaXJ5VGltZTogbmV3RXhwaXJ5VGltZSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSBuZXdBY2Nlc3NUb2tlbjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIFJlZnJlc2ggZmFpbGVkIC0gdXNlIGV4aXN0aW5nIHRva2VuIGFuZCBsZXQgYmFja2VuZCBoYW5kbGUgNDAxXG4gICAgICAgICAgICAgIGFjY2Vzc1Rva2VuID0gdG9rZW5TZXNzaW9uLmFjY2Vzc1Rva2VuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKHJlZnJlc2hFcnJvcikge1xuICAgICAgICAgICAgLy8gUmVmcmVzaCBmYWlsZWQgLSB1c2UgZXhpc3RpbmcgdG9rZW5cbiAgICAgICAgICAgIGNvbnNvbGUud2FybignW1Byb3h5XSBUb2tlbiByZWZyZXNoIGZhaWxlZDonLCByZWZyZXNoRXJyb3IpO1xuICAgICAgICAgICAgYWNjZXNzVG9rZW4gPSB0b2tlblNlc3Npb24uYWNjZXNzVG9rZW47XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFRva2VuIHN0aWxsIHZhbGlkXG4gICAgICAgICAgYWNjZXNzVG9rZW4gPSB0b2tlblNlc3Npb24uYWNjZXNzVG9rZW47XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gZ2V0IHRva2VuIGZyb20gc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgLy8gQ29udGludWUgd2l0aG91dCB0b2tlbiAtIGJhY2tlbmQgd2lsbCByZXR1cm4gNDAxIGlmIGF1dGggcmVxdWlyZWRcbiAgfVxuICBcbiAgLy8gSW5qZWN0IEF1dGhvcml6YXRpb24gaGVhZGVyIGZyb20gUmVkaXMtc3RvcmVkIHRva2VuIChkbyBOT1QgZm9yd2FyZCBmcm9tIGNsaWVudClcbiAgaWYgKGFjY2Vzc1Rva2VuKSB7XG4gICAgaGVhZGVyc1snYXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke2FjY2Vzc1Rva2VufWA7XG4gICAgaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke2FjY2Vzc1Rva2VufWA7XG4gIH1cbiAgXG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVxLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSB8fCByZXEuaGVhZGVycy5nZXQoJ0NvbnRlbnQtVHlwZScpO1xuICBpZiAoY29udGVudFR5cGUpIHtcbiAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGNvbnRlbnRUeXBlO1xuICAgIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddID0gY29udGVudFR5cGU7XG4gIH0gZWxzZSB7XG4gICAgLy8gT25seSBzZXQgZGVmYXVsdCBKU09OIGNvbnRlbnQtdHlwZSBpZiBub3QgbXVsdGlwYXJ0L2Zvcm0tZGF0YVxuICAgIGlmICghY29udGVudFR5cGU/LmluY2x1ZGVzKCdtdWx0aXBhcnQvZm9ybS1kYXRhJykpIHtcbiAgICAgIGhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgaGVhZGVyc1snQ29udGVudC1UeXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7XG4gICAgfVxuICB9XG5cbiAgLy8gRm9yd2FyZCB1c2VyIGlkZW50aWZpY2F0aW9uIGhlYWRlcnMgdG8gYmFja2VuZCBzZXJ2aWNlc1xuICBjb25zdCB1c2VySGVhZGVycyA9IFsnWC1Vc2VyLUlkJywgJ1gtVXNlci1FbWFpbCcsICdYLVVzZXItTmFtZScsICdYLVVzZXItUm9sZSddO1xuICBmb3IgKGNvbnN0IGhlYWRlck5hbWUgb2YgdXNlckhlYWRlcnMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHJlcS5oZWFkZXJzLmdldChoZWFkZXJOYW1lKSB8fCByZXEuaGVhZGVycy5nZXQoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGhlYWRlcnNbaGVhZGVyTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGhlYWRlcnNbaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpXSA9IHZhbHVlOyAvLyBBbHNvIHNldCBsb3dlcmNhc2UgZm9yIGNvbXBhdGliaWxpdHlcbiAgICB9XG4gIH1cblxuICAvLyBGb3J3YXJkIHNjaGVtYS1kcml2ZW4gZm9ybSBoZWFkZXJzIChDUklUSUNBTCBmb3IgZHluYW1pYyB2YWxpZGF0aW9uKVxuICBjb25zdCBzY2hlbWFIZWFkZXJzID0gWydYLUVudGl0eS1UeXBlJywgJ1gtRm9ybS1Db25maWctSWQnLCAnWC1Gb3JtLVZlcnNpb24nXTtcbiAgZm9yIChjb25zdCBoZWFkZXJOYW1lIG9mIHNjaGVtYUhlYWRlcnMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHJlcS5oZWFkZXJzLmdldChoZWFkZXJOYW1lKSB8fCByZXEuaGVhZGVycy5nZXQoaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGhlYWRlcnNbaGVhZGVyTmFtZV0gPSB2YWx1ZTtcbiAgICAgIGhlYWRlcnNbaGVhZGVyTmFtZS50b0xvd2VyQ2FzZSgpXSA9IHZhbHVlOyAvLyBBbHNvIHNldCBsb3dlcmNhc2UgZm9yIGNvbXBhdGliaWxpdHlcbiAgICAgIGNvbnNvbGUubG9nKGBbUHJveHldIEZvcndhcmRpbmcgJHtoZWFkZXJOYW1lfTogJHt2YWx1ZX1gKTtcbiAgICB9XG4gIH1cblxuICAvLyBBZGQgYWRkaXRpb25hbCBoZWFkZXJzIGZvciBiZXR0ZXIgZGVidWdnaW5nXG4gIGhlYWRlcnNbJ3VzZXItYWdlbnQnXSA9ICdOZXh0SlMtUHJveHkvMS4wJztcblxuICAvLyBIYW5kbGUgcmVxdWVzdCBib2R5XG4gIGxldCBib2R5OiBCb2R5SW5pdCB8IHVuZGVmaW5lZDtcbiAgaWYgKFsnR0VUJywgJ0hFQUQnXS5pbmNsdWRlcyhyZXEubWV0aG9kKSkge1xuICAgIGJvZHkgPSB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAoY29udGVudFR5cGU/LmluY2x1ZGVzKCdtdWx0aXBhcnQvZm9ybS1kYXRhJykpIHtcbiAgICAvLyBGb3IgZmlsZSB1cGxvYWRzLCBwYXJzZSBGb3JtRGF0YSBhbmQgcmVjb25zdHJ1Y3QgaXRcbiAgICAvLyBUaGlzIHByZXNlcnZlcyB0aGUgbXVsdGlwYXJ0IHN0cnVjdHVyZSB0aGF0IHRoZSBiYWNrZW5kIGV4cGVjdHNcbiAgICBjb25zdCBmb3JtRGF0YSA9IGF3YWl0IHJlcS5mb3JtRGF0YSgpO1xuICAgIGJvZHkgPSBmb3JtRGF0YTtcbiAgICAvLyBSZW1vdmUgQ29udGVudC1UeXBlIGhlYWRlciAtIGZldGNoIHdpbGwgc2V0IGl0IHdpdGggdGhlIGNvcnJlY3QgYm91bmRhcnlcbiAgICBkZWxldGUgaGVhZGVyc1snY29udGVudC10eXBlJ107XG4gICAgZGVsZXRlIGhlYWRlcnNbJ0NvbnRlbnQtVHlwZSddO1xuICB9IGVsc2Uge1xuICAgIC8vIEZvciBKU09OIGFuZCBvdGhlciB0ZXh0LWJhc2VkIGNvbnRlbnQsIHJlYWQgYXMgdGV4dFxuICAgIGJvZHkgPSBhd2FpdCByZXEudGV4dCgpO1xuICB9XG5cbiAgY29uc3QgaW5pdDogUmVxdWVzdEluaXQgPSB7XG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIGhlYWRlcnMsXG4gICAgYm9keSxcbiAgICByZWRpcmVjdDogJ21hbnVhbCdcbiAgfTtcblxuICB0cnkge1xuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGZldGNoKHVybCwgaW5pdCk7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcy5hcnJheUJ1ZmZlcigpO1xuXG4gICAgY29uc3QgcmVzcEhlYWRlcnMgPSBuZXcgSGVhZGVycygpO1xuICAgIHJlcy5oZWFkZXJzLmZvckVhY2goKHYsIGspID0+IHJlc3BIZWFkZXJzLnNldChrLCB2KSk7XG4gICAgLy8gZW5zdXJlIENPUlMgZm9yIGJyb3dzZXIgZXZlbiB0aG91Z2ggdGhpcyBpcyBzYW1lLW9yaWdpblxuICAgIHJlc3BIZWFkZXJzLnNldCgnQWNjZXNzLUNvbnRyb2wtQWxsb3ctT3JpZ2luJywgJyonKTtcbiAgICByZXNwSGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHMnLCAnR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OUywgUEFUQ0gnKTtcbiAgICByZXNwSGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnMnLCAnQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uLCBYLVVzZXItSWQsIFgtVXNlci1FbWFpbCwgWC1Vc2VyLU5hbWUsIFgtVXNlci1Sb2xlLCBYLUVudGl0eS1UeXBlLCBYLUZvcm0tQ29uZmlnLUlkLCBYLUZvcm0tVmVyc2lvbiwgWC1SZXF1ZXN0LUlkJyk7XG5cbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShib2R5LCB7IHN0YXR1czogcmVzLnN0YXR1cywgaGVhZGVyczogcmVzcEhlYWRlcnMgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1Byb3h5XSBFcnJvcjonLCBlcnJvciwgJ1VSTDonLCB1cmwpO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InO1xuICAgIFxuICAgIC8vIElmIGl0J3MgYSBjb25uZWN0aW9uIGVycm9yLCBwcm92aWRlIG1vcmUgaGVscGZ1bCBtZXNzYWdlXG4gICAgaWYgKGVycm9yTWVzc2FnZS5pbmNsdWRlcygnRUNPTk5SRUZVU0VEJykgfHwgZXJyb3JNZXNzYWdlLmluY2x1ZGVzKCdmZXRjaCBmYWlsZWQnKSB8fCBlcnJvck1lc3NhZ2UuaW5jbHVkZXMoJ0VDT05OUkVGVVNFRCcpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbUHJveHldIENvbm5lY3Rpb24gZmFpbGVkIHRvICR7dXJsfSAtIHNlcnZpY2UgbWF5IG5vdCBiZSBydW5uaW5nYCk7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShKU09OLnN0cmluZ2lmeSh7IFxuICAgICAgICBlcnJvcjogJ0JhY2tlbmQgc2VydmljZSB1bmF2YWlsYWJsZScsIFxuICAgICAgICBkZXRhaWxzOiBgQ2Fubm90IGNvbm5lY3QgdG8gJHt1cmx9LiBQbGVhc2UgZW5zdXJlIHRoZSBiYWNrZW5kIHNlcnZpY2UgaXMgcnVubmluZy5gLFxuICAgICAgICBvcmlnaW5hbEVycm9yOiBlcnJvck1lc3NhZ2VcbiAgICAgIH0pLCB7IFxuICAgICAgICBzdGF0dXM6IDUwMywgXG4gICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ1Byb3h5IHJlcXVlc3QgZmFpbGVkJywgZGV0YWlsczogZXJyb3JNZXNzYWdlIH0pLCB7IFxuICAgICAgc3RhdHVzOiA1MDIsIFxuICAgICAgaGVhZGVyczogeyAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgR0VUID0gZm9yd2FyZDtcbmV4cG9ydCBjb25zdCBQT1NUID0gZm9yd2FyZDtcbmV4cG9ydCBjb25zdCBQVVQgPSBmb3J3YXJkO1xuZXhwb3J0IGNvbnN0IFBBVENIID0gZm9yd2FyZDtcbmV4cG9ydCBjb25zdCBERUxFVEUgPSBmb3J3YXJkO1xuZXhwb3J0IGNvbnN0IE9QVElPTlMgPSBmb3J3YXJkO1xuXG5cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRUb2tlbiIsImdldFRva2VuU2Vzc2lvbiIsInN0b3JlVG9rZW5TZXNzaW9uIiwiREVGQVVMVF9UQVJHRVQiLCJwcm9jZXNzIiwiZW52IiwiUFJPWFlfVEFSR0VUIiwiTUVTU0FHSU5HX1RBUkdFVCIsIlBST1hZX1RBUkdFVF9NRVNTQUdJTkciLCJQUk9KRUNUSU9OU19UQVJHRVQiLCJQUk9YWV9UQVJHRVRfUFJPSkVDVElPTlMiLCJPTkJPQVJESU5HX1RBUkdFVCIsIlBST1hZX1RBUkdFVF9PTkJPQVJESU5HIiwiRE9DVU1FTlRfVEFSR0VUIiwiUFJPWFlfVEFSR0VUX0RPQ1VNRU5UIiwiQVVUSF9UQVJHRVQiLCJQUk9YWV9UQVJHRVRfQVVUSCIsInJlc29sdmVVcHN0cmVhbSIsInBhdGhuYW1lIiwic2VhcmNoIiwiYWZ0ZXJQcm94eSIsInNwbGl0Iiwic3RhcnRzV2l0aCIsInRyaW1tZWQiLCJyZXBsYWNlIiwicmlza1BhdGgiLCJSSVNLX1RBUkdFVCIsIkVOVElUWV9DT05GSUdfVEFSR0VUIiwiZm9yd2FyZCIsInJlcSIsInVybCIsIm5leHRVcmwiLCJpbmNsdWRlcyIsImNvbnNvbGUiLCJsb2ciLCJoZWFkZXJzIiwiYWNjZXNzVG9rZW4iLCJ0b2tlbiIsInNlY3JldCIsIk5FWFRBVVRIX1NFQ1JFVCIsInNlc3Npb25JZCIsInRva2VuU2Vzc2lvbiIsIm5lZWRzUmVmcmVzaCIsImFjY2Vzc1Rva2VuRXhwaXJ5VGltZSIsIkRhdGUiLCJub3ciLCJyZWZyZXNoVG9rZW4iLCJ0b2tlblVybCIsIktFWUNMT0FLX1RPS0VOX1VSTCIsInJlZnJlc2hSZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsIlVSTFNlYXJjaFBhcmFtcyIsImNsaWVudF9pZCIsIktFWUNMT0FLX0NMSUVOVF9JRCIsImdyYW50X3R5cGUiLCJyZWZyZXNoX3Rva2VuIiwiY2xpZW50X3NlY3JldCIsIktFWUNMT0FLX0NMSUVOVF9TRUNSRVQiLCJvayIsInJlZnJlc2hlZFRva2VucyIsImpzb24iLCJuZXdBY2Nlc3NUb2tlbiIsImFjY2Vzc190b2tlbiIsIm5ld1JlZnJlc2hUb2tlbiIsIm5ld0V4cGlyeVRpbWUiLCJleHBpcmVzX2luIiwicmVmcmVzaEVycm9yIiwid2FybiIsImVycm9yIiwiY29udGVudFR5cGUiLCJnZXQiLCJ1c2VySGVhZGVycyIsImhlYWRlck5hbWUiLCJ2YWx1ZSIsInRvTG93ZXJDYXNlIiwic2NoZW1hSGVhZGVycyIsInVuZGVmaW5lZCIsImZvcm1EYXRhIiwidGV4dCIsImluaXQiLCJyZWRpcmVjdCIsInJlcyIsImFycmF5QnVmZmVyIiwicmVzcEhlYWRlcnMiLCJIZWFkZXJzIiwiZm9yRWFjaCIsInYiLCJrIiwic2V0Iiwic3RhdHVzIiwiZXJyb3JNZXNzYWdlIiwiRXJyb3IiLCJtZXNzYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImRldGFpbHMiLCJvcmlnaW5hbEVycm9yIiwiR0VUIiwiUE9TVCIsIlBVVCIsIlBBVENIIiwiREVMRVRFIiwiT1BUSU9OUyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/proxy/[...path]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/redis-session.ts":
/*!**********************************!*\
  !*** ./src/lib/redis-session.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteTokenSession: () => (/* binding */ deleteTokenSession),\n/* harmony export */   getRedisClient: () => (/* binding */ getRedisClient),\n/* harmony export */   getTokenSession: () => (/* binding */ getTokenSession),\n/* harmony export */   storeTokenSession: () => (/* binding */ storeTokenSession),\n/* harmony export */   updateAccessToken: () => (/* binding */ updateAccessToken)\n/* harmony export */ });\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! redis */ \"(rsc)/./node_modules/redis/dist/index.js\");\n/* harmony import */ var redis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(redis__WEBPACK_IMPORTED_MODULE_0__);\n\n// Redis client singleton\nlet redisClient = null;\nasync function getRedisClient() {\n    if (redisClient && redisClient.isOpen) {\n        return redisClient;\n    }\n    const redisUrl = process.env.REDIS_URL || \"redis://localhost:6379\";\n    redisClient = (0,redis__WEBPACK_IMPORTED_MODULE_0__.createClient)({\n        url: redisUrl\n    });\n    redisClient.on(\"error\", (err)=>console.error(\"Redis Client Error\", err));\n    redisClient.on(\"connect\", ()=>console.log(\"Redis Client Connected\"));\n    if (!redisClient.isOpen) {\n        await redisClient.connect();\n    }\n    return redisClient;\n}\nconst SESSION_PREFIX = \"session:\";\nconst TTL_SECONDS = 7 * 24 * 60 * 60; // 7 days\n/**\n * Store IdP tokens in Redis, keyed by session ID\n */ async function storeTokenSession(sessionId, tokens) {\n    try {\n        const client = await getRedisClient();\n        const key = `${SESSION_PREFIX}${sessionId}`;\n        await client.setEx(key, TTL_SECONDS, JSON.stringify(tokens));\n        console.log(`[Redis] Stored token session: ${key}`);\n    } catch (error) {\n        console.error(\"[Redis] Failed to store token session:\", error);\n        throw error; // Re-throw so caller knows it failed\n    }\n}\n/**\n * Retrieve IdP tokens from Redis by session ID\n */ async function getTokenSession(sessionId) {\n    try {\n        const client = await getRedisClient();\n        const key = `${SESSION_PREFIX}${sessionId}`;\n        const data = await client.get(key);\n        if (!data) return null;\n        return JSON.parse(data);\n    } catch (error) {\n        console.error(\"[Redis] Failed to get token session:\", error);\n        return null; // Return null instead of throwing\n    }\n}\n/**\n * Delete token session from Redis\n */ async function deleteTokenSession(sessionId) {\n    const client = await getRedisClient();\n    const key = `${SESSION_PREFIX}${sessionId}`;\n    await client.del(key);\n}\n/**\n * Update access token (for refresh scenarios)\n */ async function updateAccessToken(sessionId, accessToken, accessTokenExpiryTime) {\n    const session = await getTokenSession(sessionId);\n    if (!session) {\n        throw new Error(\"Session not found\");\n    }\n    await storeTokenSession(sessionId, {\n        ...session,\n        accessToken,\n        accessTokenExpiryTime\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3JlZGlzLXNlc3Npb24udHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFxQztBQUVyQyx5QkFBeUI7QUFDekIsSUFBSUMsY0FBc0Q7QUFFbkQsZUFBZUM7SUFDcEIsSUFBSUQsZUFBZUEsWUFBWUUsTUFBTSxFQUFFO1FBQ3JDLE9BQU9GO0lBQ1Q7SUFFQSxNQUFNRyxXQUFXQyxRQUFRQyxHQUFHLENBQUNDLFNBQVMsSUFBSTtJQUMxQ04sY0FBY0QsbURBQVlBLENBQUM7UUFBRVEsS0FBS0o7SUFBUztJQUUzQ0gsWUFBWVEsRUFBRSxDQUFDLFNBQVMsQ0FBQ0MsTUFBUUMsUUFBUUMsS0FBSyxDQUFDLHNCQUFzQkY7SUFDckVULFlBQVlRLEVBQUUsQ0FBQyxXQUFXLElBQU1FLFFBQVFFLEdBQUcsQ0FBQztJQUU1QyxJQUFJLENBQUNaLFlBQVlFLE1BQU0sRUFBRTtRQUN2QixNQUFNRixZQUFZYSxPQUFPO0lBQzNCO0lBRUEsT0FBT2I7QUFDVDtBQVdBLE1BQU1jLGlCQUFpQjtBQUN2QixNQUFNQyxjQUFjLElBQUksS0FBSyxLQUFLLElBQUksU0FBUztBQUUvQzs7Q0FFQyxHQUNNLGVBQWVDLGtCQUNwQkMsU0FBaUIsRUFDakJDLE1BQW9CO0lBRXBCLElBQUk7UUFDRixNQUFNQyxTQUFTLE1BQU1sQjtRQUNyQixNQUFNbUIsTUFBTSxDQUFDLEVBQUVOLGVBQWUsRUFBRUcsVUFBVSxDQUFDO1FBQzNDLE1BQU1FLE9BQU9FLEtBQUssQ0FBQ0QsS0FBS0wsYUFBYU8sS0FBS0MsU0FBUyxDQUFDTDtRQUNwRFIsUUFBUUUsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUVRLElBQUksQ0FBQztJQUNwRCxFQUFFLE9BQU9ULE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLDBDQUEwQ0E7UUFDeEQsTUFBTUEsT0FBTyxxQ0FBcUM7SUFDcEQ7QUFDRjtBQUVBOztDQUVDLEdBQ00sZUFBZWEsZ0JBQ3BCUCxTQUFpQjtJQUVqQixJQUFJO1FBQ0YsTUFBTUUsU0FBUyxNQUFNbEI7UUFDckIsTUFBTW1CLE1BQU0sQ0FBQyxFQUFFTixlQUFlLEVBQUVHLFVBQVUsQ0FBQztRQUMzQyxNQUFNUSxPQUFPLE1BQU1OLE9BQU9PLEdBQUcsQ0FBQ047UUFDOUIsSUFBSSxDQUFDSyxNQUFNLE9BQU87UUFDbEIsT0FBT0gsS0FBS0ssS0FBSyxDQUFDRjtJQUNwQixFQUFFLE9BQU9kLE9BQU87UUFDZEQsUUFBUUMsS0FBSyxDQUFDLHdDQUF3Q0E7UUFDdEQsT0FBTyxNQUFNLGtDQUFrQztJQUNqRDtBQUNGO0FBRUE7O0NBRUMsR0FDTSxlQUFlaUIsbUJBQW1CWCxTQUFpQjtJQUN4RCxNQUFNRSxTQUFTLE1BQU1sQjtJQUNyQixNQUFNbUIsTUFBTSxDQUFDLEVBQUVOLGVBQWUsRUFBRUcsVUFBVSxDQUFDO0lBQzNDLE1BQU1FLE9BQU9VLEdBQUcsQ0FBQ1Q7QUFDbkI7QUFFQTs7Q0FFQyxHQUNNLGVBQWVVLGtCQUNwQmIsU0FBaUIsRUFDakJjLFdBQW1CLEVBQ25CQyxxQkFBNkI7SUFFN0IsTUFBTUMsVUFBVSxNQUFNVCxnQkFBZ0JQO0lBQ3RDLElBQUksQ0FBQ2dCLFNBQVM7UUFDWixNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFDQSxNQUFNbEIsa0JBQWtCQyxXQUFXO1FBQ2pDLEdBQUdnQixPQUFPO1FBQ1ZGO1FBQ0FDO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL211a3VydS1hcHAvLi9zcmMvbGliL3JlZGlzLXNlc3Npb24udHM/M2EzYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdyZWRpcyc7XG5cbi8vIFJlZGlzIGNsaWVudCBzaW5nbGV0b25cbmxldCByZWRpc0NsaWVudDogUmV0dXJuVHlwZTx0eXBlb2YgY3JlYXRlQ2xpZW50PiB8IG51bGwgPSBudWxsO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXNDbGllbnQoKSB7XG4gIGlmIChyZWRpc0NsaWVudCAmJiByZWRpc0NsaWVudC5pc09wZW4pIHtcbiAgICByZXR1cm4gcmVkaXNDbGllbnQ7XG4gIH1cblxuICBjb25zdCByZWRpc1VybCA9IHByb2Nlc3MuZW52LlJFRElTX1VSTCB8fCAncmVkaXM6Ly9sb2NhbGhvc3Q6NjM3OSc7XG4gIHJlZGlzQ2xpZW50ID0gY3JlYXRlQ2xpZW50KHsgdXJsOiByZWRpc1VybCB9KTtcblxuICByZWRpc0NsaWVudC5vbignZXJyb3InLCAoZXJyKSA9PiBjb25zb2xlLmVycm9yKCdSZWRpcyBDbGllbnQgRXJyb3InLCBlcnIpKTtcbiAgcmVkaXNDbGllbnQub24oJ2Nvbm5lY3QnLCAoKSA9PiBjb25zb2xlLmxvZygnUmVkaXMgQ2xpZW50IENvbm5lY3RlZCcpKTtcblxuICBpZiAoIXJlZGlzQ2xpZW50LmlzT3Blbikge1xuICAgIGF3YWl0IHJlZGlzQ2xpZW50LmNvbm5lY3QoKTtcbiAgfVxuXG4gIHJldHVybiByZWRpc0NsaWVudDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb2tlblNlc3Npb24ge1xuICBhY2Nlc3NUb2tlbjogc3RyaW5nO1xuICByZWZyZXNoVG9rZW46IHN0cmluZztcbiAgYWNjZXNzVG9rZW5FeHBpcnlUaW1lOiBudW1iZXI7XG4gIHByb3ZpZGVyOiAnYXp1cmUtYWQnIHwgJ2tleWNsb2FrJztcbiAgdXNlckVtYWlsPzogc3RyaW5nO1xuICB1c2VySWQ/OiBzdHJpbmc7XG59XG5cbmNvbnN0IFNFU1NJT05fUFJFRklYID0gJ3Nlc3Npb246JztcbmNvbnN0IFRUTF9TRUNPTkRTID0gNyAqIDI0ICogNjAgKiA2MDsgLy8gNyBkYXlzXG5cbi8qKlxuICogU3RvcmUgSWRQIHRva2VucyBpbiBSZWRpcywga2V5ZWQgYnkgc2Vzc2lvbiBJRFxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc3RvcmVUb2tlblNlc3Npb24oXG4gIHNlc3Npb25JZDogc3RyaW5nLFxuICB0b2tlbnM6IFRva2VuU2Vzc2lvblxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgZ2V0UmVkaXNDbGllbnQoKTtcbiAgICBjb25zdCBrZXkgPSBgJHtTRVNTSU9OX1BSRUZJWH0ke3Nlc3Npb25JZH1gO1xuICAgIGF3YWl0IGNsaWVudC5zZXRFeChrZXksIFRUTF9TRUNPTkRTLCBKU09OLnN0cmluZ2lmeSh0b2tlbnMpKTtcbiAgICBjb25zb2xlLmxvZyhgW1JlZGlzXSBTdG9yZWQgdG9rZW4gc2Vzc2lvbjogJHtrZXl9YCk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignW1JlZGlzXSBGYWlsZWQgdG8gc3RvcmUgdG9rZW4gc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7IC8vIFJlLXRocm93IHNvIGNhbGxlciBrbm93cyBpdCBmYWlsZWRcbiAgfVxufVxuXG4vKipcbiAqIFJldHJpZXZlIElkUCB0b2tlbnMgZnJvbSBSZWRpcyBieSBzZXNzaW9uIElEXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb2tlblNlc3Npb24oXG4gIHNlc3Npb25JZDogc3RyaW5nXG4pOiBQcm9taXNlPFRva2VuU2Vzc2lvbiB8IG51bGw+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRSZWRpc0NsaWVudCgpO1xuICAgIGNvbnN0IGtleSA9IGAke1NFU1NJT05fUFJFRklYfSR7c2Vzc2lvbklkfWA7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IGNsaWVudC5nZXQoa2V5KTtcbiAgICBpZiAoIWRhdGEpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBKU09OLnBhcnNlKGRhdGEpIGFzIFRva2VuU2Vzc2lvbjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbUmVkaXNdIEZhaWxlZCB0byBnZXQgdG9rZW4gc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgcmV0dXJuIG51bGw7IC8vIFJldHVybiBudWxsIGluc3RlYWQgb2YgdGhyb3dpbmdcbiAgfVxufVxuXG4vKipcbiAqIERlbGV0ZSB0b2tlbiBzZXNzaW9uIGZyb20gUmVkaXNcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZVRva2VuU2Vzc2lvbihzZXNzaW9uSWQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBjbGllbnQgPSBhd2FpdCBnZXRSZWRpc0NsaWVudCgpO1xuICBjb25zdCBrZXkgPSBgJHtTRVNTSU9OX1BSRUZJWH0ke3Nlc3Npb25JZH1gO1xuICBhd2FpdCBjbGllbnQuZGVsKGtleSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGFjY2VzcyB0b2tlbiAoZm9yIHJlZnJlc2ggc2NlbmFyaW9zKVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlQWNjZXNzVG9rZW4oXG4gIHNlc3Npb25JZDogc3RyaW5nLFxuICBhY2Nlc3NUb2tlbjogc3RyaW5nLFxuICBhY2Nlc3NUb2tlbkV4cGlyeVRpbWU6IG51bWJlclxuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRUb2tlblNlc3Npb24oc2Vzc2lvbklkKTtcbiAgaWYgKCFzZXNzaW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIG5vdCBmb3VuZCcpO1xuICB9XG4gIGF3YWl0IHN0b3JlVG9rZW5TZXNzaW9uKHNlc3Npb25JZCwge1xuICAgIC4uLnNlc3Npb24sXG4gICAgYWNjZXNzVG9rZW4sXG4gICAgYWNjZXNzVG9rZW5FeHBpcnlUaW1lLFxuICB9KTtcbn1cblxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsInJlZGlzQ2xpZW50IiwiZ2V0UmVkaXNDbGllbnQiLCJpc09wZW4iLCJyZWRpc1VybCIsInByb2Nlc3MiLCJlbnYiLCJSRURJU19VUkwiLCJ1cmwiLCJvbiIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImxvZyIsImNvbm5lY3QiLCJTRVNTSU9OX1BSRUZJWCIsIlRUTF9TRUNPTkRTIiwic3RvcmVUb2tlblNlc3Npb24iLCJzZXNzaW9uSWQiLCJ0b2tlbnMiLCJjbGllbnQiLCJrZXkiLCJzZXRFeCIsIkpTT04iLCJzdHJpbmdpZnkiLCJnZXRUb2tlblNlc3Npb24iLCJkYXRhIiwiZ2V0IiwicGFyc2UiLCJkZWxldGVUb2tlblNlc3Npb24iLCJkZWwiLCJ1cGRhdGVBY2Nlc3NUb2tlbiIsImFjY2Vzc1Rva2VuIiwiYWNjZXNzVG9rZW5FeHBpcnlUaW1lIiwic2Vzc2lvbiIsIkVycm9yIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/redis-session.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/@redis","vendor-chunks/jose","vendor-chunks/uuid","vendor-chunks/cluster-key-slot","vendor-chunks/@panva","vendor-chunks/redis"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&page=%2Fapi%2Fproxy%2F%5B...path%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fproxy%2F%5B...path%5D%2Froute.ts&appDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fmukurusystemsadministrator%2FDesktop%2Fonboarding_kyc%20copy%2Fpartner&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=standalone&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();