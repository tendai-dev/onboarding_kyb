"use client";
import{jsxs as e,jsx as n,Fragment as t}from"react/jsx-runtime";import{useSlotRecipe as i,chakra as o,Box as a,VStack as s,Menu as r,Portal as l}from"@chakra-ui/react";import{forwardRef as d,useState as c,useRef as m,useEffect as h,useCallback as g}from"react";import{portalNavigationSidebarRecipe as u}from"../../../configs/themes/portalNavigationSidebar.recipe.js";import{MukuruLogo as b}from"../MukuruLogo/MukuruLogo.js";import{ExpandMoreIcon as p}from"../Icons/ExpandMoreIcon.js";import{ChevronRightIcon as I}from"../Icons/ChevronRightIcon.js";import{MukuruSun as f}from"../Icons/MukuruSun.js";const v=d(({navigationItems:d,helpCentreItem:v,activeItemId:x,activeSubItemId:y,condensed:w=!1,onToggleCollapse:L,showToggle:S=!0,logo:j,onLogoClick:N,expandedWidth:T="280px",condensedWidth:W="72px",...M},D)=>{const[E,P]=c(w),[z,A]=c(new Set),B=i({recipe:u}),[R,U]=B.splitVariantProps(M),Y=B({variant:E?"condensed":"expanded",...R}),F=m(null);h(()=>{P(w)},[w]);const H=g(e=>{A(n=>{const t=new Set;return n.has(e)||t.add(e),t})},[]),K=g(e=>{if(e.disabled)return;e.subItems&&e.subItems.length>0?H(e.id):e.onClick?.()},[H]),V=g(e=>{e.disabled||e.onClick?.()},[]);return e(o.nav,{ref:D||F,css:Y.root,style:{width:E?W:T},...U,children:[e(a,{css:Y.logoContainer,height:"90px",children:[n(a,{css:Y.logo,onClick:N,role:N?"button":void 0,tabIndex:N?0:void 0,onKeyDown:N?e=>{"Enter"!==e.key&&" "!==e.key||N()}:void 0,children:E?n(f,{color:"#F05423",height:"48px",width:"48px"}):j||n(b,{height:"48px",width:"150px"})}),S&&n(o.button,{css:[Y.toggleButton,{transform:E?"rotate(360deg)":"rotate(180deg)",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}],onClick:()=>{const e=!E;P(e),L?.(e),e&&A(new Set)},"aria-label":"Toggle sidebar","data-expanded":!E,children:n(I,{})})]}),n(a,{css:Y.navigation,children:n(s,{css:Y.navigationList,align:"stretch",gap:"0",children:d.map(t=>{const i=z.has(t.id),s=t.subItems&&t.subItems.length>0,d=s&&i&&!E,c=t.href?o.a:o.button,m=t.href?{href:t.href}:{},h=-1!==t?.subItems?.findIndex(e=>y===e.id),g=s?h&&!i:x===t.id;return E&&s?n(a,{css:Y.navigationItem,children:e(r.Root,{positioning:{placement:"right-start"},children:[n(r.Trigger,{asChild:!0,children:e(o.button,{css:[Y.navigationItemContent,g&&{backgroundColor:"mukuru.orange.500"}],disabled:t.disabled,title:t.label,children:[t.icon&&n(a,{css:Y.navigationItemIcon,children:t.icon}),n(a,{css:Y.navigationItemLabel,children:t.label})]})}),n(l,{children:n(r.Positioner,{children:n(r.Content,{css:Y.flyoutContent,marginLeft:"-4px",children:t.subItems?.map(e=>n(r.Item,{value:e.label,css:[Y.subNavigationItem,y===e.id&&{color:"mukuru.orange.200",fontWeight:700}],onSelect:()=>V(e),disabled:e.disabled,children:e.label},e.id))})})})]})},t.id):e(a,{css:Y.navigationItem,position:"relative",role:"group",children:[e(c,{css:[Y.navigationItemContent,g&&{backgroundColor:"mukuru.orange.500",fontWeight:"700"}],disabled:t.disabled,onClick:()=>K(t),title:E?t.label:void 0,...m,...U,children:[t.icon&&n(a,{css:Y.navigationItemIcon,children:t.icon}),n(a,{css:Y.navigationItemLabel,children:t.label}),s&&!E&&n(a,{css:[Y.navigationItemExpand,{transform:i?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}],children:n(p,{})})]}),s&&!E&&n(a,{css:[Y.subNavigation,{maxHeight:d?52*(t.subItems?.length||0)+"px":"0px",opacity:d?1:0,paddingTop:d?"4px":"0px",paddingBottom:d?"8px":"0px"}],children:t.subItems?.map((e,t)=>n(C,{subItem:e,isActive:y===e.id,onClick:V,styles:Y,animationDelay:d?50*t:0},e.id))})]},t.id)})})}),v&&e(t,{children:[n(a,{css:Y.divider}),n(a,{css:Y.helpCentre,children:n(k,{item:v,isCondensed:E,styles:Y})})]})]})}),C=({subItem:e,isActive:t,onClick:i,styles:a,animationDelay:s=0})=>{const r=e.href?o.a:o.button,l=e.href?{href:e.href}:{};return n(r,{css:[a.subNavigationItem,t&&{backgroundColor:"mukuru.orange.500",fontWeight:"700"},{animation:s>0?`fadeInUp 0.3s ease-out ${s}ms both`:void 0,"@keyframes fadeInUp":{"0%":{opacity:0,transform:"translateY(-10px)"},"100%":{opacity:1,transform:"translateY(0)"}}}],disabled:e.disabled,onClick:()=>i(e),...l,children:e.label})},k=({item:t,isCondensed:i,styles:s})=>{if(!t)return null;const r=t.href?o.a:o.button,l=t.href?{href:t.href}:{};return e(r,{css:s.navigationItemContent,disabled:t.disabled,onClick:t.onClick,title:i?t.label:void 0,...l,children:[t.icon&&n(a,{css:s.navigationItemIcon,children:t.icon}),n(a,{css:s.navigationItemLabel,children:t.label})]})};v.displayName="PortalNavigationSidebar";export{v as PortalNavigationSidebar};
//# sourceMappingURL=PortalNavigationSidebar.js.map
