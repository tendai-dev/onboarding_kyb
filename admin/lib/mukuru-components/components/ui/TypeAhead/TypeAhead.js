import{jsxs as e,jsx as r}from"react/jsx-runtime";import{useSlotRecipe as o,Box as t,Text as l,Input as i,List as n,HStack as a,Spinner as s,Span as c,ListItem as d,Flex as p}from"@chakra-ui/react";import{XIcon as h}from"lucide-react";import u,{useState as m,useRef as g,useEffect as b}from"react";import{typeAheadRecipe as f}from"../../../configs/themes/typeAhead.recipe.js";import{Tooltip as x}from"../Tooltip/Tooltip.js";import{useOnClickOutside as y}from"../../../hooks/useOnClickOutside.js";import{MdInfo as v}from"react-icons/md";import{ErrorIcon as k}from"../Icons/ErrorIcon.js";import{Typography as C}from"../Typography/Typography.js";const T=({value:T="",onChange:j,onSelect:w,options:z=[],loading:A=!1,placeholder:S="Start typing to search...",label:I,helpText:O,minSearchLength:F=2,loadingMessage:L="Loading...",noResultsMessage:W="No items found",renderOption:E,disabled:H=!1,error:M,assistiveText:N})=>{const R=M?"error":"default",B=o({recipe:f}),[G,P]=B.splitVariantProps({}),V=B({...G,variant:R}),[Y,q]=m(!1),D=g(null),J=g(null);y(J,()=>q(!1));b(()=>{document.activeElement===D.current&&T.length>=F&&z.length>0&&q(!0)},[z,T,F]);const K=z.reduce((e,r)=>{const o=r.type||"default";return e[o]||(e[o]=[]),e[o].push(r),e},{}),Q=T.length>0&&T.length<F,U=!A&&T.length>=F&&0===z.length;return e(t,{css:V.root,...P,ref:J,children:[I&&e(t,{css:V.labelContainer,children:[r(l,{css:V.label,children:I}),O&&r(x,{showArrow:!0,content:O,children:r(t,{css:V.infoIcon,children:r(v,{size:16,color:"#F05423"})})})]}),e(t,{position:"relative",children:[r(i,{ref:D,placeholder:S,value:T,onChange:e=>{const r=e.target.value;j&&j(r)},onFocus:()=>{T.length>=F&&z.length>0&&q(!0)},css:V.searchInput,autoComplete:"off",disabled:H,"aria-expanded":Y,"aria-autocomplete":"list",role:"combobox"}),T&&!H&&r(t,{position:"absolute",right:"24px",top:"16px",cursor:"pointer",onClick:()=>{j&&j(""),q(!1),w&&w(null)},css:V.clearButton,"aria-label":"Clear input",children:r(h,{size:16})})]}),N&&e(t,{css:V.assistiveText,children:[M&&r(k,{color:M?"mukuru.text.error":"mukuru.grey.medium",width:"20",height:"20"}),r(C,{color:M?"mukuru.text.error":"mukuru.grey.medium",lineHeight:1.2,as:"p",fontSize:"sm",children:N})]}),Y&&r(n.Root,{css:V.content,borderWidth:"1px",borderColor:"gray.200",bg:"white",maxHeight:"200px",overflowY:"auto",role:"listbox",children:A?e(a,{p:"2",children:[r(s,{size:"xs",borderWidth:"1px"}),r(c,{children:L})]}):Q?e(d,{p:3,textAlign:"center",color:"gray.500",children:["Type at least ",F," characters to search"]}):U?r(d,{p:3,textAlign:"center",color:"gray.500",children:W}):Object.entries(K).map(([o,t])=>e(u.Fragment,{children:["default"!==o&&r(d,{p:2,fontWeight:"semibold",fontSize:"sm",color:"gray.600",css:V.itemGroupLabel,children:o}),t.map(e=>r(d,{p:3,cursor:e.disabled?"not-allowed":"pointer",onClick:()=>(e=>{e.disabled||H||(j&&j(e.label),q(!1),w&&w(e))})(e),css:{...V.item,...e.disabled&&{color:"gray.400",cursor:"not-allowed"}},role:"option","aria-selected":!1,"aria-disabled":e.disabled,children:E?E(e):r(p,{align:"center",children:e.label})},e.value))]},o))})]})};T.displayName="TypeAhead";export{T as TypeAhead};
//# sourceMappingURL=TypeAhead.js.map
