"use client";
import{jsx as e,jsxs as n}from"react/jsx-runtime";import i,{forwardRef as o,useState as c}from"react";import{useSlotRecipe as t,Drawer as r,Portal as s,Box as a,chakra as d,Icon as l,Avatar as h,Text as m,Collapsible as p,HStack as v}from"@chakra-ui/react";import{mobileSidebarRecipe as g}from"../../../configs/themes/mobileSidebar.recipe.js";import{CloseIcon as u}from"../Icons/CloseIcon.js";import{ExpandMoreIcon as b}from"../Icons/ExpandMoreIcon.js";import{IconWrapper as I}from"../IconWrapper/IconWrapper.js";import{ProfileIcon as C}from"../Icons/ProfileIcon.js";const f=o(({isOpen:o=!1,onClose:f,navigationItems:k=[],user:x,serviceDropdown:w,profileAction:A,bottomActions:S=[],helpCentreAction:z,headerContent:j,footerContent:D,...T},N)=>{const[E,P]=c(new Set),[R,W]=c(w?.isExpanded||!1),[B,F]=c(w?.defaultActiveServiceId),L=t({recipe:g}),[M,y]=L.splitVariantProps(T),O=L({variant:"drawer",...M}),V=e=>{var n;e.disabled||(e.children&&e.children.length>0?(n=e.id,P(e=>{const i=new Set(e);return i.has(n)?i.delete(n):i.add(n),i})):e.onClick?e.onClick():e.href&&(window.location.href=e.href))},_=()=>{w?.onToggle?w.onToggle():W(!R)};return e(r.Root,{open:o,onOpenChange:({open:e})=>!e&&f(),placement:"end",size:"md",...y,children:n(s,{children:[e(r.Backdrop,{css:O.backdrop}),e(r.Positioner,{css:O.root,children:n(r.Content,{ref:N,css:O.content,children:[n(a,{css:O.header,children:[e(a,{css:O.headerContent,children:j}),e(d.button,{css:O.closeButton,onClick:f,"aria-label":"close",children:e(l,{size:"xs",children:e(u,{})})})]}),x&&n(a,{css:O.profileSection,children:[n(h.Root,{width:"32px",height:"32px",css:O.avatar,children:[e(h.Image,{src:x.avatar}),e(h.Fallback,{name:x.name,css:O.avatarFallback})]}),e(m,{css:O.userName,children:x.name}),A&&n(d.button,{css:O.profileAction,onClick:A.onClick,children:[e(I,{size:"20px",color:"mukuru.orange.200",children:e(C,{})}),"My Profile"]})]}),(()=>{if(!w)return null;const i=void 0!==w.isExpanded?w.isExpanded:R;return n(a,{css:O.serviceDropdown,children:[n(d.button,{css:{...O.serviceDropdownButton},onClick:_,children:[e(a,{css:O.serviceDropdownText,children:w.currentService}),e(a,{css:{...O.serviceDropdownIcon},"data-expanded":i?"":void 0,children:e(b,{})})]}),e(p.Root,{open:i,children:e(p.Content,{animationDuration:"300ms",children:e(a,{css:O.serviceList,children:w.services?.map(n=>e(d.button,{css:O.serviceItem,onClick:()=>{return e=n.id,i=n.onClick,F(e),void(i&&i());var e,i},"data-active":B===n.id?"":void 0,children:n.name},n.id))})})})]})})(),e(a,{css:O.navigationList,children:k.map(i=>{const o=i.children&&i.children.length>0,c=E.has(i.id),t=-1!==i.children?.findIndex(e=>e.isActive),r=o?t&&!c:i.isActive;return n(a,{css:O.navigationItem,children:[n(d.button,{css:{...O.navigationItemContent,...r&&{backgroundColor:"mukuru.orange.500",fontWeight:"700"}},disabled:i.disabled,onClick:()=>V(i),"data-active":r?"":void 0,children:[n(v,{gap:0,alignItems:"center",flex:1,children:[i.icon&&e(I,{size:"20px",css:O.navigationItemIcon,children:i.icon}),e(a,{css:O.navigationItemText,children:i.label})]}),o&&e(a,{css:{...O.navigationItemChevron},"data-expanded":c?"":void 0,children:e(b,{})})]}),o&&e(p.Root,{open:c,children:e(p.Content,{children:e(a,{css:O.subNavigationList,children:i.children?.map(i=>e(d.button,{css:{...O.subNavigationItem,...i.disabled&&O.subNavigationItem._disabled,...i.isActive&&{backgroundColor:"mukuru.orange.500",fontWeight:"700"}},disabled:i.disabled,onClick:()=>(e=>{e.disabled||(e.onClick?e.onClick():e.href&&(window.location.href=e.href))})(i),"data-active":i.isActive?"":void 0,children:n(v,{gap:0,alignItems:"center",children:[i.icon&&e(I,{size:"20px",css:O.navigationItemIcon,children:i.icon}),e(a,{children:i.label})]})},i.id))})})})]},i.id)})}),z?e(a,{css:O.helpCentreSection,children:e(d.button,{css:{...O.navigationItemContent},disabled:z.disabled,onClick:z.onClick,children:n(v,{gap:0,alignItems:"center",children:[z.icon&&e(I,{size:"20px",css:O.navigationItemIcon,children:z.icon}),e(a,{css:O.navigationItemText,children:z.label})]})})}):null,S.length?e(a,{css:O.actionsSection,children:S.map((o,c)=>n(i.Fragment,{children:[e(d.button,{css:{...O.navigationItemContent},disabled:o.disabled,onClick:o.onClick,children:n(v,{gap:0,alignItems:"center",children:[o.icon&&e(I,{size:"20px",css:O.navigationItemIcon,children:o.icon}),e(a,{css:O.navigationItemText,children:o.label})]})}),c<S.length-1&&e(a,{css:O.divider})]},o.id))}):null,D]})})]})})});f.displayName="MobileSidebar";export{f as MobileSidebar};
//# sourceMappingURL=MobileSidebar.js.map
