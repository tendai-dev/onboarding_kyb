;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d7a24f30-f1f6-3dc9-d6b9-60872fc4b731")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,343827,e=>{"use strict";var t=e.i(843476),r=e.i(618566),a=e.i(526732);e.i(643983);var i=e.i(307167),s=e.i(44999),n=e.i(843011),o=e.i(361035),l=e.i(761869),c=e.i(299753),p=e.i(192199),d=e.i(617029);function u(){let e=(0,r.useRouter)(),{data:u}=(0,a.useSession)(),{condensed:h,setCondensed:g}=(0,d.useSidebar)(),m=u?.user?.name||"Admin",f=u?.user?.email||"admin@mukuru.com";return m.split(" ")[0]?.toLowerCase(),(0,t.jsx)(n.Box,{position:"fixed",top:"0",left:h?"72px":"280px",right:"0",height:"90px",bg:"white",zIndex:"999",px:"6",py:"4",pl:"6",transition:"left 0.3s ease, width 0.3s ease",className:"portal-header",borderBottom:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",children:(0,t.jsxs)(l.Flex,{justify:"space-between",align:"center",width:"full",height:"full",children:[(0,t.jsx)(o.HStack,{gap:"4",align:"center",children:(0,t.jsx)(c.Button,{variant:"ghost",onClick:()=>g(!h),p:"2",borderRadius:"full",minW:"40px",h:"40px",bg:"gray.100",_hover:{bg:"gray.200"},"aria-label":"Toggle sidebar",border:"none",_focus:{boxShadow:"none",outline:"none"},_active:{bg:"gray.200"},children:(0,t.jsx)(s.IconWrapper,{children:(0,t.jsx)(p.FiArrowLeft,{size:20,color:"#F05423"})})})}),(0,t.jsx)(o.HStack,{gap:"4",align:"center",children:(0,t.jsx)(i.ProfileMenu,{user:m,menuItems:[{id:0,label:f,value:"email"},{id:1,label:"My Profile",value:"profile",onSelect:()=>e.push("/profile")},{id:2,label:"Settings",value:"settings",onSelect:()=>e.push("/settings")},{id:3,label:"Log Out",value:"logout",onSelect:()=>e.push("/api/auth/logout")}]})})]})})}e.s(["default",()=>u])},618566,(e,t,r)=>{t.exports=e.r(976562)},862873,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(618566);e.i(643983);var i=e.i(355569),s=e.i(111977),n=e.i(134590),o=e.i(179243),l=e.i(119192),c=e.i(307124),p=e.i(857692),d=e.i(194741),u=e.i(489312),h=e.i(357441),g=e.i(843011),m=e.i(617029);function f(){let e=(0,a.usePathname)(),f=(0,a.useRouter)(),{condensed:y,setCondensed:w}=(0,m.useSidebar)(),[x,v]=(0,r.useState)("dashboard");(0,r.useEffect)(()=>{"/dashboard"===e?v("dashboard"):e?.startsWith("/work-queue")?v("work-queue"):e?.startsWith("/applications")?v("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?v("reviews"):e?.startsWith("/documents")?v("documents"):e?.startsWith("/requirements")?v("requirements"):e?.startsWith("/entity-types")?v("entity-types"):e?.startsWith("/checklists")?v("checklists"):e?.startsWith("/wizard-configurations")?v("wizard-configurations"):e?.startsWith("/rules-and-permissions")?v("rules-and-permissions"):e?.startsWith("/audit-log")?v("audit-log"):e?.startsWith("/messages")?v("messages"):e?.startsWith("/notifications")?v("notifications"):e?.startsWith("/data-migration")?v("data-migration"):e?.startsWith("/refreshes")?v("refreshes"):e?.startsWith("/reports")?v("reports"):e?.startsWith("/profile")?v("profile"):e?.startsWith("/settings")&&v("settings")},[e]);let S=(0,r.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(s.ProductIcon,{width:"20",height:"20"}),onClick:()=>{v("dashboard"),f.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,t.jsx)(u.FilterIcon,{width:"20",height:"20"}),onClick:()=>{v("work-queue"),f.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,t.jsx)(p.AppIcon,{width:"20",height:"20"}),onClick:()=>{v("applications"),f.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,t.jsx)(o.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reviews"),f.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{v("reviews"),f.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{v("reviews"),f.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,t.jsx)(d.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{v("documents"),f.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,t.jsx)(l.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{v("configuration"),f.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{v("configuration"),f.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{v("configuration"),f.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{v("configuration"),f.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{v("configuration"),f.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{v("configuration"),f.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,t.jsx)(h.WarningIcon,{width:"20",height:"20"}),onClick:()=>{v("system"),f.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{v("system"),f.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{v("system"),f.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{v("system"),f.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{v("system"),f.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{v("system"),f.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,t.jsx)(o.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reports"),f.push("/reports")}},{id:"profile",label:"Profile",icon:(0,t.jsx)(n.UserIcon,{width:"20",height:"20"}),onClick:()=>{v("profile"),f.push("/profile")}}],[f]),k={id:"help-centre",label:"Help Centre",icon:(0,t.jsx)(c.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,t.jsx)(g.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:y?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,t.jsx)(i.PortalNavigationSidebar,{navigationItems:S,helpCentreItem:k,activeItemId:x,condensed:y,onToggleCollapse:w,onLogoClick:()=>{v("dashboard"),f.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>f])},297630,e=>{"use strict";let{withContext:t,PropsProvider:r}=(0,e.i(552887).createRecipeContext)({key:"container"}),a=t("div");e.s(["Container",()=>a])},891825,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(441305),i=e.i(95966),s=e.i(920755);let n=(0,r.forwardRef)(function(e,r){var n,o,l;let{columns:c,minChildWidth:p,...d}=e,u=(0,a.useChakraContext)(),h=p?(n=p,o=u,(0,i.mapObject)(n,e=>{let t=o.tokens.getVar(`sizes.${e}`,"number"==typeof e?`${e}px`:e);return null===e?null:`repeat(auto-fit, minmax(${t}, 1fr))`})):(l=c,(0,i.mapObject)(l,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`));return(0,t.jsx)(s.Grid,{ref:r,templateColumns:h,...d})});e.s(["SimpleGrid",()=>n])},571798,e=>{"use strict";var t=e.i(37410);let{withContext:r,PropsProvider:a}=(0,e.i(552887).createRecipeContext)({key:"textarea"}),i=r(t.Field.Textarea);e.s(["Textarea",()=>i])},778497,e=>{"use strict";var t=e.i(967079);let r=new class{isDevelopment=!1;isProduction=!0;debug(e,...t){this.isDevelopment&&console.debug(`[DEBUG] ${e}`,...t)}info(e,...r){this.isDevelopment&&console.info(`[INFO] ${e}`,...r),this.isProduction&&(0,t.addBreadcrumb)(e,"info","info",{args:r})}warn(e,r){console.warn(`[WARN] ${e}`),this.isProduction&&(0,t.reportWarning)(e,{tags:r?.tags,extra:r?.extra})}error(e,r,a){let i=r||(e instanceof Error?e.message:String(e));console.error(`[ERROR] ${i}`,e);let s=a?.level==="warn"?"warning":a?.level==="error"?"error":a?.level==="info"?"info":"error";(0,t.reportError)(e,{tags:a?.tags,extra:a?.extra,level:s})}log(e,r,a="info"){if(this.isDevelopment&&console.log(`[${a.toUpperCase()}] ${e}`,r||""),this.isProduction&&"debug"!==a){let i="warn"===a?"warning":"error"===a?"error":"info";(0,t.addBreadcrumb)(e,"log",i,r)}}};e.s(["logger",0,r])},817684,e=>{"use strict";function t(e){return{id:e.workItemNumber||e.id,workItemId:e.id,legalName:e.applicantName,entityType:e.entityType,country:e.country,status:({New:"SUBMITTED",Assigned:"IN PROGRESS",InProgress:"IN PROGRESS",PendingApproval:"RISK REVIEW",Approved:"COMPLETE",Completed:"COMPLETE",Declined:"DECLINED",Cancelled:"DECLINED",DueForRefresh:"IN PROGRESS"})[e.status]||"IN PROGRESS",backendStatus:e.status,created:e.createdAt,updated:e.updatedAt||e.createdAt,submittedBy:e.assignedToName||e.assignedTo||"Unknown",riskScore:({Low:25,Medium:50,High:75,Critical:95})[e.riskLevel]||50,workItemNumber:e.workItemNumber,applicationId:e.applicationId,priority:e.priority,riskLevel:e.riskLevel,assignedTo:e.assignedTo,assignedToName:e.assignedToName,assignedAt:e.assignedAt,requiresApproval:e.requiresApproval,approvedBy:e.approvedBy,approvedByName:e.approvedByName,approvedAt:e.approvedAt,rejectionReason:e.rejectionReason,dueDate:e.dueDate,isOverdue:e.isOverdue,nextRefreshDate:e.nextRefreshDate,lastRefreshedAt:e.lastRefreshedAt,refreshCount:e.refreshCount}}function r(e){return e.map(t)}e.s(["mapWorkItemToApplication",()=>t,"mapWorkItemsToApplications",()=>r])},670357,592622,82349,576699,571408,e=>{"use strict";async function t(e=1,r=20,a,i){let s=new URLSearchParams({page:e.toString(),pageSize:r.toString()});a&&s.append("searchTerm",a),i&&s.append("status",i);let n=await fetch(`/api/applications?${s.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!n.ok)throw Error(`Failed to fetch applications: ${n.status} ${n.statusText}`);let o=await n.json();return{items:o.items||o.data||[],totalCount:o.total_count||o.totalCount||o.total||0,page:o.page||e,pageSize:o.page_size||o.pageSize||r}}async function r(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/entity-type-distribution?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch entity type distribution: ${r.status} ${r.statusText}`);let a=await r.json();return Array.isArray(a)?a:a.items||a.data||[]}async function a(e=7,t){let r=new URLSearchParams({days:e.toString()});t&&r.append("partnerId",t);let i=await fetch(`/api/trends?${r.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!i.ok)throw Error(`Failed to fetch application trends: ${i.status} ${i.statusText}`);let s=await i.json();return Array.isArray(s)?s:s.items||s.data||[]}async function i(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/dashboard?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch dashboard projection: ${r.status} ${r.statusText}`);return r.json()}async function s(){let e={"Content-Type":"application/json"};try{let t=await fetch("/api/auth/session"),r=await t.json();r?.user?.email&&(e["X-User-Email"]=r.user.email),r?.user?.name&&(e["X-User-Name"]=r.user.name),r?.user?.role&&(e["X-User-Role"]=r.user.role)}catch(e){}return e}async function n(e,t){let r=e;e.startsWith("?")?r=e:e.startsWith("/")||(r=`/${e}`);let a=`/api/workqueue${r}`,i=await s(),n=await fetch(a,{...t,headers:{...i,...t?.headers}});if(!n.ok){let e=`Work Queue API request failed: ${n.status} ${n.statusText}`;try{let t=await n.json();e=t.message||t.error||e}catch{}throw Error(e)}let o=await n.text();return o&&""!==o.trim()?JSON.parse(o):null}async function o(e){let t=new URLSearchParams;e?.status&&"ALL"!==e.status&&t.append("status",e.status),e?.searchTerm&&t.append("searchTerm",e.searchTerm),e?.country&&t.append("country",e.country),e?.riskLevel&&t.append("riskLevel",e.riskLevel);let r=e?.page||1,a=e?.pageSize||100;t.append("page",r.toString()),t.append("pageSize",a.toString());let i=await n(`?${t.toString()}`);return{items:i.items||i.data||[],totalCount:i.totalCount||i.total_count||0,page:r,pageSize:a}}async function l(e){try{return await n(`/${e}`)}catch(e){if(e instanceof Error&&e.message.includes("404"))return null;throw e}}async function c(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),a=await n(`/my-items?${r.toString()}`);return{items:a.items||a.data||[],totalCount:a.totalCount||a.total_count||0,page:e,pageSize:t}}async function p(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),a=await n(`/pending-approvals?${r.toString()}`);return{items:a.items||a.data||[],totalCount:a.totalCount||a.total_count||0,page:e,pageSize:t}}async function d(e=1,t=100,r){let a=new URLSearchParams({page:e.toString(),pageSize:t.toString()});return r&&a.append("asOfDate",r.toISOString()),await n(`/due-for-refresh?${a.toString()}`)}async function u(e,t,r){let a;if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))a=t;else{let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;let r=Math.abs(e).toString(16).padStart(32,"0");a=`${r.substring(0,8)}-${r.substring(8,12)}-${r.substring(12,16)}-${r.substring(16,20)}-${r.substring(20,32)}`}await n(`/${e}/assign`,{method:"POST",body:JSON.stringify({AssignedToUserId:a,AssignedToUserName:r})})}async function h(e){await n(`/${e}/unassign`,{method:"POST"})}async function g(e){await n(`/${e}/start-review`,{method:"POST"})}async function m(e,t){await n(`/${e}/submit-for-approval`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function f(e,t){await n(`/${e}/approve`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function y(e,t){await n(`/${e}/decline`,{method:"POST",body:JSON.stringify({reason:t})})}async function w(e,t){await n(`/${e}/complete`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function x(e){await n(`/${e}/mark-for-refresh`,{method:"POST"})}async function v(e,t){await n(`/${e}/comments`,{method:"POST",body:JSON.stringify({text:t})})}async function S(e){return await n(`/${e}/comments`)}async function k(e){return await n(`/${e}/history`)}function C(e){let t=e.businessLegalName||`${e.applicantFirstName} ${e.applicantLastName}`.trim()||"Unknown",r=e.businessCountryOfRegistration||e.applicantCountry||"Unknown",a=e.type||(e.businessLegalName?"Business":"Individual")||"Unknown",i=e.assignedToName||e.assignedTo||"Unassigned",s=e.submittedAt||e.createdAt,n=Math.round(e.progressPercentage||0);return{id:e.caseId||e.id,companyName:t,entityType:a,status:({Draft:"IN_PROGRESS",InProgress:"IN_PROGRESS",PendingReview:"RISK_REVIEW",Submitted:"SUBMITTED",Approved:"COMPLETE",Rejected:"DECLINED",Cancelled:"DECLINED"})[e.status]||"IN_PROGRESS",submittedDate:s,assignedTo:i,riskLevel:({Low:"LOW",MediumLow:"LOW",Medium:"MEDIUM",MediumHigh:"HIGH",High:"HIGH"})[e.riskLevel]||"MEDIUM",country:r,progress:n}}e.s(["addComment",()=>v,"approveWorkItem",()=>f,"assignWorkItem",()=>u,"completeWorkItem",()=>w,"declineWorkItem",()=>y,"getItemsDueForRefresh",()=>d,"getMyWorkItems",()=>c,"getPendingApprovals",()=>p,"getWorkItemById",()=>l,"getWorkItemComments",()=>S,"getWorkItemHistory",()=>k,"getWorkItems",()=>o,"markForRefresh",()=>x,"startReview",()=>g,"submitForApproval",()=>m,"unassignWorkItem",()=>h],592622);var b=e.i(817684);async function I(e=1,r=20,a,i){let s=await t(e,r,a,i);return{items:s.items.map(C),totalCount:s.totalCount,page:s.page,pageSize:s.pageSize}}async function j(t){let r=await I(1,1e4,t?.search,t?.status),{escapeCsvField:a,createCsvBlob:i}=await e.A(535485);return i(["Application ID","Company Name","Entity Type","Country","Status","Risk Level","Assigned To","Progress","Submitted Date"],r.items.map(e=>[a(e.id),a(e.companyName),a(e.entityType),a(e.country),a(e.status),a(e.riskLevel),a(e.assignedTo),a(`${e.progress}%`),a(new Date(e.submittedDate).toLocaleDateString())]))}async function E(e){let t=await i(e);return{totalApplications:t.cases.totalCases,pendingReview:t.cases.pendingReviewCases,riskReview:t.risk.casesRequiringManualReview,completed:t.cases.completedCases,incomplete:t.cases.activeCases-t.cases.pendingReviewCases,declined:t.cases.rejectedCases,avgProcessingTime:Number(t.performance.averageCompletionTimeHours/24),successRate:Number(t.performance.completionRate)}}async function R(e){return(await r(e)).map(e=>({type:e.name,count:e.value}))}async function A(e=7,t){return a(e,t)}async function D(e){return i(e)}function T(e){return({SUBMITTED:"New","IN PROGRESS":"InProgress","RISK REVIEW":"PendingApproval",COMPLETE:"Completed",DECLINED:"Declined"})[e]||e}async function W(e){let t=e?{...e,status:e.status&&"ALL"!==e.status?T(e.status):void 0}:void 0,r=await o(t);return{items:(0,b.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function P(e=1,t=20){let r=await c(e,t);return{items:(0,b.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function N(e=1,t=20){return p(e,t)}async function L(e=1,t=100,r){return d(e,t,r)}async function O(e,t,r){if(!e)throw Error("Work item ID is required");if(!t)throw Error("User ID is required");if(!r)throw Error("User name is required");await u(e,t,r)}async function z(e){if(!e)throw Error("Work item ID is required");await h(e)}async function $(e){if(!e)throw Error("Work item ID is required");await g(e)}async function U(e,t){if(!e)throw Error("Work item ID is required");await m(e,t)}async function F(e,t){if(!e)throw Error("Work item ID is required");await f(e,t)}async function q(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Rejection reason is required");await y(e,t)}async function M(e,t){if(!e)throw Error("Work item ID is required");await w(e,t)}async function B(e){if(!e)throw Error("Work item ID is required");await x(e)}async function G(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Comment text is required");await v(e,t)}async function H(e){if(!e)throw Error("Work item ID is required");return S(e)}async function V(e){if(!e)throw Error("Work item ID is required");return k(e)}async function _(t){let r=t?{...t,status:t.status&&"ALL"!==t.status?T(t.status):void 0}:void 0,a=await o({...r,page:1,pageSize:1e4}),{escapeCsvField:i,createCsvBlob:s}=await e.A(535485),{mapWorkItemToApplication:n}=await e.A(8947);return s(["Application ID","Work Item Number","Legal Name","Entity Type","Country","Status","Priority","Risk Level","Assigned To","Created Date","Updated Date"],a.items.map(e=>{let t=n(e);return[i(t.id),i(e.workItemNumber),i(t.legalName),i(t.entityType),i(t.country),i(t.status),i(e.priority),i(e.riskLevel),i(e.assignedToName||e.assignedTo),i(new Date(t.created).toLocaleDateString()),i(new Date(t.updated).toLocaleDateString())]}))}e.s(["exportApplications",()=>j,"fetchApplications",()=>I],82349),e.s(["fetchApplicationTrends",()=>A,"fetchDashboardProjection",()=>D,"fetchDashboardStats",()=>E,"fetchEntityTypeDistribution",()=>R],576699),e.s(["addCommentUseCase",()=>G,"approveWorkItemUseCase",()=>F,"assignWorkItemUseCase",()=>O,"completeWorkItemUseCase",()=>M,"declineWorkItemUseCase",()=>q,"exportWorkItems",()=>_,"fetchItemsDueForRefresh",()=>L,"fetchMyWorkItems",()=>P,"fetchPendingApprovals",()=>N,"fetchWorkItemComments",()=>H,"fetchWorkItemHistory",()=>V,"fetchWorkItems",()=>W,"markForRefreshUseCase",()=>B,"startReviewUseCase",()=>$,"submitForApprovalUseCase",()=>U,"unassignWorkItemUseCase",()=>z],571408),e.s([],670357)},737228,e=>{"use strict";var t=e.i(843476),r=e.i(843011),a=e.i(297630),i=e.i(53545),s=e.i(361035),n=e.i(891825),o=e.i(761869),l=e.i(571798),c=e.i(522207);e.i(643983);var p=e.i(825402),d=e.i(554646),u=e.i(191348),h=e.i(613056),g=e.i(927561),m=e.i(404372),f=e.i(44999),y=e.i(827296),w=e.i(312569),x=e.i(228427),v=e.i(932536),S=e.i(192199),k=e.i(271645),C=e.i(862873),b=e.i(343827),I=e.i(617029);e.i(670357);var j=e.i(571408),E=e.i(592622),R=e.i(778497),A=e.i(178849);function D(e){let t="PENDING";"Approved"===e.status?t="APPROVED":"Declined"===e.status?t="REJECTED":"PendingApproval"===e.status&&(t="PENDING");let r=e.riskLevel.toUpperCase(),a="MEDIUM";return"Urgent"===e.priority?a="URGENT":"High"===e.priority?a="HIGH":"Low"===e.priority&&(a="LOW"),{id:e.id,applicationId:e.applicationId,companyName:e.applicantName||"Unknown",entityType:e.entityType||"Unknown",riskLevel:r,status:t,requestedBy:e.assignedToName||"System",requestedDate:e.createdAt,dueDate:e.dueDate,approver:e.approvedByName,approvedDate:e.approvedAt,comments:e.rejectionReason,reason:e.requiresApproval?`Requires approval due to ${e.riskLevel} risk level`:"Approval required",priority:a,workItemNumber:e.workItemNumber}}function T(){let{condensed:e}=(0,I.useSidebar)(),[T,W]=(0,k.useState)([]),[P,N]=(0,k.useState)([]),[L,O]=(0,k.useState)(!1),[z,$]=(0,k.useState)(null),[U,F]=(0,k.useState)(""),[q,M]=(0,k.useState)("ALL"),[B,G]=(0,k.useState)(null),[H,V]=(0,k.useState)(""),[_,J]=(0,k.useState)(!1),[Q,X]=(0,k.useState)(0),K=(0,k.useCallback)(async()=>{try{O(!0),$(null),R.logger.debug("[Approvals Page] Loading approvals...");let e=(await (0,j.fetchPendingApprovals)(1,100)).items.map(D),[t,r,a]=await Promise.all([(0,E.getWorkItems)({page:1,pageSize:100}),(0,E.getWorkItems)({status:"Completed",page:1,pageSize:100}),(0,E.getWorkItems)({status:"Declined",page:1,pageSize:100})]),i=[...e,...t.items.map(D),...r.items.map(D),...a.items.map(D)],s=Array.from(new Map(i.map(e=>[e.id,e])).values());N(s),W(s),R.logger.debug("[Approvals Page] Approvals loaded",{count:s.length})}catch(e){$(e instanceof Error?e.message:"Failed to load approvals"),R.logger.error(e,"[Approvals Page] Error loading approvals",{tags:{error_type:"approvals_load_error"}})}finally{O(!1)}},[]);(0,k.useEffect)(()=>{K()},[K,Q]);let Y=(0,k.useCallback)(e=>{F(e)},[]),Z=e=>{switch(e){case"PENDING":return"orange";case"APPROVED":return"green";case"REJECTED":return"red";case"REQUIRES_CHANGES":return"yellow";default:return"gray"}},ee=e=>{switch(e){case"LOW":return"green";case"MEDIUM":return"orange";case"HIGH":case"CRITICAL":return"red";default:return"gray"}},et=async(e,t)=>{if(B)try{J(!0),A.SweetAlert.loading("APPROVED"===t?"Approving...":"Rejecting...","Please wait while we process your request."),"APPROVED"===t?await (0,j.approveWorkItemUseCase)(e,H||void 0):await (0,j.declineWorkItemUseCase)(e,H||"Rejected by approver"),A.SweetAlert.close(),await A.SweetAlert.success("APPROVED"===t?"Approved!":"Rejected!",`The approval request has been ${"APPROVED"===t?"approved":"rejected"} successfully.`),X(e=>e+1),G(null),V("")}catch(r){A.SweetAlert.close();let e=r instanceof Error?r.message:`Failed to ${"APPROVED"===t?"approve":"reject"} approval`;$(e),R.logger.error(r,`[Approvals Page] Error ${"APPROVED"===t?"approving":"rejecting"} approval`,{tags:{error_type:"approval_action_error",action:t}}),await A.SweetAlert.error("APPROVED"===t?"Approval Failed":"Rejection Failed",e)}finally{J(!1)}},er=T.filter(e=>{let t=e.companyName.toLowerCase().includes(U.toLowerCase())||e.applicationId.toLowerCase().includes(U.toLowerCase())||e.workItemNumber&&e.workItemNumber.toLowerCase().includes(U.toLowerCase()),r="ALL"===q||e.status===q;return t&&r}),ea=P.filter(e=>"PENDING"===e.status).length,ei=P.filter(e=>"APPROVED"===e.status).length,es=P.filter(e=>"REJECTED"===e.status).length,en=P.filter(e=>"REQUIRES_CHANGES"===e.status).length,eo=P.filter(e=>"URGENT"===e.priority&&"PENDING"===e.status).length,el=P.filter(e=>"PENDING"===e.status&&new Date(e.dueDate)<new Date).length,ec=[{field:"companyName",header:"Company Name",width:"200px",minWidth:"200px",render:(e,r)=>(0,t.jsx)(d.Typography,{fontWeight:"medium",color:"gray.800",children:r.companyName})},{field:"applicationId",header:"Application ID",width:"200px",minWidth:"200px",render:(e,r)=>(0,t.jsxs)(d.Typography,{color:"gray.600",fontSize:"xs",children:[r.applicationId,r.workItemNumber&&` • ${r.workItemNumber}`]})},{field:"riskLevel",header:"Risk Level",width:"120px",minWidth:"120px",render:(e,r)=>(0,t.jsx)(h.Tag,{variant:"red"===ee(r.riskLevel)?"danger":"orange"===ee(r.riskLevel)?"warning":"info",children:r.riskLevel})},{field:"status",header:"Status",width:"120px",minWidth:"120px",render:(e,r)=>(0,t.jsx)(h.Tag,{variant:"green"===Z(r.status)?"success":"red"===Z(r.status)?"danger":"orange"===Z(r.status)?"warning":"info",children:r.status.replace("_"," ")})},{field:"dueDate",header:"Due Date",width:"120px",minWidth:"120px",render:(e,r)=>(0,t.jsxs)(d.Typography,{fontSize:"xs",fontWeight:"medium",color:new Date(r.dueDate)<new Date&&"PENDING"===r.status?"red.600":"gray.600",children:[new Date(r.dueDate).toLocaleDateString(),new Date(r.dueDate)<new Date&&"PENDING"===r.status&&(0,t.jsx)(d.Typography,{as:"span",color:"red.500",ml:"1",fontSize:"xs",children:"⚠"})]})}];return(0,t.jsxs)(o.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(C.default,{}),(0,t.jsxs)(r.Box,{ml:e?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:e?"calc(100% - 72px)":"calc(100% - 280px)",bg:"gray.50",overflowX:"hidden",transition:"margin-left 0.3s ease, width 0.3s ease",children:[(0,t.jsx)(b.default,{}),(0,t.jsx)(a.Container,{maxW:"100%",px:"8",py:"6",width:"full",children:(0,t.jsxs)(i.VStack,{gap:"4",align:"stretch",children:[(0,t.jsxs)(o.Flex,{justify:"space-between",align:"center",mb:"4",children:[(0,t.jsxs)(i.VStack,{align:"start",gap:"1",children:[(0,t.jsx)(d.Typography,{fontSize:"3xl",fontWeight:"bold",color:"gray.800",children:"Approvals"}),(0,t.jsx)(d.Typography,{color:"gray.600",children:"Senior management approval workflow"})]}),(0,t.jsxs)(u.Button,{variant:"secondary",size:"sm",onClick:()=>X(e=>e+1),className:"mukuru-primary-button",children:[(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiFilter,{size:16})}),"Refresh"]})]}),z&&(0,t.jsx)(g.AlertBar,{status:"error",title:"Error loading approvals",children:z}),(eo>0||el>0)&&(0,t.jsxs)(g.AlertBar,{status:"warning",title:"Urgent Approvals Required",children:[eo," urgent and ",el," overdue approvals need immediate attention"]}),(0,t.jsxs)(n.SimpleGrid,{columns:{base:1,md:4},gap:"4",children:[(0,t.jsx)(y.Card,{bg:"white",p:"4",children:(0,t.jsxs)(o.Flex,{gap:"4",align:"center",children:[(0,t.jsx)(c.Avatar.Root,{bg:"orange.100",size:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiClock,{size:20,color:"#DD6B20"})})}),(0,t.jsxs)(i.VStack,{align:"start",gap:"0",flex:"1",children:[(0,t.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",children:"Pending Approval"}),(0,t.jsx)(d.Typography,{fontSize:"30px",fontWeight:"bold",color:"orange.600",fontFamily:"Madera, sans-serif",children:ea})]}),(0,t.jsx)(v.ChevronRightIcon,{})]})}),(0,t.jsx)(y.Card,{bg:"white",p:"4",children:(0,t.jsxs)(o.Flex,{gap:"4",align:"center",children:[(0,t.jsx)(c.Avatar.Root,{bg:"green.100",size:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiCheckCircle,{size:20,color:"#38A169"})})}),(0,t.jsxs)(i.VStack,{align:"start",gap:"0",flex:"1",children:[(0,t.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",children:"Approved"}),(0,t.jsx)(d.Typography,{fontSize:"30px",fontWeight:"bold",color:"green.600",fontFamily:"Madera, sans-serif",children:ei})]}),(0,t.jsx)(v.ChevronRightIcon,{})]})}),(0,t.jsx)(y.Card,{bg:"white",p:"4",children:(0,t.jsxs)(o.Flex,{gap:"4",align:"center",children:[(0,t.jsx)(c.Avatar.Root,{bg:"red.100",size:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiXCircle,{size:20,color:"#E53E3E"})})}),(0,t.jsxs)(i.VStack,{align:"start",gap:"0",flex:"1",children:[(0,t.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",children:"Rejected"}),(0,t.jsx)(d.Typography,{fontSize:"30px",fontWeight:"bold",color:"red.600",fontFamily:"Madera, sans-serif",children:es})]}),(0,t.jsx)(v.ChevronRightIcon,{})]})}),(0,t.jsx)(y.Card,{bg:"white",p:"4",children:(0,t.jsxs)(o.Flex,{gap:"4",align:"center",children:[(0,t.jsx)(c.Avatar.Root,{bg:"blue.100",size:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiEdit,{size:20,color:"#3182CE"})})}),(0,t.jsxs)(i.VStack,{align:"start",gap:"0",flex:"1",children:[(0,t.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",children:"Requires Changes"}),(0,t.jsx)(d.Typography,{fontSize:"30px",fontWeight:"bold",color:"blue.600",fontFamily:"Madera, sans-serif",children:en})]}),(0,t.jsx)(v.ChevronRightIcon,{})]})})]}),(0,t.jsx)(s.HStack,{gap:"2",mb:"2",children:["ALL","PENDING","APPROVED","REJECTED","REQUIRES_CHANGES"].map(e=>(0,t.jsx)(u.Button,{variant:"primary",onClick:()=>M(e),className:"mukuru-primary-button",style:{opacity:q===e?1:.7},children:"ALL"===e?"All":"REQUIRES_CHANGES"===e?"Requires Changes":e},e))}),(0,t.jsx)(r.Box,{width:"100%",maxW:"800px",children:(0,t.jsx)(p.Search,{placeholder:"Search by company name or application ID...",onSearchChange:Y})}),(0,t.jsx)(r.Box,{className:"work-queue-table-wrapper",width:"100%",children:(0,t.jsx)(w.DataTable,{data:er,columns:ec,actionColumn:{header:"Actions",width:"200px",render:e=>(0,t.jsxs)(s.HStack,{gap:"2",children:[(0,t.jsx)(x.Tooltip,{content:"View Application",children:(0,t.jsxs)("button",{onClick:()=>window.location.href=`/applications/${e.applicationId}`,style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#111827",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiUser,{size:14})}),"View"]})}),"PENDING"===e.status&&(0,t.jsx)(x.Tooltip,{content:"Review & Approve",children:(0,t.jsx)("button",{onClick:()=>G(e),style:{padding:"6px 12px",borderRadius:"6px",border:"none",backgroundColor:"#F05423",color:"white",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:"Review & Approve"})})]})},loading:L})})]})})]}),(0,t.jsxs)(m.Modal,{isOpen:!!B,onClose:()=>{G(null),V("")},title:"Review Approval Request",size:"small",closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,t.jsx)(m.ModalHeader,{children:(0,t.jsx)(d.Typography,{fontSize:"lg",fontWeight:"bold",color:"gray.800",children:"Review Approval Request"})}),(0,t.jsx)(m.ModalBody,{children:(0,t.jsxs)(i.VStack,{gap:"4",align:"stretch",children:[(0,t.jsxs)(r.Box,{children:[(0,t.jsxs)(d.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:["Company: ",B?.companyName]}),(0,t.jsxs)(d.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:["Application: ",B?.applicationId]}),(0,t.jsxs)(d.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:["Reason: ",B?.reason]})]}),(0,t.jsx)(l.Textarea,{placeholder:"Add your comments...",value:H,onChange:e=>V(e.target.value),rows:3})]})}),(0,t.jsx)(m.ModalFooter,{children:(0,t.jsxs)(s.HStack,{justify:"space-between",w:"full",children:[(0,t.jsx)(u.Button,{variant:"secondary",onClick:()=>{G(null),V("")},disabled:_,children:"Cancel"}),(0,t.jsxs)(s.HStack,{gap:"2",children:[(0,t.jsxs)(u.Button,{variant:"primary",className:"mukuru-primary-button",onClick:()=>B&&et(B.id,"REJECTED"),disabled:_,children:[(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiXCircle,{size:16})}),"Reject"]}),(0,t.jsxs)(u.Button,{variant:"primary",className:"mukuru-primary-button",onClick:()=>B&&et(B.id,"APPROVED"),disabled:_,children:[(0,t.jsx)(f.IconWrapper,{children:(0,t.jsx)(S.FiCheckCircle,{size:16})}),"Approve"]})]})]})})]})]})}e.s(["default",()=>T])},535485,e=>{e.v(t=>Promise.all(["static/chunks/357d3a57e18aad09.js"].map(t=>e.l(t))).then(()=>t(332915)))},8947,e=>{e.v(e=>Promise.resolve().then(()=>e(817684)))}]);

//# debugId=d7a24f30-f1f6-3dc9-d6b9-60872fc4b731
//# sourceMappingURL=a72ad89c170b9a54.js.map