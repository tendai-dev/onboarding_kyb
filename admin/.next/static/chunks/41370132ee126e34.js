;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="19d4f990-198e-dc26-c060-eeceb9a7d89b")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,343827,e=>{"use strict";var t=e.i(843476),i=e.i(618566),r=e.i(526732);e.i(643983);var n=e.i(307167),s=e.i(44999),o=e.i(843011),a=e.i(361035),l=e.i(761869),d=e.i(299753),c=e.i(192199),p=e.i(617029);function u(){let e=(0,i.useRouter)(),{data:u}=(0,r.useSession)(),{condensed:h,setCondensed:y}=(0,p.useSidebar)(),g=u?.user?.name||"Admin",m=u?.user?.email||"admin@mukuru.com";return g.split(" ")[0]?.toLowerCase(),(0,t.jsx)(o.Box,{position:"fixed",top:"0",left:h?"72px":"280px",right:"0",height:"90px",bg:"white",zIndex:"999",px:"6",py:"4",pl:"6",transition:"left 0.3s ease, width 0.3s ease",className:"portal-header",borderBottom:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",children:(0,t.jsxs)(l.Flex,{justify:"space-between",align:"center",width:"full",height:"full",children:[(0,t.jsx)(a.HStack,{gap:"4",align:"center",children:(0,t.jsx)(d.Button,{variant:"ghost",onClick:()=>y(!h),p:"2",borderRadius:"full",minW:"40px",h:"40px",bg:"gray.100",_hover:{bg:"gray.200"},"aria-label":"Toggle sidebar",border:"none",_focus:{boxShadow:"none",outline:"none"},_active:{bg:"gray.200"},children:(0,t.jsx)(s.IconWrapper,{children:(0,t.jsx)(c.FiArrowLeft,{size:20,color:"#F05423"})})})}),(0,t.jsx)(a.HStack,{gap:"4",align:"center",children:(0,t.jsx)(n.ProfileMenu,{user:g,menuItems:[{id:0,label:m,value:"email"},{id:1,label:"My Profile",value:"profile",onSelect:()=>e.push("/profile")},{id:2,label:"Settings",value:"settings",onSelect:()=>e.push("/settings")},{id:3,label:"Log Out",value:"logout",onSelect:()=>e.push("/api/auth/logout")}]})})]})})}e.s(["default",()=>u])},337880,e=>{"use strict";e.i(247167).default.env.NEXT_PUBLIC_ENTITY_CONFIG_API_BASE_URL;let t=new class{async getAuthHeaders(){let t={"Content-Type":"application/json"};try{let e=await fetch("/api/auth/session"),i=await e.json();i?.user?.email&&(t["X-User-Email"]=i.user.email),i?.user?.name&&(t["X-User-Name"]=i.user.name)}catch(t){{let{clientSentry:i}=await e.A(661405);i.reportError(t,{tags:{error_type:"entity_config_api",operation:"get_session"},level:"warning"})}}return t}async request(e,t){let i,r;e.startsWith("/requirements")?(i="/api/requirements",r=""):(e.startsWith("/wizardconfigurations")||e.startsWith("/entity-types"),i="/api/rules-and-permissions",r=e);let n=`${i}${r}`,s=await this.getAuthHeaders();try{let e=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),1e4)}),i=fetch(n,{...t,headers:{...s,...t?.headers}}),r=await Promise.race([i,e]);if(!r.ok){let e=await r.text(),t=`Entity Config API request failed: ${r.status} ${r.statusText}`;try{let i=JSON.parse(e);i.message?t=i.message:i.error&&(t=i.error)}catch{e&&e.trim().length>0&&(t=e.length>200?e.substring(0,200)+"...":e)}throw Error(t)}if(204===r.status)return null;return r.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Entity Configuration service");throw e}}async getEntityTypes(e=!1,t=!0){let i=new URLSearchParams;e&&i.append("includeInactive","true"),t&&i.append("includeRequirements","true");let r=i.toString();return(await this.request(`/entity-types${r?`?${r}`:""}`)).map(e=>{let t=e.requirements||e.Requirements||[];return Array.isArray(t)&&t.length>0&&(t=t.map(e=>({id:e.id||e.Id,requirementId:e.requirementId||e.RequirementId||e.requirement_id,isRequired:void 0!==e.isRequired?e.isRequired:void 0!==e.IsRequired?e.IsRequired:void 0!==e.is_required&&e.is_required,displayOrder:e.displayOrder||e.DisplayOrder||e.display_order||0,requirement:e.requirement||e.Requirement}))),{id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",icon:e.icon||e.Icon,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",requirements:t}})}async getEntityType(e,t=!0){let i=t?`/entity-types/${e}?includeRequirements=true`:`/entity-types/${e}`;return this.request(i)}async getEntityTypeByCode(t,i=!0){let r=t.trim();console.log("[EntityConfigAPI] Fetching entity type by code (as-is from application):",r);try{let e=await this.request(`/entity-types/by-code/${encodeURIComponent(r)}`);return console.log("[EntityConfigAPI] ✅ Successfully fetched entity type:",e?.code),e}catch(t){{let{clientSentry:i}=await e.A(661405);i.reportError(t,{tags:{error_type:"entity_config_api",operation:"fetch_entity_type_by_code"},extra:{code:r},level:"error"})}return null}}async createEntityType(e){return this.request("/entity-types",{method:"POST",body:JSON.stringify(e)})}async updateEntityType(e,t){return this.request(`/entity-types/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteEntityType(e){return this.request(`/entity-types/${e}`,{method:"DELETE"})}async getRequirements(e=!1){return(await this.request(`/requirements${e?"?includeInactive=true":""}`)).map(e=>({id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",type:e.type||e.Type||e.type||"",fieldType:e.fieldType||e.FieldType||e.field_type||"",validationRules:e.validationRules||e.ValidationRules||e.validation_rules,helpText:e.helpText||e.HelpText||e.help_text,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",options:e.options||e.Options||[]}))}async getRequirement(e){return this.request(`/requirements/${e}`)}async createRequirement(e){return this.request("/requirements",{method:"POST",body:JSON.stringify(e)})}async updateRequirement(e,t){return this.request(`/requirements/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteRequirement(e){return this.request(`/requirements/${e}`,{method:"DELETE"})}async getRequirementsMetadata(){return this.request("/requirements/metadata")}async getRequirementOptions(e){return this.request(`/requirements/${e}/options`)}async addRequirementOption(e,t){return this.request(`/requirements/${e}/options`,{method:"POST",body:JSON.stringify(t)})}async updateRequirementOption(e,t,i){return this.request(`/requirements/${e}/options/${t}`,{method:"PUT",body:JSON.stringify(i)})}async deleteRequirementOption(e,t){return this.request(`/requirements/${e}/options/${t}`,{method:"DELETE"})}async addRequirementToEntityType(e,t){return this.request(`/entity-types/${e}/requirements`,{method:"POST",body:JSON.stringify(t)})}async removeRequirementFromEntityType(e,t){return this.request(`/entity-types/${e}/requirements/${t}`,{method:"DELETE"})}async getWizardConfigurations(e=!1){return(await this.request(`/wizardconfigurations${e?"?includeInactive=true":""}`)).map(e=>({id:e.id,entityTypeId:e.entity_type_id||e.entityTypeId,entityTypeDisplayName:e.entity_type_display_name||e.entityTypeDisplayName,isActive:void 0!==e.is_active?e.is_active:e.isActive,createdAt:e.created_at||e.createdAt,updatedAt:e.updated_at||e.updatedAt,steps:(e.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}))}async getWizardConfiguration(e){let t=await this.request(`/wizardconfigurations/${e}`);return{id:t.id,entityTypeId:t.entity_type_id||t.entityTypeId,entityTypeDisplayName:t.entity_type_display_name||t.entityTypeDisplayName,isActive:void 0!==t.is_active?t.is_active:t.isActive,createdAt:t.created_at||t.createdAt,updatedAt:t.updated_at||t.updatedAt,steps:(t.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}}async getWizardConfigurationByEntityType(t){try{return this.request(`/wizardconfigurations/by-entity-type/${t}`)}catch(i){{let{clientSentry:r}=await e.A(661405);r.reportError(i,{tags:{error_type:"entity_config_api",operation:"fetch_wizard_config"},extra:{entityTypeId:t},level:"error"})}return null}}async createWizardConfiguration(e){return this.request("/wizardconfigurations",{method:"POST",body:JSON.stringify(e)})}async updateWizardConfiguration(e,t){return this.request(`/wizardconfigurations/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteWizardConfiguration(e){return this.request(`/wizardconfigurations/${e}`,{method:"DELETE"})}};e.s(["FieldType",0,{Text:"Text",Email:"Email",Phone:"Phone",Number:"Number",Date:"Date",Select:"Select",MultiSelect:"MultiSelect",Radio:"Radio",Checkbox:"Checkbox",Textarea:"Textarea",File:"File",Country:"Country",Currency:"Currency",Address:"Address"},"RequirementType",0,{Information:1,Document:2,ProofOfIdentity:3,ProofOfAddress:4,OwnershipStructure:5,BoardDirectors:6,AuthorizedSignatories:7},"entityConfigApiService",0,t])},618566,(e,t,i)=>{t.exports=e.r(976562)},862873,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(618566);e.i(643983);var n=e.i(355569),s=e.i(111977),o=e.i(134590),a=e.i(179243),l=e.i(119192),d=e.i(307124),c=e.i(857692),p=e.i(194741),u=e.i(489312),h=e.i(357441),y=e.i(843011),g=e.i(617029);function m(){let e=(0,r.usePathname)(),m=(0,r.useRouter)(),{condensed:x,setCondensed:f}=(0,g.useSidebar)(),[b,S]=(0,i.useState)("dashboard");(0,i.useEffect)(()=>{"/dashboard"===e?S("dashboard"):e?.startsWith("/work-queue")?S("work-queue"):e?.startsWith("/applications")?S("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?S("reviews"):e?.startsWith("/documents")?S("documents"):e?.startsWith("/requirements")?S("requirements"):e?.startsWith("/entity-types")?S("entity-types"):e?.startsWith("/checklists")?S("checklists"):e?.startsWith("/wizard-configurations")?S("wizard-configurations"):e?.startsWith("/rules-and-permissions")?S("rules-and-permissions"):e?.startsWith("/audit-log")?S("audit-log"):e?.startsWith("/messages")?S("messages"):e?.startsWith("/notifications")?S("notifications"):e?.startsWith("/data-migration")?S("data-migration"):e?.startsWith("/refreshes")?S("refreshes"):e?.startsWith("/reports")?S("reports"):e?.startsWith("/profile")?S("profile"):e?.startsWith("/settings")&&S("settings")},[e]);let v=(0,i.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(s.ProductIcon,{width:"20",height:"20"}),onClick:()=>{S("dashboard"),m.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,t.jsx)(u.FilterIcon,{width:"20",height:"20"}),onClick:()=>{S("work-queue"),m.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,t.jsx)(c.AppIcon,{width:"20",height:"20"}),onClick:()=>{S("applications"),m.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,t.jsx)(a.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{S("reviews"),m.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{S("reviews"),m.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{S("reviews"),m.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,t.jsx)(p.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{S("documents"),m.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,t.jsx)(l.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{S("configuration"),m.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{S("configuration"),m.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{S("configuration"),m.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{S("configuration"),m.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{S("configuration"),m.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{S("configuration"),m.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,t.jsx)(h.WarningIcon,{width:"20",height:"20"}),onClick:()=>{S("system"),m.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{S("system"),m.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{S("system"),m.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{S("system"),m.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{S("system"),m.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{S("system"),m.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,t.jsx)(a.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{S("reports"),m.push("/reports")}},{id:"profile",label:"Profile",icon:(0,t.jsx)(o.UserIcon,{width:"20",height:"20"}),onClick:()=>{S("profile"),m.push("/profile")}}],[m]),q={id:"help-centre",label:"Help Centre",icon:(0,t.jsx)(d.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,t.jsx)(y.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:x?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,t.jsx)(n.PortalNavigationSidebar,{navigationItems:v,helpCentreItem:q,activeItemId:b,condensed:x,onToggleCollapse:f,onLogoClick:()=>{S("dashboard"),m.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>m])},297630,e=>{"use strict";let{withContext:t,PropsProvider:i}=(0,e.i(552887).createRecipeContext)({key:"container"}),r=t("div");e.s(["Container",()=>r])},891825,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(441305),n=e.i(95966),s=e.i(920755);let o=(0,i.forwardRef)(function(e,i){var o,a,l;let{columns:d,minChildWidth:c,...p}=e,u=(0,r.useChakraContext)(),h=c?(o=c,a=u,(0,n.mapObject)(o,e=>{let t=a.tokens.getVar(`sizes.${e}`,"number"==typeof e?`${e}px`:e);return null===e?null:`repeat(auto-fit, minmax(${t}, 1fr))`})):(l=d,(0,n.mapObject)(l,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`));return(0,t.jsx)(s.Grid,{ref:i,templateColumns:h,...p})});e.s(["SimpleGrid",()=>o])},571798,e=>{"use strict";var t=e.i(37410);let{withContext:i,PropsProvider:r}=(0,e.i(552887).createRecipeContext)({key:"textarea"}),n=i(t.Field.Textarea);e.s(["Textarea",()=>n])},340439,e=>{"use strict";var t=e.i(843476),i=e.i(843011),r=e.i(297630),n=e.i(53545),s=e.i(361035),o=e.i(571798),a=e.i(891825),l=e.i(761869),d=e.i(300713),c=e.i(880572),p=e.i(152602);e.i(643983);var u=e.i(825402),h=e.i(554646),y=e.i(191348),g=e.i(44999),m=e.i(927561),x=e.i(613056),f=e.i(192199),b=e.i(862873),S=e.i(343827),v=e.i(617029),q=e.i(271645),j=e.i(618566),T=e.i(337880);function C({params:e}){let C,w=(0,j.useRouter)(),{condensed:E}=(0,v.useSidebar)(),{id:k}=(0,q.use)(e),[A,_]=(0,q.useState)({code:"",displayName:"",description:"",icon:"",isActive:!0}),[R,W]=(0,q.useState)([]),[I,z]=(0,q.useState)([]),[B,N]=(0,q.useState)(null),[F,O]=(0,q.useState)(!0),[D,$]=(0,q.useState)(!1),[P,H]=(0,q.useState)(null),[L,U]=(0,q.useState)("");(0,q.useEffect)(()=>{k&&V()},[k]),(0,q.useEffect)(()=>{if(console.log("[Entity Types Edit] selectedRequirements state updated:",R),console.log("[Entity Types Edit] selectedRequirements count:",R.length),R.length>0&&I.length>0){let e=I.filter(e=>R.includes(String(e.id)));console.log("[Entity Types Edit] Matched requirements:",e.length,"out of",I.length),console.log("[Entity Types Edit] Matched requirement names:",e.map(e=>e.displayName))}},[R,I]);let V=async()=>{if(!k){H("Entity type ID is required"),O(!1);return}try{O(!0),H(null),console.log("[Entity Types Edit] Loading entity type with ID:",k);let e=await T.entityConfigApiService.getEntityType(k,!0);if(console.log("[Entity Types Edit] ✅ Loaded entity type from single endpoint:",e),console.log("[Entity Types Edit] ✅ Entity type requirements property:",e.requirements),!e.requirements||0===e.requirements.length){console.log("[Entity Types Edit] ⚠️ No requirements from single endpoint, trying list endpoint...");let t=(await T.entityConfigApiService.getEntityTypes(!1,!0)).find(e=>e.id===k);t&&t.requirements&&t.requirements.length>0&&(console.log("[Entity Types Edit] ✅ Found requirements from list endpoint!",t.requirements.length),e={...e,requirements:t.requirements})}console.log("[Entity Types Edit] ✅ Final entity type data:",e),console.log("[Entity Types Edit] ✅ Final requirements:",e.requirements);let t=await T.entityConfigApiService.getRequirements(!1);console.log("[Entity Types Edit] ✅ Loaded all requirements:",t.length),N(e),z(t),_({code:e.code,displayName:e.displayName,description:e.description,icon:e.icon||"",isActive:e.isActive});let i=e.requirements||[];if(console.log("[Entity Types Edit] ✅ Requirements array from API:",i),console.log("[Entity Types Edit] ✅ Requirements count:",i.length),i&&Array.isArray(i)&&i.length>0){let e=i.map(e=>{let t=String(e.requirementId||e.requirement_id||e.id);return console.log("[Entity Types Edit] Mapping requirement:",e,"→ ID:",t),t}).filter(e=>e&&"undefined"!==e&&"null"!==e);console.log("[Entity Types Edit] ✅ Extracted requirement IDs:",e),console.log("[Entity Types Edit] ✅ All available requirement IDs:",t.map(e=>String(e.id)));let r=t.filter(t=>e.includes(String(t.id)));if(console.log("[Entity Types Edit] ✅ Matched requirements:",r.length,"out of",e.length),console.log("[Entity Types Edit] ✅ Matched requirement names:",r.map(e=>e.displayName)),r.length!==e.length){console.warn("[Entity Types Edit] ⚠️ Some requirements not found in all requirements list!");let i=e.filter(e=>!t.some(t=>String(t.id)===e));console.warn("[Entity Types Edit] ⚠️ Missing requirement IDs:",i)}W(e)}else console.error("[Entity Types Edit] ❌ NO REQUIREMENTS FOUND IN API RESPONSE!"),console.error("[Entity Types Edit] Entity type data keys:",Object.keys(e)),console.error("[Entity Types Edit] Entity type data:",e),W([])}catch(e){H(e instanceof Error?e.message:"Failed to load entity type"),console.error("Error loading data:",e)}finally{O(!1)}},M=e=>{console.log("[Entity Types Edit] Toggling requirement:",e),W(t=>{let i=t.includes(e)?t.filter(t=>t!==e):[...t,e];return console.log("[Entity Types Edit] New selection:",i),i})},J=async()=>{if(!A.displayName||!A.description)return void H("Please fill in all required fields");try{if($(!0),H(null),!k)return void H("Entity type ID is required");if(await T.entityConfigApiService.updateEntityType(k,{displayName:A.displayName,description:A.description,isActive:A.isActive,icon:A.icon||void 0}),B){let e=B.requirements?.map(e=>e.requirementId)||[],t=e.filter(e=>!R.includes(e));for(let e of t)await T.entityConfigApiService.removeRequirementFromEntityType(k,e);let i=R.filter(t=>!e.includes(t));for(let r=0;r<i.length;r++){let n=i[r],s=e.length-t.length+r+1;await T.entityConfigApiService.addRequirementToEntityType(k,{requirementId:n,isRequired:!0,displayOrder:s})}}w.push("/entity-types")}catch(e){H(e instanceof Error?e.message:"Failed to update entity type"),console.error("Error updating entity type:",e)}finally{$(!1)}};return F?(0,t.jsxs)(l.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(b.default,{}),(0,t.jsx)(S.default,{}),(0,t.jsx)(i.Box,{flex:"1",ml:E?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:E?"calc(100% - 72px)":"calc(100% - 280px)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsxs)(n.VStack,{gap:"4",children:[(0,t.jsx)(d.Spinner,{size:"xl",color:"orange.500"}),(0,t.jsx)(h.Typography,{color:"black",fontWeight:"500",children:"Loading entity type..."})]})})]}):B?(0,t.jsxs)(l.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(b.default,{}),(0,t.jsx)(S.default,{}),(0,t.jsxs)(i.Box,{flex:"1",ml:E?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:E?"calc(100% - 72px)":"calc(100% - 280px)",bg:"gray.50",transition:"margin-left 0.3s ease, width 0.3s ease",children:[(0,t.jsx)(i.Box,{bg:"white",borderBottom:"1px solid",borderColor:"gray.200",py:"4",position:"sticky",top:"90px",zIndex:"10",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",children:(0,t.jsx)(r.Container,{maxW:"8xl",px:"10",children:(0,t.jsxs)(n.VStack,{align:"start",gap:"3",w:"100%",children:[(0,t.jsxs)(y.Button,{variant:"secondary",size:"sm",onClick:()=>w.push("/entity-types"),className:"mukuru-secondary-button",style:{padding:"6px 12px",minWidth:"80px",height:"32px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#374151",fontWeight:"500",fontSize:"14px"},children:[(0,t.jsx)(g.IconWrapper,{children:(0,t.jsx)(f.FiArrowLeft,{size:14})}),"Back"]}),(0,t.jsxs)(n.VStack,{align:"start",gap:"1",w:"100%",children:[(0,t.jsx)(h.Typography,{as:"h1",fontSize:"24px",fontWeight:"600",color:"#111827",lineHeight:"1.3",letterSpacing:"-0.01em",children:"Edit Entity Type"}),(0,t.jsx)(h.Typography,{color:"#6B7280",fontSize:"14px",fontWeight:"400",lineHeight:"1.4",children:"Update entity type details and requirements"})]})]})})}),P&&(0,t.jsx)(r.Container,{maxW:"8xl",py:"4",px:"10",children:(0,t.jsx)(m.AlertBar,{status:"error",title:"Error!",description:P})}),(0,t.jsx)(r.Container,{maxW:"8xl",py:"6",px:"10",w:"100%",children:(0,t.jsxs)(n.VStack,{gap:"6",align:"stretch",w:"100%",children:[(0,t.jsx)(i.Box,{bg:"white",borderRadius:"xl",border:"1px solid",borderColor:"gray.200",p:"6",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",position:"relative",overflow:"hidden",_before:{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",bg:"linear-gradient(90deg, #FF6B35 0%, #FF8C42 100%)"},children:(0,t.jsxs)(n.VStack,{align:"stretch",gap:"5",children:[(0,t.jsx)(i.Box,{pb:"3",borderBottom:"1px solid",borderColor:"gray.100",children:(0,t.jsx)(h.Typography,{fontSize:"16px",fontWeight:"600",color:"#111827",letterSpacing:"-0.01em",children:"General Information"})}),(0,t.jsxs)(n.VStack,{align:"stretch",gap:"4",mt:"3",children:[(0,t.jsxs)(n.VStack,{align:"start",gap:"2",children:[(0,t.jsx)(h.Typography,{fontSize:"12px",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em",children:"Code"}),(0,t.jsx)(c.Input,{value:A.code,readOnly:!0,bg:"gray.50",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",py:"3",px:"3",fontSize:"sm",color:"black",opacity:.7,cursor:"not-allowed"}),(0,t.jsx)(h.Typography,{fontSize:"12px",color:"#6B7280",fontWeight:"400",children:"Code cannot be changed after creation"})]}),(0,t.jsxs)(n.VStack,{align:"start",gap:"2",children:[(0,t.jsx)(h.Typography,{fontSize:"12px",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em",children:"Display Name"}),(0,t.jsx)(c.Input,{value:A.displayName,onChange:e=>_(t=>({...t,displayName:e.target.value})),placeholder:"Government / State Owned Entity / Organ of State",bg:"white",borderColor:"gray.300",borderWidth:"1px",borderRadius:"md",py:"3",px:"3",fontSize:"sm",color:"black",_placeholder:{color:"gray.400"},_hover:{borderColor:"gray.400"},_focus:{borderColor:"orange.500",boxShadow:"0 0 0 3px rgba(255, 107, 53, 0.1)",outline:"none"},transition:"all 0.2s ease"}),(0,t.jsx)(h.Typography,{fontSize:"12px",color:"#6B7280",fontWeight:"400",children:"User-facing name (shown in forms)"})]}),(0,t.jsxs)(n.VStack,{align:"start",gap:"2",children:[(0,t.jsx)(h.Typography,{fontSize:"12px",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em",children:"Description *"}),(0,t.jsx)(o.Textarea,{value:A.description,onChange:e=>_(t=>({...t,description:e.target.value})),placeholder:"Government entities and state-owned organizations",bg:"white",borderColor:"gray.300",borderWidth:"1px",borderRadius:"md",resize:"vertical",minH:"80px",py:"3",px:"3",fontSize:"sm",color:"black",_placeholder:{color:"gray.400"},_hover:{borderColor:"gray.400"},_focus:{borderColor:"orange.500",boxShadow:"0 0 0 3px rgba(255, 107, 53, 0.1)",outline:"none"},transition:"all 0.2s ease",required:!0})]}),(0,t.jsxs)(n.VStack,{align:"start",gap:"2",children:[(0,t.jsx)(h.Typography,{fontSize:"12px",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em",children:"Icon (optional)"}),(0,t.jsx)(c.Input,{value:A.icon,onChange:e=>_(t=>({...t,icon:e.target.value})),placeholder:"landmark",bg:"white",borderColor:"gray.300",borderWidth:"1px",borderRadius:"md",py:"3",px:"3",fontSize:"sm",color:"black",_placeholder:{color:"gray.400"},_hover:{borderColor:"gray.400"},_focus:{borderColor:"orange.500",boxShadow:"0 0 0 3px rgba(255, 107, 53, 0.1)",outline:"none"},transition:"all 0.2s ease"}),(0,t.jsx)(h.Typography,{fontSize:"12px",color:"#6B7280",fontWeight:"400",children:"Icon name from react-icons (optional)"})]}),(0,t.jsxs)(s.HStack,{justify:"space-between",align:"center",pt:"2",pb:"2",children:[(0,t.jsxs)(n.VStack,{align:"start",gap:"1",children:[(0,t.jsx)(h.Typography,{fontSize:"12px",fontWeight:"600",color:"#374151",textTransform:"uppercase",letterSpacing:"0.05em",children:"Active (visible to applicants)"}),(0,t.jsx)(h.Typography,{fontSize:"12px",color:"#6B7280",fontWeight:"400",children:"Toggle to make this entity type available for selection"})]}),(0,t.jsx)(y.Button,{onClick:()=>_(e=>({...e,isActive:!e.isActive})),variant:A.isActive?"primary":"secondary",className:A.isActive?"mukuru-primary-button":"mukuru-secondary-button",size:"md",px:"6",py:"2",borderRadius:"md",fontWeight:"500",transition:"all 0.2s ease",children:A.isActive?"Active":"Inactive"})]})]})]})}),(0,t.jsx)(i.Box,{bg:"white",borderRadius:"xl",border:"1px solid",borderColor:"gray.200",p:"6",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",position:"relative",overflow:"hidden",_before:{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",bg:R.length>0?"linear-gradient(90deg, #10B981 0%, #059669 100%)":"linear-gradient(90deg, #9CA3AF 0%, #6B7280 100%)"},children:(0,t.jsxs)(n.VStack,{align:"stretch",gap:"4",children:[(0,t.jsx)(i.Box,{pb:"3",borderBottom:"1px solid",borderColor:"gray.100",children:(0,t.jsxs)(s.HStack,{justify:"space-between",align:"center",children:[(0,t.jsxs)(n.VStack,{align:"start",gap:"1",children:[(0,t.jsx)(h.Typography,{fontSize:"16px",fontWeight:"600",color:"#111827",letterSpacing:"-0.01em",children:"Current Requirements"}),(0,t.jsx)(h.Typography,{color:"#6B7280",fontSize:"14px",fontWeight:"400",lineHeight:"1.5",children:R.length>0?`${R.length} requirement${1!==R.length?"s":""} assigned to this entity type`:"No requirements currently assigned to this entity type"}),!F&&(0,t.jsxs)(h.Typography,{fontSize:"11px",color:"#9CA3AF",fontFamily:"mono",mt:"1",children:["Debug: selectedRequirements=",R.length,", allRequirements=",I.length,", entityType.requirements=",B?.requirements?.length||0]})]}),R.length>0&&(0,t.jsxs)(x.Tag,{variant:"success",style:{fontSize:"12px",padding:"4px 12px"},children:[R.length," Active"]})]})}),R.length>0?(0,t.jsxs)(n.VStack,{align:"stretch",gap:"3",children:[!1,(0,t.jsx)(a.SimpleGrid,{columns:{base:1,md:2,lg:3},gap:"3",children:I.filter(e=>R.includes(String(e.id))).map(e=>(0,t.jsx)(i.Box,{p:"3",border:"1px solid",borderColor:"#10B981",borderRadius:"md",bg:"#F0FDF4",boxShadow:"0 1px 2px rgba(16, 185, 129, 0.1)",children:(0,t.jsx)(s.HStack,{align:"start",gap:"2",children:(0,t.jsxs)(i.Box,{flex:"1",children:[(0,t.jsx)(h.Typography,{fontSize:"14px",fontWeight:"600",color:"#111827",mb:"1",children:e.displayName}),e.description&&(0,t.jsx)(h.Typography,{fontSize:"12px",color:"#6B7280",lineHeight:"1.4",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:e.description}),(0,t.jsxs)(s.HStack,{gap:"2",mt:"2",children:[e.type&&(0,t.jsx)(x.Tag,{variant:"info",style:{fontSize:"10px",padding:"2px 8px"},children:e.type}),e.fieldType&&(0,t.jsx)(x.Tag,{variant:"info",style:{fontSize:"10px",padding:"2px 8px"},children:e.fieldType})]})]})})},e.id))}),0===I.filter(e=>R.includes(String(e.id))).length&&R.length>0&&(0,t.jsxs)(i.Box,{p:"4",bg:"red.50",border:"1px solid",borderColor:"red.200",borderRadius:"md",children:[(0,t.jsx)(h.Typography,{fontSize:"sm",color:"red.700",fontWeight:"600",mb:"2",children:"⚠️ Warning: Requirements are assigned but not found in the requirements list"}),(0,t.jsxs)(h.Typography,{fontSize:"xs",color:"red.600",fontFamily:"mono",children:["Selected IDs: ",R.slice(0,5).join(", "),R.length>5?"...":""]}),(0,t.jsx)(h.Typography,{fontSize:"xs",color:"red.600",mt:"1",children:"This might indicate a data mismatch. Check the console for details."})]})]}):(0,t.jsxs)(i.Box,{textAlign:"center",py:"8",px:"4",border:"1px dashed",borderColor:"gray.300",borderRadius:"md",bg:"gray.50",children:[(0,t.jsx)(h.Typography,{fontSize:"sm",color:"#6B7280",fontWeight:"500",children:"No requirements assigned yet"}),(0,t.jsx)(h.Typography,{fontSize:"xs",color:"#9CA3AF",mt:"1",children:"Select requirements from the section below"})]})]})}),(0,t.jsx)(i.Box,{bg:"white",borderRadius:"xl",border:"1px solid",borderColor:"gray.200",p:"6",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",position:"relative",overflow:"hidden",_before:{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",bg:"linear-gradient(90deg, #FF6B35 0%, #FF8C42 100%)"},children:(0,t.jsxs)(n.VStack,{align:"stretch",gap:"5",children:[(0,t.jsx)(i.Box,{pb:"3",borderBottom:"1px solid",borderColor:"gray.100",children:(0,t.jsxs)(n.VStack,{align:"start",gap:"2",children:[(0,t.jsx)(h.Typography,{fontSize:"16px",fontWeight:"600",color:"#111827",letterSpacing:"-0.01em",children:"Select Requirements"}),(0,t.jsx)(h.Typography,{color:"#6B7280",fontSize:"14px",fontWeight:"400",lineHeight:"1.5",children:R.length>0?`${R.length} requirement${1!==R.length?"s":""} selected. Search and select additional requirements below.`:"Search and select requirements that apply to this entity type"})]})}),(0,t.jsx)(i.Box,{children:(0,t.jsx)(u.Search,{placeholder:"Search requirements by name or description...",onSearchChange:e=>U(e)})}),0===(C=I.filter(e=>{if(!L.trim())return!0;let t=L.toLowerCase();return e.displayName.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)})).length?(0,t.jsxs)(i.Box,{textAlign:"center",py:"8",px:"4",border:"1px dashed",borderColor:"gray.300",borderRadius:"md",bg:"gray.50",children:[(0,t.jsxs)(h.Typography,{fontSize:"sm",color:"black",opacity:.6,fontWeight:"500",children:['No requirements found matching "',L,'"']}),(0,t.jsx)(h.Typography,{fontSize:"xs",color:"black",opacity:.5,mt:"1",children:"Try adjusting your search terms"})]}):(0,t.jsx)(a.SimpleGrid,{columns:{base:1,md:2,lg:4},gap:"4",mt:"2",w:"100%",children:C.map(e=>{let r=String(e.id),o=R.includes(r);return 3>C.indexOf(e)&&console.log(`[Entity Types Edit] Requirement ${e.displayName}: id=${r}, isSelected=${o}, selectedRequirements=`,R),(0,t.jsx)(i.Box,{p:"4",border:"2px solid",borderColor:o?"#10B981":"#E5E7EB",borderRadius:"lg",bg:o?"#F0FDF4":"white",boxShadow:o?"0 2px 8px rgba(16, 185, 129, 0.2)":"0 1px 3px rgba(0, 0, 0, 0.1)",_hover:{bg:o?"#D1FAE5":"#F9FAFB",borderColor:o?"#10B981":"#F05423",transform:"translateY(-2px)",boxShadow:o?"0 4px 12px rgba(16, 185, 129, 0.3)":"0 4px 12px rgba(0, 0, 0, 0.15)"},transition:"all 0.2s ease",cursor:"pointer",onClick:()=>{console.log("Clicking requirement:",e.id,"Current selected:",R),M(String(e.id))},position:"relative",minH:"120px",display:"flex",flexDirection:"column",style:{opacity:1},children:(0,t.jsxs)(s.HStack,{gap:"3",align:"start",w:"100%",flex:"1",children:[(0,t.jsx)(i.Box,{onClick:t=>{t.stopPropagation(),console.log("Checkbox clicked:",e.id),M(String(e.id))},position:"relative",zIndex:"2",flexShrink:0,mt:"2px",style:{pointerEvents:"auto"},children:(0,t.jsx)(p.Checkbox.Root,{checked:o,onCheckedChange:t=>{console.log("Checkbox changed:",e.id,t),M(String(e.id))},style:{cursor:"pointer"},children:(0,t.jsx)(p.Checkbox.Control,{style:{backgroundColor:o?"#F05423":"white",borderColor:o?"#F05423":"#D1D5DB",borderWidth:"2px",width:"20px",height:"20px",borderRadius:"4px"},children:(0,t.jsx)(p.Checkbox.Indicator,{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:"✓"})})})}),(0,t.jsxs)(n.VStack,{align:"start",gap:"1",flex:"1",position:"relative",zIndex:"1",minW:"0",children:[(0,t.jsxs)(s.HStack,{gap:"2",align:"center",wrap:"wrap",w:"100%",children:[(0,t.jsx)(h.Typography,{fontSize:"14px",fontWeight:"600",color:o?"#F05423":"#111827",style:{wordBreak:"break-word"},children:e.displayName}),e.type&&(0,t.jsx)(x.Tag,{variant:"info",style:{fontSize:"10px",padding:"2px 6px",textTransform:"uppercase",fontWeight:"600"},children:e.type.replace(/_/g," ")})]}),(0,t.jsx)(h.Typography,{fontSize:"12px",color:o?"#9A3412":"#6B7280",lineHeight:"1.5",style:{display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",wordBreak:"break-word"},children:e.description||"No description"})]})]})},e.id)})}),L.trim()&&(0,t.jsxs)(h.Typography,{fontSize:"xs",color:"black",opacity:.6,textAlign:"center",pt:"2",children:["Showing ",I.filter(e=>{let t=L.toLowerCase();return e.displayName.toLowerCase().includes(t)||e.description&&e.description.toLowerCase().includes(t)}).length," of ",I.length," requirements"]})]})}),(0,t.jsx)(i.Box,{bg:"white",borderRadius:"xl",border:"1px solid",borderColor:"gray.200",p:"6",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",children:(0,t.jsxs)(l.Flex,{gap:"3",justify:"flex-end",align:"center",children:[(0,t.jsxs)(y.Button,{onClick:()=>{w.push("/entity-types")},variant:"secondary",size:"sm",disabled:D||F,className:"mukuru-secondary-button",style:{minWidth:"100px",height:"36px",fontSize:"14px"},children:[(0,t.jsx)(g.IconWrapper,{children:(0,t.jsx)(f.FiX,{size:14})}),"Cancel"]}),(0,t.jsxs)(y.Button,{onClick:J,variant:"primary",className:"mukuru-primary-button",size:"sm",disabled:F||D,style:{minWidth:"120px",height:"36px",fontSize:"14px"},children:[(0,t.jsx)(g.IconWrapper,{children:(0,t.jsx)(f.FiRefreshCw,{size:14})}),D?"Updating...":"Update"]})]})})]})})]})]}):(0,t.jsxs)(l.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(b.default,{}),(0,t.jsx)(S.default,{}),(0,t.jsx)(i.Box,{flex:"1",ml:E?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:E?"calc(100% - 72px)":"calc(100% - 280px)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsxs)(n.VStack,{gap:"4",children:[(0,t.jsx)(h.Typography,{color:"black",fontSize:"md",fontWeight:"600",children:"Entity type not found"}),(0,t.jsx)(y.Button,{onClick:()=>w.push("/entity-types"),variant:"primary",className:"mukuru-primary-button",children:"Back to Entity Types"})]})})]})}e.s(["default",()=>C])},661405,e=>{e.v(t=>Promise.all(["static/chunks/f478692b842c0428.js"].map(t=>e.l(t))).then(()=>t(819252)))}]);

//# debugId=19d4f990-198e-dc26-c060-eeceb9a7d89b
//# sourceMappingURL=23cb4b6f8c3e6aba.js.map