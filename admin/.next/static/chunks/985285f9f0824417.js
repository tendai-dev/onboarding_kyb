;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="f532f317-93f2-c5dc-a870-d62216a226a8")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,618566,(e,t,i)=>{t.exports=e.r(976562)},862873,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(618566);e.i(643983);var s=e.i(355569),n=e.i(111977),o=e.i(134590),a=e.i(179243),l=e.i(119192),d=e.i(307124),c=e.i(857692),p=e.i(194741),u=e.i(489312),h=e.i(357441),y=e.i(843011),g=e.i(617029);function m(){let e=(0,r.usePathname)(),m=(0,r.useRouter)(),{condensed:f,setCondensed:x}=(0,g.useSidebar)(),[b,v]=(0,i.useState)("dashboard");(0,i.useEffect)(()=>{"/dashboard"===e?v("dashboard"):e?.startsWith("/work-queue")?v("work-queue"):e?.startsWith("/applications")?v("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?v("reviews"):e?.startsWith("/documents")?v("documents"):e?.startsWith("/requirements")?v("requirements"):e?.startsWith("/entity-types")?v("entity-types"):e?.startsWith("/checklists")?v("checklists"):e?.startsWith("/wizard-configurations")?v("wizard-configurations"):e?.startsWith("/rules-and-permissions")?v("rules-and-permissions"):e?.startsWith("/audit-log")?v("audit-log"):e?.startsWith("/messages")?v("messages"):e?.startsWith("/notifications")?v("notifications"):e?.startsWith("/data-migration")?v("data-migration"):e?.startsWith("/refreshes")?v("refreshes"):e?.startsWith("/reports")?v("reports"):e?.startsWith("/profile")?v("profile"):e?.startsWith("/settings")&&v("settings")},[e]);let q=(0,i.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(n.ProductIcon,{width:"20",height:"20"}),onClick:()=>{v("dashboard"),m.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,t.jsx)(u.FilterIcon,{width:"20",height:"20"}),onClick:()=>{v("work-queue"),m.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,t.jsx)(c.AppIcon,{width:"20",height:"20"}),onClick:()=>{v("applications"),m.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,t.jsx)(a.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reviews"),m.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{v("reviews"),m.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{v("reviews"),m.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,t.jsx)(p.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{v("documents"),m.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,t.jsx)(l.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{v("configuration"),m.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{v("configuration"),m.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{v("configuration"),m.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{v("configuration"),m.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{v("configuration"),m.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{v("configuration"),m.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,t.jsx)(h.WarningIcon,{width:"20",height:"20"}),onClick:()=>{v("system"),m.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{v("system"),m.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{v("system"),m.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{v("system"),m.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{v("system"),m.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{v("system"),m.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,t.jsx)(a.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reports"),m.push("/reports")}},{id:"profile",label:"Profile",icon:(0,t.jsx)(o.UserIcon,{width:"20",height:"20"}),onClick:()=>{v("profile"),m.push("/profile")}}],[m]),C={id:"help-centre",label:"Help Centre",icon:(0,t.jsx)(d.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,t.jsx)(y.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:f?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,t.jsx)(s.PortalNavigationSidebar,{navigationItems:q,helpCentreItem:C,activeItemId:b,condensed:f,onToggleCollapse:x,onLogoClick:()=>{v("dashboard"),m.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>m])},297630,e=>{"use strict";let{withContext:t,PropsProvider:i}=(0,e.i(552887).createRecipeContext)({key:"container"}),r=t("div");e.s(["Container",()=>r])},891825,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(441305),s=e.i(95966),n=e.i(920755);let o=(0,i.forwardRef)(function(e,i){var o,a,l;let{columns:d,minChildWidth:c,...p}=e,u=(0,r.useChakraContext)(),h=c?(o=c,a=u,(0,s.mapObject)(o,e=>{let t=a.tokens.getVar(`sizes.${e}`,"number"==typeof e?`${e}px`:e);return null===e?null:`repeat(auto-fit, minmax(${t}, 1fr))`})):(l=d,(0,s.mapObject)(l,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`));return(0,t.jsx)(n.Grid,{ref:i,templateColumns:h,...p})});e.s(["SimpleGrid",()=>o])},337880,e=>{"use strict";e.i(247167).default.env.NEXT_PUBLIC_ENTITY_CONFIG_API_BASE_URL;let t=new class{async getAuthHeaders(){let t={"Content-Type":"application/json"};try{let e=await fetch("/api/auth/session"),i=await e.json();i?.user?.email&&(t["X-User-Email"]=i.user.email),i?.user?.name&&(t["X-User-Name"]=i.user.name)}catch(t){{let{clientSentry:i}=await e.A(661405);i.reportError(t,{tags:{error_type:"entity_config_api",operation:"get_session"},level:"warning"})}}return t}async request(e,t){let i,r;e.startsWith("/requirements")?(i="/api/requirements",r=""):(e.startsWith("/wizardconfigurations")||e.startsWith("/entity-types"),i="/api/rules-and-permissions",r=e);let s=`${i}${r}`,n=await this.getAuthHeaders();try{let e=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),1e4)}),i=fetch(s,{...t,headers:{...n,...t?.headers}}),r=await Promise.race([i,e]);if(!r.ok){let e=await r.text(),t=`Entity Config API request failed: ${r.status} ${r.statusText}`;try{let i=JSON.parse(e);i.message?t=i.message:i.error&&(t=i.error)}catch{e&&e.trim().length>0&&(t=e.length>200?e.substring(0,200)+"...":e)}throw Error(t)}if(204===r.status)return null;return r.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Entity Configuration service");throw e}}async getEntityTypes(e=!1,t=!0){let i=new URLSearchParams;e&&i.append("includeInactive","true"),t&&i.append("includeRequirements","true");let r=i.toString();return(await this.request(`/entity-types${r?`?${r}`:""}`)).map(e=>{let t=e.requirements||e.Requirements||[];return Array.isArray(t)&&t.length>0&&(t=t.map(e=>({id:e.id||e.Id,requirementId:e.requirementId||e.RequirementId||e.requirement_id,isRequired:void 0!==e.isRequired?e.isRequired:void 0!==e.IsRequired?e.IsRequired:void 0!==e.is_required&&e.is_required,displayOrder:e.displayOrder||e.DisplayOrder||e.display_order||0,requirement:e.requirement||e.Requirement}))),{id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",icon:e.icon||e.Icon,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",requirements:t}})}async getEntityType(e,t=!0){let i=t?`/entity-types/${e}?includeRequirements=true`:`/entity-types/${e}`;return this.request(i)}async getEntityTypeByCode(t,i=!0){let r=t.trim();console.log("[EntityConfigAPI] Fetching entity type by code (as-is from application):",r);try{let e=await this.request(`/entity-types/by-code/${encodeURIComponent(r)}`);return console.log("[EntityConfigAPI] âœ… Successfully fetched entity type:",e?.code),e}catch(t){{let{clientSentry:i}=await e.A(661405);i.reportError(t,{tags:{error_type:"entity_config_api",operation:"fetch_entity_type_by_code"},extra:{code:r},level:"error"})}return null}}async createEntityType(e){return this.request("/entity-types",{method:"POST",body:JSON.stringify(e)})}async updateEntityType(e,t){return this.request(`/entity-types/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteEntityType(e){return this.request(`/entity-types/${e}`,{method:"DELETE"})}async getRequirements(e=!1){return(await this.request(`/requirements${e?"?includeInactive=true":""}`)).map(e=>({id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",type:e.type||e.Type||e.type||"",fieldType:e.fieldType||e.FieldType||e.field_type||"",validationRules:e.validationRules||e.ValidationRules||e.validation_rules,helpText:e.helpText||e.HelpText||e.help_text,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",options:e.options||e.Options||[]}))}async getRequirement(e){return this.request(`/requirements/${e}`)}async createRequirement(e){return this.request("/requirements",{method:"POST",body:JSON.stringify(e)})}async updateRequirement(e,t){return this.request(`/requirements/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteRequirement(e){return this.request(`/requirements/${e}`,{method:"DELETE"})}async getRequirementsMetadata(){return this.request("/requirements/metadata")}async getRequirementOptions(e){return this.request(`/requirements/${e}/options`)}async addRequirementOption(e,t){return this.request(`/requirements/${e}/options`,{method:"POST",body:JSON.stringify(t)})}async updateRequirementOption(e,t,i){return this.request(`/requirements/${e}/options/${t}`,{method:"PUT",body:JSON.stringify(i)})}async deleteRequirementOption(e,t){return this.request(`/requirements/${e}/options/${t}`,{method:"DELETE"})}async addRequirementToEntityType(e,t){return this.request(`/entity-types/${e}/requirements`,{method:"POST",body:JSON.stringify(t)})}async removeRequirementFromEntityType(e,t){return this.request(`/entity-types/${e}/requirements/${t}`,{method:"DELETE"})}async getWizardConfigurations(e=!1){return(await this.request(`/wizardconfigurations${e?"?includeInactive=true":""}`)).map(e=>({id:e.id,entityTypeId:e.entity_type_id||e.entityTypeId,entityTypeDisplayName:e.entity_type_display_name||e.entityTypeDisplayName,isActive:void 0!==e.is_active?e.is_active:e.isActive,createdAt:e.created_at||e.createdAt,updatedAt:e.updated_at||e.updatedAt,steps:(e.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}))}async getWizardConfiguration(e){let t=await this.request(`/wizardconfigurations/${e}`);return{id:t.id,entityTypeId:t.entity_type_id||t.entityTypeId,entityTypeDisplayName:t.entity_type_display_name||t.entityTypeDisplayName,isActive:void 0!==t.is_active?t.is_active:t.isActive,createdAt:t.created_at||t.createdAt,updatedAt:t.updated_at||t.updatedAt,steps:(t.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}}async getWizardConfigurationByEntityType(t){try{return this.request(`/wizardconfigurations/by-entity-type/${t}`)}catch(i){{let{clientSentry:r}=await e.A(661405);r.reportError(i,{tags:{error_type:"entity_config_api",operation:"fetch_wizard_config"},extra:{entityTypeId:t},level:"error"})}return null}}async createWizardConfiguration(e){return this.request("/wizardconfigurations",{method:"POST",body:JSON.stringify(e)})}async updateWizardConfiguration(e,t){return this.request(`/wizardconfigurations/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteWizardConfiguration(e){return this.request(`/wizardconfigurations/${e}`,{method:"DELETE"})}};e.s(["FieldType",0,{Text:"Text",Email:"Email",Phone:"Phone",Number:"Number",Date:"Date",Select:"Select",MultiSelect:"MultiSelect",Radio:"Radio",Checkbox:"Checkbox",Textarea:"Textarea",File:"File",Country:"Country",Currency:"Currency",Address:"Address"},"RequirementType",0,{Information:1,Document:2,ProofOfIdentity:3,ProofOfAddress:4,OwnershipStructure:5,BoardDirectors:6,AuthorizedSignatories:7},"entityConfigApiService",0,t])},356236,e=>{"use strict";var t=e.i(843476),i=e.i(843011),r=e.i(297630),s=e.i(53545),n=e.i(361035),o=e.i(880572),a=e.i(761869),l=e.i(857557),d=e.i(300713),c=e.i(891825),p=e.i(152602);e.i(643983);var u=e.i(554646),h=e.i(191348),y=e.i(44999),g=e.i(927561),m=e.i(613056),f=e.i(192199),x=e.i(862873),b=e.i(271645),v=e.i(618566),q=e.i(337880);function C({params:e}){let C=(0,v.useRouter)(),{id:j}=(0,b.use)(e),[T,A]=(0,b.useState)({entityTypeId:"",isActive:!0}),[w,S]=(0,b.useState)([]),[k,W]=(0,b.useState)([]),[I,_]=(0,b.useState)(null),[z,R]=(0,b.useState)(null),[E,F]=(0,b.useState)(null),[N,B]=(0,b.useState)([]),[O,$]=(0,b.useState)(!0),[P,D]=(0,b.useState)(!1),[U,L]=(0,b.useState)(null);(0,b.useEffect)(()=>{H()},[j]),(0,b.useEffect)(()=>{T.entityTypeId?V(T.entityTypeId):(F(null),B([]))},[T.entityTypeId]);let H=async()=>{try{$(!0),L(null);let[e,t,i]=await Promise.all([q.entityConfigApiService.getWizardConfiguration(j),q.entityConfigApiService.getEntityTypes(!1,!1),q.entityConfigApiService.getRequirementsMetadata()]);R(e),W(t),_(i),A({entityTypeId:e.entityTypeId,isActive:e.isActive});let r=[...e.steps].sort((e,t)=>e.stepNumber-t.stepNumber);S(r.map(e=>({title:e.title,subtitle:e.subtitle,requirementTypes:e.requirementTypes,requirementIds:[],checklistCategory:e.checklistCategory,stepNumber:e.stepNumber,isActive:e.isActive})))}catch(e){L(e instanceof Error?e.message:"Failed to load wizard configuration"),console.error("Error loading data:",e)}finally{$(!1)}},V=async e=>{try{let t=(await q.entityConfigApiService.getEntityTypes(!1,!0)).find(t=>t.id===e);if(t)if(F(t),t.requirements&&t.requirements.length>0){let e=t.requirements.map(e=>e.requirementId),i=(await q.entityConfigApiService.getRequirements(!1)).filter(t=>e.includes(t.id));B(i),S(e=>e.map(e=>{let t=i.filter(t=>e.requirementTypes.includes(t.type)).map(e=>e.id);return{...e,requirementIds:t}}))}else B([]);else F(null),B([])}catch(e){console.error("Error loading entity type requirements:",e),F(null),B([])}},J=(e,t)=>{S(i=>{let r=[...i],s="up"===t?e-1:e+1;return s<0||s>=r.length?i:([r[e],r[s]]=[r[s],r[e]],r.map((e,t)=>({...e,stepNumber:t+1})))})},M=(e,t,i)=>{S(r=>r.map((r,s)=>s===e?{...r,[t]:i}:r))},G=async()=>{if(L(null),0===w.length)return void L("Please add at least one step");for(let e=0;e<w.length;e++){let t=w[e];if(!t.title||!t.title.trim())return void L(`Step ${e+1}: Title is required`);if(!t.subtitle||!t.subtitle.trim())return void L(`Step ${e+1}: Subtitle is required`);if(0===t.requirementIds.length)return void L(`Step ${e+1}: Please select at least one requirement`)}try{D(!0),L(null),await q.entityConfigApiService.updateWizardConfiguration(j,{isActive:T.isActive,steps:w.map(e=>({title:e.title.trim(),subtitle:e.subtitle.trim(),requirementTypes:e.requirementTypes,checklistCategory:e.checklistCategory.trim()||"",stepNumber:e.stepNumber,isActive:e.isActive}))}),C.push("/wizard-configurations")}catch(t){let e="Failed to update wizard configuration";t instanceof Error||t?.message?e=t.message:"string"==typeof t&&(e=t),L(e),console.error("Error updating wizard configuration:",t),window.scrollTo({top:0,behavior:"smooth"})}finally{D(!1)}};if(O)return(0,t.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(x.default,{}),(0,t.jsx)(i.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsxs)(s.VStack,{gap:"4",children:[(0,t.jsx)(d.Spinner,{size:"xl",color:"orange.500"}),(0,t.jsx)(u.Typography,{color:"gray.700",fontWeight:"500",children:"Loading wizard configuration..."})]})})]});if(!z)return(0,t.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(x.default,{}),(0,t.jsx)(i.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsxs)(s.VStack,{gap:"4",children:[(0,t.jsx)(u.Typography,{color:"red.600",fontSize:"lg",children:"Wizard configuration not found"}),(0,t.jsx)(h.Button,{onClick:()=>C.push("/wizard-configurations"),children:"Back to Wizard Configurations"})]})})]});let X=["Basic Information","Business Details","Legal Documents","Financial Information","Ownership Structure","Compliance","Additional Documents"];return(0,t.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(x.default,{}),(0,t.jsxs)(i.Box,{flex:"1",ml:"280px",children:[(0,t.jsx)(i.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",py:"6",children:(0,t.jsx)(r.Container,{maxW:"6xl",children:(0,t.jsxs)(s.VStack,{align:"start",gap:"2",children:[(0,t.jsx)(u.Typography,{as:"h1",fontSize:"2xl",fontWeight:"bold",color:"gray.900",children:"Edit Wizard Configuration"}),(0,t.jsxs)(u.Typography,{color:"gray.700",fontSize:"sm",fontWeight:"500",children:["Update wizard configuration for ",z.entityTypeDisplayName||"Entity Type"]})]})})}),U&&(0,t.jsx)(r.Container,{maxW:"6xl",py:"4",children:(0,t.jsx)(g.AlertBar,{status:"error",title:"Error!",description:U})}),(0,t.jsx)(r.Container,{maxW:"6xl",py:"6",children:(0,t.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,t.jsx)(i.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"gray.200",p:"5",children:(0,t.jsxs)(s.VStack,{align:"stretch",gap:"3",children:[(0,t.jsx)(u.Typography,{fontSize:"lg",fontWeight:"bold",color:"gray.900",children:"Basic Information"}),(0,t.jsxs)(l.Field.Root,{children:[(0,t.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Entity Type"}),(0,t.jsx)("input",{type:"text",value:k.find(e=>e.id===T.entityTypeId)?.displayName||z?.entityTypeDisplayName||z?.entity_type_display_name||"Loading...",readOnly:!0,style:{width:"100%",backgroundColor:"#F3F4F6",border:"1px solid #D1D5DB",borderRadius:"6px",padding:"12px",fontSize:"14px",color:"#111827",fontWeight:"600",cursor:"not-allowed",outline:"none"}}),(0,t.jsx)(u.Typography,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:"Entity type cannot be changed after creation"})]}),(0,t.jsxs)(n.HStack,{justify:"space-between",align:"center",children:[(0,t.jsx)(u.Typography,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Active (available for use)"}),(0,t.jsx)(h.Button,{onClick:()=>A(e=>({...e,isActive:!e.isActive})),variant:T.isActive?"primary":"secondary",size:"md",bg:T.isActive?"#22C55E":"white",border:T.isActive?"none":"1px solid",borderColor:T.isActive?"transparent":"gray.300",fontWeight:"600",_hover:T.isActive?{bg:"#16A34A"}:{bg:"gray.50"},children:(0,t.jsx)(u.Typography,{as:"span",color:T.isActive?"white":"gray.700",fontWeight:"600",children:T.isActive?"Active":"Inactive"})})]})]})}),(0,t.jsx)(i.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"gray.200",p:"5",children:(0,t.jsxs)(s.VStack,{align:"stretch",gap:"3",children:[(0,t.jsxs)(n.HStack,{justify:"space-between",align:"center",children:[(0,t.jsx)(u.Typography,{fontSize:"lg",fontWeight:"bold",color:"gray.900",children:"Wizard Steps"}),(0,t.jsxs)(h.Button,{onClick:()=>{S(e=>[...e,{title:"",subtitle:"",requirementTypes:[],requirementIds:[],checklistCategory:"",stepNumber:e.length+1,isActive:!0}])},size:"sm",variant:"secondary",bg:"#FF6B35",fontWeight:"600",_hover:{bg:"#E55A2B"},children:[(0,t.jsx)(y.IconWrapper,{children:(0,t.jsx)(f.FiPlus,{size:16})}),(0,t.jsx)(u.Typography,{as:"span",color:"white",fontWeight:"600",children:"Add Step"})]})]}),w.map((e,r)=>{let a;return(0,t.jsx)(i.Box,{border:"1px",borderColor:"gray.200",borderRadius:"md",p:"4",bg:"gray.50",children:(0,t.jsxs)(s.VStack,{align:"stretch",gap:"3",children:[(0,t.jsxs)(n.HStack,{justify:"space-between",align:"center",children:[(0,t.jsxs)(m.Tag,{variant:"info",style:{backgroundColor:"#3B82F6",color:"#FFFFFF",fontWeight:"600",padding:"4px 12px",fontSize:"12px"},children:["Step ",e.stepNumber]}),(0,t.jsxs)(n.HStack,{gap:"2",children:[(0,t.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:()=>J(r,"up"),disabled:0===r,children:(0,t.jsx)(y.IconWrapper,{children:(0,t.jsx)(f.FiArrowUp,{size:16})})}),(0,t.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:()=>J(r,"down"),disabled:r===w.length-1,children:(0,t.jsx)(y.IconWrapper,{children:(0,t.jsx)(f.FiArrowDown,{size:16})})}),w.length>1&&(0,t.jsx)(h.Button,{size:"sm",variant:"ghost",onClick:()=>{S(e=>e.filter((e,t)=>t!==r).map((e,t)=>({...e,stepNumber:t+1})))},children:(0,t.jsx)(y.IconWrapper,{children:(0,t.jsx)(f.FiTrash2,{size:16})})})]})]}),(0,t.jsxs)(c.SimpleGrid,{columns:2,gap:"3",children:[(0,t.jsxs)(l.Field.Root,{children:[(0,t.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Title *"}),(0,t.jsx)(o.Input,{value:e.title,onChange:e=>M(r,"title",e.target.value),placeholder:"e.g., Business Information",bg:"white",borderColor:"gray.300",borderWidth:"1px",borderRadius:"md",py:"3",px:"3",fontSize:"sm",color:"gray.900",fontWeight:"500",_focus:{borderColor:"orange.500",boxShadow:"0 0 0 1px #FF6B35"},_placeholder:{color:"gray.400"},required:!0})]}),(0,t.jsxs)(l.Field.Root,{children:[(0,t.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Subtitle *"}),(0,t.jsx)(o.Input,{value:e.subtitle,onChange:e=>M(r,"subtitle",e.target.value),placeholder:"e.g., Enter your business details",bg:"white",borderColor:"gray.300",borderWidth:"1px",borderRadius:"md",py:"3",px:"3",fontSize:"sm",color:"gray.900",fontWeight:"500",_focus:{borderColor:"orange.500",boxShadow:"0 0 0 1px #FF6B35"},_placeholder:{color:"gray.400"},required:!0})]})]}),(0,t.jsxs)(l.Field.Root,{children:[(0,t.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Checklist Category"}),(0,t.jsxs)("select",{value:e.checklistCategory,onChange:e=>M(r,"checklistCategory",e.target.value),style:{backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",padding:"10px 12px",fontSize:"14px",width:"100%",color:"#111827",fontWeight:"500"},children:[(0,t.jsx)("option",{value:"",children:"Select category (optional)"}),X.map(e=>(0,t.jsx)("option",{value:e,children:e},e))]})]}),(0,t.jsxs)(l.Field.Root,{children:[(0,t.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Requirements * (Select individual requirements)"}),E?0===N.length?(0,t.jsx)(i.Box,{bg:"gray.50",border:"1px",borderColor:"gray.300",borderRadius:"lg",p:"4",children:(0,t.jsx)(u.Typography,{fontSize:"sm",color:"gray.700",fontWeight:"500",textAlign:"center",children:"No requirements configured for this entity type yet"})}):(0,t.jsx)(i.Box,{bg:"white",border:"1px",borderColor:"gray.300",borderRadius:"md",p:"3",maxH:"300px",overflowY:"auto",children:(a={},N.forEach(e=>{let t=e.type||"Other";a[t]||(a[t]=[]),a[t].push(e)}),(0,t.jsx)(s.VStack,{align:"stretch",gap:"4",children:Object.entries(a).map(([o,a])=>(0,t.jsxs)(i.Box,{border:"1px",borderColor:"gray.200",borderRadius:"md",p:"3",bg:"gray.50",children:[(0,t.jsx)(u.Typography,{fontSize:"sm",fontWeight:"bold",color:"gray.900",mb:"2",children:o}),(0,t.jsx)(s.VStack,{align:"stretch",gap:"2",children:a.map(i=>(0,t.jsxs)(n.HStack,{gap:"2",align:"start",children:[(0,t.jsx)(p.Checkbox.Root,{checked:e.requirementIds.includes(i.id),onCheckedChange:()=>{var e;return e=i.id,void S(t=>t.map((t,i)=>{let s,n;if(i!==r)return t;let o=N.find(t=>t.id===e);return o?(t.requirementIds.includes(e)?(s=t.requirementIds.filter(t=>t!==e),n=0===N.filter(t=>t.type===o.type&&t.id!==e&&s.includes(t.id)).length?t.requirementTypes.filter(e=>e!==o.type):t.requirementTypes):(s=[...t.requirementIds,e],n=t.requirementTypes.includes(o.type)?t.requirementTypes:[...t.requirementTypes,o.type]),{...t,requirementIds:s,requirementTypes:n}):t}))},children:(0,t.jsx)(p.Checkbox.Control,{children:(0,t.jsx)(p.Checkbox.Indicator,{})})}),(0,t.jsxs)(s.VStack,{align:"start",gap:"0",flex:"1",children:[(0,t.jsx)(u.Typography,{fontSize:"sm",fontWeight:"600",color:"gray.900",children:i.displayName}),i.description&&(0,t.jsx)(u.Typography,{fontSize:"xs",color:"gray.700",fontWeight:"500",style:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:i.description})]})]},i.id))})]},o))}))}):(0,t.jsx)(i.Box,{bg:"gray.50",border:"1px",borderColor:"gray.300",borderRadius:"lg",p:"4",children:(0,t.jsx)(u.Typography,{fontSize:"sm",color:"gray.700",fontWeight:"500",textAlign:"center",children:"Loading entity requirements..."})}),e.requirementIds.length>0&&(0,t.jsxs)(u.Typography,{fontSize:"xs",color:"gray.700",fontWeight:"600",mt:"2",children:[e.requirementIds.length," requirement",1!==e.requirementIds.length?"s":""," selected"]})]}),(0,t.jsxs)(l.Field.Root,{children:[(0,t.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Requirement Types (Auto-selected based on requirements above)"}),(0,t.jsx)(i.Box,{bg:"gray.50",border:"1px",borderColor:"gray.300",borderRadius:"lg",p:"4",children:e.requirementTypes.length>0?(0,t.jsx)(n.HStack,{gap:"2",flexWrap:"wrap",children:e.requirementTypes.map(e=>(0,t.jsx)(m.Tag,{variant:"warning",style:{backgroundColor:"#F59E0B",color:"#FFFFFF",fontWeight:"600",padding:"4px 12px",fontSize:"12px"},children:e},e))}):(0,t.jsx)(u.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"500",children:"Select requirements above to see requirement types"})})]}),(0,t.jsxs)(n.HStack,{justify:"space-between",align:"center",children:[(0,t.jsx)(u.Typography,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Step Active"}),(0,t.jsx)(h.Button,{onClick:()=>M(r,"isActive",!e.isActive),variant:e.isActive?"primary":"secondary",size:"sm",bg:e.isActive?"#22C55E":"white",border:e.isActive?"none":"1px solid",borderColor:e.isActive?"transparent":"gray.300",fontWeight:"600",_hover:e.isActive?{bg:"#16A34A"}:{bg:"gray.50"},children:(0,t.jsx)(u.Typography,{as:"span",color:e.isActive?"white":"gray.700",fontWeight:"600",children:e.isActive?"Active":"Inactive"})})]})]})},r)})]})}),(0,t.jsxs)(a.Flex,{gap:"3",justify:"start",pt:"3",children:[(0,t.jsxs)(h.Button,{onClick:G,variant:"primary",size:"md",disabled:O||P,bg:"#FF6B35",fontWeight:"600",_hover:{bg:"#E55A2B"},_active:{bg:"#CC4A1F"},children:[(0,t.jsx)(y.IconWrapper,{children:(0,t.jsx)(f.FiSettings,{size:16})}),(0,t.jsx)(u.Typography,{as:"span",color:"white",fontWeight:"600",children:P?"Updating...":"Update"})]}),(0,t.jsxs)(h.Button,{onClick:()=>{C.push("/wizard-configurations")},variant:"secondary",size:"md",disabled:P||O,bg:"white",border:"1px solid",borderColor:"gray.300",fontWeight:"600",_hover:{bg:"gray.50",borderColor:"gray.400"},children:[(0,t.jsx)(y.IconWrapper,{children:(0,t.jsx)(f.FiX,{size:16})}),(0,t.jsx)(u.Typography,{as:"span",color:"gray.700",fontWeight:"600",children:"Cancel"})]})]})]})})]})]})}e.s(["default",()=>C])},661405,e=>{e.v(t=>Promise.all(["static/chunks/f478692b842c0428.js"].map(t=>e.l(t))).then(()=>t(819252)))}]);

//# debugId=f532f317-93f2-c5dc-a870-d62216a226a8
//# sourceMappingURL=ca74bee5bb124e56.js.map