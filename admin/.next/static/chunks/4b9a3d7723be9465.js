;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c35a5b00-8139-ce6e-f552-6143c84888e1")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},343827,e=>{"use strict";var t=e.i(843476),r=e.i(618566),n=e.i(526732);e.i(643983);var i=e.i(307167),a=e.i(44999),o=e.i(843011),s=e.i(361035),u=e.i(761869),l=e.i(299753),c=e.i(192199),p=e.i(617029);function d(){let e=(0,r.useRouter)(),{data:d}=(0,n.useSession)(),{condensed:f,setCondensed:h}=(0,p.useSidebar)(),m=d?.user?.name||"Admin",g=d?.user?.email||"admin@mukuru.com";return m.split(" ")[0]?.toLowerCase(),(0,t.jsx)(o.Box,{position:"fixed",top:"0",left:f?"72px":"280px",right:"0",height:"90px",bg:"white",zIndex:"999",px:"6",py:"4",pl:"6",transition:"left 0.3s ease, width 0.3s ease",className:"portal-header",borderBottom:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",children:(0,t.jsxs)(u.Flex,{justify:"space-between",align:"center",width:"full",height:"full",children:[(0,t.jsx)(s.HStack,{gap:"4",align:"center",children:(0,t.jsx)(l.Button,{variant:"ghost",onClick:()=>h(!f),p:"2",borderRadius:"full",minW:"40px",h:"40px",bg:"gray.100",_hover:{bg:"gray.200"},"aria-label":"Toggle sidebar",border:"none",_focus:{boxShadow:"none",outline:"none"},_active:{bg:"gray.200"},children:(0,t.jsx)(a.IconWrapper,{children:(0,t.jsx)(c.FiArrowLeft,{size:20,color:"#F05423"})})})}),(0,t.jsx)(s.HStack,{gap:"4",align:"center",children:(0,t.jsx)(i.ProfileMenu,{user:m,menuItems:[{id:0,label:g,value:"email"},{id:1,label:"My Profile",value:"profile",onSelect:()=>e.push("/profile")},{id:2,label:"Settings",value:"settings",onSelect:()=>e.push("/settings")},{id:3,label:"Log Out",value:"logout",onSelect:()=>e.push("/api/auth/logout")}]})})]})})}e.s(["default",()=>d])},998183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return u},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return s}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});function a(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function s(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,o(e));else t.set(r,o(n));return t}function u(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},195057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return s},formatWithValidation:function(){return l},urlObjectKeys:function(){return u}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let a=e.r(190809)._(e.r(998183)),o=/https?|ftp|gopher|file/;function s(e){let{auth:t,hostname:r}=e,n=e.protocol||"",i=e.pathname||"",s=e.hash||"",u=e.query||"",l=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?l=t+e.host:r&&(l=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(l+=":"+e.port)),u&&"object"==typeof u&&(u=String(a.urlQueryToSearchParams(u)));let c=e.search||u&&`?${u}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||o.test(n))&&!1!==l?(l="//"+(l||""),i&&"/"!==i[0]&&(i="/"+i)):l||(l=""),s&&"#"!==s[0]&&(s="#"+s),c&&"?"!==c[0]&&(c="?"+c),i=i.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${n}${l}${i}${c}${s}`}let u=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function l(e){return s(e)}},818581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return i}});let n=e.r(271645);function i(e,t){let r=(0,n.useRef)(null),i=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=i.current;t&&(i.current=null,t())}else e&&(r.current=a(e,n)),t&&(i.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},718967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return S},MissingStaticPage:function(){return v},NormalizeError:function(){return w},PageNotFoundError:function(){return b},SP:function(){return m},ST:function(){return g},WEB_VITALS:function(){return a},execOnce:function(){return o},getDisplayName:function(){return p},getLocationOrigin:function(){return l},getURL:function(){return c},isAbsoluteUrl:function(){return u},isResSent:function(){return d},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return k}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,u=e=>s.test(e);function l(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=l();return e.substring(t.length)}function p(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&d(r))return n;if(!n)throw Object.defineProperty(Error(`"${p(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let m="undefined"!=typeof performance,g=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class w extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class S extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function k(e){return JSON.stringify({message:e.message,stack:e.stack})}},573668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let n=e.r(718967),i=e.r(652817);function a(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,i.hasBasePath)(r.pathname)}catch(e){return!1}}},284508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},522016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return y},useLinkStatus:function(){return b}};for(var i in n)Object.defineProperty(r,i,{enumerable:!0,get:n[i]});let a=e.r(190809),o=e.r(843476),s=a._(e.r(271645)),u=e.r(195057),l=e.r(8372),c=e.r(818581),p=e.r(718967),d=e.r(405550);e.r(233525);let f=e.r(769688),h=e.r(573668),m=e.r(509396);function g(e){return"string"==typeof e?e:(0,u.formatUrl)(e)}function y(t){var r;let n,i,a,[u,y]=(0,s.useOptimistic)(f.IDLE_LINK_STATUS),b=(0,s.useRef)(null),{href:v,as:S,children:k,prefetch:C=null,passHref:I,replace:E,shallow:P,scroll:R,onClick:T,onMouseEnter:x,onTouchStart:O,legacyBehavior:j=!1,onNavigate:N,ref:A,unstable_dynamicOnHover:W,...D}=t;n=k,j&&("string"==typeof n||"number"==typeof n)&&(n=(0,o.jsx)("a",{children:n}));let L=s.default.useContext(l.AppRouterContext),$=!1!==C,U=!1!==C?null===(r=C)||"auto"===r?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:_,as:M}=s.default.useMemo(()=>{let e=g(v);return{href:e,as:S?g(S):e}},[v,S]);if(j){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});i=s.default.Children.only(n)}let F=j?i&&"object"==typeof i&&i.ref:A,q=s.default.useCallback(e=>(null!==L&&(b.current=(0,f.mountLinkInstance)(e,_,L,U,$,y)),()=>{b.current&&((0,f.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,f.unmountPrefetchableInstance)(e)}),[$,_,L,U,y]),z={ref:(0,c.useMergedRef)(q,F),onClick(t){j||"function"!=typeof T||T(t),j&&i.props&&"function"==typeof i.props.onClick&&i.props.onClick(t),!L||t.defaultPrevented||function(t,r,n,i,a,o,u){if("undefined"!=typeof window){let l,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((l=t.currentTarget.getAttribute("target"))&&"_self"!==l||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,h.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),u){let e=!1;if(u({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:p}=e.r(699781);s.default.startTransition(()=>{p(n||r,a?"replace":"push",o??!0,i.current)})}}(t,_,M,b,E,R,N)},onMouseEnter(e){j||"function"!=typeof x||x(e),j&&i.props&&"function"==typeof i.props.onMouseEnter&&i.props.onMouseEnter(e),L&&$&&(0,f.onNavigationIntent)(e.currentTarget,!0===W)},onTouchStart:function(e){j||"function"!=typeof O||O(e),j&&i.props&&"function"==typeof i.props.onTouchStart&&i.props.onTouchStart(e),L&&$&&(0,f.onNavigationIntent)(e.currentTarget,!0===W)}};return(0,p.isAbsoluteUrl)(M)?z.href=M:j&&!I&&("a"!==i.type||"href"in i.props)||(z.href=(0,d.addBasePath)(M)),a=j?s.default.cloneElement(i,z):(0,o.jsx)("a",{...D,...z,children:n}),(0,o.jsx)(w.Provider,{value:u,children:a})}e.r(284508);let w=(0,s.createContext)(f.IDLE_LINK_STATUS),b=()=>(0,s.useContext)(w);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},618566,(e,t,r)=>{t.exports=e.r(976562)},862873,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(618566);e.i(643983);var i=e.i(355569),a=e.i(111977),o=e.i(134590),s=e.i(179243),u=e.i(119192),l=e.i(307124),c=e.i(857692),p=e.i(194741),d=e.i(489312),f=e.i(357441),h=e.i(843011),m=e.i(617029);function g(){let e=(0,n.usePathname)(),g=(0,n.useRouter)(),{condensed:y,setCondensed:w}=(0,m.useSidebar)(),[b,v]=(0,r.useState)("dashboard");(0,r.useEffect)(()=>{"/dashboard"===e?v("dashboard"):e?.startsWith("/work-queue")?v("work-queue"):e?.startsWith("/applications")?v("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?v("reviews"):e?.startsWith("/documents")?v("documents"):e?.startsWith("/requirements")?v("requirements"):e?.startsWith("/entity-types")?v("entity-types"):e?.startsWith("/checklists")?v("checklists"):e?.startsWith("/wizard-configurations")?v("wizard-configurations"):e?.startsWith("/rules-and-permissions")?v("rules-and-permissions"):e?.startsWith("/audit-log")?v("audit-log"):e?.startsWith("/messages")?v("messages"):e?.startsWith("/notifications")?v("notifications"):e?.startsWith("/data-migration")?v("data-migration"):e?.startsWith("/refreshes")?v("refreshes"):e?.startsWith("/reports")?v("reports"):e?.startsWith("/profile")?v("profile"):e?.startsWith("/settings")&&v("settings")},[e]);let S=(0,r.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(a.ProductIcon,{width:"20",height:"20"}),onClick:()=>{v("dashboard"),g.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,t.jsx)(d.FilterIcon,{width:"20",height:"20"}),onClick:()=>{v("work-queue"),g.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,t.jsx)(c.AppIcon,{width:"20",height:"20"}),onClick:()=>{v("applications"),g.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,t.jsx)(s.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reviews"),g.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{v("reviews"),g.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{v("reviews"),g.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,t.jsx)(p.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{v("documents"),g.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,t.jsx)(u.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{v("configuration"),g.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{v("configuration"),g.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{v("configuration"),g.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{v("configuration"),g.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{v("configuration"),g.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{v("configuration"),g.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,t.jsx)(f.WarningIcon,{width:"20",height:"20"}),onClick:()=>{v("system"),g.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{v("system"),g.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{v("system"),g.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{v("system"),g.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{v("system"),g.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{v("system"),g.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,t.jsx)(s.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reports"),g.push("/reports")}},{id:"profile",label:"Profile",icon:(0,t.jsx)(o.UserIcon,{width:"20",height:"20"}),onClick:()=>{v("profile"),g.push("/profile")}}],[g]),k={id:"help-centre",label:"Help Centre",icon:(0,t.jsx)(l.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,t.jsx)(h.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:y?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,t.jsx)(i.PortalNavigationSidebar,{navigationItems:S,helpCentreItem:k,activeItemId:b,condensed:y,onToggleCollapse:w,onLogoClick:()=>{v("dashboard"),g.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>g])},297630,e=>{"use strict";let{withContext:t,PropsProvider:r}=(0,e.i(552887).createRecipeContext)({key:"container"}),n=t("div");e.s(["Container",()=>n])},891825,e=>{"use strict";var t=e.i(843476),r=e.i(271645),n=e.i(441305),i=e.i(95966),a=e.i(920755);let o=(0,r.forwardRef)(function(e,r){var o,s,u;let{columns:l,minChildWidth:c,...p}=e,d=(0,n.useChakraContext)(),f=c?(o=c,s=d,(0,i.mapObject)(o,e=>{let t=s.tokens.getVar(`sizes.${e}`,"number"==typeof e?`${e}px`:e);return null===e?null:`repeat(auto-fit, minmax(${t}, 1fr))`})):(u=l,(0,i.mapObject)(u,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`));return(0,t.jsx)(a.Grid,{ref:r,templateColumns:f,...p})});e.s(["SimpleGrid",()=>o])},571798,e=>{"use strict";var t=e.i(37410);let{withContext:r,PropsProvider:n}=(0,e.i(552887).createRecipeContext)({key:"textarea"}),i=r(t.Field.Textarea);e.s(["Textarea",()=>i])},778497,e=>{"use strict";var t=e.i(967079);let r=new class{isDevelopment=!1;isProduction=!0;debug(e,...t){this.isDevelopment&&console.debug(`[DEBUG] ${e}`,...t)}info(e,...r){this.isDevelopment&&console.info(`[INFO] ${e}`,...r),this.isProduction&&(0,t.addBreadcrumb)(e,"info","info",{args:r})}warn(e,r){console.warn(`[WARN] ${e}`),this.isProduction&&(0,t.reportWarning)(e,{tags:r?.tags,extra:r?.extra})}error(e,r,n){let i=r||(e instanceof Error?e.message:String(e));console.error(`[ERROR] ${i}`,e);let a=n?.level==="warn"?"warning":n?.level==="error"?"error":n?.level==="info"?"info":"error";(0,t.reportError)(e,{tags:n?.tags,extra:n?.extra,level:a})}log(e,r,n="info"){if(this.isDevelopment&&console.log(`[${n.toUpperCase()}] ${e}`,r||""),this.isProduction&&"debug"!==n){let i="warn"===n?"warning":"error"===n?"error":"info";(0,t.addBreadcrumb)(e,"log",i,r)}}};e.s(["logger",0,r])},817684,e=>{"use strict";function t(e){return{id:e.workItemNumber||e.id,workItemId:e.id,legalName:e.applicantName,entityType:e.entityType,country:e.country,status:({New:"SUBMITTED",Assigned:"IN PROGRESS",InProgress:"IN PROGRESS",PendingApproval:"RISK REVIEW",Approved:"COMPLETE",Completed:"COMPLETE",Declined:"DECLINED",Cancelled:"DECLINED",DueForRefresh:"IN PROGRESS"})[e.status]||"IN PROGRESS",backendStatus:e.status,created:e.createdAt,updated:e.updatedAt||e.createdAt,submittedBy:e.assignedToName||e.assignedTo||"Unknown",riskScore:({Low:25,Medium:50,High:75,Critical:95})[e.riskLevel]||50,workItemNumber:e.workItemNumber,applicationId:e.applicationId,priority:e.priority,riskLevel:e.riskLevel,assignedTo:e.assignedTo,assignedToName:e.assignedToName,assignedAt:e.assignedAt,requiresApproval:e.requiresApproval,approvedBy:e.approvedBy,approvedByName:e.approvedByName,approvedAt:e.approvedAt,rejectionReason:e.rejectionReason,dueDate:e.dueDate,isOverdue:e.isOverdue,nextRefreshDate:e.nextRefreshDate,lastRefreshedAt:e.lastRefreshedAt,refreshCount:e.refreshCount}}function r(e){return e.map(t)}e.s(["mapWorkItemToApplication",()=>t,"mapWorkItemsToApplications",()=>r])},670357,592622,82349,576699,571408,e=>{"use strict";async function t(e=1,r=20,n,i){let a=new URLSearchParams({page:e.toString(),pageSize:r.toString()});n&&a.append("searchTerm",n),i&&a.append("status",i);let o=await fetch(`/api/applications?${a.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!o.ok)throw Error(`Failed to fetch applications: ${o.status} ${o.statusText}`);let s=await o.json();return{items:s.items||s.data||[],totalCount:s.total_count||s.totalCount||s.total||0,page:s.page||e,pageSize:s.page_size||s.pageSize||r}}async function r(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/entity-type-distribution?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch entity type distribution: ${r.status} ${r.statusText}`);let n=await r.json();return Array.isArray(n)?n:n.items||n.data||[]}async function n(e=7,t){let r=new URLSearchParams({days:e.toString()});t&&r.append("partnerId",t);let i=await fetch(`/api/trends?${r.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!i.ok)throw Error(`Failed to fetch application trends: ${i.status} ${i.statusText}`);let a=await i.json();return Array.isArray(a)?a:a.items||a.data||[]}async function i(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/dashboard?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch dashboard projection: ${r.status} ${r.statusText}`);return r.json()}async function a(){let e={"Content-Type":"application/json"};try{let t=await fetch("/api/auth/session"),r=await t.json();r?.user?.email&&(e["X-User-Email"]=r.user.email),r?.user?.name&&(e["X-User-Name"]=r.user.name),r?.user?.role&&(e["X-User-Role"]=r.user.role)}catch(e){}return e}async function o(e,t){let r=e;e.startsWith("?")?r=e:e.startsWith("/")||(r=`/${e}`);let n=`/api/workqueue${r}`,i=await a(),o=await fetch(n,{...t,headers:{...i,...t?.headers}});if(!o.ok){let e=`Work Queue API request failed: ${o.status} ${o.statusText}`;try{let t=await o.json();e=t.message||t.error||e}catch{}throw Error(e)}let s=await o.text();return s&&""!==s.trim()?JSON.parse(s):null}async function s(e){let t=new URLSearchParams;e?.status&&"ALL"!==e.status&&t.append("status",e.status),e?.searchTerm&&t.append("searchTerm",e.searchTerm),e?.country&&t.append("country",e.country),e?.riskLevel&&t.append("riskLevel",e.riskLevel);let r=e?.page||1,n=e?.pageSize||100;t.append("page",r.toString()),t.append("pageSize",n.toString());let i=await o(`?${t.toString()}`);return{items:i.items||i.data||[],totalCount:i.totalCount||i.total_count||0,page:r,pageSize:n}}async function u(e){try{return await o(`/${e}`)}catch(e){if(e instanceof Error&&e.message.includes("404"))return null;throw e}}async function l(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),n=await o(`/my-items?${r.toString()}`);return{items:n.items||n.data||[],totalCount:n.totalCount||n.total_count||0,page:e,pageSize:t}}async function c(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),n=await o(`/pending-approvals?${r.toString()}`);return{items:n.items||n.data||[],totalCount:n.totalCount||n.total_count||0,page:e,pageSize:t}}async function p(e=1,t=100,r){let n=new URLSearchParams({page:e.toString(),pageSize:t.toString()});return r&&n.append("asOfDate",r.toISOString()),await o(`/due-for-refresh?${n.toString()}`)}async function d(e,t,r){let n;if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))n=t;else{let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;let r=Math.abs(e).toString(16).padStart(32,"0");n=`${r.substring(0,8)}-${r.substring(8,12)}-${r.substring(12,16)}-${r.substring(16,20)}-${r.substring(20,32)}`}await o(`/${e}/assign`,{method:"POST",body:JSON.stringify({AssignedToUserId:n,AssignedToUserName:r})})}async function f(e){await o(`/${e}/unassign`,{method:"POST"})}async function h(e){await o(`/${e}/start-review`,{method:"POST"})}async function m(e,t){await o(`/${e}/submit-for-approval`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function g(e,t){await o(`/${e}/approve`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function y(e,t){await o(`/${e}/decline`,{method:"POST",body:JSON.stringify({reason:t})})}async function w(e,t){await o(`/${e}/complete`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function b(e){await o(`/${e}/mark-for-refresh`,{method:"POST"})}async function v(e,t){await o(`/${e}/comments`,{method:"POST",body:JSON.stringify({text:t})})}async function S(e){return await o(`/${e}/comments`)}async function k(e){return await o(`/${e}/history`)}function C(e){let t=e.businessLegalName||`${e.applicantFirstName} ${e.applicantLastName}`.trim()||"Unknown",r=e.businessCountryOfRegistration||e.applicantCountry||"Unknown",n=e.type||(e.businessLegalName?"Business":"Individual")||"Unknown",i=e.assignedToName||e.assignedTo||"Unassigned",a=e.submittedAt||e.createdAt,o=Math.round(e.progressPercentage||0);return{id:e.caseId||e.id,companyName:t,entityType:n,status:({Draft:"IN_PROGRESS",InProgress:"IN_PROGRESS",PendingReview:"RISK_REVIEW",Submitted:"SUBMITTED",Approved:"COMPLETE",Rejected:"DECLINED",Cancelled:"DECLINED"})[e.status]||"IN_PROGRESS",submittedDate:a,assignedTo:i,riskLevel:({Low:"LOW",MediumLow:"LOW",Medium:"MEDIUM",MediumHigh:"HIGH",High:"HIGH"})[e.riskLevel]||"MEDIUM",country:r,progress:o}}e.s(["addComment",()=>v,"approveWorkItem",()=>g,"assignWorkItem",()=>d,"completeWorkItem",()=>w,"declineWorkItem",()=>y,"getItemsDueForRefresh",()=>p,"getMyWorkItems",()=>l,"getPendingApprovals",()=>c,"getWorkItemById",()=>u,"getWorkItemComments",()=>S,"getWorkItemHistory",()=>k,"getWorkItems",()=>s,"markForRefresh",()=>b,"startReview",()=>h,"submitForApproval",()=>m,"unassignWorkItem",()=>f],592622);var I=e.i(817684);async function E(e=1,r=20,n,i){let a=await t(e,r,n,i);return{items:a.items.map(C),totalCount:a.totalCount,page:a.page,pageSize:a.pageSize}}async function P(t){let r=await E(1,1e4,t?.search,t?.status),{escapeCsvField:n,createCsvBlob:i}=await e.A(535485);return i(["Application ID","Company Name","Entity Type","Country","Status","Risk Level","Assigned To","Progress","Submitted Date"],r.items.map(e=>[n(e.id),n(e.companyName),n(e.entityType),n(e.country),n(e.status),n(e.riskLevel),n(e.assignedTo),n(`${e.progress}%`),n(new Date(e.submittedDate).toLocaleDateString())]))}async function R(e){let t=await i(e);return{totalApplications:t.cases.totalCases,pendingReview:t.cases.pendingReviewCases,riskReview:t.risk.casesRequiringManualReview,completed:t.cases.completedCases,incomplete:t.cases.activeCases-t.cases.pendingReviewCases,declined:t.cases.rejectedCases,avgProcessingTime:Number(t.performance.averageCompletionTimeHours/24),successRate:Number(t.performance.completionRate)}}async function T(e){return(await r(e)).map(e=>({type:e.name,count:e.value}))}async function x(e=7,t){return n(e,t)}async function O(e){return i(e)}function j(e){return({SUBMITTED:"New","IN PROGRESS":"InProgress","RISK REVIEW":"PendingApproval",COMPLETE:"Completed",DECLINED:"Declined"})[e]||e}async function N(e){let t=e?{...e,status:e.status&&"ALL"!==e.status?j(e.status):void 0}:void 0,r=await s(t);return{items:(0,I.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function A(e=1,t=20){let r=await l(e,t);return{items:(0,I.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function W(e=1,t=20){return c(e,t)}async function D(e=1,t=100,r){return p(e,t,r)}async function L(e,t,r){if(!e)throw Error("Work item ID is required");if(!t)throw Error("User ID is required");if(!r)throw Error("User name is required");await d(e,t,r)}async function $(e){if(!e)throw Error("Work item ID is required");await f(e)}async function U(e){if(!e)throw Error("Work item ID is required");await h(e)}async function _(e,t){if(!e)throw Error("Work item ID is required");await m(e,t)}async function M(e,t){if(!e)throw Error("Work item ID is required");await g(e,t)}async function F(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Rejection reason is required");await y(e,t)}async function q(e,t){if(!e)throw Error("Work item ID is required");await w(e,t)}async function z(e){if(!e)throw Error("Work item ID is required");await b(e)}async function B(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Comment text is required");await v(e,t)}async function G(e){if(!e)throw Error("Work item ID is required");return S(e)}async function H(e){if(!e)throw Error("Work item ID is required");return k(e)}async function K(t){let r=t?{...t,status:t.status&&"ALL"!==t.status?j(t.status):void 0}:void 0,n=await s({...r,page:1,pageSize:1e4}),{escapeCsvField:i,createCsvBlob:a}=await e.A(535485),{mapWorkItemToApplication:o}=await e.A(8947);return a(["Application ID","Work Item Number","Legal Name","Entity Type","Country","Status","Priority","Risk Level","Assigned To","Created Date","Updated Date"],n.items.map(e=>{let t=o(e);return[i(t.id),i(e.workItemNumber),i(t.legalName),i(t.entityType),i(t.country),i(t.status),i(e.priority),i(e.riskLevel),i(e.assignedToName||e.assignedTo),i(new Date(t.created).toLocaleDateString()),i(new Date(t.updated).toLocaleDateString())]}))}e.s(["exportApplications",()=>P,"fetchApplications",()=>E],82349),e.s(["fetchApplicationTrends",()=>x,"fetchDashboardProjection",()=>O,"fetchDashboardStats",()=>R,"fetchEntityTypeDistribution",()=>T],576699),e.s(["addCommentUseCase",()=>B,"approveWorkItemUseCase",()=>M,"assignWorkItemUseCase",()=>L,"completeWorkItemUseCase",()=>q,"declineWorkItemUseCase",()=>F,"exportWorkItems",()=>K,"fetchItemsDueForRefresh",()=>D,"fetchMyWorkItems",()=>A,"fetchPendingApprovals",()=>W,"fetchWorkItemComments",()=>G,"fetchWorkItemHistory",()=>H,"fetchWorkItems",()=>N,"markForRefreshUseCase",()=>z,"startReviewUseCase",()=>U,"submitForApprovalUseCase",()=>_,"unassignWorkItemUseCase",()=>$],571408),e.s([],670357)},535485,e=>{e.v(t=>Promise.all(["static/chunks/357d3a57e18aad09.js"].map(t=>e.l(t))).then(()=>t(332915)))},8947,e=>{e.v(e=>Promise.resolve().then(()=>e(817684)))}]);

//# debugId=c35a5b00-8139-ce6e-f552-6143c84888e1
//# sourceMappingURL=e22494d3b3dfd746.js.map