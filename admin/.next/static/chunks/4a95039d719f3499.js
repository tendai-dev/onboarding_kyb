;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c342f8a5-6690-5afd-a95b-4c0f1ef41232")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,640086,e=>{"use strict";var r=e.i(843476),i=e.i(843011),o=e.i(297630),s=e.i(53545),t=e.i(361035),a=e.i(761869),l=e.i(300713),n=e.i(571798),c=e.i(857557),d=e.i(891825),p=e.i(470639),h=e.i(152602);e.i(643983);var x=e.i(825402),m=e.i(554646),u=e.i(191348),g=e.i(613056),b=e.i(44999),y=e.i(927561),v=e.i(778528),f=e.i(192199),j=e.i(862873),w=e.i(271645);let F=new class{async getAuthHeaders(){let e={"Content-Type":"application/json"};try{let r=await fetch("/api/auth/session"),i=await r.json();i?.user?.email&&(e["X-User-Email"]=i.user.email),i?.user?.name&&(e["X-User-Name"]=i.user.name)}catch(e){console.warn("Failed to get session:",e)}return e}async request(e,r){let i=`/api/rules-and-permissions${e}`,o=await this.getAuthHeaders();try{let e=new Promise((e,r)=>{setTimeout(()=>r(Error("Request timeout")),1e4)}),s=fetch(i,{...r,headers:{...o,...r?.headers}}),t=await Promise.race([s,e]);if(!t.ok){let e=await t.text(),r=`Rules and Permissions API request failed: ${t.status} ${t.statusText}`;try{let i=JSON.parse(e);i.message?r=i.message:i.error&&(r=i.error)}catch{e&&e.trim().length>0&&(r=e.length>200?e.substring(0,200)+"...":e)}throw Error(r)}if(204===t.status)return null;return t.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Entity Configuration service");throw e}}async getAllUsers(e=!0){let r=new URLSearchParams;e&&r.append("includePermissions","true"),r.append("page","1"),r.append("pageSize","1000");let i=r.toString(),o=await this.request(`/users${i?`?${i}`:""}`);return o&&o.users&&Array.isArray(o.users)?o.users.map(e=>({id:e.id||e.Id,email:e.email||e.Email||"",name:e.name||e.Name||e.fullName||"",firstLoginAt:e.firstLoginAt||e.firstLogin||e.lastLogin||"",lastLoginAt:e.lastLoginAt||e.lastLogin||"",createdAt:e.createdAt||e.CreatedAt||"",permissions:(e.permissions||e.Permissions||[]).map(e=>({id:e.id||e.Id||"",permissionName:e.permissionName||e.PermissionName||e.permission_name||"",resource:e.resource||e.Resource||void 0,description:e.description||e.Description||void 0,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",createdBy:e.createdBy||e.CreatedBy||e.created_by||void 0})),roles:(e.roles||[]).map(e=>({id:"",roleId:"",roleName:e,roleDisplayName:e,isActive:!0,createdAt:""}))})):Array.isArray(o)?o.map(e=>({id:e.id||e.Id||"",email:e.email||e.Email||"",name:e.name||e.Name||e.fullName||"",firstLoginAt:e.firstLoginAt||e.firstLogin||e.first_login_at||e.first_login||"",lastLoginAt:e.lastLoginAt||e.lastLogin||e.last_login_at||e.last_login||"",createdAt:e.createdAt||e.CreatedAt||e.created_at||"",permissions:(e.permissions||e.Permissions||[]).map(e=>({id:e.id||e.Id||"",permissionName:e.permissionName||e.PermissionName||e.permission_name||"",resource:e.resource||e.Resource||void 0,description:e.description||e.Description||void 0,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",createdBy:e.createdBy||e.CreatedBy||e.created_by||void 0})),roles:(e.roles||e.Roles||[]).map(e=>({id:e.id||e.Id||"",roleId:e.roleId||e.RoleId||e.role_id||"",roleName:e.roleName||e.RoleName||e.role_name||"",roleDisplayName:e.roleDisplayName||e.RoleDisplayName||e.role_display_name||e.roleName||"",isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||""}))})):[]}async getUserByEmail(e){try{return await this.request(`/users/by-email/${encodeURIComponent(e)}`)}catch(e){if(e instanceof Error&&e.message.includes("404"))return null;throw e}}async createOrUpdateUser(e){return this.request("/users",{method:"POST",body:JSON.stringify(e)})}async grantPermission(e,r){return this.request(`/users/${e}/permissions`,{method:"POST",body:JSON.stringify(r)})}async revokePermission(e){return this.request(`/users/permissions/${e}`,{method:"DELETE"})}async getAllRoles(e=!0){let r=new URLSearchParams;e&&r.append("includePermissions","true");let i=r.toString(),o=await this.request(`/roles${i?`?${i}`:""}`);return o&&o.roles&&Array.isArray(o.roles)?o.roles.map(e=>({id:e.id||e.Id||"",name:e.name||e.Name||"",displayName:e.displayName||e.DisplayName||e.display_name||e.name||e.Name||"",description:e.description||e.Description||e.description||"",isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||new Date().toISOString(),updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||new Date().toISOString(),permissions:(e.permissions||e.Permissions||[]).map(e=>({id:e.id||e.Id||"",permissionName:e.permissionName||e.PermissionName||e.permission_name||"",resource:e.resource||e.Resource||e.resource||void 0,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active}))})):Array.isArray(o)?o.map(e=>({id:e.id||e.Id||"",name:e.name||e.Name||"",displayName:e.displayName||e.DisplayName||e.display_name||e.name||e.Name||"",description:e.description||e.Description||e.description||"",isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||new Date().toISOString(),updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||new Date().toISOString(),permissions:(e.permissions||e.Permissions||[]).map(e=>({id:e.id||e.Id||"",permissionName:e.permissionName||e.PermissionName||e.permission_name||e.permissionName||"",resource:e.resource||e.Resource||e.resource||void 0,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active}))})):[]}async getRoleById(e,r=!0){let i=new URLSearchParams;r&&i.append("includePermissions","true");let o=i.toString();return this.request(`/roles/${e}${o?`?${o}`:""}`)}async createRole(e){return this.request("/roles",{method:"POST",body:JSON.stringify(e)})}async updateRole(e,r){return this.request(`/roles/${e}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRole(e){return this.request(`/roles/${e}`,{method:"DELETE"})}async addPermissionToRole(e,r){return this.request(`/roles/${e}/permissions`,{method:"POST",body:JSON.stringify(r)})}async removePermissionFromRole(e,r){return this.request(`/roles/${e}/permissions/${r}`,{method:"DELETE"})}async assignRoleToUser(e,r){return this.request(`/users/${e}/roles`,{method:"POST",body:JSON.stringify({roleId:r})})}async removeRoleFromUser(e,r){return this.request(`/users/${e}/roles/${r}`,{method:"DELETE"})}};var S=e.i(178849);let A=[{category:"View Permissions",permissions:[{value:"view_dashboard",label:"View Dashboard"},{value:"view_reports",label:"View Reports"},{value:"view_applications",label:"View Applications"},{value:"view_work_queue",label:"View Work Queue"},{value:"view_messages",label:"View Messages"},{value:"view_audit_log",label:"View Audit Log"},{value:"view_entity_types",label:"View Entity Types"},{value:"view_users",label:"View Users"},{value:"view_roles",label:"View Roles"},{value:"view_requirements",label:"View Requirements"},{value:"view_checklists",label:"View Checklists"},{value:"view_notifications",label:"View Notifications"},{value:"view_risk_review",label:"View Risk Review"},{value:"view_approvals",label:"View Approvals"},{value:"view_refreshes",label:"View Refreshes"}]},{category:"Create Permissions",permissions:[{value:"create_application",label:"Create Application"},{value:"create_entity_type",label:"Create Entity Type"},{value:"create_requirement",label:"Create Requirement"},{value:"create_role",label:"Create Role"},{value:"create_user",label:"Create User"},{value:"create_checklist",label:"Create Checklist"},{value:"create_notification",label:"Create Notification"}]},{category:"Edit Permissions",permissions:[{value:"edit_application",label:"Edit Application"},{value:"edit_entity_type",label:"Edit Entity Type"},{value:"edit_requirement",label:"Edit Requirement"},{value:"edit_role",label:"Edit Role"},{value:"edit_user",label:"Edit User"},{value:"edit_checklist",label:"Edit Checklist"},{value:"edit_notification",label:"Edit Notification"}]},{category:"Delete Permissions",permissions:[{value:"delete_application",label:"Delete Application"},{value:"delete_entity_type",label:"Delete Entity Type"},{value:"delete_requirement",label:"Delete Requirement"},{value:"delete_role",label:"Delete Role"},{value:"delete_user",label:"Delete User"},{value:"delete_checklist",label:"Delete Checklist"},{value:"delete_notification",label:"Delete Notification"}]},{category:"Action Permissions",permissions:[{value:"approve_application",label:"Approve Application"},{value:"reject_application",label:"Reject Application"},{value:"assign_work_item",label:"Assign Work Item"},{value:"complete_work_item",label:"Complete Work Item"},{value:"grant_permission",label:"Grant Permission"},{value:"revoke_permission",label:"Revoke Permission"},{value:"assign_role",label:"Assign Role"},{value:"remove_role",label:"Remove Role"}]},{category:"Admin Permissions",permissions:[{value:"admin_access",label:"Admin Access"},{value:"manage_users",label:"Manage Users"},{value:"manage_roles",label:"Manage Roles"},{value:"manage_permissions",label:"Manage Permissions"},{value:"manage_configuration",label:"Manage Configuration"},{value:"export_data",label:"Export Data"},{value:"import_data",label:"Import Data"}]}];A.flatMap(e=>e.permissions);let k=[{value:"applications",label:"Applications"},{value:"entity_types",label:"Entity Types"},{value:"requirements",label:"Requirements"},{value:"roles",label:"Roles"},{value:"users",label:"Users"},{value:"reports",label:"Reports"},{value:"work_queue",label:"Work Queue"},{value:"messages",label:"Messages"},{value:"audit_log",label:"Audit Log"},{value:"checklists",label:"Checklists"},{value:"notifications",label:"Notifications"},{value:"risk_review",label:"Risk Review"},{value:"approvals",label:"Approvals"}];function C(){let[e,C]=(0,w.useState)("roles"),[E,R]=(0,w.useState)([]),[B,z]=(0,w.useState)(!0),[_,N]=(0,w.useState)(null),[W,T]=(0,w.useState)(""),[P,I]=(0,w.useState)(!1),[D,L]=(0,w.useState)(!1),[H,$]=(0,w.useState)(!1),[U,V]=(0,w.useState)({permissionName:"",resource:"",description:""}),[q,O]=(0,w.useState)([]),[Y,M]=(0,w.useState)(!0),[G,X]=(0,w.useState)(null),[J,K]=(0,w.useState)(!1),[Q,Z]=(0,w.useState)(!1),[ee,er]=(0,w.useState)(!1),[ei,eo]=(0,w.useState)({name:"",displayName:"",description:""}),[es,et]=(0,w.useState)({permissionName:"",resource:""}),[ea,el]=(0,w.useState)(new Set),[en,ec]=(0,w.useState)(null);(0,w.useEffect)(()=>{"users"===e?ed():ep()},[e]),(0,w.useEffect)(()=>{ep()},[]);let ed=async()=>{try{z(!0),ec(null);let e=await F.getAllUsers(!0);R(e)}catch(e){ec(e instanceof Error?e.message:"Failed to load users"),console.error("Error loading users:",e)}finally{z(!1)}},ep=async()=>{try{M(!0),ec(null);let e=await F.getAllRoles(!0);O(e)}catch(e){ec(e instanceof Error?e.message:"Failed to load roles"),console.error("Error loading roles:",e)}finally{M(!1)}},eh=async()=>{if(!_||!U.permissionName.trim())return void ec("Please select a user and enter a permission name");try{$(!0),ec(null),S.SweetAlert.loading("Granting...","Please wait while we grant the permission."),await F.grantPermission(_.id,{permissionName:U.permissionName,resource:U.resource||void 0,description:U.description||void 0}),await ed(),S.SweetAlert.close(),await S.SweetAlert.success("Granted!","Permission has been granted successfully."),eF()}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to grant permission";ec(e),console.error("Error granting permission:",r),await S.SweetAlert.error("Grant Failed",e)}finally{$(!1)}},ex=async(e,r)=>{if((await S.SweetAlert.confirm("Revoke Permission",`Are you sure you want to revoke the permission "${r}"?`,"Yes, revoke it!","Cancel","warning")).isConfirmed)try{ec(null),S.SweetAlert.loading("Revoking...","Please wait while we revoke the permission."),await F.revokePermission(e),await ed(),S.SweetAlert.close(),await S.SweetAlert.success("Revoked!","Permission has been revoked successfully.")}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to revoke permission";ec(e),console.error("Error revoking permission:",r),await S.SweetAlert.error("Revoke Failed",e)}},em=async()=>{if(!ei.name.trim()||!ei.displayName.trim())return void ec("Please enter role name and display name");try{ec(null),S.SweetAlert.loading("Creating...","Please wait while we create the role."),await F.createRole({name:ei.name,displayName:ei.displayName,description:ei.description||void 0}),await ep(),S.SweetAlert.close(),await S.SweetAlert.success("Created!","Role has been created successfully."),eS()}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to create role";ec(e),console.error("Error creating role:",r),await S.SweetAlert.error("Create Failed",e)}},eu=async()=>{if(!G||!ei.displayName.trim())return void ec("Please enter a display name");try{ec(null),S.SweetAlert.loading("Updating...","Please wait while we update the role."),await F.updateRole(G.id,{displayName:ei.displayName,description:ei.description||void 0}),await ep(),S.SweetAlert.close(),await S.SweetAlert.success("Updated!","Role has been updated successfully."),eA()}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to update role";ec(e),console.error("Error updating role:",r),await S.SweetAlert.error("Update Failed",e)}},eg=async(e,r)=>{if((await S.SweetAlert.confirm("Delete Role",`Are you sure you want to delete the role "${r}"? This action cannot be undone.`,"Yes, delete it!","Cancel","warning")).isConfirmed)try{ec(null),S.SweetAlert.loading("Deleting...","Please wait while we delete the role."),await F.deleteRole(e),await ep(),S.SweetAlert.close(),await S.SweetAlert.success("Deleted!","Role has been deleted successfully.")}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to delete role";ec(e),console.error("Error deleting role:",r),await S.SweetAlert.error("Delete Failed",e)}},eb=async()=>{if(!G||0===ea.size)return void ec("Please select at least one permission");try{ec(null),S.SweetAlert.loading("Adding...","Please wait while we add the permissions.");let e=Array.from(ea).map(e=>F.addPermissionToRole(G.id,{permissionName:e,resource:es.resource||void 0}));await Promise.all(e),await ep(),S.SweetAlert.close(),await S.SweetAlert.success("Added!",`${ea.size} permission(s) have been added to the role successfully.`),el(new Set),et({permissionName:"",resource:""})}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to add permission";ec(e),console.error("Error adding permission:",r),await S.SweetAlert.error("Add Failed",e)}},ey=e=>{el(r=>{let i=new Set(r);return i.has(e)?i.delete(e):i.add(e),i})},ev=async(e,r,i)=>{if((await S.SweetAlert.confirm("Remove Permission",`Are you sure you want to remove the permission "${i}" from this role?`,"Yes, remove it!","Cancel","warning")).isConfirmed)try{ec(null),S.SweetAlert.loading("Removing...","Please wait while we remove the permission."),await F.removePermissionFromRole(e,r),await ep(),S.SweetAlert.close(),await S.SweetAlert.success("Removed!","Permission has been removed from the role successfully.")}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to remove permission";ec(e),console.error("Error removing permission:",r),await S.SweetAlert.error("Remove Failed",e)}},ef=async e=>{if(_)try{ec(null),S.SweetAlert.loading("Assigning...","Please wait while we assign the role."),await F.assignRoleToUser(_.id,e),await ed(),S.SweetAlert.close(),await S.SweetAlert.success("Assigned!","Role has been assigned to the user successfully."),L(!1)}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to assign role";ec(e),console.error("Error assigning role:",r),await S.SweetAlert.error("Assign Failed",e)}},ej=async(e,r)=>{if((await S.SweetAlert.confirm("Remove Role",`Are you sure you want to remove the role "${r}" from this user?`,"Yes, remove it!","Cancel","warning")).isConfirmed&&_)try{ec(null),S.SweetAlert.loading("Removing...","Please wait while we remove the role."),await F.removeRoleFromUser(_.id,e),await ed(),S.SweetAlert.close(),await S.SweetAlert.success("Removed!","Role has been removed from the user successfully.")}catch(r){S.SweetAlert.close();let e=r instanceof Error?r.message:"Failed to remove role";ec(e),console.error("Error removing role:",r),await S.SweetAlert.error("Remove Failed",e)}},ew=()=>{let e=new Map;return q.forEach(r=>{r.permissions.forEach(r=>{let i=r.resource?`${r.permissionName}::${r.resource}`:r.permissionName;e.has(i)||e.set(i,{permissionName:r.permissionName,resource:r.resource||void 0})})}),Array.from(e.values()).map(e=>{let r=e.resource?`${e.permissionName} (${e.resource})`:e.permissionName;return{value:e.permissionName,label:r,resource:e.resource}}).sort((e,r)=>e.label.localeCompare(r.label))},eF=()=>{I(!1),N(null),V({permissionName:"",resource:"",description:""})},eS=()=>{K(!1),eo({name:"",displayName:"",description:""})},eA=()=>{Z(!1),X(null),eo({name:"",displayName:"",description:""})},ek=()=>{er(!1),X(null),et({permissionName:"",resource:""}),el(new Set)},eC=E.filter(e=>e.email.toLowerCase().includes(W.toLowerCase())||e.name?.toLowerCase().includes(W.toLowerCase())),eE=q.filter(e=>e.name.toLowerCase().includes(W.toLowerCase())||e.displayName.toLowerCase().includes(W.toLowerCase()));return B&&"users"===e?(0,r.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,r.jsx)(j.default,{}),(0,r.jsx)(i.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,r.jsxs)(s.VStack,{gap:"4",children:[(0,r.jsx)(l.Spinner,{size:"xl",color:"orange.500"}),(0,r.jsx)(m.Typography,{color:"gray.600",children:"Loading users and permissions..."})]})})]}):Y&&"roles"===e?(0,r.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,r.jsx)(j.default,{}),(0,r.jsx)(i.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,r.jsxs)(s.VStack,{gap:"4",children:[(0,r.jsx)(l.Spinner,{size:"xl",color:"orange.500"}),(0,r.jsx)(m.Typography,{color:"gray.600",children:"Loading roles..."})]})})]}):(0,r.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,r.jsx)(j.default,{}),(0,r.jsxs)(i.Box,{flex:"1",ml:"240px",children:[(0,r.jsx)(i.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",py:"6",children:(0,r.jsx)(o.Container,{maxW:"8xl",children:(0,r.jsx)(a.Flex,{justify:"space-between",align:"center",children:(0,r.jsxs)(t.HStack,{gap:"3",align:"center",children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiLock,{size:24,color:"#FF6B35"})}),(0,r.jsxs)(s.VStack,{align:"start",gap:"1",children:[(0,r.jsx)(m.Typography,{as:"h1",fontSize:"2xl",fontWeight:"bold",color:"black",children:"Rules and Permissions"}),(0,r.jsx)(m.Typography,{color:"black",fontSize:"md",children:"Manage roles, permissions, and user access"})]})]})})})}),en&&(0,r.jsx)(o.Container,{maxW:"8xl",py:"4",children:(0,r.jsx)(y.AlertBar,{status:"error",title:"Error!",description:en,icon:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiLock,{size:20})})})}),(0,r.jsx)(o.Container,{maxW:"8xl",py:"6",children:(0,r.jsxs)(p.Tabs.Root,{value:e,onValueChange:e=>C(e.value),children:[(0,r.jsxs)(p.Tabs.List,{children:[(0,r.jsx)(p.Tabs.Trigger,{value:"roles",children:"Roles"}),(0,r.jsx)(p.Tabs.Trigger,{value:"users",children:"Users"})]}),(0,r.jsx)(p.Tabs.Content,{value:"roles",children:(0,r.jsxs)(s.VStack,{gap:"4",align:"stretch",mt:"4",children:[(0,r.jsxs)(a.Flex,{justify:"space-between",align:"center",children:[(0,r.jsx)(i.Box,{flex:"1",maxW:"400px",mr:"4",children:(0,r.jsx)(x.Search,{placeholder:"Search roles by name...",onSearchChange:e=>T(e)})}),(0,r.jsxs)(u.Button,{variant:"primary",onClick:()=>{eo({name:"",displayName:"",description:""}),K(!0)},children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiPlus,{size:16})}),"Create Role"]})]}),0===eE.length?(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"8",textAlign:"center",children:(0,r.jsxs)(s.VStack,{gap:"2",children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiShield,{size:32,color:"#A0AEC0"})}),(0,r.jsx)(m.Typography,{color:"black",children:"No roles found"})]})}):(0,r.jsx)(d.SimpleGrid,{columns:{base:1,lg:2},gap:"6",children:eE.map(e=>(0,r.jsx)(i.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"#E5E7EB",p:"6",_hover:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",borderColor:"#F05423"},transition:"all 0.2s",children:(0,r.jsxs)(s.VStack,{align:"stretch",gap:"4",children:[(0,r.jsxs)(a.Flex,{justify:"space-between",align:"start",children:[(0,r.jsxs)(s.VStack,{align:"start",gap:"2",flex:"1",children:[(0,r.jsx)(m.Typography,{fontSize:"xl",fontWeight:"bold",color:"#111827",children:e.displayName}),(0,r.jsx)(m.Typography,{fontSize:"sm",color:"#6B7280",fontFamily:"mono",children:e.name}),e.description&&(0,r.jsx)(m.Typography,{fontSize:"sm",color:"#4B5563",mt:"1",lineHeight:"1.5",children:e.description})]}),(0,r.jsx)(g.Tag,{variant:e.isActive?"success":"inactive",style:{backgroundColor:e.isActive?"#10B981":"#EF4444",color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:e.isActive?"Active":"Inactive"})]}),(0,r.jsxs)(i.Box,{bg:"#F9FAFB",borderRadius:"md",p:"4",border:"1px",borderColor:"#E5E7EB",children:[(0,r.jsxs)(m.Typography,{fontSize:"sm",fontWeight:"semibold",color:"#111827",mb:"3",children:["Permissions (",e.permissions.length,")"]}),0===e.permissions.length?(0,r.jsx)(g.Tag,{variant:"info",size:"md",style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"6px 12px",borderRadius:"6px",fontSize:"13px"},children:"No permissions"}):(0,r.jsx)(i.Box,{maxH:"120px",overflowY:"auto",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:(0,r.jsxs)(t.HStack,{gap:"2",wrap:"wrap",children:[e.permissions.slice(0,8).map(e=>(0,r.jsxs)(g.Tag,{variant:"info",size:"md",style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",border:"1px solid #E0E7FF"},children:[e.permissionName,e.resource&&` (${e.resource})`]},e.id)),e.permissions.length>8&&(0,r.jsxs)(g.Tag,{variant:"info",size:"md",style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500"},children:["+",e.permissions.length-8," more"]})]})})]}),(0,r.jsxs)(t.HStack,{gap:"2",justify:"flex-end",pt:"2",borderTop:"1px",borderColor:"#E5E7EB",children:[(0,r.jsxs)(u.Button,{size:"sm",variant:"primary",onClick:()=>{let r;return X(e),et({permissionName:"",resource:""}),r=new Set,void(e.permissions&&e.permissions.length>0&&e.permissions.forEach(e=>{let i=e.permissionName||e.permission_name||e.PermissionName;i&&r.add(i)}),el(r),er(!0))},children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiPlus,{size:16})}),"Manage Permissions"]}),(0,r.jsxs)(u.Button,{size:"sm",variant:"secondary",onClick:()=>{X(e),eo({name:e.name,displayName:e.displayName,description:e.description||""}),Z(!0)},style:{backgroundColor:"white",color:"#374151",border:"1px solid #D1D5DB",fontWeight:"500",padding:"8px 16px",borderRadius:"6px"},children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiEdit3,{size:16})}),"Edit"]}),(0,r.jsx)(u.Button,{size:"sm",variant:"ghost",onClick:()=>eg(e.id,e.displayName),style:{backgroundColor:"transparent",color:"#EF4444",fontWeight:"500",padding:"8px 12px",borderRadius:"6px"},_hover:{bg:"#FEF2F2"},children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiTrash2,{size:16})})})]})]})},e.id))})]})}),(0,r.jsx)(p.Tabs.Content,{value:"users",children:(0,r.jsxs)(s.VStack,{gap:"6",align:"stretch",mt:"4",children:[(0,r.jsx)(i.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"#E5E7EB",p:"4",boxShadow:"sm",children:(0,r.jsx)(x.Search,{placeholder:"Search users by email or name...",onSearchChange:e=>T(e)})}),0===eC.length?(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"8",textAlign:"center",children:(0,r.jsxs)(s.VStack,{gap:"2",children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiUser,{size:32,color:"#A0AEC0"})}),(0,r.jsx)(m.Typography,{color:"black",children:"No users found"})]})}):(0,r.jsx)(s.VStack,{gap:"4",align:"stretch",children:eC.map(e=>(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"#E5E7EB",p:"8",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",_hover:{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",borderColor:"#F05423",transform:"translateY(-2px)"},transition:"all 0.3s ease",children:(0,r.jsxs)(a.Flex,{direction:"column",gap:"6",children:[(0,r.jsxs)(a.Flex,{justify:"space-between",align:"start",pb:"4",borderBottom:"2px",borderColor:"#F3F4F6",children:[(0,r.jsxs)(s.VStack,{align:"start",gap:"3",flex:"1",children:[(0,r.jsxs)(t.HStack,{gap:"3",align:"center",children:[(0,r.jsx)(i.Box,{bg:"#FEF3F2",borderRadius:"full",p:"2",display:"flex",alignItems:"center",justifyContent:"center",children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiMail,{size:20,color:"#F05423"})})}),(0,r.jsxs)(s.VStack,{align:"start",gap:"0",children:[(0,r.jsx)(m.Typography,{fontSize:"xl",fontWeight:"bold",color:"#111827",children:e.email}),e.name&&(0,r.jsx)(m.Typography,{color:"#6B7280",fontSize:"sm",fontWeight:"400",children:e.name})]})]}),(0,r.jsxs)(t.HStack,{gap:"6",mt:"2",children:[(0,r.jsxs)(i.Box,{children:[(0,r.jsx)(m.Typography,{fontSize:"xs",color:"#9CA3AF",mb:"1",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",children:"First Login"}),(0,r.jsx)(m.Typography,{fontSize:"sm",color:"#111827",fontWeight:"600",children:e.firstLoginAt?new Date(e.firstLoginAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never"})]}),(0,r.jsxs)(i.Box,{children:[(0,r.jsx)(m.Typography,{fontSize:"xs",color:"#9CA3AF",mb:"1",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",children:"Last Login"}),(0,r.jsx)(m.Typography,{fontSize:"sm",color:"#111827",fontWeight:"600",children:e.lastLoginAt?new Date(e.lastLoginAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never"})]})]})]}),(0,r.jsxs)(t.HStack,{gap:"2",children:[(0,r.jsxs)(u.Button,{size:"sm",variant:"secondary",onClick:()=>{N(e),L(!0)},style:{backgroundColor:"white",color:"#374151",border:"1px solid #D1D5DB",fontWeight:"600",padding:"10px 18px",borderRadius:"8px",fontSize:"14px"},_hover:{backgroundColor:"#F9FAFB",borderColor:"#9CA3AF"},children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiPlus,{size:16})}),"Assign Role"]}),(0,r.jsxs)(u.Button,{size:"sm",variant:"primary",onClick:()=>{N(e),V({permissionName:"",resource:"",description:""}),I(!0),0===q.length&&ep()},style:{fontWeight:"600",padding:"10px 18px",borderRadius:"8px",fontSize:"14px"},children:[(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiPlus,{size:16})}),"Grant Permission"]})]})]}),(0,r.jsxs)(i.Box,{children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",mb:"3",children:[(0,r.jsx)(m.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",textTransform:"uppercase",letterSpacing:"0.5px",children:"Roles"}),(0,r.jsx)(g.Tag,{style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:e.roles.length})]}),0===e.roles.length?(0,r.jsx)(i.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",border:"1px dashed #D1D5DB",textAlign:"center",children:(0,r.jsx)(m.Typography,{color:"#9CA3AF",fontSize:"sm",children:"No roles assigned"})}):(0,r.jsx)(t.HStack,{gap:"2",wrap:"wrap",children:e.roles.map(e=>(0,r.jsxs)(t.HStack,{gap:"2",bg:"#EEF2FF",borderRadius:"lg",p:"2",border:"1px solid #E0E7FF",_hover:{bg:"#E0E7FF"},transition:"all 0.2s",children:[(0,r.jsx)(g.Tag,{variant:"info",size:"md",style:{backgroundColor:"transparent",color:"#4F46E5",padding:"0",fontSize:"13px",fontWeight:"600",border:"none"},children:e.roleDisplayName}),(0,r.jsx)(u.Button,{size:"sm",variant:"ghost",onClick:()=>ej(e.id,e.roleDisplayName),style:{minWidth:"auto",padding:"2px 4px",backgroundColor:"transparent",height:"20px",width:"20px"},_hover:{bg:"#FEF2F2"},children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:12,color:"#EF4444"})})})]},e.id))})]}),(0,r.jsxs)(i.Box,{children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",mb:"3",children:[(0,r.jsx)(m.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",textTransform:"uppercase",letterSpacing:"0.5px",children:"Permissions"}),(0,r.jsx)(g.Tag,{style:{backgroundColor:"#FEF3C7",color:"#92400E",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:e.permissions.filter(e=>e.isActive).length})]}),0===e.permissions.filter(e=>e.isActive).length?(0,r.jsx)(i.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",border:"1px dashed #D1D5DB",textAlign:"center",children:(0,r.jsx)(m.Typography,{color:"#9CA3AF",fontSize:"sm",children:"No permissions assigned"})}):(0,r.jsx)(i.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",border:"1px solid #E5E7EB",children:(0,r.jsxs)(i.Box,{maxH:"240px",overflowY:"auto",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:[(0,r.jsx)(d.SimpleGrid,{columns:{base:2,md:3,lg:4},gap:"2",children:e.permissions.filter(e=>e.isActive).slice(0,24).map(e=>(0,r.jsxs)(t.HStack,{gap:"1",bg:"white",borderRadius:"md",p:"2",border:"1px solid #E5E7EB",justify:"space-between",_hover:{borderColor:"#F05423",bg:"#FEF3F2"},transition:"all 0.2s",children:[(0,r.jsx)(i.Box,{flex:"1",minW:"0",children:(0,r.jsxs)(m.Typography,{fontSize:"12px",fontWeight:"500",color:"#111827",title:e.permissionName+(e.resource?` (${e.resource})`:""),style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[e.permissionName,e.resource&&(0,r.jsxs)("span",{style:{color:"#6B7280",fontSize:"11px"},children:[" ","(",e.resource,")"]})]})}),(0,r.jsx)(u.Button,{size:"sm",variant:"ghost",onClick:()=>ex(e.id,e.permissionName),style:{minWidth:"auto",padding:"2px 4px",backgroundColor:"transparent",flexShrink:0,height:"20px",width:"20px"},_hover:{bg:"#FEF2F2"},children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:12,color:"#EF4444"})})})]},e.id))}),e.permissions.filter(e=>e.isActive).length>24&&(0,r.jsx)(i.Box,{mt:"3",textAlign:"center",children:(0,r.jsxs)(g.Tag,{variant:"info",size:"md",style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"6px 14px",borderRadius:"8px",fontSize:"13px",fontWeight:"600"},children:["+",e.permissions.filter(e=>e.isActive).length-24," more permissions"]})})]})})]})]})},e.id))})]})})]})})]}),J&&(0,r.jsx)(i.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:"1000",display:"flex",alignItems:"center",justifyContent:"center",onClick:eS,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"500px",width:"90%",onClick:e=>e.stopPropagation(),boxShadow:"xl",children:(0,r.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",children:[(0,r.jsx)(m.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:"Create Role"}),(0,r.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:eS,children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:16})})})]}),(0,r.jsxs)(c.Field.Root,{required:!0,children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Role Name (Internal)"}),(0,r.jsx)(v.Input,{placeholder:"e.g., admin, reviewer",value:ei.name,onChange:e=>eo({...ei,name:e.target.value}),color:"black"})]}),(0,r.jsxs)(c.Field.Root,{required:!0,children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Display Name"}),(0,r.jsx)(v.Input,{placeholder:"e.g., Administrator, Reviewer",value:ei.displayName,onChange:e=>eo({...ei,displayName:e.target.value}),color:"black"})]}),(0,r.jsxs)(c.Field.Root,{children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Description (Optional)"}),(0,r.jsx)(n.Textarea,{placeholder:"Describe what this role allows...",value:ei.description,onChange:e=>eo({...ei,description:e.target.value}),rows:3,color:"black",_placeholder:{color:"gray.500"}})]}),(0,r.jsxs)(t.HStack,{gap:"3",justify:"flex-end",mt:"4",children:[(0,r.jsx)(u.Button,{variant:"ghost",onClick:eS,children:"Cancel"}),(0,r.jsx)(u.Button,{variant:"primary",onClick:em,children:"Create Role"})]})]})})}),Q&&G&&(0,r.jsx)(i.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:"1000",display:"flex",alignItems:"center",justifyContent:"center",onClick:eA,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"500px",width:"90%",onClick:e=>e.stopPropagation(),boxShadow:"xl",children:(0,r.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",children:[(0,r.jsx)(m.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:"Edit Role"}),(0,r.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:eA,children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:16})})})]}),(0,r.jsxs)(c.Field.Root,{required:!0,children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Display Name"}),(0,r.jsx)(v.Input,{value:ei.displayName,onChange:e=>eo({...ei,displayName:e.target.value}),color:"black"})]}),(0,r.jsxs)(c.Field.Root,{children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Description (Optional)"}),(0,r.jsx)(n.Textarea,{value:ei.description,onChange:e=>eo({...ei,description:e.target.value}),rows:3,color:"black"})]}),(0,r.jsxs)(t.HStack,{gap:"3",justify:"flex-end",mt:"4",children:[(0,r.jsx)(u.Button,{variant:"ghost",onClick:eA,children:"Cancel"}),(0,r.jsx)(u.Button,{variant:"primary",onClick:eu,children:"Update Role"})]})]})})}),ee&&G&&(0,r.jsx)(i.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",onClick:ek,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"800px",maxH:"90vh",width:"90%",onClick:e=>e.stopPropagation(),boxShadow:"xl",overflowY:"auto",style:{maxHeight:"90vh",overflowY:"auto",zIndex:1e4},children:(0,r.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",children:[(0,r.jsxs)(m.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:["Manage Permissions - ",G.displayName]}),(0,r.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:ek,children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:16})})})]}),(0,r.jsxs)(i.Box,{children:[(0,r.jsxs)(m.Typography,{fontSize:"sm",fontWeight:"bold",mb:"3",style:{color:"#000000",fontSize:"14px",fontWeight:"600",WebkitTextFillColor:"#000000"},children:["Current Permissions (",G.permissions.length,"):"]}),0===G.permissions.length?(0,r.jsx)(i.Box,{p:"4",bg:"gray.50",borderRadius:"md",border:"1px",borderColor:"gray.200",mb:"4",children:(0,r.jsx)(m.Typography,{style:{color:"#000000",fontSize:"14px",WebkitTextFillColor:"#000000"},children:"No permissions assigned"})}):(0,r.jsx)(i.Box,{maxH:"250px",overflowY:"auto",border:"1px",borderColor:"#E5E7EB",borderRadius:"md",p:"3",bg:"white",mb:"4",className:"current-permissions-list",style:{maxHeight:"250px",overflowY:"auto",backgroundColor:"#FFFFFF",border:"1px solid #E5E7EB",color:"#000000"},children:(0,r.jsx)(d.SimpleGrid,{columns:2,gap:"2",children:G.permissions.map(e=>(0,r.jsxs)(t.HStack,{justify:"space-between",p:"2.5",bg:"#F9FAFB",borderRadius:"md",border:"1px",borderColor:"#E5E7EB",_hover:{bg:"#F3F4F6",borderColor:"#F05423"},transition:"all 0.2s","data-permission-item":!0,style:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",padding:"10px",color:"#000000"},children:[(0,r.jsx)(i.Box,{flex:"1",style:{color:"#000000"},children:(0,r.jsxs)("span",{style:{color:"#000000 !important",fontSize:"13px",fontWeight:"500",lineHeight:"20px",WebkitTextFillColor:"#000000 !important",display:"block",fontFamily:"inherit"},children:[e.permissionName||e.permission_name||"Unnamed Permission",(e.resource||e.Resource)&&(0,r.jsxs)("span",{style:{color:"#000000 !important",fontSize:"11px",marginLeft:"6px",fontWeight:"400",opacity:"0.7",WebkitTextFillColor:"#000000 !important",fontFamily:"inherit"},children:["(",e.resource||e.Resource,")"]})]})}),(0,r.jsx)(u.Button,{size:"sm",variant:"ghost",onClick:r=>{r.stopPropagation(),ev(G.id,e.id,e.permissionName)},minW:"auto",p:"1",_hover:{bg:"red.50"},style:{minWidth:"auto",padding:"4px",backgroundColor:"transparent"},children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:14,color:"#EF4444"})})})]},e.id))})})]}),(0,r.jsxs)(i.Box,{borderTop:"2px",borderColor:"#E5E7EB",pt:"6",mt:"6",children:[(0,r.jsx)(m.Typography,{fontSize:"md",fontWeight:"bold",color:"#111827",mb:"4",children:"Add Permissions"}),(0,r.jsxs)(c.Field.Root,{mb:"4",children:[(0,r.jsx)(c.Field.Label,{children:"Resource (Optional)"}),(0,r.jsxs)("select",{value:es.resource,onChange:e=>et({...es,resource:e.target.value}),style:{width:"100%",padding:"8px 12px",fontSize:"14px",borderRadius:"6px",border:"1px solid #E2E8F0",backgroundColor:"white",color:"#000000",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},children:[(0,r.jsx)("option",{value:"",style:{color:"#000000",backgroundColor:"white"},children:"None"}),k.map(e=>(0,r.jsx)("option",{value:e.value,style:{color:"#000000",backgroundColor:"white"},children:e.label},e.value))]})]}),(0,r.jsx)(i.Box,{maxH:"450px",overflowY:"auto",border:"1px",borderColor:"#E5E7EB",borderRadius:"lg",p:"5",bg:"white",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:(0,r.jsx)(s.VStack,{gap:"5",align:"stretch",children:A.map(e=>(0,r.jsxs)(i.Box,{children:[(0,r.jsx)(m.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",mb:"3",style:{fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",color:"#6B7280"},children:e.category}),(0,r.jsx)(d.SimpleGrid,{columns:2,gap:"3",children:e.permissions.map(e=>{let o=G?.permissions?.some(r=>(r.permissionName||r.permission_name||r.PermissionName)===e.value)||!1,s=ea.has(e.value),a=o||s;return(0,r.jsxs)(t.HStack,{gap:"3",align:"start",p:"3",borderRadius:"lg",bg:o?"#FEF3F2":"white",border:o?"2px solid #F05423":"1px solid #E5E7EB",_hover:o?{bg:"#FEF3F2"}:{bg:"#F9FAFB",borderColor:"#D1D5DB"},transition:"all 0.2s",style:{boxShadow:o?"0 1px 3px 0 rgba(240, 84, 35, 0.1)":"none"},children:[(0,r.jsx)(i.Box,{flexShrink:0,onClick:r=>{r.stopPropagation(),o||ey(e.value)},style:{paddingTop:"2px",cursor:o?"default":"pointer",pointerEvents:"auto",position:"relative",zIndex:10},children:(0,r.jsx)(h.Checkbox.Root,{checked:a,onCheckedChange:r=>{o||ey(e.value)},colorScheme:"orange",id:`permission-checkbox-${e.value}`,name:`permission-checkbox-${e.value}`,value:e.value,onClick:r=>{r.stopPropagation(),o||ey(e.value)},style:{cursor:o?"default":"pointer",pointerEvents:"auto",position:"relative",zIndex:11},children:(0,r.jsx)(h.Checkbox.Control,{onClick:r=>{r.stopPropagation(),o||ey(e.value)},style:{backgroundColor:a?"#F05423":"white",borderColor:a?"#F05423":"#D1D5DB",borderWidth:"2px",width:"20px",height:"20px",borderRadius:"4px",cursor:o?"default":"pointer",pointerEvents:"auto",position:"relative",zIndex:12},children:(0,r.jsx)(h.Checkbox.Indicator,{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:"✓"})})})}),(0,r.jsx)(i.Box,{flex:"1",onClick:r=>{o||(r.stopPropagation(),ey(e.value))},style:{cursor:o?"default":"pointer",pointerEvents:"auto"},children:(0,r.jsxs)(m.Typography,{fontSize:"sm",cursor:o?"default":"pointer",style:{color:o?"#F05423":"#111827",fontWeight:o?"600":"500",pointerEvents:"auto",lineHeight:"1.5"},children:[e.label,o&&(0,r.jsx)("span",{style:{color:"#F05423",fontSize:"11px",marginLeft:"8px",fontWeight:"600",backgroundColor:"#FEF3F2",padding:"3px 8px",borderRadius:"6px",border:"1px solid #F05423"},children:"✓ Assigned"})]})})]},e.value)})}),(0,r.jsx)(i.Box,{borderTop:"1px",borderColor:"gray.200",mt:"3"})]},e.category))})}),(0,r.jsx)(i.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",mb:"4",border:"1px",borderColor:"#E5E7EB",children:(0,r.jsx)(m.Typography,{fontSize:"sm",color:"#6B7280",fontWeight:"500",children:ea.size>0?(0,r.jsxs)("span",{style:{color:"#F05423",fontWeight:"600"},children:[ea.size," permission",1!==ea.size?"s":""," selected"]}):"No permissions selected"})}),(0,r.jsx)(u.Button,{variant:"primary",onClick:eb,disabled:0===ea.size,width:"full",children:(0,r.jsxs)(m.Typography,{as:"span",fontWeight:"600",children:["Add ",ea.size>0?`${ea.size} `:"","Permission",1!==ea.size?"s":""]})})]}),(0,r.jsx)(t.HStack,{gap:"3",justify:"flex-end",mt:"4",children:(0,r.jsx)(u.Button,{variant:"primary",onClick:ek,children:(0,r.jsx)(m.Typography,{as:"span",fontWeight:"600",children:"Close"})})})]})})}),D&&_&&(0,r.jsx)(i.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",onClick:()=>L(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",p:"8",maxW:"700px",maxH:"90vh",width:"90%",onClick:e=>e.stopPropagation(),boxShadow:"2xl",overflowY:"auto",style:{maxHeight:"90vh",overflowY:"auto",zIndex:1e4},children:(0,r.jsxs)(s.VStack,{gap:"6",align:"stretch",children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",pb:"4",borderBottom:"2px",borderColor:"#F3F4F6",children:[(0,r.jsx)(m.Typography,{fontSize:"2xl",fontWeight:"bold",color:"#111827",children:"Assign Role"}),(0,r.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:()=>L(!1),style:{minWidth:"auto",padding:"8px"},_hover:{bg:"#F3F4F6"},children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:20,color:"#6B7280"})})})]}),(0,r.jsx)(i.Box,{bg:"#FEF3F2",borderRadius:"lg",p:"4",border:"1px",borderColor:"#F05423",children:(0,r.jsxs)(t.HStack,{gap:"3",align:"center",children:[(0,r.jsx)(i.Box,{bg:"#F05423",borderRadius:"full",p:"2",display:"flex",alignItems:"center",justifyContent:"center",children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiMail,{size:18,color:"white"})})}),(0,r.jsxs)(s.VStack,{align:"start",gap:"0",children:[(0,r.jsx)(m.Typography,{fontSize:"xs",color:"#92400E",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",children:"User"}),(0,r.jsx)(m.Typography,{fontWeight:"700",fontSize:"md",color:"#111827",children:_.email}),_.name&&(0,r.jsx)(m.Typography,{fontSize:"sm",color:"#6B7280",mt:"0.5",children:_.name})]})]})}),(0,r.jsxs)(i.Box,{children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",mb:"4",children:[(0,r.jsx)(m.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",textTransform:"uppercase",letterSpacing:"0.5px",children:"Available Roles"}),(0,r.jsxs)(g.Tag,{style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:[q.filter(e=>e.isActive&&!_.roles.some(r=>r.roleId===e.id)).length," available"]})]}),0===q.filter(e=>e.isActive&&!_.roles.some(r=>r.roleId===e.id)).length?(0,r.jsx)(i.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"6",border:"1px dashed #D1D5DB",textAlign:"center",children:(0,r.jsx)(m.Typography,{color:"#9CA3AF",fontSize:"sm",children:"No available roles to assign. All roles have been assigned to this user."})}):(0,r.jsx)(d.SimpleGrid,{columns:1,gap:"3",maxH:"450px",overflowY:"auto",pr:"2",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:q.filter(e=>e.isActive&&!_.roles.some(r=>r.roleId===e.id)).map(e=>(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",p:"5",border:"2px",borderColor:"#E5E7EB",cursor:"pointer",position:"relative",_hover:{borderColor:"#F05423",bg:"#FEF3F2",boxShadow:"0 4px 6px -1px rgba(240, 84, 35, 0.1)"},transition:"all 0.2s ease",onClick:()=>ef(e.id),children:(0,r.jsxs)(a.Flex,{justify:"space-between",align:"start",gap:"4",children:[(0,r.jsxs)(s.VStack,{align:"start",gap:"2",flex:"1",minW:"0",children:[(0,r.jsx)(m.Typography,{fontWeight:"700",fontSize:"lg",color:"#111827",lineHeight:"1.3",children:e.displayName}),e.description&&(0,r.jsx)(m.Typography,{fontSize:"sm",color:"#6B7280",lineHeight:"1.5",children:e.description}),(0,r.jsxs)(t.HStack,{gap:"2",mt:"2",wrap:"wrap",children:[(0,r.jsxs)(g.Tag,{style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"5px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",border:"1px solid #E0E7FF"},children:[e.permissions?.length||0," permissions"]}),(0,r.jsx)(g.Tag,{style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"5px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",fontFamily:"monospace"},children:e.name})]})]}),(0,r.jsx)(i.Box,{bg:"#F05423",borderRadius:"full",p:"3",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,style:{width:"40px",height:"40px"},_hover:{bg:"#E04513",transform:"scale(1.1)"},transition:"all 0.2s",children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiPlus,{size:20,color:"white"})})})]})},e.id))})]}),(0,r.jsx)(t.HStack,{gap:"3",justify:"flex-end",pt:"4",borderTop:"2px",borderColor:"#F3F4F6",children:(0,r.jsx)(u.Button,{variant:"ghost",onClick:()=>L(!1),style:{backgroundColor:"white",color:"#374151",border:"1px solid #D1D5DB",fontWeight:"600",padding:"10px 20px",borderRadius:"8px"},_hover:{backgroundColor:"#F9FAFB",borderColor:"#9CA3AF"},children:"Cancel"})})]})})}),P&&_&&(0,r.jsx)(i.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:"1000",display:"flex",alignItems:"center",justifyContent:"center",onClick:eF,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,r.jsx)(i.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"500px",width:"90%",onClick:e=>e.stopPropagation(),boxShadow:"xl",children:(0,r.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,r.jsxs)(t.HStack,{justify:"space-between",align:"center",children:[(0,r.jsx)(m.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:"Grant Permission"}),(0,r.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:eF,children:(0,r.jsx)(b.IconWrapper,{children:(0,r.jsx)(f.FiX,{size:16})})})]}),(0,r.jsxs)(i.Box,{children:[(0,r.jsx)(m.Typography,{fontSize:"sm",color:"black",mb:"2",children:"User:"}),(0,r.jsx)(m.Typography,{fontWeight:"medium",fontSize:"md",color:"black",children:_.email})]}),(0,r.jsxs)(c.Field.Root,{required:!0,children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Permission Name"}),0===q.length?(0,r.jsx)(i.Box,{p:"4",bg:"gray.50",borderRadius:"md",border:"1px",borderColor:"gray.200",children:(0,r.jsx)(m.Typography,{fontSize:"sm",color:"gray.600",children:"No roles found. Please create a role with permissions first."})}):0===ew().length?(0,r.jsx)(i.Box,{p:"4",bg:"gray.50",borderRadius:"md",border:"1px",borderColor:"gray.200",children:(0,r.jsx)(m.Typography,{fontSize:"sm",color:"gray.600",children:"No permissions found in existing roles. Please add permissions to roles first."})}):(0,r.jsxs)("select",{value:U.resource?`${U.permissionName}::${U.resource}`:U.permissionName,onChange:e=>{let r=ew().find(r=>(r.resource?`${r.value}::${r.resource}`:r.value)===e.target.value);r&&V({permissionName:r.value,resource:r.resource||"",description:""})},style:{width:"100%",padding:"8px 12px",fontSize:"14px",borderRadius:"6px",border:"1px solid #E2E8F0",backgroundColor:"white",color:"#000000"},children:[(0,r.jsx)("option",{value:"",style:{color:"#000000",backgroundColor:"white"},children:"Select a permission from existing roles"}),ew().map((e,i)=>{let o=e.resource?`${e.value}::${e.resource}`:e.value;return(0,r.jsx)("option",{value:o,style:{color:"#000000",backgroundColor:"white"},children:e.label},`${e.value}-${e.resource||"none"}-${i}`)})]})]}),(0,r.jsxs)(c.Field.Root,{children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Resource (Optional)"}),(0,r.jsx)(v.Input,{placeholder:"Resource (auto-filled from selected permission)",value:U.resource,onChange:e=>V({...U,resource:e.target.value}),color:"black"}),(0,r.jsx)(m.Typography,{fontSize:"xs",color:"gray.500",mt:"1",children:"Resource is automatically set from the selected permission if available, but can be overridden if needed."})]}),(0,r.jsxs)(c.Field.Root,{children:[(0,r.jsx)(c.Field.Label,{color:"black",fontWeight:"medium",children:"Description (Optional)"}),(0,r.jsx)(n.Textarea,{placeholder:"Describe what this permission allows...",value:U.description,onChange:e=>V({...U,description:e.target.value}),rows:3,color:"black",_placeholder:{color:"black"}})]}),(0,r.jsxs)(t.HStack,{gap:"3",justify:"flex-end",mt:"4",children:[(0,r.jsx)(u.Button,{variant:"ghost",onClick:eF,children:"Cancel"}),(0,r.jsx)(u.Button,{variant:"primary",onClick:eh,disabled:H,children:H?"Granting...":"Grant Permission"})]})]})})})]})}e.s(["default",()=>C],640086)}]);

//# debugId=c342f8a5-6690-5afd-a95b-4c0f1ef41232
//# sourceMappingURL=67e0a3eaf760838c.js.map