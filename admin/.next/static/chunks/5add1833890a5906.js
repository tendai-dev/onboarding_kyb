;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="003ee063-4b37-f530-6cc5-e832c3e66171")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,618566,(e,i,t)=>{i.exports=e.r(976562)},862873,e=>{"use strict";var i=e.i(843476),t=e.i(271645),s=e.i(618566);e.i(643983);var r=e.i(355569),o=e.i(111977),a=e.i(134590),n=e.i(179243),l=e.i(119192),c=e.i(307124),d=e.i(857692),h=e.i(194741),p=e.i(489312),u=e.i(357441),g=e.i(843011),x=e.i(617029);function m(){let e=(0,s.usePathname)(),m=(0,s.useRouter)(),{condensed:f,setCondensed:b}=(0,x.useSidebar)(),[y,j]=(0,t.useState)("dashboard");(0,t.useEffect)(()=>{"/dashboard"===e?j("dashboard"):e?.startsWith("/work-queue")?j("work-queue"):e?.startsWith("/applications")?j("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?j("reviews"):e?.startsWith("/documents")?j("documents"):e?.startsWith("/requirements")?j("requirements"):e?.startsWith("/entity-types")?j("entity-types"):e?.startsWith("/checklists")?j("checklists"):e?.startsWith("/wizard-configurations")?j("wizard-configurations"):e?.startsWith("/rules-and-permissions")?j("rules-and-permissions"):e?.startsWith("/audit-log")?j("audit-log"):e?.startsWith("/messages")?j("messages"):e?.startsWith("/notifications")?j("notifications"):e?.startsWith("/data-migration")?j("data-migration"):e?.startsWith("/refreshes")?j("refreshes"):e?.startsWith("/reports")?j("reports"):e?.startsWith("/profile")?j("profile"):e?.startsWith("/settings")&&j("settings")},[e]);let w=(0,t.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,i.jsx)(o.ProductIcon,{width:"20",height:"20"}),onClick:()=>{j("dashboard"),m.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,i.jsx)(p.FilterIcon,{width:"20",height:"20"}),onClick:()=>{j("work-queue"),m.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,i.jsx)(d.AppIcon,{width:"20",height:"20"}),onClick:()=>{j("applications"),m.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,i.jsx)(n.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{j("reviews"),m.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{j("reviews"),m.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{j("reviews"),m.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,i.jsx)(h.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{j("documents"),m.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,i.jsx)(l.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{j("configuration"),m.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{j("configuration"),m.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{j("configuration"),m.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{j("configuration"),m.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{j("configuration"),m.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{j("configuration"),m.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,i.jsx)(u.WarningIcon,{width:"20",height:"20"}),onClick:()=>{j("system"),m.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{j("system"),m.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{j("system"),m.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{j("system"),m.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{j("system"),m.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{j("system"),m.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,i.jsx)(n.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{j("reports"),m.push("/reports")}},{id:"profile",label:"Profile",icon:(0,i.jsx)(a.UserIcon,{width:"20",height:"20"}),onClick:()=>{j("profile"),m.push("/profile")}}],[m]),k={id:"help-centre",label:"Help Centre",icon:(0,i.jsx)(c.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,i.jsx)(g.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:f?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,i.jsx)(r.PortalNavigationSidebar,{navigationItems:w,helpCentreItem:k,activeItemId:y,condensed:f,onToggleCollapse:b,onLogoClick:()=>{j("dashboard"),m.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>m])},297630,e=>{"use strict";let{withContext:i,PropsProvider:t}=(0,e.i(552887).createRecipeContext)({key:"container"}),s=i("div");e.s(["Container",()=>s])},343827,e=>{"use strict";var i=e.i(843476),t=e.i(618566),s=e.i(526732);e.i(643983);var r=e.i(307167),o=e.i(44999),a=e.i(843011),n=e.i(361035),l=e.i(761869),c=e.i(299753),d=e.i(192199),h=e.i(617029);function p(){let e=(0,t.useRouter)(),{data:p}=(0,s.useSession)(),{condensed:u,setCondensed:g}=(0,h.useSidebar)(),x=p?.user?.name||"Admin",m=p?.user?.email||"admin@mukuru.com";return x.split(" ")[0]?.toLowerCase(),(0,i.jsx)(a.Box,{position:"fixed",top:"0",left:u?"72px":"280px",right:"0",height:"90px",bg:"white",zIndex:"999",px:"6",py:"4",pl:"6",transition:"left 0.3s ease, width 0.3s ease",className:"portal-header",borderBottom:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",children:(0,i.jsxs)(l.Flex,{justify:"space-between",align:"center",width:"full",height:"full",children:[(0,i.jsx)(n.HStack,{gap:"4",align:"center",children:(0,i.jsx)(c.Button,{variant:"ghost",onClick:()=>g(!u),p:"2",borderRadius:"full",minW:"40px",h:"40px",bg:"gray.100",_hover:{bg:"gray.200"},"aria-label":"Toggle sidebar",border:"none",_focus:{boxShadow:"none",outline:"none"},_active:{bg:"gray.200"},children:(0,i.jsx)(o.IconWrapper,{children:(0,i.jsx)(d.FiArrowLeft,{size:20,color:"#F05423"})})})}),(0,i.jsx)(n.HStack,{gap:"4",align:"center",children:(0,i.jsx)(r.ProfileMenu,{user:x,menuItems:[{id:0,label:m,value:"email"},{id:1,label:"My Profile",value:"profile",onSelect:()=>e.push("/profile")},{id:2,label:"Settings",value:"settings",onSelect:()=>e.push("/settings")},{id:3,label:"Log Out",value:"logout",onSelect:()=>e.push("/api/auth/logout")}]})})]})})}e.s(["default",()=>p])},509838,e=>{"use strict";var i=e.i(843476),t=e.i(271645),s=e.i(311011),r=e.i(510087);let o=(0,t.forwardRef)(function(e,t){let{align:o,fit:a="cover",...n}=e;return(0,i.jsx)(s.chakra.img,{ref:t,objectFit:a,objectPosition:o,className:(0,r.cx)("chakra-image",e.className),...n})});e.s(["Image",()=>o])},85503,e=>{"use strict";var i=e.i(843476),t=e.i(843011),s=e.i(297630),r=e.i(53545),o=e.i(361035),a=e.i(761869),n=e.i(300713),l=e.i(509838);e.i(643983);var c=e.i(354469),d=e.i(554646),h=e.i(567758),p=e.i(825402),u=e.i(312569),g=e.i(191348),x=e.i(404372),m=e.i(927561),f=e.i(613056),b=e.i(44999),y=e.i(228427),j=e.i(192199),w=e.i(271645),k=e.i(862873),C=e.i(343827),S=e.i(617029);let v=e=>({1:"Passport",2:"Driver's License",3:"National ID",4:"Proof of Address",5:"Bank Statement",6:"Tax Document",7:"Business Registration",8:"Articles of Incorporation",9:"Shareholder Registry",10:"Financial Statements",99:"Other"})[e]||"Unknown",W=e=>{if(0===e)return"0 Bytes";let i=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,i)*100)/100+" "+["Bytes","KB","MB","GB"][i]};function I(){var e,I;let{condensed:B}=(0,S.useSidebar)(),[z,F]=(0,w.useState)([]),[T,D]=(0,w.useState)(!1),[R,E]=(0,w.useState)(null),[P,L]=(0,w.useState)(""),[N,A]=(0,w.useState)(0),[H,M]=(0,w.useState)(1),[q,O]=(0,w.useState)(null),[U,V]=(0,w.useState)(!1),[_,K]=(0,w.useState)(null),[$,X]=(0,w.useState)(null),[G,Q]=(0,w.useState)(0),Y=(e,i,t="info",s=5e3)=>{O({title:e,description:i,type:t}),setTimeout(()=>O(null),s)},J=(0,w.useCallback)(async()=>{try{D(!0),E(null),console.log("[Documents Page] Loading documents...",{page:H,pageSize:50});let e=(H-1)*50,i=`/api/documents?skip=${e}&take=50`,t=await fetch(i);if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||`Failed to load documents: ${t.statusText}`)}let s=await t.json();F(s.items||s||[]),A(s.total||s.totalCount||(s.items||s||[]).length),console.log("[Documents Page] Documents loaded:",(s.items||s||[]).length)}catch(i){console.error("[Documents Page] Error loading documents:",i);let e=i instanceof Error?i.message:"Failed to load documents";E(e),F([]),Y("Error loading documents",e,"error",5e3)}finally{D(!1)}},[H]);(0,w.useEffect)(()=>{J()},[J,G]);let Z=(0,w.useCallback)(e=>{L(e)},[]),ee=async e=>{try{return`/api/proxy-document?storageKey=${encodeURIComponent(e.storageKey)}`}catch(e){return console.error("Error getting document URL:",e),null}},ei=async e=>{try{K(e),V(!0);let i=await ee(e);i?X(i):(Y("View failed","Could not load document. Please try downloading instead.","error",5e3),V(!1),K(null))}catch(e){console.error("Error viewing document:",e),Y("View failed",e instanceof Error?e.message:"Failed to view document","error",5e3)}},et=async e=>{try{let i=await ee(e);if(i)window.open(i,"_blank");else throw Error("No download URL returned")}catch(e){console.error("Error downloading document:",e),Y("Download failed",e instanceof Error?e.message:"Failed to download document","error",5e3)}},es=z.filter(e=>{if(!P)return!0;let i=P.toLowerCase();return e.fileName.toLowerCase().includes(i)||e.documentNumber.toLowerCase().includes(i)||e.caseId.toLowerCase().includes(i)||v(e.type).toLowerCase().includes(i)||e.uploadedBy.toLowerCase().includes(i)}),er=Math.ceil(N/50),eo=[{field:"fileName",header:"File Name",sortable:!0,minWidth:"250px",render:(e,t)=>(0,i.jsxs)(o.HStack,{gap:"2",children:[(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiFileText,{size:16,color:"#DD6B20"})}),(0,i.jsx)(d.Typography,{fontSize:"sm",fontWeight:"medium",color:"orange.600",cursor:"pointer",onClick:()=>ei(t),style:{textDecoration:"none"},_hover:{textDecoration:"underline"},children:t.fileName})]})},{field:"type",header:"Type",sortable:!0,minWidth:"120px",render:e=>(0,i.jsx)(f.Tag,{variant:"info",children:v(e)})},{field:"caseId",header:"Case ID",sortable:!0,minWidth:"150px",render:(e,t)=>(0,i.jsx)(h.Link,{href:`/applications/${t.caseId}`,children:(0,i.jsxs)(d.Typography,{fontSize:"sm",color:"orange.600",_hover:{textDecoration:"underline"},children:[t.caseId.substring(0,8),"..."]})})},{field:"sizeBytes",header:"Size",sortable:!0,minWidth:"100px",render:e=>(0,i.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",children:W(e)})},{field:"uploadedBy",header:"Uploaded By",sortable:!0,minWidth:"150px",render:e=>(0,i.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",children:e})},{field:"uploadedAt",header:"Uploaded At",sortable:!0,minWidth:"150px",render:e=>(0,i.jsxs)(o.HStack,{gap:"2",children:[(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiCalendar,{size:16,color:"#9CA3AF"})}),(0,i.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",children:new Date(e).toLocaleDateString()})]})}];return(0,i.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,i.jsx)(k.default,{}),(0,i.jsxs)(t.Box,{ml:B?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:B?"calc(100% - 72px)":"calc(100% - 280px)",bg:"gray.50",overflowX:"hidden",transition:"margin-left 0.3s ease, width 0.3s ease",children:[(0,i.jsx)(C.default,{}),(0,i.jsx)(s.Container,{maxW:"100%",px:"8",py:"6",width:"full",children:(0,i.jsxs)(r.VStack,{gap:"4",align:"stretch",children:[(0,i.jsxs)(a.Flex,{justify:"space-between",align:"center",mb:"4",children:[(0,i.jsxs)(r.VStack,{align:"start",gap:"1",children:[(0,i.jsx)(d.Typography,{fontSize:"3xl",fontWeight:"bold",color:"gray.800",children:"Documents"}),(0,i.jsx)(d.Typography,{color:"gray.600",children:"View and manage all uploaded documents"})]}),(0,i.jsxs)(g.Button,{variant:"secondary",size:"sm",onClick:()=>Q(e=>e+1),className:"mukuru-primary-button",children:[(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiRefreshCw,{size:16})}),"Refresh"]})]}),q&&(0,i.jsx)(m.AlertBar,{status:q.type,title:q.title,description:q.description,onClose:()=>O(null)}),R&&(0,i.jsx)(m.AlertBar,{status:"error",title:"Error loading documents",children:R}),(0,i.jsx)(t.Box,{width:"100%",maxW:"800px",children:(0,i.jsx)(p.Search,{placeholder:"Search documents by name, case ID, type, or uploader...",onSearchChange:Z})}),(0,i.jsx)(t.Box,{className:"work-queue-table-wrapper",width:"100%",children:(0,i.jsx)(u.DataTable,{data:es,columns:eo,actionColumn:{header:"Actions",width:"150px",render:e=>(0,i.jsxs)(o.HStack,{gap:"2",children:[(0,i.jsx)(y.Tooltip,{content:"View document",children:(0,i.jsx)("button",{onClick:()=>ei(e),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#111827",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiEye,{size:14})})})}),(0,i.jsx)(y.Tooltip,{content:"Download document",children:(0,i.jsx)("button",{onClick:()=>et(e),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#111827",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiDownload,{size:14})})})}),(0,i.jsx)(y.Tooltip,{content:"View application",children:(0,i.jsx)("button",{onClick:()=>window.open(`/applications/${e.caseId}`,"_blank"),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#111827",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiFileText,{size:14})})})})]})},loading:T})}),er>1&&(0,i.jsx)(c.Pagination,{currentPage:H,totalPages:er,onPageChange:M,totalItems:N,pageSize:50})]})})]}),(0,i.jsxs)(x.Modal,{isOpen:U,onClose:()=>{V(!1),K(null),X(null)},size:"large",closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,i.jsx)(x.ModalHeader,{children:(0,i.jsxs)(o.HStack,{justify:"space-between",align:"center",width:"full",children:[(0,i.jsxs)(r.VStack,{align:"start",gap:"0",children:[(0,i.jsx)(d.Typography,{fontSize:"lg",fontWeight:"700",children:_?.fileName}),(0,i.jsxs)(d.Typography,{fontSize:"sm",color:"gray.600",children:[_&&v(_.type)," â€¢ ",_&&W(_.sizeBytes)]})]}),(0,i.jsxs)(o.HStack,{gap:"2",children:[_&&(0,i.jsxs)(g.Button,{variant:"secondary",size:"sm",onClick:()=>et(_),children:[(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiDownload,{size:16})}),"Download"]}),(0,i.jsx)(g.Button,{variant:"secondary",size:"sm",onClick:()=>{V(!1),K(null),X(null)},children:(0,i.jsx)(b.IconWrapper,{children:(0,i.jsx)(j.FiX,{size:16})})})]})]})}),(0,i.jsx)(x.ModalBody,{children:$&&_?(e=_.fileName,I=_.contentType,[".jpg",".jpeg",".png",".gif",".bmp",".webp"].includes(e.toLowerCase().substring(e.lastIndexOf(".")))||I.startsWith("image/"))?(0,i.jsx)(t.Box,{p:"4",bg:"gray.50",display:"flex",justifyContent:"center",alignItems:"center",minH:"400px",children:(0,i.jsx)(l.Image,{src:$,alt:_.fileName,maxW:"100%",maxH:"70vh",objectFit:"contain",borderRadius:"md"})}):(0,i.jsx)(t.Box,{p:"4",bg:"gray.50",minH:"400px",children:(0,i.jsx)("iframe",{src:$,style:{width:"100%",height:"70vh",border:"none",borderRadius:"8px"},title:_.fileName})}):(0,i.jsx)(a.Flex,{justify:"center",align:"center",minH:"400px",children:(0,i.jsxs)(r.VStack,{gap:"4",children:[(0,i.jsx)(n.Spinner,{size:"xl",color:"orange.500"}),(0,i.jsx)(d.Typography,{color:"gray.600",children:"Loading document..."})]})})})]})]})}e.s(["default",()=>I])}]);

//# debugId=003ee063-4b37-f530-6cc5-e832c3e66171
//# sourceMappingURL=e77138c9ed4a09b5.js.map