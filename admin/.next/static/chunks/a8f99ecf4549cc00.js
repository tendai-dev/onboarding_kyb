;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="99a53d52-0426-b9a8-74e1-211c05324158")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,618566,(e,i,t)=>{i.exports=e.r(976562)},862873,e=>{"use strict";var i=e.i(843476),t=e.i(271645),r=e.i(618566);e.i(643983);var o=e.i(355569),s=e.i(111977),a=e.i(134590),n=e.i(179243),l=e.i(119192),d=e.i(307124),c=e.i(857692),p=e.i(194741),h=e.i(489312),g=e.i(357441),x=e.i(843011),u=e.i(617029);function b(){let e=(0,r.usePathname)(),b=(0,r.useRouter)(),{condensed:y,setCondensed:m}=(0,u.useSidebar)(),[f,j]=(0,t.useState)("dashboard");(0,t.useEffect)(()=>{"/dashboard"===e?j("dashboard"):e?.startsWith("/work-queue")?j("work-queue"):e?.startsWith("/applications")?j("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?j("reviews"):e?.startsWith("/documents")?j("documents"):e?.startsWith("/requirements")?j("requirements"):e?.startsWith("/entity-types")?j("entity-types"):e?.startsWith("/checklists")?j("checklists"):e?.startsWith("/wizard-configurations")?j("wizard-configurations"):e?.startsWith("/rules-and-permissions")?j("rules-and-permissions"):e?.startsWith("/audit-log")?j("audit-log"):e?.startsWith("/messages")?j("messages"):e?.startsWith("/notifications")?j("notifications"):e?.startsWith("/data-migration")?j("data-migration"):e?.startsWith("/refreshes")?j("refreshes"):e?.startsWith("/reports")?j("reports"):e?.startsWith("/profile")?j("profile"):e?.startsWith("/settings")&&j("settings")},[e]);let w=(0,t.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,i.jsx)(s.ProductIcon,{width:"20",height:"20"}),onClick:()=>{j("dashboard"),b.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,i.jsx)(h.FilterIcon,{width:"20",height:"20"}),onClick:()=>{j("work-queue"),b.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,i.jsx)(c.AppIcon,{width:"20",height:"20"}),onClick:()=>{j("applications"),b.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,i.jsx)(n.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{j("reviews"),b.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{j("reviews"),b.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{j("reviews"),b.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,i.jsx)(p.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{j("documents"),b.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,i.jsx)(l.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{j("configuration"),b.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{j("configuration"),b.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{j("configuration"),b.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{j("configuration"),b.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{j("configuration"),b.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{j("configuration"),b.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,i.jsx)(g.WarningIcon,{width:"20",height:"20"}),onClick:()=>{j("system"),b.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{j("system"),b.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{j("system"),b.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{j("system"),b.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{j("system"),b.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{j("system"),b.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,i.jsx)(n.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{j("reports"),b.push("/reports")}},{id:"profile",label:"Profile",icon:(0,i.jsx)(a.UserIcon,{width:"20",height:"20"}),onClick:()=>{j("profile"),b.push("/profile")}}],[b]),S={id:"help-centre",label:"Help Centre",icon:(0,i.jsx)(d.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,i.jsx)(x.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:y?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,i.jsx)(o.PortalNavigationSidebar,{navigationItems:w,helpCentreItem:S,activeItemId:f,condensed:y,onToggleCollapse:m,onLogoClick:()=>{j("dashboard"),b.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>b])},891825,e=>{"use strict";var i=e.i(843476),t=e.i(271645),r=e.i(441305),o=e.i(95966),s=e.i(920755);let a=(0,t.forwardRef)(function(e,t){var a,n,l;let{columns:d,minChildWidth:c,...p}=e,h=(0,r.useChakraContext)(),g=c?(a=c,n=h,(0,o.mapObject)(a,e=>{let i=n.tokens.getVar(`sizes.${e}`,"number"==typeof e?`${e}px`:e);return null===e?null:`repeat(auto-fit, minmax(${i}, 1fr))`})):(l=d,(0,o.mapObject)(l,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`));return(0,i.jsx)(s.Grid,{ref:t,templateColumns:g,...p})});e.s(["SimpleGrid",()=>a])},115877,e=>{"use strict";var i=e.i(843476),t=e.i(843011),r=e.i(53545),o=e.i(361035),s=e.i(891825),a=e.i(761869),n=e.i(300713);e.i(643983);var l=e.i(825402),d=e.i(554646),c=e.i(44999),p=e.i(271645),h=e.i(862873),g=e.i(192199);e.i(247167);var x=e.i(526732);let u=new class{async getAuthHeaders(){let e=await (0,x.getSession)(),i={"Content-Type":"application/json"};return e?.user?.email&&(i["X-User-Email"]=e.user.email),e?.user?.name&&(i["X-User-Name"]=e.user.name),i}async request(e,i){let t=`http://localhost:8011${e}`,r=await this.getAuthHeaders();try{let e=new Promise((e,i)=>{setTimeout(()=>i(Error("Request timeout")),1e4)}),o=fetch(t,{...i,headers:{...r,...i?.headers}}),s=await Promise.race([o,e]);if(!s.ok){let e=await s.text(),i=`Audit Log API request failed: ${s.status} ${s.statusText}`;try{let t=JSON.parse(e);t.message?i=t.message:t.error&&(i=t.error)}catch{e&&e.trim().length>0&&(i=e.length>200?e.substring(0,200)+"...":e)}throw Error(i)}if(204===s.status)return null;return s.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Audit Log service");throw e}}async getAuditLogEntry(e){return this.request(`/api/v1/audit-logs/${e}`)}async getAuditLogsByEntity(e,i){return this.request(`/api/v1/audit-logs/entity/${encodeURIComponent(e)}/${encodeURIComponent(i)}`)}async getAuditLogsByCase(e){return this.request(`/api/v1/audit-logs/case/${encodeURIComponent(e)}`)}async searchAuditLogs(e){return this.request("/api/v1/audit-logs/search",{method:"POST",body:JSON.stringify(e)})}async getAllAuditLogs(e=0,i=100){return this.searchAuditLogs({skip:e,take:i})}};function b(){let[e,x]=(0,p.useState)(""),[b,y]=(0,p.useState)([]),[m,f]=(0,p.useState)({totalEvents:0,created:0,updated:0,approved:0}),[j,w]=(0,p.useState)(!0),[S,C]=(0,p.useState)(null),k=(0,p.useCallback)(e=>{let i=e.length,t=e.filter(e=>e.action.toUpperCase().includes("CREATE")||"CREATE"===e.action.toUpperCase()).length;return{totalEvents:i,created:t,updated:e.filter(e=>e.action.toUpperCase().includes("UPDATE")||"UPDATE"===e.action.toUpperCase()).length,approved:e.filter(e=>e.action.toUpperCase().includes("APPROVE")||"APPROVE"===e.action.toUpperCase()).length}},[]),v=(0,p.useCallback)(async e=>{w(!0),C(null);try{let i;if(e&&e.trim()){let t=e.toLowerCase(),r=(i=await u.searchAuditLogs({skip:0,take:1e3})).entries.filter(e=>e.action.toLowerCase().includes(t)||e.entityType.toLowerCase().includes(t)||e.entityId.toLowerCase().includes(t)||e.userId.toLowerCase().includes(t)||e.description.toLowerCase().includes(t));i.entries=r,i.totalCount=r.length}else i=await u.getAllAuditLogs(0,1e3);let t=i.entries.sort((e,i)=>new Date(i.timestamp).getTime()-new Date(e.timestamp).getTime());y(t),f(k(t))}catch(e){console.error("Error fetching audit logs:",e),C(e instanceof Error?e.message:"Failed to load audit logs. Please ensure the audit log service is running."),y([]),f({totalEvents:0,created:0,updated:0,approved:0})}finally{w(!1)}},[k]);return(0,p.useEffect)(()=>{v()},[]),(0,i.jsxs)(a.Flex,{minH:"100vh",bg:"gray.50",children:[(0,i.jsx)(h.default,{}),(0,i.jsxs)(t.Box,{flex:"1",ml:"240px",children:[(0,i.jsx)(t.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",py:"4",px:"6",boxShadow:"sm",children:(0,i.jsx)(d.Typography,{fontSize:"xl",fontWeight:"bold",color:"gray.900",children:"Audit Log"})}),(0,i.jsx)(t.Box,{p:"6",bg:"gray.50",children:(0,i.jsxs)(r.VStack,{gap:"6",align:"stretch",children:[(0,i.jsxs)(t.Box,{children:[(0,i.jsxs)(a.Flex,{justify:"space-between",align:"start",mb:"4",children:[(0,i.jsxs)(r.VStack,{align:"start",gap:"2",children:[(0,i.jsxs)(o.HStack,{gap:"2",children:[(0,i.jsx)(g.FiShield,{size:20,color:"#374151"}),(0,i.jsx)(d.Typography,{fontSize:"xl",fontWeight:"bold",color:"gray.900",children:"Audit Trail"})]}),(0,i.jsx)(d.Typography,{fontSize:"md",color:"gray.600",fontWeight:"medium",children:"Complete history of all system activities and changes"})]}),(0,i.jsx)(t.Box,{width:"300px",children:(0,i.jsx)(l.Search,{placeholder:"Search audit events...",onSearchChange:e=>{x(e),v(e)}})})]}),(0,i.jsxs)(s.SimpleGrid,{columns:{base:1,md:2,lg:4},gap:"6",children:[(0,i.jsx)(t.Box,{bg:"white",p:"6",borderRadius:"xl",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px",borderColor:"gray.100",_hover:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},transition:"all 0.2s",children:(0,i.jsx)(r.VStack,{align:"start",gap:"4",children:(0,i.jsxs)(o.HStack,{gap:"3",children:[(0,i.jsx)(t.Box,{p:"2",bg:"blue.50",borderRadius:"lg",children:(0,i.jsx)(g.FiTrendingUp,{size:20,color:"#3182ce"})}),(0,i.jsxs)(r.VStack,{align:"start",gap:"1",children:[(0,i.jsx)(d.Typography,{fontSize:"3xl",fontWeight:"bold",color:"gray.900",children:m.totalEvents}),(0,i.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"medium",children:"Total Events"})]})]})})}),(0,i.jsx)(t.Box,{bg:"white",p:"6",borderRadius:"xl",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px",borderColor:"gray.100",_hover:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},transition:"all 0.2s",children:(0,i.jsx)(r.VStack,{align:"start",gap:"4",children:(0,i.jsxs)(o.HStack,{gap:"3",children:[(0,i.jsx)(t.Box,{p:"2",bg:"green.50",borderRadius:"lg",children:(0,i.jsx)(g.FiTrendingUp,{size:20,color:"#38a169"})}),(0,i.jsxs)(r.VStack,{align:"start",gap:"1",children:[(0,i.jsx)(d.Typography,{fontSize:"3xl",fontWeight:"bold",color:"green.500",children:m.created}),(0,i.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"medium",children:"Created"})]})]})})}),(0,i.jsx)(t.Box,{bg:"white",p:"6",borderRadius:"xl",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px",borderColor:"gray.100",_hover:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},transition:"all 0.2s",children:(0,i.jsx)(r.VStack,{align:"start",gap:"4",children:(0,i.jsxs)(o.HStack,{gap:"3",children:[(0,i.jsx)(t.Box,{p:"2",bg:"orange.50",borderRadius:"lg",children:(0,i.jsx)(g.FiTrendingUp,{size:20,color:"#dd6b20"})}),(0,i.jsxs)(r.VStack,{align:"start",gap:"1",children:[(0,i.jsx)(d.Typography,{fontSize:"3xl",fontWeight:"bold",color:"orange.500",children:m.updated}),(0,i.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"medium",children:"Updated"})]})]})})}),(0,i.jsx)(t.Box,{bg:"white",p:"6",borderRadius:"xl",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px",borderColor:"gray.100",_hover:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)"},transition:"all 0.2s",children:(0,i.jsx)(r.VStack,{align:"start",gap:"4",children:(0,i.jsxs)(o.HStack,{gap:"3",children:[(0,i.jsx)(t.Box,{p:"2",bg:"purple.50",borderRadius:"lg",children:(0,i.jsx)(g.FiTrendingUp,{size:20,color:"#805ad5"})}),(0,i.jsxs)(r.VStack,{align:"start",gap:"1",children:[(0,i.jsx)(d.Typography,{fontSize:"3xl",fontWeight:"bold",color:"purple.500",children:m.approved}),(0,i.jsx)(d.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"medium",children:"Approved"})]})]})})})]})]}),(0,i.jsxs)(t.Box,{children:[(0,i.jsxs)(r.VStack,{align:"start",gap:"2",mb:"6",children:[(0,i.jsx)(d.Typography,{fontSize:"2xl",fontWeight:"bold",color:"gray.800",children:"Activity Log"}),(0,i.jsx)(d.Typography,{fontSize:"lg",color:"gray.600",children:"Append-only record of all actions performed in the system"})]}),(0,i.jsxs)(t.Box,{bg:"white",borderRadius:"lg",boxShadow:"sm",border:"1px",borderColor:"gray.200",overflow:"hidden",children:[(0,i.jsx)(t.Box,{bg:"gray.50",p:"4",borderBottom:"1px",borderColor:"gray.200",children:(0,i.jsxs)(o.HStack,{gap:"4",fontSize:"sm",fontWeight:"medium",color:"gray.600",children:[(0,i.jsx)(t.Box,{width:"200px",children:"Timestamp"}),(0,i.jsx)(t.Box,{width:"200px",children:"Actor"}),(0,i.jsx)(t.Box,{width:"150px",children:"Action"}),(0,i.jsx)(t.Box,{width:"100px",children:"Entity"}),(0,i.jsx)(t.Box,{width:"100px",children:"Entity ID"})]})}),j?(0,i.jsx)(t.Box,{p:"8",display:"flex",justifyContent:"center",children:(0,i.jsxs)(r.VStack,{gap:"2",children:[(0,i.jsx)(n.Spinner,{size:"md",color:"orange.500"}),(0,i.jsx)(d.Typography,{color:"gray.600",fontSize:"sm",children:"Loading audit logs..."})]})}):S?(0,i.jsx)(t.Box,{p:"8",children:(0,i.jsx)(t.Box,{bg:"red.50",border:"1px",borderColor:"red.200",borderRadius:"md",p:"4",children:(0,i.jsxs)(o.HStack,{gap:"2",children:[(0,i.jsx)(c.IconWrapper,{children:(0,i.jsx)(g.FiAlertCircle,{size:20,color:"#E53E3E"})}),(0,i.jsxs)(r.VStack,{align:"start",gap:"1",flex:"1",children:[(0,i.jsx)(d.Typography,{fontWeight:"semibold",color:"red.700",children:"Error loading audit logs"}),(0,i.jsx)(d.Typography,{fontSize:"sm",color:"red.600",children:S})]})]})})}):0===b.length?(0,i.jsx)(t.Box,{p:"8",textAlign:"center",children:(0,i.jsx)(d.Typography,{color:"gray.500",children:"No audit log entries found."})}):(0,i.jsx)(r.VStack,{gap:"0",align:"stretch",children:b.map((e,r)=>{let s,a=(s=e.action.toUpperCase()).includes("CREATE")?{bg:"green.100",color:"green.700"}:s.includes("UPDATE")?{bg:"blue.100",color:"blue.700"}:s.includes("APPROVE")?{bg:"purple.100",color:"purple.700"}:s.includes("DELETE")?{bg:"red.100",color:"red.700"}:{bg:"gray.100",color:"gray.700"};return(0,i.jsx)(t.Box,{p:"4",borderBottom:r<b.length-1?"1px":"none",borderColor:"gray.100",_hover:{bg:"gray.50"},children:(0,i.jsxs)(o.HStack,{gap:"4",fontSize:"sm",children:[(0,i.jsx)(t.Box,{width:"200px",children:(0,i.jsx)(d.Typography,{color:"gray.600",children:new Date(e.timestamp).toLocaleString()})}),(0,i.jsxs)(t.Box,{width:"200px",children:[(0,i.jsx)(d.Typography,{color:"gray.800",fontWeight:"medium",children:e.userId||"System"}),e.userRole&&(0,i.jsx)(d.Typography,{color:"gray.500",fontSize:"xs",children:e.userRole})]}),(0,i.jsx)(t.Box,{width:"150px",children:(0,i.jsx)(t.Box,{bg:a.bg,color:a.color,fontSize:"xs",fontWeight:"medium",px:"2",py:"1",borderRadius:"sm",display:"inline-block",children:e.action})}),(0,i.jsx)(t.Box,{width:"100px",children:(0,i.jsx)(d.Typography,{color:"gray.600",children:e.entityType})}),(0,i.jsx)(t.Box,{width:"100px",children:(0,i.jsx)(d.Typography,{color:"gray.600",fontFamily:"mono",fontSize:"xs",children:e.entityId})})]})},e.id)})})]})]})]})})]})]})}e.s(["default",()=>b],115877)}]);

//# debugId=99a53d52-0426-b9a8-74e1-211c05324158
//# sourceMappingURL=2c738835fb20034a.js.map