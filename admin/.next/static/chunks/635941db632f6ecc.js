;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="e2858780-c3f5-9246-3439-b1427fe1c938")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},337880,e=>{"use strict";e.i(247167).default.env.NEXT_PUBLIC_ENTITY_CONFIG_API_BASE_URL;let t=new class{async getAuthHeaders(){let t={"Content-Type":"application/json"};try{let e=await fetch("/api/auth/session"),r=await e.json();r?.user?.email&&(t["X-User-Email"]=r.user.email),r?.user?.name&&(t["X-User-Name"]=r.user.name)}catch(t){{let{clientSentry:r}=await e.A(661405);r.reportError(t,{tags:{error_type:"entity_config_api",operation:"get_session"},level:"warning"})}}return t}async request(e,t){let r,i;e.startsWith("/requirements")?(r="/api/requirements",i=""):(e.startsWith("/wizardconfigurations")||e.startsWith("/entity-types"),r="/api/rules-and-permissions",i=e);let s=`${r}${i}`,n=await this.getAuthHeaders();try{let e=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),1e4)}),r=fetch(s,{...t,headers:{...n,...t?.headers}}),i=await Promise.race([r,e]);if(!i.ok){let e=await i.text(),t=`Entity Config API request failed: ${i.status} ${i.statusText}`;try{let r=JSON.parse(e);r.message?t=r.message:r.error&&(t=r.error)}catch{e&&e.trim().length>0&&(t=e.length>200?e.substring(0,200)+"...":e)}throw Error(t)}if(204===i.status)return null;return i.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Entity Configuration service");throw e}}async getEntityTypes(e=!1,t=!0){let r=new URLSearchParams;e&&r.append("includeInactive","true"),t&&r.append("includeRequirements","true");let i=r.toString();return(await this.request(`/entity-types${i?`?${i}`:""}`)).map(e=>{let t=e.requirements||e.Requirements||[];return Array.isArray(t)&&t.length>0&&(t=t.map(e=>({id:e.id||e.Id,requirementId:e.requirementId||e.RequirementId||e.requirement_id,isRequired:void 0!==e.isRequired?e.isRequired:void 0!==e.IsRequired?e.IsRequired:void 0!==e.is_required&&e.is_required,displayOrder:e.displayOrder||e.DisplayOrder||e.display_order||0,requirement:e.requirement||e.Requirement}))),{id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",icon:e.icon||e.Icon,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",requirements:t}})}async getEntityType(e,t=!0){let r=t?`/entity-types/${e}?includeRequirements=true`:`/entity-types/${e}`;return this.request(r)}async getEntityTypeByCode(t,r=!0){let i=t.trim();console.log("[EntityConfigAPI] Fetching entity type by code (as-is from application):",i);try{let e=await this.request(`/entity-types/by-code/${encodeURIComponent(i)}`);return console.log("[EntityConfigAPI] ✅ Successfully fetched entity type:",e?.code),e}catch(t){{let{clientSentry:r}=await e.A(661405);r.reportError(t,{tags:{error_type:"entity_config_api",operation:"fetch_entity_type_by_code"},extra:{code:i},level:"error"})}return null}}async createEntityType(e){return this.request("/entity-types",{method:"POST",body:JSON.stringify(e)})}async updateEntityType(e,t){return this.request(`/entity-types/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteEntityType(e){return this.request(`/entity-types/${e}`,{method:"DELETE"})}async getRequirements(e=!1){return(await this.request(`/requirements${e?"?includeInactive=true":""}`)).map(e=>({id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",type:e.type||e.Type||e.type||"",fieldType:e.fieldType||e.FieldType||e.field_type||"",validationRules:e.validationRules||e.ValidationRules||e.validation_rules,helpText:e.helpText||e.HelpText||e.help_text,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",options:e.options||e.Options||[]}))}async getRequirement(e){return this.request(`/requirements/${e}`)}async createRequirement(e){return this.request("/requirements",{method:"POST",body:JSON.stringify(e)})}async updateRequirement(e,t){return this.request(`/requirements/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteRequirement(e){return this.request(`/requirements/${e}`,{method:"DELETE"})}async getRequirementsMetadata(){return this.request("/requirements/metadata")}async getRequirementOptions(e){return this.request(`/requirements/${e}/options`)}async addRequirementOption(e,t){return this.request(`/requirements/${e}/options`,{method:"POST",body:JSON.stringify(t)})}async updateRequirementOption(e,t,r){return this.request(`/requirements/${e}/options/${t}`,{method:"PUT",body:JSON.stringify(r)})}async deleteRequirementOption(e,t){return this.request(`/requirements/${e}/options/${t}`,{method:"DELETE"})}async addRequirementToEntityType(e,t){return this.request(`/entity-types/${e}/requirements`,{method:"POST",body:JSON.stringify(t)})}async removeRequirementFromEntityType(e,t){return this.request(`/entity-types/${e}/requirements/${t}`,{method:"DELETE"})}async getWizardConfigurations(e=!1){return(await this.request(`/wizardconfigurations${e?"?includeInactive=true":""}`)).map(e=>({id:e.id,entityTypeId:e.entity_type_id||e.entityTypeId,entityTypeDisplayName:e.entity_type_display_name||e.entityTypeDisplayName,isActive:void 0!==e.is_active?e.is_active:e.isActive,createdAt:e.created_at||e.createdAt,updatedAt:e.updated_at||e.updatedAt,steps:(e.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}))}async getWizardConfiguration(e){let t=await this.request(`/wizardconfigurations/${e}`);return{id:t.id,entityTypeId:t.entity_type_id||t.entityTypeId,entityTypeDisplayName:t.entity_type_display_name||t.entityTypeDisplayName,isActive:void 0!==t.is_active?t.is_active:t.isActive,createdAt:t.created_at||t.createdAt,updatedAt:t.updated_at||t.updatedAt,steps:(t.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}}async getWizardConfigurationByEntityType(t){try{return this.request(`/wizardconfigurations/by-entity-type/${t}`)}catch(r){{let{clientSentry:i}=await e.A(661405);i.reportError(r,{tags:{error_type:"entity_config_api",operation:"fetch_wizard_config"},extra:{entityTypeId:t},level:"error"})}return null}}async createWizardConfiguration(e){return this.request("/wizardconfigurations",{method:"POST",body:JSON.stringify(e)})}async updateWizardConfiguration(e,t){return this.request(`/wizardconfigurations/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteWizardConfiguration(e){return this.request(`/wizardconfigurations/${e}`,{method:"DELETE"})}};e.s(["FieldType",0,{Text:"Text",Email:"Email",Phone:"Phone",Number:"Number",Date:"Date",Select:"Select",MultiSelect:"MultiSelect",Radio:"Radio",Checkbox:"Checkbox",Textarea:"Textarea",File:"File",Country:"Country",Currency:"Currency",Address:"Address"},"RequirementType",0,{Information:1,Document:2,ProofOfIdentity:3,ProofOfAddress:4,OwnershipStructure:5,BoardDirectors:6,AuthorizedSignatories:7},"entityConfigApiService",0,t])},998183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={assign:function(){return c},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return o}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});function n(e){let t={};for(let[r,i]of e.entries()){let e=t[r];void 0===e?t[r]=i:Array.isArray(e)?e.push(i):t[r]=[e,i]}return t}function a(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,i]of Object.entries(e))if(Array.isArray(i))for(let e of i)t.append(r,a(e));else t.set(r,a(i));return t}function c(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,i]of r.entries())e.append(t,i)}return e}},195057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={formatUrl:function(){return o},formatWithValidation:function(){return l},urlObjectKeys:function(){return c}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let n=e.r(190809)._(e.r(998183)),a=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,i=e.protocol||"",s=e.pathname||"",o=e.hash||"",c=e.query||"",l=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?l=t+e.host:r&&(l=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(l+=":"+e.port)),c&&"object"==typeof c&&(c=String(n.urlQueryToSearchParams(c)));let u=e.search||c&&`?${c}`||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||a.test(i))&&!1!==l?(l="//"+(l||""),s&&"/"!==s[0]&&(s="/"+s)):l||(l=""),o&&"#"!==o[0]&&(o="#"+o),u&&"?"!==u[0]&&(u="?"+u),s=s.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${i}${l}${s}${u}${o}`}let c=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function l(e){return o(e)}},818581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let i=e.r(271645);function s(e,t){let r=(0,i.useRef)(null),s=(0,i.useRef)(null);return(0,i.useCallback)(i=>{if(null===i){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=n(e,i)),t&&(s.current=n(t,i))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},718967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return b},MissingStaticPage:function(){return v},NormalizeError:function(){return w},PageNotFoundError:function(){return T},SP:function(){return y},ST:function(){return h},WEB_VITALS:function(){return n},execOnce:function(){return a},getDisplayName:function(){return d},getLocationOrigin:function(){return l},getURL:function(){return u},isAbsoluteUrl:function(){return c},isResSent:function(){return p},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return m},stringifyError:function(){return R}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function a(e){let t,r=!1;return(...i)=>(r||(r=!0,t=e(...i)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,c=e=>o.test(e);function l(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=l();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function m(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function f(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(r&&p(r))return i;if(!i)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${i}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i}let y="undefined"!=typeof performance,h=y&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class w extends Error{}class T extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class b extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function R(e){return JSON.stringify({message:e.message,stack:e.stack})}},573668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return n}});let i=e.r(718967),s=e.r(652817);function n(e){if(!(0,i.isAbsoluteUrl)(e))return!0;try{let t=(0,i.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},284508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},522016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={default:function(){return g},useLinkStatus:function(){return T}};for(var s in i)Object.defineProperty(r,s,{enumerable:!0,get:i[s]});let n=e.r(190809),a=e.r(843476),o=n._(e.r(271645)),c=e.r(195057),l=e.r(8372),u=e.r(818581),d=e.r(718967),p=e.r(405550);e.r(233525);let m=e.r(769688),f=e.r(573668),y=e.r(509396);function h(e){return"string"==typeof e?e:(0,c.formatUrl)(e)}function g(t){var r;let i,s,n,[c,g]=(0,o.useOptimistic)(m.IDLE_LINK_STATUS),T=(0,o.useRef)(null),{href:v,as:b,children:R,prefetch:I=null,passHref:C,replace:k,shallow:S,scroll:P,onClick:E,onMouseEnter:A,onTouchStart:N,legacyBehavior:x=!1,onNavigate:_,ref:O,unstable_dynamicOnHover:q,...D}=t;i=R,x&&("string"==typeof i||"number"==typeof i)&&(i=(0,a.jsx)("a",{children:i}));let j=o.default.useContext(l.AppRouterContext),L=!1!==I,$=!1!==I?null===(r=I)||"auto"===r?y.FetchStrategy.PPR:y.FetchStrategy.Full:y.FetchStrategy.PPR,{href:U,as:W}=o.default.useMemo(()=>{let e=h(v);return{href:e,as:b?h(b):e}},[v,b]);if(x){if(i?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=o.default.Children.only(i)}let F=x?s&&"object"==typeof s&&s.ref:O,M=o.default.useCallback(e=>(null!==j&&(T.current=(0,m.mountLinkInstance)(e,U,j,$,L,g)),()=>{T.current&&((0,m.unmountLinkForCurrentNavigation)(T.current),T.current=null),(0,m.unmountPrefetchableInstance)(e)}),[L,U,j,$,g]),z={ref:(0,u.useMergedRef)(M,F),onClick(t){x||"function"!=typeof E||E(t),x&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!j||t.defaultPrevented||function(t,r,i,s,n,a,c){if("undefined"!=typeof window){let l,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((l=t.currentTarget.getAttribute("target"))&&"_self"!==l||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,f.isLocalURL)(r)){n&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),c){let e=!1;if(c({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(699781);o.default.startTransition(()=>{d(i||r,n?"replace":"push",a??!0,s.current)})}}(t,U,W,T,k,P,_)},onMouseEnter(e){x||"function"!=typeof A||A(e),x&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),j&&L&&(0,m.onNavigationIntent)(e.currentTarget,!0===q)},onTouchStart:function(e){x||"function"!=typeof N||N(e),x&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),j&&L&&(0,m.onNavigationIntent)(e.currentTarget,!0===q)}};return(0,d.isAbsoluteUrl)(W)?z.href=W:x&&!C&&("a"!==s.type||"href"in s.props)||(z.href=(0,p.addBasePath)(W)),n=x?o.default.cloneElement(s,z):(0,a.jsx)("a",{...D,...z,children:i}),(0,a.jsx)(w.Provider,{value:c,children:n})}e.r(284508);let w=(0,o.createContext)(m.IDLE_LINK_STATUS),T=()=>(0,o.useContext)(w);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},618566,(e,t,r)=>{t.exports=e.r(976562)},862873,e=>{"use strict";var t=e.i(843476),r=e.i(271645),i=e.i(618566);e.i(643983);var s=e.i(355569),n=e.i(111977),a=e.i(134590),o=e.i(179243),c=e.i(119192),l=e.i(307124),u=e.i(857692),d=e.i(194741),p=e.i(489312),m=e.i(357441),f=e.i(843011),y=e.i(617029);function h(){let e=(0,i.usePathname)(),h=(0,i.useRouter)(),{condensed:g,setCondensed:w}=(0,y.useSidebar)(),[T,v]=(0,r.useState)("dashboard");(0,r.useEffect)(()=>{"/dashboard"===e?v("dashboard"):e?.startsWith("/work-queue")?v("work-queue"):e?.startsWith("/applications")?v("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?v("reviews"):e?.startsWith("/documents")?v("documents"):e?.startsWith("/requirements")?v("requirements"):e?.startsWith("/entity-types")?v("entity-types"):e?.startsWith("/checklists")?v("checklists"):e?.startsWith("/wizard-configurations")?v("wizard-configurations"):e?.startsWith("/rules-and-permissions")?v("rules-and-permissions"):e?.startsWith("/audit-log")?v("audit-log"):e?.startsWith("/messages")?v("messages"):e?.startsWith("/notifications")?v("notifications"):e?.startsWith("/data-migration")?v("data-migration"):e?.startsWith("/refreshes")?v("refreshes"):e?.startsWith("/reports")?v("reports"):e?.startsWith("/profile")?v("profile"):e?.startsWith("/settings")&&v("settings")},[e]);let b=(0,r.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(n.ProductIcon,{width:"20",height:"20"}),onClick:()=>{v("dashboard"),h.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,t.jsx)(p.FilterIcon,{width:"20",height:"20"}),onClick:()=>{v("work-queue"),h.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,t.jsx)(u.AppIcon,{width:"20",height:"20"}),onClick:()=>{v("applications"),h.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,t.jsx)(o.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reviews"),h.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{v("reviews"),h.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{v("reviews"),h.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,t.jsx)(d.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{v("documents"),h.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,t.jsx)(c.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{v("configuration"),h.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{v("configuration"),h.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{v("configuration"),h.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{v("configuration"),h.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{v("configuration"),h.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{v("configuration"),h.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,t.jsx)(m.WarningIcon,{width:"20",height:"20"}),onClick:()=>{v("system"),h.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{v("system"),h.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{v("system"),h.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{v("system"),h.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{v("system"),h.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{v("system"),h.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,t.jsx)(o.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{v("reports"),h.push("/reports")}},{id:"profile",label:"Profile",icon:(0,t.jsx)(a.UserIcon,{width:"20",height:"20"}),onClick:()=>{v("profile"),h.push("/profile")}}],[h]),R={id:"help-centre",label:"Help Centre",icon:(0,t.jsx)(l.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,t.jsx)(f.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:g?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,t.jsx)(s.PortalNavigationSidebar,{navigationItems:b,helpCentreItem:R,activeItemId:T,condensed:g,onToggleCollapse:w,onLogoClick:()=>{v("dashboard"),h.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>h])},297630,e=>{"use strict";let{withContext:t,PropsProvider:r}=(0,e.i(552887).createRecipeContext)({key:"container"}),i=t("div");e.s(["Container",()=>i])},891825,e=>{"use strict";var t=e.i(843476),r=e.i(271645),i=e.i(441305),s=e.i(95966),n=e.i(920755);let a=(0,r.forwardRef)(function(e,r){var a,o,c;let{columns:l,minChildWidth:u,...d}=e,p=(0,i.useChakraContext)(),m=u?(a=u,o=p,(0,s.mapObject)(a,e=>{let t=o.tokens.getVar(`sizes.${e}`,"number"==typeof e?`${e}px`:e);return null===e?null:`repeat(auto-fit, minmax(${t}, 1fr))`})):(c=l,(0,s.mapObject)(c,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`));return(0,t.jsx)(n.Grid,{ref:r,templateColumns:m,...d})});e.s(["SimpleGrid",()=>a])},571798,e=>{"use strict";var t=e.i(37410);let{withContext:r,PropsProvider:i}=(0,e.i(552887).createRecipeContext)({key:"textarea"}),s=r(t.Field.Textarea);e.s(["Textarea",()=>s])},778497,e=>{"use strict";var t=e.i(967079);let r=new class{isDevelopment=!1;isProduction=!0;debug(e,...t){this.isDevelopment&&console.debug(`[DEBUG] ${e}`,...t)}info(e,...r){this.isDevelopment&&console.info(`[INFO] ${e}`,...r),this.isProduction&&(0,t.addBreadcrumb)(e,"info","info",{args:r})}warn(e,r){console.warn(`[WARN] ${e}`),this.isProduction&&(0,t.reportWarning)(e,{tags:r?.tags,extra:r?.extra})}error(e,r,i){let s=r||(e instanceof Error?e.message:String(e));console.error(`[ERROR] ${s}`,e);let n=i?.level==="warn"?"warning":i?.level==="error"?"error":i?.level==="info"?"info":"error";(0,t.reportError)(e,{tags:i?.tags,extra:i?.extra,level:n})}log(e,r,i="info"){if(this.isDevelopment&&console.log(`[${i.toUpperCase()}] ${e}`,r||""),this.isProduction&&"debug"!==i){let s="warn"===i?"warning":"error"===i?"error":"info";(0,t.addBreadcrumb)(e,"log",s,r)}}};e.s(["logger",0,r])},817684,e=>{"use strict";function t(e){return{id:e.workItemNumber||e.id,workItemId:e.id,legalName:e.applicantName,entityType:e.entityType,country:e.country,status:({New:"SUBMITTED",Assigned:"IN PROGRESS",InProgress:"IN PROGRESS",PendingApproval:"RISK REVIEW",Approved:"COMPLETE",Completed:"COMPLETE",Declined:"DECLINED",Cancelled:"DECLINED",DueForRefresh:"IN PROGRESS"})[e.status]||"IN PROGRESS",backendStatus:e.status,created:e.createdAt,updated:e.updatedAt||e.createdAt,submittedBy:e.assignedToName||e.assignedTo||"Unknown",riskScore:({Low:25,Medium:50,High:75,Critical:95})[e.riskLevel]||50,workItemNumber:e.workItemNumber,applicationId:e.applicationId,priority:e.priority,riskLevel:e.riskLevel,assignedTo:e.assignedTo,assignedToName:e.assignedToName,assignedAt:e.assignedAt,requiresApproval:e.requiresApproval,approvedBy:e.approvedBy,approvedByName:e.approvedByName,approvedAt:e.approvedAt,rejectionReason:e.rejectionReason,dueDate:e.dueDate,isOverdue:e.isOverdue,nextRefreshDate:e.nextRefreshDate,lastRefreshedAt:e.lastRefreshedAt,refreshCount:e.refreshCount}}function r(e){return e.map(t)}e.s(["mapWorkItemToApplication",()=>t,"mapWorkItemsToApplications",()=>r])},670357,592622,82349,576699,571408,e=>{"use strict";async function t(e=1,r=20,i,s){let n=new URLSearchParams({page:e.toString(),pageSize:r.toString()});i&&n.append("searchTerm",i),s&&n.append("status",s);let a=await fetch(`/api/applications?${n.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!a.ok)throw Error(`Failed to fetch applications: ${a.status} ${a.statusText}`);let o=await a.json();return{items:o.items||o.data||[],totalCount:o.total_count||o.totalCount||o.total||0,page:o.page||e,pageSize:o.page_size||o.pageSize||r}}async function r(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/entity-type-distribution?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch entity type distribution: ${r.status} ${r.statusText}`);let i=await r.json();return Array.isArray(i)?i:i.items||i.data||[]}async function i(e=7,t){let r=new URLSearchParams({days:e.toString()});t&&r.append("partnerId",t);let s=await fetch(`/api/trends?${r.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!s.ok)throw Error(`Failed to fetch application trends: ${s.status} ${s.statusText}`);let n=await s.json();return Array.isArray(n)?n:n.items||n.data||[]}async function s(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/dashboard?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch dashboard projection: ${r.status} ${r.statusText}`);return r.json()}async function n(){let e={"Content-Type":"application/json"};try{let t=await fetch("/api/auth/session"),r=await t.json();r?.user?.email&&(e["X-User-Email"]=r.user.email),r?.user?.name&&(e["X-User-Name"]=r.user.name),r?.user?.role&&(e["X-User-Role"]=r.user.role)}catch(e){}return e}async function a(e,t){let r=e;e.startsWith("?")?r=e:e.startsWith("/")||(r=`/${e}`);let i=`/api/workqueue${r}`,s=await n(),a=await fetch(i,{...t,headers:{...s,...t?.headers}});if(!a.ok){let e=`Work Queue API request failed: ${a.status} ${a.statusText}`;try{let t=await a.json();e=t.message||t.error||e}catch{}throw Error(e)}let o=await a.text();return o&&""!==o.trim()?JSON.parse(o):null}async function o(e){let t=new URLSearchParams;e?.status&&"ALL"!==e.status&&t.append("status",e.status),e?.searchTerm&&t.append("searchTerm",e.searchTerm),e?.country&&t.append("country",e.country),e?.riskLevel&&t.append("riskLevel",e.riskLevel);let r=e?.page||1,i=e?.pageSize||100;t.append("page",r.toString()),t.append("pageSize",i.toString());let s=await a(`?${t.toString()}`);return{items:s.items||s.data||[],totalCount:s.totalCount||s.total_count||0,page:r,pageSize:i}}async function c(e){try{return await a(`/${e}`)}catch(e){if(e instanceof Error&&e.message.includes("404"))return null;throw e}}async function l(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),i=await a(`/my-items?${r.toString()}`);return{items:i.items||i.data||[],totalCount:i.totalCount||i.total_count||0,page:e,pageSize:t}}async function u(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),i=await a(`/pending-approvals?${r.toString()}`);return{items:i.items||i.data||[],totalCount:i.totalCount||i.total_count||0,page:e,pageSize:t}}async function d(e=1,t=100,r){let i=new URLSearchParams({page:e.toString(),pageSize:t.toString()});return r&&i.append("asOfDate",r.toISOString()),await a(`/due-for-refresh?${i.toString()}`)}async function p(e,t,r){let i;if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))i=t;else{let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;let r=Math.abs(e).toString(16).padStart(32,"0");i=`${r.substring(0,8)}-${r.substring(8,12)}-${r.substring(12,16)}-${r.substring(16,20)}-${r.substring(20,32)}`}await a(`/${e}/assign`,{method:"POST",body:JSON.stringify({AssignedToUserId:i,AssignedToUserName:r})})}async function m(e){await a(`/${e}/unassign`,{method:"POST"})}async function f(e){await a(`/${e}/start-review`,{method:"POST"})}async function y(e,t){await a(`/${e}/submit-for-approval`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function h(e,t){await a(`/${e}/approve`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function g(e,t){await a(`/${e}/decline`,{method:"POST",body:JSON.stringify({reason:t})})}async function w(e,t){await a(`/${e}/complete`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function T(e){await a(`/${e}/mark-for-refresh`,{method:"POST"})}async function v(e,t){await a(`/${e}/comments`,{method:"POST",body:JSON.stringify({text:t})})}async function b(e){return await a(`/${e}/comments`)}async function R(e){return await a(`/${e}/history`)}function I(e){let t=e.businessLegalName||`${e.applicantFirstName} ${e.applicantLastName}`.trim()||"Unknown",r=e.businessCountryOfRegistration||e.applicantCountry||"Unknown",i=e.type||(e.businessLegalName?"Business":"Individual")||"Unknown",s=e.assignedToName||e.assignedTo||"Unassigned",n=e.submittedAt||e.createdAt,a=Math.round(e.progressPercentage||0);return{id:e.caseId||e.id,companyName:t,entityType:i,status:({Draft:"IN_PROGRESS",InProgress:"IN_PROGRESS",PendingReview:"RISK_REVIEW",Submitted:"SUBMITTED",Approved:"COMPLETE",Rejected:"DECLINED",Cancelled:"DECLINED"})[e.status]||"IN_PROGRESS",submittedDate:n,assignedTo:s,riskLevel:({Low:"LOW",MediumLow:"LOW",Medium:"MEDIUM",MediumHigh:"HIGH",High:"HIGH"})[e.riskLevel]||"MEDIUM",country:r,progress:a}}e.s(["addComment",()=>v,"approveWorkItem",()=>h,"assignWorkItem",()=>p,"completeWorkItem",()=>w,"declineWorkItem",()=>g,"getItemsDueForRefresh",()=>d,"getMyWorkItems",()=>l,"getPendingApprovals",()=>u,"getWorkItemById",()=>c,"getWorkItemComments",()=>b,"getWorkItemHistory",()=>R,"getWorkItems",()=>o,"markForRefresh",()=>T,"startReview",()=>f,"submitForApproval",()=>y,"unassignWorkItem",()=>m],592622);var C=e.i(817684);async function k(e=1,r=20,i,s){let n=await t(e,r,i,s);return{items:n.items.map(I),totalCount:n.totalCount,page:n.page,pageSize:n.pageSize}}async function S(t){let r=await k(1,1e4,t?.search,t?.status),{escapeCsvField:i,createCsvBlob:s}=await e.A(535485);return s(["Application ID","Company Name","Entity Type","Country","Status","Risk Level","Assigned To","Progress","Submitted Date"],r.items.map(e=>[i(e.id),i(e.companyName),i(e.entityType),i(e.country),i(e.status),i(e.riskLevel),i(e.assignedTo),i(`${e.progress}%`),i(new Date(e.submittedDate).toLocaleDateString())]))}async function P(e){let t=await s(e);return{totalApplications:t.cases.totalCases,pendingReview:t.cases.pendingReviewCases,riskReview:t.risk.casesRequiringManualReview,completed:t.cases.completedCases,incomplete:t.cases.activeCases-t.cases.pendingReviewCases,declined:t.cases.rejectedCases,avgProcessingTime:Number(t.performance.averageCompletionTimeHours/24),successRate:Number(t.performance.completionRate)}}async function E(e){return(await r(e)).map(e=>({type:e.name,count:e.value}))}async function A(e=7,t){return i(e,t)}async function N(e){return s(e)}function x(e){return({SUBMITTED:"New","IN PROGRESS":"InProgress","RISK REVIEW":"PendingApproval",COMPLETE:"Completed",DECLINED:"Declined"})[e]||e}async function _(e){let t=e?{...e,status:e.status&&"ALL"!==e.status?x(e.status):void 0}:void 0,r=await o(t);return{items:(0,C.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function O(e=1,t=20){let r=await l(e,t);return{items:(0,C.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function q(e=1,t=20){return u(e,t)}async function D(e=1,t=100,r){return d(e,t,r)}async function j(e,t,r){if(!e)throw Error("Work item ID is required");if(!t)throw Error("User ID is required");if(!r)throw Error("User name is required");await p(e,t,r)}async function L(e){if(!e)throw Error("Work item ID is required");await m(e)}async function $(e){if(!e)throw Error("Work item ID is required");await f(e)}async function U(e,t){if(!e)throw Error("Work item ID is required");await y(e,t)}async function W(e,t){if(!e)throw Error("Work item ID is required");await h(e,t)}async function F(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Rejection reason is required");await g(e,t)}async function M(e,t){if(!e)throw Error("Work item ID is required");await w(e,t)}async function z(e){if(!e)throw Error("Work item ID is required");await T(e)}async function B(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Comment text is required");await v(e,t)}async function H(e){if(!e)throw Error("Work item ID is required");return b(e)}async function J(e){if(!e)throw Error("Work item ID is required");return R(e)}async function V(t){let r=t?{...t,status:t.status&&"ALL"!==t.status?x(t.status):void 0}:void 0,i=await o({...r,page:1,pageSize:1e4}),{escapeCsvField:s,createCsvBlob:n}=await e.A(535485),{mapWorkItemToApplication:a}=await e.A(8947);return n(["Application ID","Work Item Number","Legal Name","Entity Type","Country","Status","Priority","Risk Level","Assigned To","Created Date","Updated Date"],i.items.map(e=>{let t=a(e);return[s(t.id),s(e.workItemNumber),s(t.legalName),s(t.entityType),s(t.country),s(t.status),s(e.priority),s(e.riskLevel),s(e.assignedToName||e.assignedTo),s(new Date(t.created).toLocaleDateString()),s(new Date(t.updated).toLocaleDateString())]}))}e.s(["exportApplications",()=>S,"fetchApplications",()=>k],82349),e.s(["fetchApplicationTrends",()=>A,"fetchDashboardProjection",()=>N,"fetchDashboardStats",()=>P,"fetchEntityTypeDistribution",()=>E],576699),e.s(["addCommentUseCase",()=>B,"approveWorkItemUseCase",()=>W,"assignWorkItemUseCase",()=>j,"completeWorkItemUseCase",()=>M,"declineWorkItemUseCase",()=>F,"exportWorkItems",()=>V,"fetchItemsDueForRefresh",()=>D,"fetchMyWorkItems",()=>O,"fetchPendingApprovals",()=>q,"fetchWorkItemComments",()=>H,"fetchWorkItemHistory",()=>J,"fetchWorkItems",()=>_,"markForRefreshUseCase",()=>z,"startReviewUseCase",()=>$,"submitForApprovalUseCase",()=>U,"unassignWorkItemUseCase",()=>L],571408),e.s([],670357)},856459,e=>{"use strict";var t=e.i(526732);let r=new class{async getAuthHeaders(){let e=await (0,t.getSession)(),r={"Content-Type":"application/json"};return e?.user?.email&&(r["X-User-Email"]=e.user.email),e?.user?.name&&(r["X-User-Name"]=e.user.name),e?.user?.role&&(r["X-User-Role"]=e.user.role),r}async request(e,t){let r=await this.getAuthHeaders();try{let i=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),15e3)}),s=fetch(e,{...t,headers:{...r,...t?.headers}}),n=await Promise.race([s,i]);if(!n.ok){let e=await n.text(),t=`Risk API request failed: ${n.status} ${n.statusText}`;try{let r=JSON.parse(e);r.message?t=r.message:r.error&&(t=r.error)}catch{e&&e.trim().length>0&&(t=e.length>200?e.substring(0,200)+"...":e)}throw Error(t)}if(204===n.status)return null;return n.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Risk service. Please ensure the service is running.");throw e}}async getCaseDetails(e){try{let t=await this.getAuthHeaders(),r=`http://127.0.0.1:8007/api/v1/cases/${encodeURIComponent(e)}`,i=await fetch(r,{headers:t});if(!i.ok){if(404===i.status)return null;throw Error(`Failed to fetch case details: ${i.statusText}`)}return i.json()}catch(t){return console.warn(`Failed to fetch case details for ${e}:`,t),null}}mapRiskLevel(e,t){let r=e.toUpperCase();return"UNKNOWN"!==r&&e&&""!==e.trim()?"LOW"===r||"MEDIUMLOW"===r?"LOW":"MEDIUM"===r||"MEDIUMHIGH"===r?"MEDIUM":"HIGH"===r?void 0!==t&&t>=90?"CRITICAL":"HIGH":"CRITICAL"===r?"CRITICAL":"UNKNOWN":"UNKNOWN"}mapRiskLevelToBackend(e){let t=e.toUpperCase();return"UNKNOWN"===t?"Unknown":"LOW"===t?"Low":"MEDIUM"===t?"Medium":"HIGH"===t||"CRITICAL"===t?"High":"Unknown"}mapStatus(e){let t=e.toUpperCase();return"INPROGRESS"===t||"REQUIRESREVIEW"===t?"IN_REVIEW":"COMPLETED"===t?"APPROVED":"REJECTED"===t?"REJECTED":"PENDING"}getEntityTypeDisplay(e){if(!e)return"Unknown";if(e.metadataJson)try{let t=JSON.parse(e.metadataJson);if(t.entityType)return t.entityType}catch{}return e.type||"Unknown"}getCompanyName(e){return e?e.businessLegalName?e.businessLegalName:e.applicantFirstName||e.applicantLastName?`${e.applicantFirstName||""} ${e.applicantLastName||""}`.trim()||"Individual Applicant":"Unknown Company":"Unknown Company"}async listRiskAssessments(e){let t=new URLSearchParams;e?.partnerId&&t.append("partnerId",e.partnerId),e?.riskLevel&&t.append("riskLevel",e.riskLevel),e?.status&&t.append("status",e.status),e?.caseId&&t.append("caseId",e.caseId);let r=t.toString(),i=`/api/risk/risk-assessments${r?`?${r}`:""}`,s=await this.request(i);return await Promise.all(s.map(async e=>{let t=await this.getCaseDetails(e.caseId),r=Number(e.riskScore);return{id:e.id,applicationId:e.caseId,caseId:e.caseId,companyName:this.getCompanyName(t),entityType:this.getEntityTypeDisplay(t),riskLevel:this.mapRiskLevel(e.overallRiskLevel,r),riskScore:r,status:this.mapStatus(e.status),assignedTo:t?.assignedToName||t?.assignedTo||"Unassigned",submittedDate:t?.submittedAt||e.createdAt,reviewDate:e.completedAt,reviewer:e.assessedBy,riskFactors:e.factors.map(e=>e.description),recommendations:e.notes?[e.notes]:[]}}))}async getRiskAssessment(e){let t=`/api/risk/risk-assessments/${e}`,r=await this.request(t);if(!r)return null;let i=await this.getCaseDetails(r.caseId),s=Number(r.riskScore);return{id:r.id,applicationId:r.caseId,caseId:r.caseId,companyName:this.getCompanyName(i),entityType:this.getEntityTypeDisplay(i),riskLevel:this.mapRiskLevel(r.overallRiskLevel,s),riskScore:s,status:this.mapStatus(r.status),assignedTo:i?.assignedToName||i?.assignedTo||"Unassigned",submittedDate:i?.submittedAt||r.createdAt,reviewDate:r.completedAt,reviewer:r.assessedBy,riskFactors:r.factors.map(e=>e.description),recommendations:r.notes?[r.notes]:[]}}async getRiskAssessmentByCase(e){let t=`/api/risk/risk-assessments/case/${encodeURIComponent(e)}`,r=await this.request(t);if(!r)return null;let i=await this.getCaseDetails(r.caseId),s=Number(r.riskScore);return{id:r.id,applicationId:r.caseId,caseId:r.caseId,companyName:this.getCompanyName(i),entityType:this.getEntityTypeDisplay(i),riskLevel:this.mapRiskLevel(r.overallRiskLevel,s),riskScore:s,status:this.mapStatus(r.status),assignedTo:i?.assignedToName||i?.assignedTo||"Unassigned",submittedDate:i?.submittedAt||r.createdAt,reviewDate:r.completedAt,reviewer:r.assessedBy,riskFactors:r.factors.map(e=>e.description),recommendations:r.notes?[r.notes]:[]}}async setManualRiskLevel(e,t,r){let i=`/api/risk/risk-assessments/${e}/set-risk-level`,s=this.mapRiskLevelToBackend(t);return this.request(i,{method:"POST",body:JSON.stringify({riskLevel:s,justification:r})})}async completeRiskAssessment(e,t){let r=`/api/risk/risk-assessments/${e}/complete`;return this.request(r,{method:"POST",body:JSON.stringify({notes:t})})}async rejectRiskAssessment(e,t){let r=`/api/risk/risk-assessments/${e}/reject`;return this.request(r,{method:"POST",body:JSON.stringify({reason:t})})}async createRiskAssessment(e,t){return this.request("/api/risk/risk-assessments",{method:"POST",body:JSON.stringify({caseId:e,partnerId:t})})}};e.s(["riskApiService",0,r])},509838,e=>{"use strict";var t=e.i(843476),r=e.i(271645),i=e.i(311011),s=e.i(510087);let n=(0,r.forwardRef)(function(e,r){let{align:n,fit:a="cover",...o}=e;return(0,t.jsx)(i.chakra.img,{ref:r,objectFit:a,objectPosition:n,className:(0,s.cx)("chakra-image",e.className),...o})});e.s(["Image",()=>n])},147513,e=>{"use strict";e.s([],281194),e.i(281194),e.s([],138415),e.i(138415);var t=e.i(843476),r=e.i(911899),i=e.i(271645),s=e.i(978605);let[n,a]=(0,e.i(532592).createContext)({name:"ProgressContext",hookName:"useProgressContext",providerName:"<ProgressProvider />"}),o=(0,i.forwardRef)((e,i)=>{let n=a(),o=(0,r.mergeProps)(n.getCircleProps(),e);return(0,t.jsx)(s.ark.svg,{ref:i,...o})});o.displayName="ProgressCircle";let c=(0,i.forwardRef)((e,i)=>{let n=a(),o=(0,r.mergeProps)(n.getCircleRangeProps(),e);return(0,t.jsx)(s.ark.circle,{ref:i,...o})});c.displayName="ProgressCircleRange";let l=(0,i.forwardRef)((e,i)=>{let n=a(),o=(0,r.mergeProps)(n.getCircleTrackProps(),e);return(0,t.jsx)(s.ark.circle,{ref:i,...o})});l.displayName="ProgressCircleTrack";let u=e=>e.children(a()),d=(0,i.forwardRef)((e,i)=>{let n=a(),o=(0,r.mergeProps)(n.getLabelProps(),e);return(0,t.jsx)(s.ark.label,{...o,ref:i})});d.displayName="ProgressLabel";let p=(0,i.forwardRef)((e,i)=>{let n=a(),o=(0,r.mergeProps)(n.getRangeProps(),e);return(0,t.jsx)(s.ark.div,{...o,ref:i})});p.displayName="ProgressRange";var m=e.i(287942),f=e.i(671073),y=e.i(204299),h=e.i(7652),g=e.i(962288);let w=(0,i.forwardRef)((e,a)=>{let[o,c]=(0,m.createSplitProps)()(e,["defaultValue","formatOptions","id","ids","locale","max","min","onValueChange","orientation","translations","value"]),l=(e=>{let t=(0,i.useId)(),{getRootNode:r}=(0,h.useEnvironmentContext)(),{dir:s,locale:n}=(0,g.useLocaleContext)(),a={id:t,dir:s,locale:n,getRootNode:r,...e},o=(0,y.useMachine)(f.machine,a);return f.connect(o,y.normalizeProps)})(o),u=(0,r.mergeProps)(l.getRootProps(),c);return(0,t.jsx)(n,{value:l,children:(0,t.jsx)(s.ark.div,{...u,ref:a})})});w.displayName="ProgressRoot";let T=(0,i.forwardRef)((e,i)=>{let[{value:a},o]=(0,m.createSplitProps)()(e,["value"]),c=(0,r.mergeProps)(a.getRootProps(),o);return(0,t.jsx)(n,{value:a,children:(0,t.jsx)(s.ark.div,{...c,ref:i})})});T.displayName="ProgressRootProvider";let v=(0,i.forwardRef)((e,i)=>{let n=a(),o=(0,r.mergeProps)(n.getTrackProps(),e);return(0,t.jsx)(s.ark.div,{...o,ref:i})});v.displayName="ProgressTrack";let b=(0,i.forwardRef)((e,i)=>{let{children:n,...o}=e,c=a(),l=(0,r.mergeProps)(c.getValueTextProps(),o);return(0,t.jsx)(s.ark.span,{...l,ref:i,children:n||c.percentAsString})});b.displayName="ProgressValueText";let R=(0,i.forwardRef)((e,i)=>{let[n,o]=(0,m.createSplitProps)()(e,["state"]),c=a(),l=(0,r.mergeProps)(c.getViewProps(n),o);return(0,t.jsx)(s.ark.span,{...l,ref:i})});R.displayName="ProgressView",e.s(["Circle",()=>o,"CircleRange",()=>c,"CircleTrack",()=>l,"Context",()=>u,"Label",()=>d,"Range",()=>p,"Root",()=>w,"RootProvider",()=>T,"Track",()=>v,"ValueText",()=>b,"View",()=>R],278966);var I=e.i(278966),I=I;let{withProvider:C,withContext:k,useStyles:S,PropsProvider:P}=(0,e.i(389309).createSlotRecipeContext)({key:"progress"}),E=C(I.RootProvider,"root",{forwardAsChild:!0}),A=C(I.Root,"root"),N=k(I.Label,"label",{forwardAsChild:!0}),x=k(I.Track,"track",{forwardAsChild:!0}),_=k(I.Range,"range",{forwardAsChild:!0}),O=k(I.ValueText,"valueText",{forwardAsChild:!0}),q=I.Context;e.s(["Context",()=>q,"Label",()=>N,"PropsProvider",()=>P,"Range",()=>_,"Root",()=>A,"RootProvider",()=>E,"Track",()=>x,"ValueText",()=>O],128322);var D=e.i(128322);e.s(["Progress",0,D],147513)},278398,e=>{"use strict";var t=e.i(843476),r=e.i(271645),i=e.i(843011),s=e.i(361035),n=e.i(53545),a=e.i(300713),o=e.i(761869),c=e.i(509838);e.i(643983);var l=e.i(554646),u=e.i(191348),d=e.i(404372),p=e.i(44999),m=e.i(192199);function f({isOpen:e,onClose:f,documentUrl:y,fileName:h,documentType:g,fileSize:w,onDownload:T}){let[v,b]=(0,r.useState)(!0),[R,I]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{if(e&&y)return b(!0),I(!1),document.body.style.overflow="hidden",()=>{document.body.style.overflow=""};document.body.style.overflow=""},[e,y]),(0,t.jsx)(d.Modal,{isOpen:e,onClose:f,size:"large",header:(0,t.jsxs)(s.HStack,{justify:"space-between",align:"center",w:"full",children:[(0,t.jsxs)(n.VStack,{align:"start",gap:"0",children:[(0,t.jsx)(l.Typography,{fontSize:"lg",fontWeight:"700",color:"black",children:h}),(0,t.jsxs)(l.Typography,{fontSize:"sm",color:"black",children:[g&&`${g} • `,w&&(e=>{if(!e)return"";if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(w)]})]}),(0,t.jsxs)(s.HStack,{gap:"2",children:[T&&(0,t.jsxs)(u.Button,{variant:"secondary",size:"sm",onClick:T,children:[(0,t.jsx)(p.IconWrapper,{children:(0,t.jsx)(m.FiDownload,{size:16})}),"Download"]}),(0,t.jsx)(u.Button,{variant:"ghost",size:"sm",onClick:f,children:(0,t.jsx)(p.IconWrapper,{children:(0,t.jsx)(m.FiX,{size:16})})})]})]}),children:(0,t.jsx)(i.Box,{p:"0",overflow:"hidden",flex:"1",display:"flex",flexDirection:"column",maxH:"90vh",children:v&&!y?(0,t.jsx)(o.Flex,{justify:"center",align:"center",minH:"400px",children:(0,t.jsxs)(n.VStack,{gap:"4",children:[(0,t.jsx)(a.Spinner,{size:"xl",color:"orange.500"}),(0,t.jsx)(l.Typography,{color:"black",children:"Loading document..."})]})}):y?[".jpg",".jpeg",".png",".gif",".bmp",".webp",".svg",".tiff",".tif"].includes(h.toLowerCase().substring(h.lastIndexOf(".")))?(0,t.jsx)(i.Box,{p:"4",bg:"gray.50",display:"flex",justifyContent:"center",alignItems:"center",minH:"400px",children:(0,t.jsx)(c.Image,{src:y,alt:h,maxW:"100%",maxH:"70vh",objectFit:"contain",borderRadius:"md",onLoad:()=>{b(!1),console.log("Image loaded successfully")},onError:e=>{b(!1),console.error("Image failed to load:",e),console.error("Image URL:",y)},crossOrigin:"anonymous",referrerPolicy:"no-referrer"})}):[".pdf",".html",".htm",".txt",".csv"].includes(h.toLowerCase().substring(h.lastIndexOf(".")))?(0,t.jsxs)(i.Box,{p:"2",bg:"gray.50",flex:"1",position:"relative",display:"flex",flexDirection:"column",overflow:"auto",minH:"0",children:[(0,t.jsx)("iframe",{src:`${y}#toolbar=1&navpanes=0&scrollbar=1&zoom=120`,style:{width:"100%",height:"100%",border:"none",borderRadius:"8px",backgroundColor:"white",minHeight:"600px"},title:h,onLoad:()=>{b(!1),console.log("PDF iframe loaded successfully")},onError:e=>{b(!1),I(!0),console.error("PDF iframe failed to load:",e),console.error("PDF URL:",y)}}),!v&&!R&&(0,t.jsx)(i.Box,{position:"absolute",bottom:"4",left:"50%",transform:"translateX(-50%)",bg:"orange.50",border:"1px solid",borderColor:"orange.200",borderRadius:"md",p:"3",maxW:"90%",zIndex:5,children:(0,t.jsxs)(s.HStack,{gap:"2",justify:"center",children:[(0,t.jsx)(l.Typography,{fontSize:"sm",color:"black",children:"PDF not displaying?"}),(0,t.jsx)(u.Button,{size:"sm",variant:"secondary",onClick:()=>{T?T():window.open(y,"_blank")},children:"Open in New Tab"})]})}),R&&(0,t.jsxs)(i.Box,{p:"8",textAlign:"center",minH:"400px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",children:[(0,t.jsx)(p.IconWrapper,{children:(0,t.jsx)(m.FiFileText,{size:64,color:"black"})}),(0,t.jsx)(l.Typography,{fontSize:"lg",fontWeight:"medium",color:"black",mb:"2",mt:"4",children:h}),(0,t.jsx)(l.Typography,{color:"black",mb:"6",textAlign:"center",maxW:"400px",children:"Your browser cannot display PDFs inline. Click the button below to open the PDF in a new tab."}),(0,t.jsxs)(u.Button,{variant:"primary",size:"md",onClick:()=>{T?T():window.open(y,"_blank")},children:[(0,t.jsx)(p.IconWrapper,{children:(0,t.jsx)(m.FiDownload,{size:16})}),"Open PDF in New Tab"]})]}),v&&(0,t.jsx)(o.Flex,{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",justify:"center",align:"center",zIndex:10,bg:"white",p:"4",borderRadius:"md",boxShadow:"md",children:(0,t.jsxs)(n.VStack,{gap:"4",children:[(0,t.jsx)(a.Spinner,{size:"xl",color:"orange.500"}),(0,t.jsx)(l.Typography,{color:"black",children:"Loading PDF..."})]})})]}):(0,t.jsx)(i.Box,{p:"4",bg:"gray.50",minH:"400px",children:(0,t.jsxs)(n.VStack,{gap:"4",align:"center",justify:"center",minH:"400px",children:[(0,t.jsx)(p.IconWrapper,{children:(0,t.jsx)(m.FiFileText,{size:48,color:"black"})}),(0,t.jsx)(l.Typography,{fontSize:"lg",fontWeight:"medium",color:"black",children:h}),(0,t.jsxs)(l.Typography,{fontSize:"sm",color:"black",textAlign:"center",children:["This file type cannot be previewed in the browser.",(0,t.jsx)("br",{}),"Click the download button to view it."]}),(0,t.jsxs)(u.Button,{variant:"primary",onClick:T,children:[(0,t.jsx)(p.IconWrapper,{children:(0,t.jsx)(m.FiDownload,{size:16})}),"Download to View"]})]})}):(0,t.jsx)(o.Flex,{justify:"center",align:"center",minH:"400px",children:(0,t.jsx)(n.VStack,{gap:"4",children:(0,t.jsx)(l.Typography,{color:"black",children:"Document not available"})})})})})}e.s(["DocumentViewer",()=>f])},54010,e=>{"use strict";var t=e.i(337880);let r={[t.RequirementType.Information]:"Overview",[t.RequirementType.Document]:"Documents",[t.RequirementType.ProofOfIdentity]:"Identity Verification",[t.RequirementType.ProofOfAddress]:"Address Verification",[t.RequirementType.OwnershipStructure]:"Ownership",[t.RequirementType.BoardDirectors]:"Directors",[t.RequirementType.AuthorizedSignatories]:"Authorized Signatories"},i={[t.RequirementType.Information]:"Basic entity information",[t.RequirementType.Document]:"Required documents",[t.RequirementType.ProofOfIdentity]:"Identity verification documents",[t.RequirementType.ProofOfAddress]:"Address verification documents",[t.RequirementType.OwnershipStructure]:"Shareholders and ownership structure",[t.RequirementType.BoardDirectors]:"Board of directors information",[t.RequirementType.AuthorizedSignatories]:"Authorized signatories and representatives"};async function s(e,s){try{console.log("[Schema Renderer] Fetching entity schema for code (as-is from application):",e);let n=await t.entityConfigApiService.getEntityTypeByCode(e,!0);if(console.log("[Schema Renderer] Entity type response:",n?{id:n.id,code:n.code,displayName:n.displayName,requirementsCount:n.requirements?.length||0}:"null"),!n||!n.requirements)return console.error(`[Schema Renderer] ❌ No entity configuration found for entity type: ${e}`),null;console.log(`[Schema Renderer] ✅ Found ${n.requirements.length} requirements`);let a=new Map;for(let e of n.requirements){let n,o=e.requirement;if(!o)continue;n="number"==typeof o.type?o.type:"string"==typeof o.type&&({Information:t.RequirementType.Information,Document:t.RequirementType.Document,ProofOfIdentity:t.RequirementType.ProofOfIdentity,ProofOfAddress:t.RequirementType.ProofOfAddress,OwnershipStructure:t.RequirementType.OwnershipStructure,BoardDirectors:t.RequirementType.BoardDirectors,AuthorizedSignatories:t.RequirementType.AuthorizedSignatories,1:t.RequirementType.Information,2:t.RequirementType.Document,3:t.RequirementType.ProofOfIdentity,4:t.RequirementType.ProofOfAddress,5:t.RequirementType.OwnershipStructure,6:t.RequirementType.BoardDirectors,7:t.RequirementType.AuthorizedSignatories})[o.type]||t.RequirementType.Information,a.has(n)||a.set(n,{id:`section-${n}`,title:r[n]||"Other",description:i[n],order:n,fields:[]});let c=a.get(n),l=function(e,t){let r=e.toUpperCase(),i=t.metadataJson?"string"==typeof t.metadataJson?JSON.parse(t.metadataJson):t.metadataJson:{},s={LEGAL_NAME:e=>e.businessLegalName||i.legal_name||i.businessLegalName||`${e.applicantFirstName||""} ${e.applicantLastName||""}`.trim()||"",REGISTRATION_NUMBER:e=>e.businessRegistrationNumber||i.registration_number||i.registrationNumber||"",TAX_ID:e=>e.businessTaxId||i.tax_id||i.taxId||i.tax_number||"",TAX_NUMBER:e=>e.businessTaxId||i.tax_id||i.taxId||i.tax_number||"",COUNTRY_OF_INCORPORATION:e=>e.businessCountryOfRegistration||i.country_of_incorporation||i.countryOfIncorporation||i.countryOfRegistration||e.applicantCountry||"",BUSINESS_ADDRESS:e=>e.businessAddress||i.business_address||i.businessAddress||e.applicantAddress||"",BUSINESS_NATURE:e=>e.businessIndustry||i.business_nature||i.businessNature||i.industry||"",NATURE_OF_BUSINESS:e=>e.businessIndustry||i.nature_of_business||i.natureOfBusiness||i.business_nature||i.businessNature||i.industry||"",CONTACT_PERSON:e=>`${e.applicantFirstName||""} ${e.applicantLastName||""}`.trim()||i.contact_person||i.contactPerson||i.primary_contact_person||i.primaryContactPerson||"",PRIMARY_CONTACT_PERSON:e=>`${e.applicantFirstName||""} ${e.applicantLastName||""}`.trim()||i.primary_contact_person||i.primaryContactPerson||i.contact_person||i.contactPerson||"",CONTACT_EMAIL:e=>e.applicantEmail||i.contact_email||i.contactEmail||"",CONTACT_PHONE:e=>e.applicantPhone||i.contact_phone||i.contactPhone||"",APPLICANT_FIRST_NAME:e=>e.applicantFirstName||i.applicant_first_name||i.applicantFirstName||"",APPLICANT_LAST_NAME:e=>e.applicantLastName||i.applicant_last_name||i.applicantLastName||"",APPLICANT_EMAIL:e=>e.applicantEmail||i.applicant_email||i.applicantEmail||"",APPLICANT_PHONE:e=>e.applicantPhone||i.applicant_phone||i.applicantPhone||"",APPLICANT_DATE_OF_BIRTH:e=>e.applicantDateOfBirth||i.applicant_date_of_birth||i.applicantDateOfBirth||"",APPLICANT_NATIONALITY:e=>e.applicantNationality||i.applicant_nationality||i.applicantNationality||"",APPLICANT_ADDRESS:e=>e.applicantAddress||i.applicant_address||i.applicantAddress||"",NUMBER_OF_EMPLOYEES:e=>e.businessNumberOfEmployees||i.number_of_employees||i.numberOfEmployees||"",ANNUAL_REVENUE:e=>e.businessAnnualRevenue||i.annual_revenue||i.annualRevenue||"",DATE_OF_INCORPORATION:e=>i.date_of_incorporation||i.dateOfIncorporation||i.incorporation_date||i.incorporationDate||"",INCORPORATION_DATE:e=>i.date_of_incorporation||i.dateOfIncorporation||i.incorporation_date||i.incorporationDate||""};if(s[r])return s[r](t);let n=Object.keys(i).find(e=>e.toUpperCase()===r||e.toUpperCase().replace(/_/g,"")===r.replace(/_/g,""));if(n)return i[n];let a=r.toLowerCase().split("_").map((e,t)=>0===t?e:e.charAt(0).toUpperCase()+e.slice(1)).join("");return i[a]?i[a]:""}(o.code,s),u={code:o.code,label:o.displayName,type:o.fieldType,value:l,placeholder:o.helpText,helpText:o.helpText,isRequired:e.isRequired,validationRules:o.validationRules?JSON.parse(o.validationRules):void 0,options:o.options?.map(e=>({value:e.value,label:e.displayText})),order:e.displayOrder};c.fields.push(u)}a.forEach(e=>{e.fields.sort((e,t)=>e.order-t.order)});let o=Array.from(a.values()).sort((e,t)=>e.order-t.order);console.log(`[Schema Renderer] ✅ Created ${o.length} sections:`,o.map(e=>({id:e.id,title:e.title,fieldsCount:e.fields.length})));let c={entityTypeId:n.id,entityTypeCode:n.code,entityTypeDisplayName:n.displayName,sections:o};return console.log("[Schema Renderer] ✅ Schema created successfully:",c),c}catch(e){return console.error("[Schema Renderer] ❌ Error fetching entity schema:",e),console.error("[Schema Renderer] Error details:",e instanceof Error?{message:e.message,stack:e.stack}:e),null}}e.s(["fetchEntitySchema",()=>s])},535485,e=>{e.v(t=>Promise.all(["static/chunks/357d3a57e18aad09.js"].map(t=>e.l(t))).then(()=>t(332915)))},8947,e=>{e.v(e=>Promise.resolve().then(()=>e(817684)))},661405,e=>{e.v(t=>Promise.all(["static/chunks/f478692b842c0428.js"].map(t=>e.l(t))).then(()=>t(819252)))}]);

//# debugId=e2858780-c3f5-9246-3439-b1427fe1c938
//# sourceMappingURL=ce2a7aea17d9cf9b.js.map