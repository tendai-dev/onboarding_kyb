;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="fab365cb-1fa9-ba6f-648c-7bb0618f26eb")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,233525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},618566,(e,t,r)=>{t.exports=e.r(976562)},862873,e=>{"use strict";var t=e.i(843476),r=e.i(271645),i=e.i(618566);e.i(643983);var n=e.i(355569),a=e.i(111977),o=e.i(134590),s=e.i(179243),l=e.i(119192),c=e.i(307124),u=e.i(857692),d=e.i(194741),p=e.i(489312),h=e.i(357441),f=e.i(843011),g=e.i(617029);function m(){let e=(0,i.usePathname)(),m=(0,i.useRouter)(),{condensed:y,setCondensed:w}=(0,g.useSidebar)(),[b,x]=(0,r.useState)("dashboard");(0,r.useEffect)(()=>{"/dashboard"===e?x("dashboard"):e?.startsWith("/work-queue")?x("work-queue"):e?.startsWith("/applications")?x("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?x("reviews"):e?.startsWith("/documents")?x("documents"):e?.startsWith("/requirements")?x("requirements"):e?.startsWith("/entity-types")?x("entity-types"):e?.startsWith("/checklists")?x("checklists"):e?.startsWith("/wizard-configurations")?x("wizard-configurations"):e?.startsWith("/rules-and-permissions")?x("rules-and-permissions"):e?.startsWith("/audit-log")?x("audit-log"):e?.startsWith("/messages")?x("messages"):e?.startsWith("/notifications")?x("notifications"):e?.startsWith("/data-migration")?x("data-migration"):e?.startsWith("/refreshes")?x("refreshes"):e?.startsWith("/reports")?x("reports"):e?.startsWith("/profile")?x("profile"):e?.startsWith("/settings")&&x("settings")},[e]);let S=(0,r.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(a.ProductIcon,{width:"20",height:"20"}),onClick:()=>{x("dashboard"),m.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,t.jsx)(p.FilterIcon,{width:"20",height:"20"}),onClick:()=>{x("work-queue"),m.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,t.jsx)(u.AppIcon,{width:"20",height:"20"}),onClick:()=>{x("applications"),m.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,t.jsx)(s.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{x("reviews"),m.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{x("reviews"),m.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{x("reviews"),m.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,t.jsx)(d.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{x("documents"),m.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,t.jsx)(l.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{x("configuration"),m.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{x("configuration"),m.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{x("configuration"),m.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{x("configuration"),m.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{x("configuration"),m.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{x("configuration"),m.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,t.jsx)(h.WarningIcon,{width:"20",height:"20"}),onClick:()=>{x("system"),m.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{x("system"),m.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{x("system"),m.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{x("system"),m.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{x("system"),m.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{x("system"),m.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,t.jsx)(s.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{x("reports"),m.push("/reports")}},{id:"profile",label:"Profile",icon:(0,t.jsx)(o.UserIcon,{width:"20",height:"20"}),onClick:()=>{x("profile"),m.push("/profile")}}],[m]),v={id:"help-centre",label:"Help Centre",icon:(0,t.jsx)(c.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,t.jsx)(f.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:y?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,t.jsx)(n.PortalNavigationSidebar,{navigationItems:S,helpCentreItem:v,activeItemId:b,condensed:y,onToggleCollapse:w,onLogoClick:()=>{x("dashboard"),m.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>m])},297630,e=>{"use strict";let{withContext:t,PropsProvider:r}=(0,e.i(552887).createRecipeContext)({key:"container"}),i=t("div");e.s(["Container",()=>i])},343827,e=>{"use strict";var t=e.i(843476),r=e.i(618566),i=e.i(526732);e.i(643983);var n=e.i(307167),a=e.i(44999),o=e.i(843011),s=e.i(361035),l=e.i(761869),c=e.i(299753),u=e.i(192199),d=e.i(617029);function p(){let e=(0,r.useRouter)(),{data:p}=(0,i.useSession)(),{condensed:h,setCondensed:f}=(0,d.useSidebar)(),g=p?.user?.name||"Admin",m=p?.user?.email||"admin@mukuru.com";return g.split(" ")[0]?.toLowerCase(),(0,t.jsx)(o.Box,{position:"fixed",top:"0",left:h?"72px":"280px",right:"0",height:"90px",bg:"white",zIndex:"999",px:"6",py:"4",pl:"6",transition:"left 0.3s ease, width 0.3s ease",className:"portal-header",borderBottom:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",children:(0,t.jsxs)(l.Flex,{justify:"space-between",align:"center",width:"full",height:"full",children:[(0,t.jsx)(s.HStack,{gap:"4",align:"center",children:(0,t.jsx)(c.Button,{variant:"ghost",onClick:()=>f(!h),p:"2",borderRadius:"full",minW:"40px",h:"40px",bg:"gray.100",_hover:{bg:"gray.200"},"aria-label":"Toggle sidebar",border:"none",_focus:{boxShadow:"none",outline:"none"},_active:{bg:"gray.200"},children:(0,t.jsx)(a.IconWrapper,{children:(0,t.jsx)(u.FiArrowLeft,{size:20,color:"#F05423"})})})}),(0,t.jsx)(s.HStack,{gap:"4",align:"center",children:(0,t.jsx)(n.ProfileMenu,{user:g,menuItems:[{id:0,label:m,value:"email"},{id:1,label:"My Profile",value:"profile",onSelect:()=>e.push("/profile")},{id:2,label:"Settings",value:"settings",onSelect:()=>e.push("/settings")},{id:3,label:"Log Out",value:"logout",onSelect:()=>e.push("/api/auth/logout")}]})})]})})}e.s(["default",()=>p])},998183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={assign:function(){return l},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return s}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});function a(e){let t={};for(let[r,i]of e.entries()){let e=t[r];void 0===e?t[r]=i:Array.isArray(e)?e.push(i):t[r]=[e,i]}return t}function o(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function s(e){let t=new URLSearchParams;for(let[r,i]of Object.entries(e))if(Array.isArray(i))for(let e of i)t.append(r,o(e));else t.set(r,o(i));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,i]of r.entries())e.append(t,i)}return e}},195057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={formatUrl:function(){return s},formatWithValidation:function(){return c},urlObjectKeys:function(){return l}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let a=e.r(190809)._(e.r(998183)),o=/https?|ftp|gopher|file/;function s(e){let{auth:t,hostname:r}=e,i=e.protocol||"",n=e.pathname||"",s=e.hash||"",l=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),l&&"object"==typeof l&&(l=String(a.urlQueryToSearchParams(l)));let u=e.search||l&&`?${l}`||"";return i&&!i.endsWith(":")&&(i+=":"),e.slashes||(!i||o.test(i))&&!1!==c?(c="//"+(c||""),n&&"/"!==n[0]&&(n="/"+n)):c||(c=""),s&&"#"!==s[0]&&(s="#"+s),u&&"?"!==u[0]&&(u="?"+u),n=n.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${i}${c}${n}${u}${s}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return s(e)}},818581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return n}});let i=e.r(271645);function n(e,t){let r=(0,i.useRef)(null),n=(0,i.useRef)(null);return(0,i.useCallback)(i=>{if(null===i){let e=r.current;e&&(r.current=null,e());let t=n.current;t&&(n.current=null,t())}else e&&(r.current=a(e,i)),t&&(n.current=a(t,i))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},718967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return S},MissingStaticPage:function(){return x},NormalizeError:function(){return w},PageNotFoundError:function(){return b},SP:function(){return g},ST:function(){return m},WEB_VITALS:function(){return a},execOnce:function(){return o},getDisplayName:function(){return d},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return l},isResSent:function(){return p},loadGetInitialProps:function(){return f},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return v}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...i)=>(r||(r=!0,t=e(...i)),t)}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>s.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function f(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await f(t.Component,t.ctx)}:{};let i=await e.getInitialProps(t);if(r&&p(r))return i;if(!i)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${i}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return i}let g="undefined"!=typeof performance,m=g&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class w extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class x extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class S extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function v(e){return JSON.stringify({message:e.message,stack:e.stack})}},573668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let i=e.r(718967),n=e.r(652817);function a(e){if(!(0,i.isAbsoluteUrl)(e))return!0;try{let t=(0,i.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,n.hasBasePath)(r.pathname)}catch(e){return!1}}},284508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return i}});let i=e=>{}},522016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i={default:function(){return y},useLinkStatus:function(){return b}};for(var n in i)Object.defineProperty(r,n,{enumerable:!0,get:i[n]});let a=e.r(190809),o=e.r(843476),s=a._(e.r(271645)),l=e.r(195057),c=e.r(8372),u=e.r(818581),d=e.r(718967),p=e.r(405550);e.r(233525);let h=e.r(769688),f=e.r(573668),g=e.r(509396);function m(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function y(t){var r;let i,n,a,[l,y]=(0,s.useOptimistic)(h.IDLE_LINK_STATUS),b=(0,s.useRef)(null),{href:x,as:S,children:v,prefetch:C=null,passHref:k,replace:I,shallow:E,scroll:j,onClick:R,onMouseEnter:T,onTouchStart:P,legacyBehavior:A=!1,onNavigate:L,ref:W,unstable_dynamicOnHover:N,...D}=t;i=v,A&&("string"==typeof i||"number"==typeof i)&&(i=(0,o.jsx)("a",{children:i}));let O=s.default.useContext(c.AppRouterContext),$=!1!==C,_=!1!==C?null===(r=C)||"auto"===r?g.FetchStrategy.PPR:g.FetchStrategy.Full:g.FetchStrategy.PPR,{href:U,as:M}=s.default.useMemo(()=>{let e=m(x);return{href:e,as:S?m(S):e}},[x,S]);if(A){if(i?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});n=s.default.Children.only(i)}let B=A?n&&"object"==typeof n&&n.ref:W,z=s.default.useCallback(e=>(null!==O&&(b.current=(0,h.mountLinkInstance)(e,U,O,_,$,y)),()=>{b.current&&((0,h.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,h.unmountPrefetchableInstance)(e)}),[$,U,O,_,y]),F={ref:(0,u.useMergedRef)(z,B),onClick(t){A||"function"!=typeof R||R(t),A&&n.props&&"function"==typeof n.props.onClick&&n.props.onClick(t),!O||t.defaultPrevented||function(t,r,i,n,a,o,l){if("undefined"!=typeof window){let c,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,f.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(699781);s.default.startTransition(()=>{d(i||r,a?"replace":"push",o??!0,n.current)})}}(t,U,M,b,I,j,L)},onMouseEnter(e){A||"function"!=typeof T||T(e),A&&n.props&&"function"==typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),O&&$&&(0,h.onNavigationIntent)(e.currentTarget,!0===N)},onTouchStart:function(e){A||"function"!=typeof P||P(e),A&&n.props&&"function"==typeof n.props.onTouchStart&&n.props.onTouchStart(e),O&&$&&(0,h.onNavigationIntent)(e.currentTarget,!0===N)}};return(0,d.isAbsoluteUrl)(M)?F.href=M:A&&!k&&("a"!==n.type||"href"in n.props)||(F.href=(0,p.addBasePath)(M)),a=A?s.default.cloneElement(n,F):(0,o.jsx)("a",{...D,...F,children:i}),(0,o.jsx)(w.Provider,{value:l,children:a})}e.r(284508);let w=(0,s.createContext)(h.IDLE_LINK_STATUS),b=()=>(0,s.useContext)(w);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},778497,e=>{"use strict";var t=e.i(967079);let r=new class{isDevelopment=!1;isProduction=!0;debug(e,...t){this.isDevelopment&&console.debug(`[DEBUG] ${e}`,...t)}info(e,...r){this.isDevelopment&&console.info(`[INFO] ${e}`,...r),this.isProduction&&(0,t.addBreadcrumb)(e,"info","info",{args:r})}warn(e,r){console.warn(`[WARN] ${e}`),this.isProduction&&(0,t.reportWarning)(e,{tags:r?.tags,extra:r?.extra})}error(e,r,i){let n=r||(e instanceof Error?e.message:String(e));console.error(`[ERROR] ${n}`,e);let a=i?.level==="warn"?"warning":i?.level==="error"?"error":i?.level==="info"?"info":"error";(0,t.reportError)(e,{tags:i?.tags,extra:i?.extra,level:a})}log(e,r,i="info"){if(this.isDevelopment&&console.log(`[${i.toUpperCase()}] ${e}`,r||""),this.isProduction&&"debug"!==i){let n="warn"===i?"warning":"error"===i?"error":"info";(0,t.addBreadcrumb)(e,"log",n,r)}}};e.s(["logger",0,r])},817684,e=>{"use strict";function t(e){return{id:e.workItemNumber||e.id,workItemId:e.id,legalName:e.applicantName,entityType:e.entityType,country:e.country,status:({New:"SUBMITTED",Assigned:"IN PROGRESS",InProgress:"IN PROGRESS",PendingApproval:"RISK REVIEW",Approved:"COMPLETE",Completed:"COMPLETE",Declined:"DECLINED",Cancelled:"DECLINED",DueForRefresh:"IN PROGRESS"})[e.status]||"IN PROGRESS",backendStatus:e.status,created:e.createdAt,updated:e.updatedAt||e.createdAt,submittedBy:e.assignedToName||e.assignedTo||"Unknown",riskScore:({Low:25,Medium:50,High:75,Critical:95})[e.riskLevel]||50,workItemNumber:e.workItemNumber,applicationId:e.applicationId,priority:e.priority,riskLevel:e.riskLevel,assignedTo:e.assignedTo,assignedToName:e.assignedToName,assignedAt:e.assignedAt,requiresApproval:e.requiresApproval,approvedBy:e.approvedBy,approvedByName:e.approvedByName,approvedAt:e.approvedAt,rejectionReason:e.rejectionReason,dueDate:e.dueDate,isOverdue:e.isOverdue,nextRefreshDate:e.nextRefreshDate,lastRefreshedAt:e.lastRefreshedAt,refreshCount:e.refreshCount}}function r(e){return e.map(t)}e.s(["mapWorkItemToApplication",()=>t,"mapWorkItemsToApplications",()=>r])},670357,592622,82349,576699,571408,e=>{"use strict";async function t(e=1,r=20,i,n){let a=new URLSearchParams({page:e.toString(),pageSize:r.toString()});i&&a.append("searchTerm",i),n&&a.append("status",n);let o=await fetch(`/api/applications?${a.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!o.ok)throw Error(`Failed to fetch applications: ${o.status} ${o.statusText}`);let s=await o.json();return{items:s.items||s.data||[],totalCount:s.total_count||s.totalCount||s.total||0,page:s.page||e,pageSize:s.page_size||s.pageSize||r}}async function r(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/entity-type-distribution?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch entity type distribution: ${r.status} ${r.statusText}`);let i=await r.json();return Array.isArray(i)?i:i.items||i.data||[]}async function i(e=7,t){let r=new URLSearchParams({days:e.toString()});t&&r.append("partnerId",t);let n=await fetch(`/api/trends?${r.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!n.ok)throw Error(`Failed to fetch application trends: ${n.status} ${n.statusText}`);let a=await n.json();return Array.isArray(a)?a:a.items||a.data||[]}async function n(e){let t=new URLSearchParams;e&&t.append("partnerId",e);let r=await fetch(`/api/dashboard?${t.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"},cache:"no-store"});if(!r.ok)throw Error(`Failed to fetch dashboard projection: ${r.status} ${r.statusText}`);return r.json()}async function a(){let e={"Content-Type":"application/json"};try{let t=await fetch("/api/auth/session"),r=await t.json();r?.user?.email&&(e["X-User-Email"]=r.user.email),r?.user?.name&&(e["X-User-Name"]=r.user.name),r?.user?.role&&(e["X-User-Role"]=r.user.role)}catch(e){}return e}async function o(e,t){let r=e;e.startsWith("?")?r=e:e.startsWith("/")||(r=`/${e}`);let i=`/api/workqueue${r}`,n=await a(),o=await fetch(i,{...t,headers:{...n,...t?.headers}});if(!o.ok){let e=`Work Queue API request failed: ${o.status} ${o.statusText}`;try{let t=await o.json();e=t.message||t.error||e}catch{}throw Error(e)}let s=await o.text();return s&&""!==s.trim()?JSON.parse(s):null}async function s(e){let t=new URLSearchParams;e?.status&&"ALL"!==e.status&&t.append("status",e.status),e?.searchTerm&&t.append("searchTerm",e.searchTerm),e?.country&&t.append("country",e.country),e?.riskLevel&&t.append("riskLevel",e.riskLevel);let r=e?.page||1,i=e?.pageSize||100;t.append("page",r.toString()),t.append("pageSize",i.toString());let n=await o(`?${t.toString()}`);return{items:n.items||n.data||[],totalCount:n.totalCount||n.total_count||0,page:r,pageSize:i}}async function l(e){try{return await o(`/${e}`)}catch(e){if(e instanceof Error&&e.message.includes("404"))return null;throw e}}async function c(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),i=await o(`/my-items?${r.toString()}`);return{items:i.items||i.data||[],totalCount:i.totalCount||i.total_count||0,page:e,pageSize:t}}async function u(e=1,t=20){let r=new URLSearchParams({page:e.toString(),pageSize:t.toString()}),i=await o(`/pending-approvals?${r.toString()}`);return{items:i.items||i.data||[],totalCount:i.totalCount||i.total_count||0,page:e,pageSize:t}}async function d(e=1,t=100,r){let i=new URLSearchParams({page:e.toString(),pageSize:t.toString()});return r&&i.append("asOfDate",r.toISOString()),await o(`/due-for-refresh?${i.toString()}`)}async function p(e,t,r){let i;if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))i=t;else{let e=0;for(let r=0;r<t.length;r++)e=(e<<5)-e+t.charCodeAt(r),e&=e;let r=Math.abs(e).toString(16).padStart(32,"0");i=`${r.substring(0,8)}-${r.substring(8,12)}-${r.substring(12,16)}-${r.substring(16,20)}-${r.substring(20,32)}`}await o(`/${e}/assign`,{method:"POST",body:JSON.stringify({AssignedToUserId:i,AssignedToUserName:r})})}async function h(e){await o(`/${e}/unassign`,{method:"POST"})}async function f(e){await o(`/${e}/start-review`,{method:"POST"})}async function g(e,t){await o(`/${e}/submit-for-approval`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function m(e,t){await o(`/${e}/approve`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function y(e,t){await o(`/${e}/decline`,{method:"POST",body:JSON.stringify({reason:t})})}async function w(e,t){await o(`/${e}/complete`,{method:"POST",body:JSON.stringify({notes:t||""})})}async function b(e){await o(`/${e}/mark-for-refresh`,{method:"POST"})}async function x(e,t){await o(`/${e}/comments`,{method:"POST",body:JSON.stringify({text:t})})}async function S(e){return await o(`/${e}/comments`)}async function v(e){return await o(`/${e}/history`)}function C(e){let t=e.businessLegalName||`${e.applicantFirstName} ${e.applicantLastName}`.trim()||"Unknown",r=e.businessCountryOfRegistration||e.applicantCountry||"Unknown",i=e.type||(e.businessLegalName?"Business":"Individual")||"Unknown",n=e.assignedToName||e.assignedTo||"Unassigned",a=e.submittedAt||e.createdAt,o=Math.round(e.progressPercentage||0);return{id:e.caseId||e.id,companyName:t,entityType:i,status:({Draft:"IN_PROGRESS",InProgress:"IN_PROGRESS",PendingReview:"RISK_REVIEW",Submitted:"SUBMITTED",Approved:"COMPLETE",Rejected:"DECLINED",Cancelled:"DECLINED"})[e.status]||"IN_PROGRESS",submittedDate:a,assignedTo:n,riskLevel:({Low:"LOW",MediumLow:"LOW",Medium:"MEDIUM",MediumHigh:"HIGH",High:"HIGH"})[e.riskLevel]||"MEDIUM",country:r,progress:o}}e.s(["addComment",()=>x,"approveWorkItem",()=>m,"assignWorkItem",()=>p,"completeWorkItem",()=>w,"declineWorkItem",()=>y,"getItemsDueForRefresh",()=>d,"getMyWorkItems",()=>c,"getPendingApprovals",()=>u,"getWorkItemById",()=>l,"getWorkItemComments",()=>S,"getWorkItemHistory",()=>v,"getWorkItems",()=>s,"markForRefresh",()=>b,"startReview",()=>f,"submitForApproval",()=>g,"unassignWorkItem",()=>h],592622);var k=e.i(817684);async function I(e=1,r=20,i,n){let a=await t(e,r,i,n);return{items:a.items.map(C),totalCount:a.totalCount,page:a.page,pageSize:a.pageSize}}async function E(t){let r=await I(1,1e4,t?.search,t?.status),{escapeCsvField:i,createCsvBlob:n}=await e.A(535485);return n(["Application ID","Company Name","Entity Type","Country","Status","Risk Level","Assigned To","Progress","Submitted Date"],r.items.map(e=>[i(e.id),i(e.companyName),i(e.entityType),i(e.country),i(e.status),i(e.riskLevel),i(e.assignedTo),i(`${e.progress}%`),i(new Date(e.submittedDate).toLocaleDateString())]))}async function j(e){let t=await n(e);return{totalApplications:t.cases.totalCases,pendingReview:t.cases.pendingReviewCases,riskReview:t.risk.casesRequiringManualReview,completed:t.cases.completedCases,incomplete:t.cases.activeCases-t.cases.pendingReviewCases,declined:t.cases.rejectedCases,avgProcessingTime:Number(t.performance.averageCompletionTimeHours/24),successRate:Number(t.performance.completionRate)}}async function R(e){return(await r(e)).map(e=>({type:e.name,count:e.value}))}async function T(e=7,t){return i(e,t)}async function P(e){return n(e)}function A(e){return({SUBMITTED:"New","IN PROGRESS":"InProgress","RISK REVIEW":"PendingApproval",COMPLETE:"Completed",DECLINED:"Declined"})[e]||e}async function L(e){let t=e?{...e,status:e.status&&"ALL"!==e.status?A(e.status):void 0}:void 0,r=await s(t);return{items:(0,k.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function W(e=1,t=20){let r=await c(e,t);return{items:(0,k.mapWorkItemsToApplications)(r.items),totalCount:r.totalCount,page:r.page,pageSize:r.pageSize}}async function N(e=1,t=20){return u(e,t)}async function D(e=1,t=100,r){return d(e,t,r)}async function O(e,t,r){if(!e)throw Error("Work item ID is required");if(!t)throw Error("User ID is required");if(!r)throw Error("User name is required");await p(e,t,r)}async function $(e){if(!e)throw Error("Work item ID is required");await h(e)}async function _(e){if(!e)throw Error("Work item ID is required");await f(e)}async function U(e,t){if(!e)throw Error("Work item ID is required");await g(e,t)}async function M(e,t){if(!e)throw Error("Work item ID is required");await m(e,t)}async function B(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Rejection reason is required");await y(e,t)}async function z(e,t){if(!e)throw Error("Work item ID is required");await w(e,t)}async function F(e){if(!e)throw Error("Work item ID is required");await b(e)}async function q(e,t){if(!e)throw Error("Work item ID is required");if(!t||0===t.trim().length)throw Error("Comment text is required");await x(e,t)}async function H(e){if(!e)throw Error("Work item ID is required");return S(e)}async function G(e){if(!e)throw Error("Work item ID is required");return v(e)}async function K(t){let r=t?{...t,status:t.status&&"ALL"!==t.status?A(t.status):void 0}:void 0,i=await s({...r,page:1,pageSize:1e4}),{escapeCsvField:n,createCsvBlob:a}=await e.A(535485),{mapWorkItemToApplication:o}=await e.A(8947);return a(["Application ID","Work Item Number","Legal Name","Entity Type","Country","Status","Priority","Risk Level","Assigned To","Created Date","Updated Date"],i.items.map(e=>{let t=o(e);return[n(t.id),n(e.workItemNumber),n(t.legalName),n(t.entityType),n(t.country),n(t.status),n(e.priority),n(e.riskLevel),n(e.assignedToName||e.assignedTo),n(new Date(t.created).toLocaleDateString()),n(new Date(t.updated).toLocaleDateString())]}))}e.s(["exportApplications",()=>E,"fetchApplications",()=>I],82349),e.s(["fetchApplicationTrends",()=>T,"fetchDashboardProjection",()=>P,"fetchDashboardStats",()=>j,"fetchEntityTypeDistribution",()=>R],576699),e.s(["addCommentUseCase",()=>q,"approveWorkItemUseCase",()=>M,"assignWorkItemUseCase",()=>O,"completeWorkItemUseCase",()=>z,"declineWorkItemUseCase",()=>B,"exportWorkItems",()=>K,"fetchItemsDueForRefresh",()=>D,"fetchMyWorkItems",()=>W,"fetchPendingApprovals",()=>N,"fetchWorkItemComments",()=>H,"fetchWorkItemHistory",()=>G,"fetchWorkItems",()=>L,"markForRefreshUseCase",()=>F,"startReviewUseCase",()=>_,"submitForApprovalUseCase",()=>U,"unassignWorkItemUseCase",()=>$],571408),e.s([],670357)},74124,e=>{"use strict";var t=e.i(843476),r=e.i(843011),i=e.i(297630),n=e.i(53545),a=e.i(361035),o=e.i(761869),s=e.i(300713);e.i(643983);var l=e.i(191348),c=e.i(825402),u=e.i(554646),d=e.i(312569),p=e.i(613056),h=e.i(44999),f=e.i(927561),g=e.i(228427),m=e.i(522016),y=e.i(192199),w=e.i(271645),b=e.i(862873),x=e.i(343827),S=e.i(617029);e.i(670357);var v=e.i(82349),C=e.i(778497);function k(){let{condensed:e}=(0,S.useSidebar)(),[k,I]=(0,w.useState)([]),[E,j]=(0,w.useState)(!0),[R,T]=(0,w.useState)(null),[P,A]=(0,w.useState)(""),[L,W]=(0,w.useState)("ALL"),[N,D]=(0,w.useState)(!1),O=(0,w.useCallback)(async e=>{try{j(!0),T(null),C.logger.debug("[Applications Page] Loading applications with filters",{status:L,search:e||P});let t=await (0,v.fetchApplications)(1,1e3,e||P||void 0,"ALL"!==L?L:void 0);C.logger.debug("[Applications Page] Applications loaded",{count:t.items.length}),I(t.items)}catch(e){C.logger.error(e,"[Applications Page] Error loading applications",{tags:{error_type:"applications_load_error"}}),T(e instanceof Error?e.message:"Failed to load applications. Please ensure backend services are running."),I([])}finally{j(!1)}},[L,P]),$=(0,w.useCallback)(e=>{A(e)},[]);(0,w.useEffect)(()=>{O()},[L,P,O]);let _=async()=>{try{D(!0);let e=await (0,v.exportApplications)({status:"ALL"!==L?L:void 0,search:P||void 0}),t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=`applications_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(t),document.body.removeChild(r)}catch(e){C.logger.error(e,"Error exporting applications",{tags:{error_type:"applications_export_error"}}),T(e instanceof Error?e.message:"Failed to export applications")}finally{D(!1)}},U=k.filter(e=>{let t=e.companyName.toLowerCase().includes(P.toLowerCase())||e.id.toLowerCase().includes(P.toLowerCase()),r="ALL"===L||e.status===L;return t&&r}),M=[{field:"companyName",header:"Company Name",sortable:!0,width:"250px",minWidth:"250px",render:(e,r)=>(0,t.jsx)(u.Typography,{fontWeight:"semibold",color:"gray.800",fontSize:"sm",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"200px"},children:e})},{field:"id",header:"Application ID",sortable:!0,width:"200px",minWidth:"200px",render:e=>(0,t.jsx)(u.Typography,{fontSize:"sm",color:"gray.600",fontFamily:"mono",fontWeight:"medium",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"180px"},children:e})},{field:"status",header:"Status",sortable:!0,width:"140px",minWidth:"140px",render:e=>{let r=e||"SUBMITTED",i=(e=>{switch(e){case"SUBMITTED":return"blue";case"IN_PROGRESS":return"orange";case"RISK_REVIEW":case"DECLINED":return"red";case"COMPLETE":return"green";default:return"gray"}})(r);return(0,t.jsx)(p.Tag,{variant:"green"===i?"success":"red"===i?"danger":"orange"===i?"warning":"info",children:r.replace("_"," ")})}},{field:"assignedTo",header:"Assigned To",sortable:!0,width:"180px",minWidth:"180px",render:(e,i)=>{let n=e||"Unassigned",o="Unassigned"!==n&&n;return(0,t.jsxs)(a.HStack,{gap:"2",children:[(0,t.jsx)(r.Box,{w:"6",h:"6",borderRadius:"full",bg:o?"orange.200":"gray.200",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,children:(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiUser,{size:16,color:o?"#DD6B20":"#9CA3AF"})})}),(0,t.jsx)(u.Typography,{fontSize:"sm",color:o?"gray.700":"gray.500",fontWeight:"medium",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"150px"},children:n})]})}}];return E?(0,t.jsxs)(o.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(b.default,{}),(0,t.jsx)(x.default,{}),(0,t.jsx)(r.Box,{flex:"1",ml:e?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:e?"calc(100% - 72px)":"calc(100% - 280px)",bg:"gray.50",overflowX:"hidden",children:(0,t.jsx)(o.Flex,{justify:"center",align:"center",h:"400px",children:(0,t.jsxs)(n.VStack,{gap:"4",children:[(0,t.jsx)(s.Spinner,{size:"xl",color:"orange.500"}),(0,t.jsx)(u.Typography,{color:"gray.600",children:"Loading applications..."})]})})})]}):(0,t.jsxs)(o.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(b.default,{}),(0,t.jsx)(x.default,{}),(0,t.jsxs)(r.Box,{flex:"1",ml:e?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:e?"calc(100% - 72px)":"calc(100% - 280px)",bg:"gray.50",overflowX:"hidden",transition:"margin-left 0.3s ease, width 0.3s ease",children:[(0,t.jsx)(r.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",boxShadow:"sm",width:"full",children:(0,t.jsx)(i.Container,{maxW:"100%",px:"8",py:"6",width:"full",children:(0,t.jsxs)(o.Flex,{justify:"space-between",align:"center",mb:"4",children:[(0,t.jsxs)(n.VStack,{align:"start",gap:"2",children:[(0,t.jsx)(u.Typography,{fontSize:"3xl",fontWeight:"bold",color:"gray.900",children:"Applications Management"}),(0,t.jsx)(u.Typography,{fontSize:"md",color:"gray.600",fontWeight:"normal",children:"Manage all partner and customer applications"})]}),(0,t.jsx)(a.HStack,{gap:"3",children:(0,t.jsxs)(l.Button,{variant:"primary",size:"sm",onClick:_,disabled:N,className:"mukuru-primary-button",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiDownload,{size:16})}),N?"Exporting...":"Export"]})})]})})}),(0,t.jsx)(r.Box,{flex:"1",bg:"gray.50",width:"full",children:(0,t.jsx)(i.Container,{maxW:"100%",px:"8",py:"8",width:"full",children:(0,t.jsxs)(n.VStack,{gap:"4",align:"stretch",width:"full",children:[R&&(0,t.jsx)(f.AlertBar,{status:"error",title:"Error loading applications",description:R}),(0,t.jsxs)(a.HStack,{gap:"2",wrap:"wrap",mb:"2",children:[(0,t.jsx)(l.Button,{size:"sm",variant:"primary",onClick:()=>W("ALL"),borderRadius:"lg",className:"mukuru-primary-button",style:{opacity:"ALL"===L?1:.7},children:"All"}),(0,t.jsx)(l.Button,{size:"sm",variant:"primary",onClick:()=>W("SUBMITTED"),borderRadius:"lg",className:"mukuru-primary-button",style:{opacity:"SUBMITTED"===L?1:.7},children:"Submitted"}),(0,t.jsx)(l.Button,{size:"sm",variant:"primary",onClick:()=>W("IN_PROGRESS"),borderRadius:"lg",className:"mukuru-primary-button",style:{opacity:"IN_PROGRESS"===L?1:.7},children:"In Progress"}),(0,t.jsx)(l.Button,{size:"sm",variant:"primary",onClick:()=>W("RISK_REVIEW"),borderRadius:"lg",className:"mukuru-primary-button",style:{opacity:"RISK_REVIEW"===L?1:.7},children:"Risk Review"}),(0,t.jsx)(l.Button,{size:"sm",variant:"primary",onClick:()=>W("COMPLETE"),borderRadius:"lg",className:"mukuru-primary-button",style:{opacity:"COMPLETE"===L?1:.7},children:"Complete"}),(0,t.jsx)(l.Button,{size:"sm",variant:"primary",onClick:()=>W("DECLINED"),borderRadius:"lg",className:"mukuru-primary-button",style:{opacity:"DECLINED"===L?1:.7},children:"Declined"})]}),(0,t.jsx)(r.Box,{mb:"4",width:"100%",children:(0,t.jsx)(r.Box,{width:"100%",maxW:"800px",children:(0,t.jsx)(c.Search,{placeholder:"Search by company name or application ID...",onSearchChange:$})})}),(0,t.jsx)(r.Box,{bg:"white",borderRadius:"xl",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",border:"1px solid",borderColor:"gray.100",overflow:"hidden",color:"gray.900",className:"work-queue-table-wrapper",width:"100%",children:(0,t.jsx)(d.DataTable,{data:U,columns:M,loading:E,emptyState:{message:0===k.length?"No applications found":"No applications match your search criteria",content:(0,t.jsxs)(n.VStack,{gap:"4",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiSearch,{size:48,color:"#9CA3AF"})}),(0,t.jsx)(u.Typography,{fontSize:"sm",color:"gray.500",children:0===k.length?"Applications will appear here once they are created":"Try adjusting your search criteria or filters"})]})},showActions:!0,actionColumn:{header:"Actions",width:"150px",render:(e,r)=>(0,t.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"center",justifyContent:"flex-end"},children:[(0,t.jsx)(g.Tooltip,{content:"View",showArrow:!0,variant:"light",children:(0,t.jsx)(m.default,{href:`/applications/${e.id}`,style:{textDecoration:"none"},children:(0,t.jsx)("button",{style:{background:"none",border:"none",padding:"8px",cursor:"pointer",color:"#E8590C",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"View",children:(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiEye,{size:16})})})})}),(0,t.jsx)(g.Tooltip,{content:"Review",showArrow:!0,variant:"light",children:(0,t.jsx)("button",{style:{background:"none",border:"none",padding:"8px",cursor:"pointer",color:"#E8590C",display:"flex",alignItems:"center",justifyContent:"center"},onClick:async()=>{try{let t=e.workItemId||e.id;window.location.href=`/review/${t}`}catch(t){C.logger.error(t,"Error navigating to review",{tags:{error_type:"navigation_error"}}),window.location.href=`/applications/${e.id}`}},"aria-label":"Review",children:(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiShield,{size:16})})})})]})},onRowClick:e=>{window.location.href=`/applications/${e.id}`}})})]})})})]})]})}e.s(["default",()=>k])},535485,e=>{e.v(t=>Promise.all(["static/chunks/357d3a57e18aad09.js"].map(t=>e.l(t))).then(()=>t(332915)))},8947,e=>{e.v(e=>Promise.resolve().then(()=>e(817684)))}]);

//# debugId=fab365cb-1fa9-ba6f-648c-7bb0618f26eb
//# sourceMappingURL=12f65326135c9572.js.map