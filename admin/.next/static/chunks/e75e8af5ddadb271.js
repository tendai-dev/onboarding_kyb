;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="d73ed8b7-d678-5c61-c24a-cc4d7d2df1f2")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,618566,(e,t,i)=>{t.exports=e.r(976562)},862873,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(618566);e.i(643983);var s=e.i(355569),a=e.i(111977),n=e.i(134590),o=e.i(179243),c=e.i(119192),l=e.i(307124),d=e.i(857692),p=e.i(194741),u=e.i(489312),h=e.i(357441),y=e.i(843011),g=e.i(617029);function m(){let e=(0,r.usePathname)(),m=(0,r.useRouter)(),{condensed:x,setCondensed:f}=(0,g.useSidebar)(),[b,j]=(0,i.useState)("dashboard");(0,i.useEffect)(()=>{"/dashboard"===e?j("dashboard"):e?.startsWith("/work-queue")?j("work-queue"):e?.startsWith("/applications")?j("applications"):e?.startsWith("/review")||e?.startsWith("/risk-review")||e?.startsWith("/approvals")?j("reviews"):e?.startsWith("/documents")?j("documents"):e?.startsWith("/requirements")?j("requirements"):e?.startsWith("/entity-types")?j("entity-types"):e?.startsWith("/checklists")?j("checklists"):e?.startsWith("/wizard-configurations")?j("wizard-configurations"):e?.startsWith("/rules-and-permissions")?j("rules-and-permissions"):e?.startsWith("/audit-log")?j("audit-log"):e?.startsWith("/messages")?j("messages"):e?.startsWith("/notifications")?j("notifications"):e?.startsWith("/data-migration")?j("data-migration"):e?.startsWith("/refreshes")?j("refreshes"):e?.startsWith("/reports")?j("reports"):e?.startsWith("/profile")?j("profile"):e?.startsWith("/settings")&&j("settings")},[e]);let T=(0,i.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,t.jsx)(a.ProductIcon,{width:"20",height:"20"}),onClick:()=>{j("dashboard"),m.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,t.jsx)(u.FilterIcon,{width:"20",height:"20"}),onClick:()=>{j("work-queue"),m.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,t.jsx)(d.AppIcon,{width:"20",height:"20"}),onClick:()=>{j("applications"),m.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,t.jsx)(o.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{j("reviews"),m.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{j("reviews"),m.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{j("reviews"),m.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,t.jsx)(p.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{j("documents"),m.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,t.jsx)(c.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{j("configuration"),m.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{j("configuration"),m.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{j("configuration"),m.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{j("configuration"),m.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{j("configuration"),m.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{j("configuration"),m.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,t.jsx)(h.WarningIcon,{width:"20",height:"20"}),onClick:()=>{j("system"),m.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{j("system"),m.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{j("system"),m.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{j("system"),m.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{j("system"),m.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{j("system"),m.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,t.jsx)(o.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{j("reports"),m.push("/reports")}},{id:"profile",label:"Profile",icon:(0,t.jsx)(n.UserIcon,{width:"20",height:"20"}),onClick:()=>{j("profile"),m.push("/profile")}}],[m]),C={id:"help-centre",label:"Help Centre",icon:(0,t.jsx)(l.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,t.jsx)(y.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:x?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,t.jsx)(s.PortalNavigationSidebar,{navigationItems:T,helpCentreItem:C,activeItemId:b,condensed:x,onToggleCollapse:f,onLogoClick:()=>{j("dashboard"),m.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}e.s(["default",()=>m])},297630,e=>{"use strict";let{withContext:t,PropsProvider:i}=(0,e.i(552887).createRecipeContext)({key:"container"}),r=t("div");e.s(["Container",()=>r])},891825,e=>{"use strict";var t=e.i(843476),i=e.i(271645),r=e.i(441305),s=e.i(95966),a=e.i(920755);let n=(0,i.forwardRef)(function(e,i){var n,o,c;let{columns:l,minChildWidth:d,...p}=e,u=(0,r.useChakraContext)(),h=d?(n=d,o=u,(0,s.mapObject)(n,e=>{let t=o.tokens.getVar(`sizes.${e}`,"number"==typeof e?`${e}px`:e);return null===e?null:`repeat(auto-fit, minmax(${t}, 1fr))`})):(c=l,(0,s.mapObject)(c,e=>null===e?null:`repeat(${e}, minmax(0, 1fr))`));return(0,t.jsx)(a.Grid,{ref:i,templateColumns:h,...p})});e.s(["SimpleGrid",()=>n])},337880,e=>{"use strict";e.i(247167).default.env.NEXT_PUBLIC_ENTITY_CONFIG_API_BASE_URL;let t=new class{async getAuthHeaders(){let t={"Content-Type":"application/json"};try{let e=await fetch("/api/auth/session"),i=await e.json();i?.user?.email&&(t["X-User-Email"]=i.user.email),i?.user?.name&&(t["X-User-Name"]=i.user.name)}catch(t){{let{clientSentry:i}=await e.A(661405);i.reportError(t,{tags:{error_type:"entity_config_api",operation:"get_session"},level:"warning"})}}return t}async request(e,t){let i,r;e.startsWith("/requirements")?(i="/api/requirements",r=""):(e.startsWith("/wizardconfigurations")||e.startsWith("/entity-types"),i="/api/rules-and-permissions",r=e);let s=`${i}${r}`,a=await this.getAuthHeaders();try{let e=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),1e4)}),i=fetch(s,{...t,headers:{...a,...t?.headers}}),r=await Promise.race([i,e]);if(!r.ok){let e=await r.text(),t=`Entity Config API request failed: ${r.status} ${r.statusText}`;try{let i=JSON.parse(e);i.message?t=i.message:i.error&&(t=i.error)}catch{e&&e.trim().length>0&&(t=e.length>200?e.substring(0,200)+"...":e)}throw Error(t)}if(204===r.status)return null;return r.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Entity Configuration service");throw e}}async getEntityTypes(e=!1,t=!0){let i=new URLSearchParams;e&&i.append("includeInactive","true"),t&&i.append("includeRequirements","true");let r=i.toString();return(await this.request(`/entity-types${r?`?${r}`:""}`)).map(e=>{let t=e.requirements||e.Requirements||[];return Array.isArray(t)&&t.length>0&&(t=t.map(e=>({id:e.id||e.Id,requirementId:e.requirementId||e.RequirementId||e.requirement_id,isRequired:void 0!==e.isRequired?e.isRequired:void 0!==e.IsRequired?e.IsRequired:void 0!==e.is_required&&e.is_required,displayOrder:e.displayOrder||e.DisplayOrder||e.display_order||0,requirement:e.requirement||e.Requirement}))),{id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",icon:e.icon||e.Icon,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",requirements:t}})}async getEntityType(e,t=!0){let i=t?`/entity-types/${e}?includeRequirements=true`:`/entity-types/${e}`;return this.request(i)}async getEntityTypeByCode(t,i=!0){let r=t.trim();console.log("[EntityConfigAPI] Fetching entity type by code (as-is from application):",r);try{let e=await this.request(`/entity-types/by-code/${encodeURIComponent(r)}`);return console.log("[EntityConfigAPI] ✅ Successfully fetched entity type:",e?.code),e}catch(t){{let{clientSentry:i}=await e.A(661405);i.reportError(t,{tags:{error_type:"entity_config_api",operation:"fetch_entity_type_by_code"},extra:{code:r},level:"error"})}return null}}async createEntityType(e){return this.request("/entity-types",{method:"POST",body:JSON.stringify(e)})}async updateEntityType(e,t){return this.request(`/entity-types/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteEntityType(e){return this.request(`/entity-types/${e}`,{method:"DELETE"})}async getRequirements(e=!1){return(await this.request(`/requirements${e?"?includeInactive=true":""}`)).map(e=>({id:e.id||e.Id,code:e.code||e.Code,displayName:e.displayName||e.DisplayName||e.display_name||e.code||"Unnamed",description:e.description||e.Description||e.description||"",type:e.type||e.Type||e.type||"",fieldType:e.fieldType||e.FieldType||e.field_type||"",validationRules:e.validationRules||e.ValidationRules||e.validation_rules,helpText:e.helpText||e.HelpText||e.help_text,isActive:void 0!==e.isActive?e.isActive:void 0!==e.IsActive?e.IsActive:void 0===e.is_active||e.is_active,createdAt:e.createdAt||e.CreatedAt||e.created_at||"",updatedAt:e.updatedAt||e.UpdatedAt||e.updated_at||"",options:e.options||e.Options||[]}))}async getRequirement(e){return this.request(`/requirements/${e}`)}async createRequirement(e){return this.request("/requirements",{method:"POST",body:JSON.stringify(e)})}async updateRequirement(e,t){return this.request(`/requirements/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteRequirement(e){return this.request(`/requirements/${e}`,{method:"DELETE"})}async getRequirementsMetadata(){return this.request("/requirements/metadata")}async getRequirementOptions(e){return this.request(`/requirements/${e}/options`)}async addRequirementOption(e,t){return this.request(`/requirements/${e}/options`,{method:"POST",body:JSON.stringify(t)})}async updateRequirementOption(e,t,i){return this.request(`/requirements/${e}/options/${t}`,{method:"PUT",body:JSON.stringify(i)})}async deleteRequirementOption(e,t){return this.request(`/requirements/${e}/options/${t}`,{method:"DELETE"})}async addRequirementToEntityType(e,t){return this.request(`/entity-types/${e}/requirements`,{method:"POST",body:JSON.stringify(t)})}async removeRequirementFromEntityType(e,t){return this.request(`/entity-types/${e}/requirements/${t}`,{method:"DELETE"})}async getWizardConfigurations(e=!1){return(await this.request(`/wizardconfigurations${e?"?includeInactive=true":""}`)).map(e=>({id:e.id,entityTypeId:e.entity_type_id||e.entityTypeId,entityTypeDisplayName:e.entity_type_display_name||e.entityTypeDisplayName,isActive:void 0!==e.is_active?e.is_active:e.isActive,createdAt:e.created_at||e.createdAt,updatedAt:e.updated_at||e.updatedAt,steps:(e.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}))}async getWizardConfiguration(e){let t=await this.request(`/wizardconfigurations/${e}`);return{id:t.id,entityTypeId:t.entity_type_id||t.entityTypeId,entityTypeDisplayName:t.entity_type_display_name||t.entityTypeDisplayName,isActive:void 0!==t.is_active?t.is_active:t.isActive,createdAt:t.created_at||t.createdAt,updatedAt:t.updated_at||t.updatedAt,steps:(t.steps||[]).map(e=>({id:e.id,title:e.title,subtitle:e.subtitle,requirementTypes:e.requirement_types||e.requirementTypes||[],checklistCategory:e.checklist_category||e.checklistCategory||"",stepNumber:e.step_number||e.stepNumber||0,isActive:void 0!==e.is_active?e.is_active:e.isActive}))}}async getWizardConfigurationByEntityType(t){try{return this.request(`/wizardconfigurations/by-entity-type/${t}`)}catch(i){{let{clientSentry:r}=await e.A(661405);r.reportError(i,{tags:{error_type:"entity_config_api",operation:"fetch_wizard_config"},extra:{entityTypeId:t},level:"error"})}return null}}async createWizardConfiguration(e){return this.request("/wizardconfigurations",{method:"POST",body:JSON.stringify(e)})}async updateWizardConfiguration(e,t){return this.request(`/wizardconfigurations/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteWizardConfiguration(e){return this.request(`/wizardconfigurations/${e}`,{method:"DELETE"})}};e.s(["FieldType",0,{Text:"Text",Email:"Email",Phone:"Phone",Number:"Number",Date:"Date",Select:"Select",MultiSelect:"MultiSelect",Radio:"Radio",Checkbox:"Checkbox",Textarea:"Textarea",File:"File",Country:"Country",Currency:"Currency",Address:"Address"},"RequirementType",0,{Information:1,Document:2,ProofOfIdentity:3,ProofOfAddress:4,OwnershipStructure:5,BoardDirectors:6,AuthorizedSignatories:7},"entityConfigApiService",0,t])},153963,e=>{"use strict";var t=e.i(526732);let i=new class{async getAuthHeaders(){let e=await (0,t.getSession)(),i={"Content-Type":"application/json"};return e?.user?.email&&(i["X-User-Email"]=e.user.email),e?.user?.name&&(i["X-User-Name"]=e.user.name),e?.user?.role&&(i["X-User-Role"]=e.user.role),i}async request(e,t){let i=await this.getAuthHeaders();try{let r=new Promise((e,t)=>{setTimeout(()=>t(Error("Request timeout")),15e3)}),s=fetch(e,{...t,headers:{...i,...t?.headers}}),a=await Promise.race([s,r]);if(!a.ok){let e=await a.text(),t=`Checklist API request failed: ${a.status} ${a.statusText}`;try{let i=JSON.parse(e);i.message?t=i.message:i.error&&(t=i.error)}catch{e&&e.trim().length>0&&(t=e.length>200?e.substring(0,200)+"...":e)}throw Error(t)}if(204===a.status)return null;return a.json()}catch(e){if(e instanceof TypeError||e instanceof Error&&e.message.includes("timeout"))throw Error("Unable to connect to Checklist service. Please ensure the service is running.");throw e}}mapChecklistDto(e){let t=e.caseId||e.case_id||"",i=e.createdAt||e.created_at||new Date().toISOString(),r=e.completedAt||e.completed_at,s=e.type||"";console.log("[ChecklistApi] Mapping DTO:",{id:e.id,caseId:t,type:s,rawCaseId:e.caseId,rawCase_id:e.case_id});let a=this.extractEntityType(s,t);console.log("[ChecklistApi] Extracted entity type:",a,"from caseId:",t,"type:",s);let n=`${a} Checklist`,o=`Checklist for ${a.toLowerCase()} onboarding`,c=(e.items||[]).map(e=>({id:e.id,description:e.description||e.name,isRequired:e.isRequired,category:e.category,order:e.order,guidelines:e.notes||void 0})),l=r||i;try{let e=new Date(l);l=isNaN(e.getTime())?new Date().toISOString():e.toISOString()}catch{l=new Date().toISOString()}return{id:e.id,name:n,entityType:a,description:o,items:c,lastUpdated:l,isActive:"Completed"!==e.status&&"Cancelled"!==e.status,version:this.calculateVersion(i),createdBy:"System"}}extractEntityType(e,t){if(t&&t.trim()){let e=t.toUpperCase().trim();if(console.log("[extractEntityType] Checking case ID:",t,"->",e),e.includes("CASE-NPO")||e.includes("-NPO-"))return console.log("[extractEntityType] Matched NPO from case ID"),"NPO";if(e.includes("CASE-GOV")||e.includes("-GOV-"))return console.log("[extractEntityType] Matched Government from case ID"),"Government";if(e.includes("CASE-PUBLIC")||e.includes("-PUBLIC-"))return console.log("[extractEntityType] Matched Publicly Listed from case ID"),"Publicly Listed";if(e.includes("CASE-PRIVATE")||e.includes("-PRIVATE-"))return console.log("[extractEntityType] Matched Private Company from case ID"),"Private Company";if(e.includes("NPO")&&!e.includes("NONPROFIT")&&!e.includes("PRIVATE"))return console.log("[extractEntityType] Matched NPO from substring"),"NPO";if(e.includes("GOV")&&!e.includes("PRIVATE"))return console.log("[extractEntityType] Matched Government from substring"),"Government";if(e.includes("PUBLIC")&&!e.includes("PRIVATE"))return console.log("[extractEntityType] Matched Publicly Listed from substring"),"Publicly Listed";if(e.includes("PRIVATE"))return console.log("[extractEntityType] Matched Private Company from substring"),"Private Company";console.warn("[extractEntityType] No match found for case ID:",t)}let i=(e||"").toUpperCase().trim();return(console.log("[extractEntityType] Falling back to type:",e,"->",i),i.includes("PRIVATE")||i.includes("COMPANY")&&!i.includes("PUBLIC"))?"Private Company":i.includes("NPO")||i.includes("NONPROFIT")?"NPO":i.includes("GOVERNMENT")||i.includes("GOV")?"Government":i.includes("PUBLICLY")||i.includes("LISTED")||i.includes("PUBLIC")&&i.includes("COMPANY")?"Publicly Listed":(i.includes("CORPORATE")?console.warn("[extractEntityType] Corporate type found, defaulting to Private Company"):console.warn("[extractEntityType] No match found, defaulting to Private Company"),"Private Company")}calculateVersion(e){try{let t=new Date(e);if(isNaN(t.getTime()))return"1.0";let i=Math.floor(t.getTime()/864e5),r=Math.floor(i/1e3)+1;return`${r}.${(i%100/10).toFixed(1)}`}catch{return"1.0"}}transformBackendDto(e){return{id:e.id||e.Id,caseId:e.caseId||e.case_id||e.CaseId,case_id:e.case_id||e.caseId,type:e.type||e.Type,status:e.status||e.Status,partnerId:e.partnerId||e.partner_id||e.PartnerId,partner_id:e.partner_id||e.partnerId,createdAt:e.createdAt||e.created_at||e.CreatedAt,created_at:e.created_at||e.createdAt,completedAt:e.completedAt||e.completed_at||e.CompletedAt,completed_at:e.completed_at||e.completedAt,completionPercentage:e.completionPercentage||e.completion_percentage||e.CompletionPercentage||0,completion_percentage:e.completion_percentage||e.completionPercentage,requiredCompletionPercentage:e.requiredCompletionPercentage||e.required_completion_percentage||e.RequiredCompletionPercentage||0,required_completion_percentage:e.required_completion_percentage||e.requiredCompletionPercentage,items:(e.items||[]).map(e=>({id:e.id||e.Id,name:e.name||e.Name,description:e.description||e.Description,category:e.category||e.Category,isRequired:void 0!==e.isRequired?e.isRequired:void 0!==e.is_required&&e.is_required,order:e.order||e.Order||0,status:e.status||e.Status,createdAt:e.createdAt||e.created_at||e.CreatedAt,completedAt:e.completedAt||e.completed_at||e.CompletedAt,completedBy:e.completedBy||e.completed_by||e.CompletedBy,notes:e.notes||e.Notes,skipReason:e.skipReason||e.skip_reason||e.SkipReason}))}}async getAllChecklists(){try{let e=await this.request("/api/checklist/checklists");if(console.log("[ChecklistApi] getAllChecklists - Raw response:",e),!e||!Array.isArray(e))return console.log("[ChecklistApi] No response or not an array"),[];let t=e.map(e=>{let t=this.transformBackendDto(e);console.log("[ChecklistApi] Transformed DTO:",{raw:e,transformed:t});let i=this.mapChecklistDto(t);return console.log("[ChecklistApi] Mapped checklist:",{originalCaseId:t.caseId||t.case_id,originalType:t.type,mappedEntityType:i.entityType,mappedName:i.name}),i});return console.log("[ChecklistApi] Final mapped checklists:",t),t}catch(e){if(e instanceof Error&&(e.message.includes("404")||e.message.includes("500")))return console.warn("No checklists found or service error:",e.message),[];throw e}}async getChecklistById(e){let t=`/api/checklist/checklists/${e}`;try{let e=await this.request(t);return this.mapChecklistDto(e)}catch(e){if(e instanceof Error&&e.message.includes("404"))return null;throw e}}async getChecklistByCase(e){let t=`/api/checklist/checklists/case/${encodeURIComponent(e)}`;try{let e=await this.request(t);return this.mapChecklistDto(e)}catch(e){if(e instanceof Error&&e.message.includes("404"))return null;throw e}}};e.s(["checklistApiService",0,i])},797809,e=>{"use strict";var t=e.i(843476),i=e.i(843011),r=e.i(297630),s=e.i(53545),a=e.i(361035),n=e.i(891825),o=e.i(761869),c=e.i(300713);e.i(643983);var l=e.i(554646),d=e.i(191348),p=e.i(778528),u=e.i(613056),h=e.i(44999),y=e.i(192199),g=e.i(271645),m=e.i(862873),x=e.i(178849),f=e.i(526732);let b="/api/migrations",j=new class{async request(e,t={}){let i=await (0,f.getSession)(),r={"Content-Type":"application/json",...t.headers||{}};i?.user?.email&&(r["X-User-Email"]=i.user.email),i?.user?.name&&(r["X-User-Name"]=i.user.name);let s=await fetch(e,{...t,headers:r});if(!s.ok){let e;try{e=await s.json()}catch{e={error:await s.text().catch(()=>"Unknown error")||`HTTP ${s.status}: ${s.statusText}`}}let t=e.error||e.details||`HTTP ${s.status}: ${s.statusText}`;throw Error(e.details?`${t} - ${e.details}`:t)}return s.json()}async getMigrationJobs(){let e=`${b}`;return this.request(e)}async getMigrationJob(e){let t=`${b}/${e}`;return this.request(t)}async startMigration(e,t,i,r){let s=`${b}/start`,a=new FormData;a.append("name",e),a.append("entityType",t),a.append("file",i),r&&a.append("source",r);let n=await (0,f.getSession)(),o={};n?.user?.email&&(o["X-User-Email"]=n.user.email),n?.user?.name&&(o["X-User-Name"]=n.user.name);let c=await fetch(s,{method:"POST",headers:o,body:a});if(!c.ok)throw Error((await c.json().catch(()=>({error:"Unknown error"}))).error||`HTTP ${c.status}: ${c.statusText}`);return c.json()}};var T=e.i(153963),C=e.i(337880);function w(){let[e,f]=(0,g.useState)([]),[b,w]=(0,g.useState)([]),[S,v]=(0,g.useState)([]),[k,A]=(0,g.useState)(!0),[E,q]=(0,g.useState)(null),[I,_]=(0,g.useState)(null),[P,R]=(0,g.useState)(""),[N,O]=(0,g.useState)(""),[z,W]=(0,g.useState)(!1),D=(0,g.useRef)(null),$=async()=>{try{q(null);let e=await j.getMigrationJobs();f(e)}catch(e){console.error("Error loading migration jobs:",e),q(e instanceof Error?e.message:"Failed to load migration jobs")}},B=async()=>{try{let e=(await T.checklistApiService.getAllChecklists()).map(e=>({id:e.id,name:e.name||`${e.entityType} Checklist`,entityType:e.entityType||"Unknown",description:e.description||"",lastUpdated:e.lastUpdated||new Date().toISOString(),isActive:!0,items:e.items.map(e=>({id:e.id,description:e.description||"",isRequired:e.isRequired,category:e.category||"General"}))}));w(e)}catch(e){console.error("Error loading checklists:",e)}},U=async()=>{try{let e=await C.entityConfigApiService.getEntityTypes(!1,!1);v(e)}catch(e){console.error("Error loading entity types:",e)}};(0,g.useEffect)(()=>{(async()=>{A(!0),await Promise.all([$(),B(),U()]),A(!1)})()},[]),(0,g.useEffect)(()=>(e.some(e=>"IN_PROGRESS"===e.status.toUpperCase()||"PENDING"===e.status.toUpperCase())?D.current=setInterval(()=>{$()},5e3):D.current&&(clearInterval(D.current),D.current=null),()=>{D.current&&clearInterval(D.current)}),[e]);let F=e=>{switch(e.toUpperCase()){case"PENDING":return"orange";case"IN_PROGRESS":return"blue";case"COMPLETED":return"green";case"FAILED":return"red";default:return"gray"}},M=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleString()}catch{return e}},V=async()=>{if(!I||!P||!N)return void await x.SweetAlert.warning("Validation Error","Please fill in all fields and select a file");W(!0);try{await j.startMigration(P,N,I,I.name),await $(),_(null),R(""),O(""),await x.SweetAlert.success("Migration Started",`Migration job "${P}" has been started successfully.`),D.current||(D.current=setInterval(()=>{$()},5e3))}catch(e){console.error("Error starting migration:",e),await x.SweetAlert.error("Migration Failed",e instanceof Error?e.message:"Failed to start migration. Please try again.")}finally{W(!1)}};return k?(0,t.jsxs)(i.Box,{children:[(0,t.jsx)(m.default,{}),(0,t.jsx)(i.Box,{ml:"240px",p:"8",bg:"gray.50",minH:"100vh",children:(0,t.jsx)(o.Flex,{justify:"center",align:"center",h:"400px",children:(0,t.jsx)(c.Spinner,{size:"xl",color:"orange.500"})})})]}):(0,t.jsxs)(i.Box,{children:[(0,t.jsx)(m.default,{}),(0,t.jsx)(i.Box,{ml:"240px",p:"8",bg:"gray.50",minH:"100vh",children:(0,t.jsx)(r.Container,{maxW:"7xl",children:(0,t.jsxs)(s.VStack,{gap:"6",align:"stretch",children:[(0,t.jsxs)(o.Flex,{justify:"space-between",align:"center",children:[(0,t.jsxs)(s.VStack,{align:"start",gap:"1",children:[(0,t.jsx)(l.Typography,{fontSize:"3xl",fontWeight:"bold",color:"gray.800",children:"Data Migration"}),(0,t.jsx)(l.Typography,{color:"gray.600",children:"Import and migrate existing partner/customer data"})]}),(0,t.jsxs)(a.HStack,{gap:"3",children:[(0,t.jsxs)(d.Button,{variant:"secondary",size:"sm",onClick:$,children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiSearch,{size:16})}),"Refresh"]}),(0,t.jsxs)(d.Button,{variant:"secondary",size:"sm",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiSettings,{size:16})}),"Migration Settings"]})]})]}),E&&(0,t.jsx)(i.Box,{bg:"red.50",p:"4",borderRadius:"md",border:"1px",borderColor:"red.200",children:(0,t.jsxs)(a.HStack,{gap:"2",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiAlertTriangle,{size:20,color:"#E53E3E"})}),(0,t.jsxs)(s.VStack,{align:"start",gap:"1",children:[(0,t.jsx)(l.Typography,{fontWeight:"semibold",color:"red.700",children:"Error loading data"}),(0,t.jsx)(l.Typography,{fontSize:"sm",color:"red.600",children:E})]})]})}),(0,t.jsx)(i.Box,{bg:"white",p:"6",borderRadius:"lg",boxShadow:"sm",children:(0,t.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,t.jsxs)(o.Flex,{justify:"space-between",align:"center",children:[(0,t.jsx)(l.Typography,{fontSize:"lg",fontWeight:"semibold",color:"gray.800",children:"Migration Jobs"}),(0,t.jsxs)(d.Button,{variant:"primary",size:"sm",onClick:()=>{document.getElementById("start-migration-section")?.scrollIntoView({behavior:"smooth"})},children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiUpload,{size:16})}),"New Migration"]})]}),0===e.length?(0,t.jsx)(i.Box,{p:"8",textAlign:"center",border:"2px dashed",borderColor:"gray.300",borderRadius:"lg",bg:"gray.50",children:(0,t.jsxs)(s.VStack,{gap:"3",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiUpload,{size:32,color:"#A0AEC0"})}),(0,t.jsx)(l.Typography,{fontSize:"md",color:"gray.600",fontWeight:"medium",children:"No migration jobs found"}),(0,t.jsx)(l.Typography,{fontSize:"sm",color:"gray.500",children:"Start a new migration to import partner/customer data"})]})}):(0,t.jsx)(n.SimpleGrid,{columns:{base:1,lg:2},gap:"4",children:e.map(e=>(0,t.jsx)(i.Box,{p:"4",border:"1px",borderColor:"gray.200",borderRadius:"lg",bg:"gray.50",children:(0,t.jsxs)(s.VStack,{gap:"3",align:"stretch",children:[(0,t.jsxs)(o.Flex,{justify:"space-between",align:"start",children:[(0,t.jsxs)(s.VStack,{align:"start",gap:"1",children:[(0,t.jsx)(l.Typography,{fontSize:"md",fontWeight:"semibold",color:"gray.800",children:e.name}),(0,t.jsx)(l.Typography,{fontSize:"xs",color:"gray.500",fontFamily:"mono",children:e.id}),(0,t.jsxs)(l.Typography,{fontSize:"sm",color:"gray.600",children:[e.entityType," • ",e.source]})]}),(0,t.jsx)(u.Tag,{variant:"red"===F(e.status)?"danger":"green"===F(e.status)?"success":"blue"===F(e.status)?"info":"orange"===F(e.status)?"warning":"inactive",children:e.status.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase())})]}),(0,t.jsxs)(s.VStack,{gap:"2",align:"stretch",children:[(0,t.jsxs)(a.HStack,{justify:"space-between",children:[(0,t.jsx)(l.Typography,{fontSize:"sm",color:"gray.600",children:"Progress:"}),(0,t.jsxs)(l.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.800",children:[e.progress,"%"]})]}),(0,t.jsx)(i.Box,{width:"100%",height:"6px",bg:"gray.200",borderRadius:"full",overflow:"hidden",children:(0,t.jsx)(i.Box,{width:`${e.progress}%`,height:"100%",bg:`${F(e.status)}.400`,borderRadius:"full",transition:"width 0.3s ease"})})]}),(0,t.jsxs)(a.HStack,{justify:"space-between",fontSize:"sm",color:"gray.600",children:[(0,t.jsxs)(l.Typography,{children:["Total: ",e.totalRecords]}),(0,t.jsxs)(l.Typography,{children:["Processed: ",e.processedRecords]}),(0,t.jsxs)(l.Typography,{color:"red.600",children:["Failed: ",e.failedRecords]})]}),e.errorMessage&&(0,t.jsx)(i.Box,{bg:"red.50",p:"3",borderRadius:"md",border:"1px",borderColor:"red.200",children:(0,t.jsxs)(a.HStack,{gap:"2",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiAlertTriangle,{size:16,color:"#E53E3E"})}),(0,t.jsx)(l.Typography,{fontSize:"sm",color:"red.700",children:e.errorMessage})]})}),(0,t.jsxs)(a.HStack,{justify:"space-between",fontSize:"xs",color:"gray.500",children:[(0,t.jsxs)(s.VStack,{align:"start",gap:"0",children:[(0,t.jsx)(l.Typography,{fontWeight:"medium",children:"Started:"}),(0,t.jsx)(l.Typography,{children:M(e.startTime)})]}),e.endTime&&(0,t.jsxs)(s.VStack,{align:"end",gap:"0",children:[(0,t.jsx)(l.Typography,{fontWeight:"medium",children:"Completed:"}),(0,t.jsx)(l.Typography,{children:M(e.endTime)})]})]})]})},e.id))})]})}),(0,t.jsx)(i.Box,{id:"start-migration-section",bg:"white",p:"6",borderRadius:"lg",boxShadow:"sm",children:(0,t.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,t.jsx)(l.Typography,{fontSize:"lg",fontWeight:"semibold",color:"gray.800",children:"Start New Migration"}),(0,t.jsxs)(n.SimpleGrid,{columns:{base:1,md:2},gap:"4",children:[(0,t.jsxs)(s.VStack,{gap:"3",align:"stretch",children:[(0,t.jsxs)(i.Box,{children:[(0,t.jsx)(l.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:"Migration Name"}),(0,t.jsx)(p.Input,{placeholder:"Enter migration name",value:P,onChange:e=>R(e.target.value)})]}),(0,t.jsxs)(i.Box,{children:[(0,t.jsx)(l.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:"Entity Type"}),(0,t.jsxs)("select",{value:N,onChange:e=>O(e.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"6px",border:"1px solid #E2E8F0",backgroundColor:"white",color:"#1A202C"},disabled:0===S.length,children:[(0,t.jsx)("option",{value:"",children:0===S.length?"Loading entity types...":"Select entity type"}),S.map(e=>(0,t.jsx)("option",{value:e.displayName,children:e.displayName},e.id))]}),0===S.length&&(0,t.jsx)(l.Typography,{fontSize:"xs",color:"gray.500",mt:"1",children:"No entity types found. Please configure entity types first."})]})]}),(0,t.jsxs)(s.VStack,{gap:"3",align:"stretch",children:[(0,t.jsxs)(i.Box,{children:[(0,t.jsx)(l.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:"Data File"}),(0,t.jsx)("input",{type:"file",accept:".csv,.xlsx,.pdf",onChange:e=>_(e.target.files?.[0]||null),style:{width:"100%",padding:"8px",borderRadius:"6px",border:"1px solid #E2E8F0",backgroundColor:"white"}})]}),(0,t.jsxs)(d.Button,{variant:"primary",onClick:V,disabled:!I||!P||!N||z,children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiUpload,{size:16})}),z?"Starting...":"Start Migration"]})]})]})]})}),(0,t.jsx)(i.Box,{bg:"white",p:"6",borderRadius:"lg",boxShadow:"sm",children:(0,t.jsxs)(s.VStack,{gap:"4",align:"stretch",children:[(0,t.jsxs)(o.Flex,{justify:"space-between",align:"center",children:[(0,t.jsx)(l.Typography,{fontSize:"lg",fontWeight:"semibold",color:"gray.800",children:"Entity Checklists"}),(0,t.jsxs)(d.Button,{variant:"secondary",size:"sm",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiFileText,{size:16})}),(0,t.jsx)(l.Typography,{children:"Manage Checklists"})]})]}),(0,t.jsx)(n.SimpleGrid,{columns:{base:1,lg:2},gap:"4",children:b.map(e=>(0,t.jsx)(i.Box,{p:"4",border:"1px",borderColor:"gray.200",borderRadius:"lg",bg:"gray.50",children:(0,t.jsxs)(s.VStack,{gap:"3",align:"stretch",children:[(0,t.jsxs)(o.Flex,{justify:"space-between",align:"start",children:[(0,t.jsxs)(s.VStack,{align:"start",gap:"1",children:[(0,t.jsx)(l.Typography,{fontSize:"md",fontWeight:"semibold",color:"gray.800",children:e.name}),(0,t.jsx)(l.Typography,{fontSize:"sm",color:"gray.600",children:e.description})]}),(0,t.jsx)(u.Tag,{variant:e.isActive?"success":"inactive",children:e.isActive?"Active":"Inactive"})]}),(0,t.jsxs)(s.VStack,{gap:"2",align:"stretch",children:[(0,t.jsxs)(a.HStack,{justify:"space-between",children:[(0,t.jsx)(l.Typography,{fontSize:"sm",color:"gray.600",children:"Items:"}),(0,t.jsxs)(l.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.800",children:[e.items.length," items"]})]}),(0,t.jsxs)(a.HStack,{justify:"space-between",children:[(0,t.jsx)(l.Typography,{fontSize:"sm",color:"gray.600",children:"Required:"}),(0,t.jsxs)(l.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.800",children:[e.items.filter(e=>e.isRequired).length," required"]})]})]}),(0,t.jsxs)(l.Typography,{fontSize:"xs",color:"gray.500",children:["Last updated: ",new Date(e.lastUpdated).toLocaleDateString()]}),(0,t.jsxs)(a.HStack,{justify:"space-between",children:[(0,t.jsx)(d.Button,{size:"sm",variant:"secondary",children:(0,t.jsxs)(a.HStack,{gap:"2",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiFileText,{size:16})}),(0,t.jsx)(l.Typography,{children:"View Details"})]})}),(0,t.jsxs)(d.Button,{size:"sm",variant:"secondary",children:[(0,t.jsx)(h.IconWrapper,{children:(0,t.jsx)(y.FiDownload,{size:16})}),(0,t.jsx)(l.Typography,{children:"Export"})]})]})]})},e.id))})]})})]})})})]})}e.s(["default",()=>w],797809)},661405,e=>{e.v(t=>Promise.all(["static/chunks/f478692b842c0428.js"].map(t=>e.l(t))).then(()=>t(819252)))}]);

//# debugId=d73ed8b7-d678-5c61-c24a-cc4d7d2df1f2
//# sourceMappingURL=325cacc52697a757.js.map