;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="7880312e-e405-1486-1ecb-b900088928ec")}catch(e){}}();
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,661855,e=>{"use strict";var t=e.i(843476),r=e.i(843011),a=e.i(297630),o=e.i(53545),i=e.i(361035),n=e.i(761869),l=e.i(349073),s=e.i(891825),d=e.i(571798),c=e.i(147513),p=e.i(857557),u=e.i(192199),g=e.i(846932),h=e.i(522016),y=e.i(618566),x=e.i(271645),m=e.i(862873),f=e.i(178849),b=e.i(54010),w=e.i(880572);e.i(643983);var j=e.i(554646),S=e.i(613056);function v({field:e,readOnly:a=!0,onDocumentClick:o}){return(0,t.jsxs)(r.Box,{children:[(0,t.jsxs)(j.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:[e.label,e.isRequired&&(0,t.jsx)(j.Typography,{as:"span",color:"red.500",ml:"1",children:"*"})]}),(()=>{switch(e.type){case"Text":case"Email":case"Phone":return(0,t.jsx)(w.Input,{value:e.value||"",placeholder:e.placeholder,readOnly:a,type:"Email"===e.type?"email":"Phone"===e.type?"tel":"text",bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});case"Textarea":return(0,t.jsx)(d.Textarea,{value:e.value||"",placeholder:e.placeholder,readOnly:a,rows:4,bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});case"Number":return(0,t.jsx)(w.Input,{value:e.value||"",placeholder:e.placeholder,readOnly:a,type:"number",bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300"});case"Date":return(0,t.jsx)(w.Input,{value:e.value?new Date(e.value).toISOString().split("T")[0]:"",placeholder:e.placeholder||"mm/dd/yyyy",readOnly:a,type:"date",bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});case"Select":case"MultiSelect":if(e.options&&e.options.length>0)if("MultiSelect"===e.type){let r=Array.isArray(e.value)?e.value:e.value?[e.value]:[];return(0,t.jsx)(i.HStack,{wrap:"wrap",gap:"2",children:r.length>0?r.map((r,a)=>{let o=e.options?.find(e=>e.value===r);return(0,t.jsx)(S.Tag,{variant:"info",children:o?.label||r},a)}):(0,t.jsx)(j.Typography,{color:"gray.400",fontSize:"sm",children:"No selection"})})}else{let r=e.options.find(t=>t.value===e.value);return(0,t.jsx)(w.Input,{value:r?.label||e.value||"",placeholder:e.placeholder,readOnly:!0,bg:"gray.50",borderColor:"gray.200"})}return(0,t.jsx)(w.Input,{value:e.value||"",placeholder:e.placeholder,readOnly:a,bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300"});case"Checkbox":return(0,t.jsxs)(i.HStack,{children:[(0,t.jsx)("input",{type:"checkbox",checked:!0===e.value||"true"===e.value,readOnly:a,disabled:a}),(0,t.jsx)(j.Typography,{fontSize:"sm",color:"gray.600",children:!0===e.value||"true"===e.value?"Yes":"No"})]});case"File":let n=null;if(e.value)try{"string"==typeof e.value&&e.value.startsWith("{")?n=JSON.parse(e.value):"object"==typeof e.value&&(n=e.value)}catch(e){}return(0,t.jsx)(r.Box,{children:e.value?(0,t.jsxs)(i.HStack,{gap:"2",children:[(0,t.jsx)(j.Typography,{fontSize:"sm",color:"orange.600",cursor:"pointer",_hover:{textDecoration:"underline"},onClick:()=>{if(o&&n)o(n);else if(n&&n.fileName){let e=(window.location.pathname.match(/\/applications\/([^\/]+)/)||[])[1];e?fetch(`/api/proxy/api/v1/documents/case/${e}`).then(e=>e.json()).then(e=>{let t=Array.isArray(e)?e.find(e=>e.fileName===n.fileName||e.documentNumber===n.requirementCode):null;if(t&&t.storageKey)return fetch(`/api/proxy/api/v1/documents/download/${encodeURIComponent(t.storageKey)}`);throw Error("Document not found")}).then(e=>e.json()).then(e=>{e.url&&window.open(e.url,"_blank")}).catch(e=>{console.error("Error viewing document:",e),alert("Document viewing is not available for this file. Please use the Documents page to view it.")}):alert("Document viewing is not available for this file. Please use the Documents page to view it.")}},children:n?.fileName||("string"==typeof e.value?e.value:"File attached")}),n?.fileSize&&(0,t.jsxs)(j.Typography,{fontSize:"xs",color:"gray.500",children:["(",(n.fileSize/1024/1024).toFixed(2)," MB)"]})]}):(0,t.jsx)(j.Typography,{fontSize:"sm",color:"gray.400",children:"Not provided"})});case"Country":return(0,t.jsx)(w.Input,{value:e.value||"",placeholder:e.placeholder||"Country code",readOnly:a,bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300"});case"Currency":return(0,t.jsx)(w.Input,{value:e.value?"number"==typeof e.value?e.value.toLocaleString("en-US",{style:"currency",currency:"USD"}):e.value:"",placeholder:e.placeholder,readOnly:a,bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300"});case"Address":return(0,t.jsx)(d.Textarea,{value:e.value||"",placeholder:e.placeholder,readOnly:a,rows:3,bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});default:return(0,t.jsx)(w.Input,{value:e.value||"",placeholder:e.placeholder,readOnly:a,bg:a?"gray.50":"white",borderColor:a?"gray.200":"gray.300"})}})(),e.helpText&&(0,t.jsx)(j.Typography,{fontSize:"xs",color:"gray.500",mt:"1.5",children:e.helpText})]})}var C=e.i(278398),I=e.i(191348),k=e.i(827296),R=e.i(404372),E=e.i(927561),T=e.i(44999),F=e.i(778497);let _=(0,g.motion)(r.Box);function N(){let e=(0,y.useParams)(),g=e?.id,[w,N]=(0,x.useState)(1),[O,D]=(0,x.useState)(null),[A,U]=(0,x.useState)(!0),[z,B]=(0,x.useState)(null),[L,W]=(0,x.useState)(""),[P,$]=(0,x.useState)(""),[H,M]=(0,x.useState)({score:65,factors:[{name:"Business Type",score:70,weight:25},{name:"Geographic Risk",score:80,weight:20},{name:"Volume Risk",score:60,weight:30},{name:"Documentation",score:50,weight:25}]}),[K,V]=(0,x.useState)(!1),[G,q]=(0,x.useState)(!1),[J,Y]=(0,x.useState)(""),[Q,Z]=(0,x.useState)(""),[X,ee]=(0,x.useState)(!1),[et,er]=(0,x.useState)(!1),[ea,eo]=(0,x.useState)(!1),[ei,en]=(0,x.useState)(null),[el,es]=(0,x.useState)(!1),[ed,ec]=(0,x.useState)(null),[ep,eu]=(0,x.useState)(!1),[eg,eh]=(0,x.useState)(null),[ey,ex]=(0,x.useState)(""),[em,ef]=(0,x.useState)(void 0),[eb,ew]=(0,x.useState)(void 0);(0,x.useEffect)(()=>{eS()},[g]);let ej=async e=>{try{if(!e)return void await f.SweetAlert.warning("Document Not Found","Document information is not available.");if(!g)return void await f.SweetAlert.warning("Application Not Found","Cannot find application ID.");F.logger.debug("Fetching documents for case",{caseId:g});let t=await fetch(`/api/proxy/api/v1/documents/case/${g}`);if(!t.ok){let e=await t.text();throw F.logger.error(Error(`Failed to fetch documents: ${t.status}`),"Failed to fetch documents",{tags:{error_type:"documents_fetch_error"},extra:{status:t.status,errorText:e}}),Error(`Failed to fetch documents: ${t.status} ${t.statusText}`)}let r=await t.json();if(F.logger.debug("Documents received",{count:r?.length||0}),!Array.isArray(r)){F.logger.error(Error("Documents response is not an array"),"Invalid documents response",{tags:{error_type:"documents_format_error"},extra:{documents:r}}),await f.SweetAlert.warning("Invalid Response","The server returned an invalid response. Please try again.");return}if(0===r.length){F.logger.warn("No documents found for case",{tags:{warning_type:"no_documents"},extra:{caseId:g}});let t=await fetch("/api/proxy/api/v1/documents?skip=0&take=1000");if(!t.ok)return void await f.SweetAlert.warning("No Documents",`No documents found for this application (ID: ${g}).

Please check if documents have been uploaded.`);{let a=(await t.json()).items||[];F.logger.debug("Found total documents in system",{count:a.length});let o=a.filter(e=>{let t=String(e.caseId||"").toLowerCase(),r=String(g||"").toLowerCase();return t===r||e.caseId===g});if(F.logger.debug("Found documents by caseId match",{count:o.length}),0===o.length&&e?.fileName){let t=e.fileName.toLowerCase(),r=t.substring(0,t.lastIndexOf("."));o=a.filter(e=>{let a=e.fileName?.toLowerCase()||"",o=a.substring(0,a.lastIndexOf("."));if(a===t||a.includes(t)||t.includes(a)||r&&o&&(o===r||o.includes(r)||r.includes(o)))return!0;let i=r.split(/[._-]/).filter(e=>e.length>2),n=o.split(/[._-]/).filter(e=>e.length>2);return!!i.some(e=>n.includes(e))}),F.logger.debug("Found documents by filename",{count:o.length,fileName:e.fileName})}if(0===o.length&&1===a.length&&(F.logger.debug("Only 1 document in system, using it as fallback"),o=a),0===o.length&&a.length>0&&e?.fileName&&/\.(png|jpg|jpeg|gif|bmp|webp|svg)$/i.test(e.fileName)&&(o=a.filter(e=>{let t=e.fileName?.toLowerCase()||"";return/\.(png|jpg|jpeg|gif|bmp|webp|svg)$/i.test(t)}),F.logger.debug("Found image documents as fallback",{count:o.length})),o.length>0)r.push(...o),F.logger.debug("Using fallback documents (caseId may not match)",{documents:r.map(e=>({fileName:e.fileName,caseId:e.caseId,searchingFor:g}))});else{F.logger.debug("All documents in system",{documents:a.map(e=>({fileName:e.fileName,caseId:e.caseId})),searchingFor:g,fileData:e?.fileName});let t=`No documents found for application ${g}.

`;0===a.length?(t+="The document database is empty. ",e?.fileName?t+=`

The application metadata references a file "${e.fileName}", but the document record was deleted (possibly when applications were cleared).

Please re-upload the document if needed.`:t+=`

If you expected documents to be here, they may have been deleted. Please upload new documents.`):t+=`Found ${a.length} total document(s) in system, but none are linked to this application.

If you uploaded a document, it may not be linked to this application. Please check the Documents page to verify.`,await f.SweetAlert.warning("No Documents Found",t);return}}}let a=e.fileName||("string"==typeof e?e:""),o=e.requirementCode,i=r.find(e=>{let t=e.fileName?.toLowerCase()||"",r=a?.toLowerCase()||"";if(e.fileName===a||t===r||t.includes(r)||r.includes(t)||o&&(e.documentNumber===o||e.documentNumber?.includes(o)))return!0;let i=t.substring(t.lastIndexOf(".")),n=r.substring(r.lastIndexOf("."));if(i&&n&&i===n){let e=t.replace(i,""),a=r.replace(n,"");if(e.includes(a)||a.includes(e))return!0}return!1});if(!i&&a){let e=a.toLowerCase().split(/[._-]/);i=r.find(t=>{let r=t.fileName?.toLowerCase()||"";return e.some(e=>e.length>3&&r.includes(e))})}if(!i&&r.length>0&&(i=r[0]),!i||!i.storageKey)return void await f.SweetAlert.warning("Document Not Found",`Could not find document "${a}" in the system. Found ${r.length} document(s) for this application.`);let n=null;try{let e=await fetch(`/api/proxy/api/v1/documents/download/${encodeURIComponent(i.storageKey)}`);if(e.ok){let t=await e.json();F.logger.debug("Download URL response received"),(n=t.downloadUrl||t.DownloadUrl||t.url||t.presignedUrl||t.presignedDownloadUrl||t.downloadURL||("string"==typeof t?t:null)||null)&&i.storageKey?(n=`/api/proxy-document?storageKey=${encodeURIComponent(i.storageKey)}`,F.logger.debug("Using proxy endpoint for document",{downloadUrl:n})):n&&(n=`/api/proxy-document?url=${encodeURIComponent(n)}`,F.logger.debug("Using proxy endpoint with URL",{downloadUrl:n})),F.logger.debug("Extracted download URL",{downloadUrl:n}),n||F.logger.error(Error("Could not extract URL from response"),"Failed to extract download URL",{tags:{error_type:"url_extraction_error"},extra:{downloadData:t}})}else{let t=await e.text();F.logger.warn("Download URL request failed",{tags:{warning_type:"download_url_failed"},extra:{status:e.status,errorText:t}})}}catch(e){F.logger.warn("Failed to get download URL from storage key",{tags:{warning_type:"storage_key_download_failed"},extra:{error:e}})}if(!n&&i.id)try{let e=await fetch(`/api/proxy/api/v1/documents/${i.id}/download`);if(e.ok){let t=await e.json();(n=t.downloadUrl||t.DownloadUrl||t.url||t.presignedUrl||null)&&i.storageKey?n=`/api/proxy-document?storageKey=${encodeURIComponent(i.storageKey)}`:n&&(n=`/api/proxy-document?url=${encodeURIComponent(n)}`),F.logger.debug("Download URL from document ID",{downloadUrl:n})}}catch(e){F.logger.warn("Failed to get download URL from document ID",{tags:{warning_type:"document_id_download_failed"},extra:{error:e}})}if(!n&&i.storageKey)try{let e=await fetch("/api/proxy/api/v1/documents/download-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storageKey:i.storageKey,bucketName:i.bucketName||"kyb-docs"})});if(e.ok){let t=await e.json();(n=t.downloadUrl||t.DownloadUrl||t.url||t.presignedUrl||t.presignedDownloadUrl||t.downloadURL||null)&&i.storageKey?n=`/api/proxy-document?storageKey=${encodeURIComponent(i.storageKey)}`:n&&(n=`/api/proxy-document?url=${encodeURIComponent(n)}`),F.logger.debug("Download URL from POST endpoint",{downloadUrl:n})}else{let t=await e.text();F.logger.warn("POST download URL request failed",{tags:{warning_type:"post_download_failed"},extra:{status:e.status,errorText:t}})}}catch(e){F.logger.warn("Failed to get download URL from POST endpoint",{tags:{warning_type:"post_endpoint_failed"},extra:{error:e}})}if(!n)throw F.logger.error(Error("All download URL methods failed"),"Failed to get download URL",{tags:{error_type:"all_download_methods_failed"},extra:{document:i}}),Error(`Failed to get download URL for document. StorageKey: ${i.storageKey}, DocumentId: ${i.id}`);ex(i.fileName||a),ef(i.type?String(i.type):void 0),ew(i.sizeBytes||e.fileSize),eh(n),eu(!0)}catch(e){F.logger.error(e,"Error viewing document",{tags:{error_type:"document_view_error"}}),await f.SweetAlert.error("View Failed",e instanceof Error?e.message:"Failed to view document. Please try again.")}},eS=async()=>{try{U(!0),B(null);let e=await fetch(`/api/applications/${g}`);if(!e.ok){if(404===e.status)return void B("Application not found");throw Error(`Failed to fetch application: ${e.status}`)}let t=await e.json();ec(t);let r=t.metadataJson?JSON.parse(t.metadataJson):{},a=r.entity_type_code||r.entityTypeCode||null;a&&("string"==typeof a&&a.includes(",")&&(a=a.split(",")[0].trim()),a=String(a).trim(),""===a&&(a=null)),F.logger.debug("[Application Loader] Entity type code from metadata",{raw:r.entity_type_code||r.entityTypeCode,cleaned:a});let o={id:t.caseId||t.id,legalName:t.businessLegalName||`${t.applicantFirstName||""} ${t.applicantLastName||""}`.trim()||"Unknown",entityType:t.type||r.entity_type_display_name||"Unknown",country:t.businessCountryOfRegistration||t.applicantCountry||"Unknown",status:{Draft:"IN PROGRESS",InProgress:"IN PROGRESS",PendingReview:"RISK REVIEW",Submitted:"SUBMITTED",Approved:"COMPLETE",Rejected:"DECLINED",Cancelled:"DECLINED"}[t.status]||"IN PROGRESS",created:t.createdAt||new Date().toISOString(),updated:t.updatedAt||t.createdAt||new Date().toISOString(),submittedBy:t.applicantEmail||"Unknown",riskScore:t.riskScore||0,documents:[],businessInfo:{registrationNumber:t.businessRegistrationNumber||r.registrationNumber||"",taxId:t.businessTaxId||r.taxNumber||"",businessAddress:t.businessAddress||r.businessAddress||"",industry:t.businessIndustry||r.industry||"",employees:t.businessNumberOfEmployees||0,annualRevenue:t.businessAnnualRevenue||0},contactInfo:{primaryContact:`${t.applicantFirstName||""} ${t.applicantLastName||""}`.trim(),email:t.applicantEmail||"",phone:t.applicantPhone||"",address:t.applicantAddress||""}};D(o),$(o.status),Y(o.status),a?(F.logger.debug("[Application Loader] Using entity_type_code from application metadata",{entityTypeCode:a}),await ev(a,t)):F.logger.error(Error("No entity_type_code found in application metadata"),"[Application Loader] Missing entity type code",{tags:{error_type:"missing_entity_type_code"},extra:{availableKeys:Object.keys(r)}})}catch(e){B("Failed to load application"),F.logger.error(e,"Error loading application",{tags:{error_type:"application_load_error"}})}finally{U(!1)}},ev=async(e,t)=>{try{if(es(!0),F.logger.debug("[Schema Loader] Using entity type code directly from application",{entityTypeCode:e}),!e||""===e.trim())return void F.logger.error(Error("Entity type code is empty or invalid"),"[Schema Loader] Invalid entity type code",{tags:{error_type:"invalid_entity_type_code"}});let r=await (0,b.fetchEntitySchema)(e.trim(),t);r?(F.logger.debug("[Schema Loader] Successfully loaded entity schema",{sectionsCount:r.sections.length,sections:r.sections.map((e,t)=>({index:t+1,title:e.title,fieldsCount:e.fields.length}))}),en(r)):F.logger.error(Error(`No entity schema found for: ${e}`),"[Schema Loader] Missing entity schema",{tags:{error_type:"missing_entity_schema"},extra:{entityTypeCode:e}})}catch(e){F.logger.error(e,"[Schema Loader] Error loading entity schema",{tags:{error_type:"schema_load_error"},extra:{stack:e instanceof Error?e.stack:"No stack trace"}})}finally{es(!1)}},eC=async()=>{if(O&&J){ee(!0);try{let e=await fetch(`/api/applications/${O.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:J,notes:Q||""})});if(!e.ok){let t=await e.json();throw Error(t.error||`Failed to update status: ${e.status}`)}$(J),await eS(),V(!1),Y(""),Z(""),await f.SweetAlert.success("Status Updated",`Application status has been updated to ${J}`)}catch(e){F.logger.error(e,"Error updating status",{tags:{error_type:"status_update_error"}}),await f.SweetAlert.error("Update Failed",e instanceof Error?e.message:"Failed to update status")}finally{ee(!1)}}},eI=async()=>{if(Q.trim()&&O){er(!0);try{let e=O.id,t=await fetch(`/api/workqueue/${e}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:Q})});if(t.ok)W(Q),q(!1),Z(""),await f.SweetAlert.success("Comment Added","Your comment has been added successfully");else{let e=await t.json().catch(()=>({}));throw Error(e.error||`Failed to add comment: ${t.status}`)}}catch(e){F.logger.error(e,"Error adding comment",{tags:{error_type:"comment_add_error"}}),await f.SweetAlert.error("Comment Failed",e instanceof Error?e.message:"Failed to add comment")}finally{er(!1)}}},ek=async()=>{if(O){eo(!0);try{let e={applicationId:O.id,legalName:O.legalName,entityType:O.entityType,country:O.country,status:O.status,submittedDate:O.created,lastUpdated:O.updated,applicant:O.submittedBy,riskScore:O.riskScore||0,businessInfo:O.businessInfo,contactInfo:O.contactInfo,documents:O.documents},t=JSON.stringify(e,null,2),r=new Blob([t],{type:"application/json"}),a=window.URL.createObjectURL(r),o=document.createElement("a");o.href=a,o.download=`application_${O.id}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(a),document.body.removeChild(o),await f.SweetAlert.success("Export Successful","Application data has been exported")}catch(e){F.logger.error(e,"Error exporting data",{tags:{error_type:"data_export_error"}}),await f.SweetAlert.error("Export Failed",e instanceof Error?e.message:"Failed to export data")}finally{eo(!1)}}},eR=ei&&ei.sections&&0!==ei.sections.length?[...ei.sections].sort((e,t)=>e.order-t.order).map((e,t)=>{let r=u.FiFileText,a=e.title.toUpperCase();return a.includes("OVERVIEW")||a.includes("INFORMATION")?r=u.FiFileText:a.includes("DOCUMENT")?r=u.FiFolder:a.includes("OWNERSHIP")||a.includes("SHAREHOLDER")?r=u.FiUsers:a.includes("DIRECTOR")||a.includes("BOARD")||a.includes("IDENTITY")||a.includes("PROOF")?r=u.FiUserCheck:a.includes("ADDRESS")?r=u.FiHome:(a.includes("SIGNATORY")||a.includes("AUTHORIZED"))&&(r=u.FiUsers),{id:t+1,title:e.title,subtitle:e.description||`${e.title} details`,icon:r,active:!0,sectionId:e.id,sectionOrder:e.order}}):[{id:1,title:"Overview",subtitle:"Application summary",icon:u.FiFileText,active:!0}],eE=e=>({SUBMITTED:"blue","IN PROGRESS":"orange",COMPLETE:"green",DECLINED:"red","RISK REVIEW":"yellow",INCOMPLETE:"gray"})[e]||"gray";return A?(0,t.jsxs)(n.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(m.default,{}),(0,t.jsx)(r.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsxs)(o.VStack,{gap:"4",children:[(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiFileText,{size:32,color:"#DD6B20"})}),(0,t.jsx)(j.Typography,{color:"gray.600",children:"Loading application details..."})]})})]}):z||!O?(0,t.jsxs)(n.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(m.default,{}),(0,t.jsx)(r.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsxs)(o.VStack,{gap:"4",children:[(0,t.jsx)(E.AlertBar,{status:"error",title:"Error!",description:z||"Application not found"}),(0,t.jsx)(h.default,{href:"/work-queue",children:(0,t.jsxs)(I.Button,{variant:"secondary",children:[(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiArrowLeft,{size:16})}),"Back to Work Queue"]})})]})})]}):(0,t.jsxs)(n.Flex,{minH:"100vh",bg:"gray.50",children:[(0,t.jsx)(m.default,{}),(0,t.jsxs)(r.Box,{flex:"1",ml:"240px",bg:"gradient-to-br",bgGradient:"linear(to-br, gray.50, white)",children:[(0,t.jsx)(r.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",py:"5",boxShadow:"sm",position:"sticky",top:"0",zIndex:"10",children:(0,t.jsxs)(a.Container,{maxW:"8xl",children:[(0,t.jsxs)(n.Flex,{justify:"space-between",align:"center",mb:"4",children:[(0,t.jsxs)(i.HStack,{gap:"3",align:"center",children:[(0,t.jsx)(r.Box,{p:"2.5",borderRadius:"lg",bgGradient:"linear(to-br, orange.400, orange.600)",boxShadow:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiFileText,{size:20,color:"white"})})}),(0,t.jsxs)(o.VStack,{align:"start",gap:"0.5",children:[(0,t.jsx)(j.Typography,{as:"h1",fontSize:"2xl",fontWeight:"800",color:"gray.900",letterSpacing:"-0.02em",lineHeight:"1.2",children:"Application Review"}),(0,t.jsxs)(i.HStack,{gap:"2",align:"center",children:[(0,t.jsx)(j.Typography,{color:"gray.600",fontSize:"sm",fontWeight:"500",children:O.legalName}),(0,t.jsx)(j.Typography,{color:"gray.400",fontSize:"xs",children:"â€¢"}),(0,t.jsx)(j.Typography,{color:"gray.500",fontSize:"sm",fontWeight:"500",children:O.entityType})]})]})]}),(0,t.jsxs)(i.HStack,{gap:"3",align:"center",children:[(0,t.jsx)(S.Tag,{variant:"green"===eE(O.status)?"success":"red"===eE(O.status)?"danger":"info",children:O.status}),(0,t.jsx)(h.default,{href:"/work-queue",children:(0,t.jsxs)(I.Button,{variant:"secondary",size:"md",children:[(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiArrowLeft,{size:16})}),"Back to Queue"]})})]})]}),(0,t.jsx)(r.Box,{py:"3",children:(0,t.jsx)(n.Flex,{direction:"column",gap:"3",align:"stretch",children:(0,t.jsx)(i.HStack,{gap:"2",justify:"space-between",align:"flex-start",position:"relative",w:"full",children:eR.map((e,a)=>(0,t.jsxs)(n.Flex,{align:"stretch",gap:"0",flex:"1",position:"relative",direction:"column",children:[(0,t.jsxs)(n.Flex,{align:"center",justify:"center",w:"full",position:"relative",mb:"2",children:[(0,t.jsx)(l.Circle,{size:"44px",bg:w>=e.id?"linear-gradient(135deg, orange.400, orange.600)":"gray.100",bgGradient:w>=e.id?"linear(to-br, orange.400, orange.600)":void 0,color:w>=e.id?"white":"gray.400",cursor:"pointer",onClick:()=>N(e.id),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",_hover:{transform:"scale(1.08)",boxShadow:w>=e.id?"0 6px 16px rgba(237, 137, 54, 0.4)":"0 3px 10px rgba(0, 0, 0, 0.1)"},boxShadow:w>=e.id?"0 4px 12px rgba(237, 137, 54, 0.3)":"0 2px 6px rgba(0, 0, 0, 0.05)",border:w===e.id?"3px solid":"none",borderColor:w===e.id?"orange.300":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,mx:"auto",children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(e.icon,{size:20})})}),a<eR.length-1&&(0,t.jsx)(r.Box,{position:"absolute",left:"calc(50% + 22px)",top:"50%",transform:"translateY(-50%)",width:"calc(100% - 44px)",height:"3px",borderRadius:"full",bg:w>e.id?"linear-gradient(90deg, orange.400, orange.500)":"gray.200",bgGradient:w>e.id?"linear(to-r, orange.400, orange.500)":void 0,transition:"all 0.4s ease",zIndex:"0"})]}),(0,t.jsxs)(o.VStack,{align:"center",gap:"0.5",w:"full",cursor:"pointer",onClick:()=>N(e.id),transition:"all 0.2s",_hover:{transform:"translateY(-1px)"},px:"1",children:[(0,t.jsx)(j.Typography,{fontSize:"xs",fontWeight:w===e.id?"700":"600",color:w===e.id?"gray.900":"gray.700",transition:"all 0.2s",textAlign:"center",lineHeight:"1.3",whiteSpace:"nowrap",w:"full",children:e.title}),(0,t.jsx)(j.Typography,{fontSize:"10px",color:w===e.id?"gray.600":"gray.500",fontWeight:w===e.id?"500":"400",transition:"all 0.2s",textAlign:"center",lineHeight:"1.2",whiteSpace:"nowrap",w:"full",children:e.subtitle})]})]},e.id))})})})]})}),(0,t.jsxs)(a.Container,{maxW:"8xl",py:"4",px:"6",children:[(0,t.jsx)(_,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:(()=>{let e=eR.find(e=>e.id===w);if(el||!ei)return(0,t.jsx)(o.VStack,{gap:"6",align:"stretch",w:"full",children:(0,t.jsx)(k.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",w:"full",children:(0,t.jsxs)(o.VStack,{gap:"4",align:"center",py:"8",w:"full",children:[(0,t.jsx)(r.Box,{p:"3",borderRadius:"lg",bgGradient:"linear(to-br, orange.100, orange.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiFileText,{size:24,color:"#DD6B20"})})}),(0,t.jsx)(j.Typography,{fontSize:"md",color:"gray.700",fontWeight:"600",textAlign:"center",children:"Loading entity schema from database..."}),(0,t.jsx)(c.Progress.Root,{value:void 0,size:"md",colorScheme:"orange",w:"full",maxW:"300px",children:(0,t.jsx)(c.Progress.Track,{children:(0,t.jsx)(c.Progress.Range,{})})})]})})});if(!e)return(0,t.jsx)(o.VStack,{gap:"6",align:"stretch",w:"full",children:(0,t.jsx)(k.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"yellow.200",p:"6",boxShadow:"md",bgGradient:"linear(to-br, white, yellow.50)",w:"full",children:(0,t.jsx)(E.AlertBar,{status:"warning",title:"Step Not Found",description:`Step ${w} could not be found in the schema.`})})});let a=ei.sections.find(t=>e.sectionId===t.id||t.title===e.title&&e.sectionOrder===t.order)||ei.sections.find(t=>t.title===e.title)||ei.sections[w-1];return a?(0,t.jsxs)(o.VStack,{gap:"6",align:"stretch",w:"full",children:[el?(0,t.jsx)(k.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",w:"full",children:(0,t.jsxs)(o.VStack,{gap:"4",align:"center",py:"8",w:"full",children:[(0,t.jsx)(r.Box,{p:"3",borderRadius:"lg",bgGradient:"linear(to-br, orange.100, orange.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiFileText,{size:24,color:"#DD6B20"})})}),(0,t.jsx)(j.Typography,{fontSize:"md",color:"gray.700",fontWeight:"600",textAlign:"center",children:"Loading entity schema from database..."}),(0,t.jsx)(c.Progress.Root,{value:void 0,size:"md",colorScheme:"orange",w:"full",maxW:"300px",children:(0,t.jsx)(c.Progress.Track,{children:(0,t.jsx)(c.Progress.Range,{})})})]})}):(0,t.jsxs)(k.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",transition:"all 0.2s",w:"full",children:[(0,t.jsx)(r.Box,{pb:"4",borderBottom:"1px",borderColor:"gray.100",mb:"4",children:(0,t.jsxs)(i.HStack,{justify:"space-between",align:"flex-start",w:"full",children:[(0,t.jsxs)(o.VStack,{align:"start",gap:"1.5",flex:"1",children:[(0,t.jsxs)(i.HStack,{gap:"2.5",align:"center",children:[(0,t.jsx)(r.Box,{p:"1.5",borderRadius:"md",bgGradient:"linear(to-br, blue.100, blue.200)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(e.icon,{size:16,color:"#3182CE"})})}),(0,t.jsx)(j.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",letterSpacing:"-0.01em",lineHeight:"1.3",children:a.title})]}),a.description&&(0,t.jsx)(j.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"500",pl:"8",lineHeight:"1.4",children:a.description})]}),(0,t.jsx)(S.Tag,{variant:"success",children:"Schema-Driven"})]})}),(0,t.jsx)(r.Box,{pt:"6",children:(0,t.jsx)(s.SimpleGrid,{columns:{base:1,md:2},gap:"6",w:"full",children:a.fields.map(e=>(0,t.jsx)(r.Box,{w:"full",children:(0,t.jsx)(v,{field:e,readOnly:!0,onDocumentClick:ej})},e.code))})})]}),1===w&&(0,t.jsxs)(k.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",w:"full",children:[(0,t.jsx)(r.Box,{pb:"4",mb:"4",children:(0,t.jsxs)(i.HStack,{gap:"2.5",align:"center",children:[(0,t.jsx)(r.Box,{p:"1.5",borderRadius:"md",bgGradient:"linear(to-br, purple.100, purple.200)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiCheckSquare,{size:16,color:"#805AD5"})})}),(0,t.jsx)(j.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",letterSpacing:"-0.01em",lineHeight:"1.3",children:"Quick Actions"})]})}),(0,t.jsx)(r.Box,{pt:"0",children:(0,t.jsxs)(i.HStack,{gap:"3",wrap:"wrap",align:"center",children:[(0,t.jsxs)(I.Button,{variant:"primary",onClick:()=>V(!0),children:[(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiEdit3,{size:16})}),"Update Status"]}),(0,t.jsxs)(I.Button,{variant:"secondary",onClick:()=>q(!0),children:[(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiMessageSquare,{size:16})}),"Add Comment"]}),(0,t.jsxs)(I.Button,{variant:"secondary",onClick:ek,disabled:ea,children:[(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiDownload,{size:16})}),ea?"Exporting...":"Export Data"]})]})})]})]}):(0,t.jsx)(o.VStack,{gap:"6",align:"stretch",w:"full",children:(0,t.jsx)(k.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"yellow.200",p:"6",boxShadow:"md",bgGradient:"linear(to-br, white, yellow.50)",w:"full",children:(0,t.jsx)(E.AlertBar,{status:"warning",title:"Section Not Found",description:`The section for step "${e.title}" could not be found in the schema.`})})})})()},w),(0,t.jsxs)(i.HStack,{justify:"space-between",align:"center",mt:"6",p:"3",bg:"white",borderRadius:"lg",boxShadow:"sm",border:"1px",borderColor:"gray.200",w:"full",children:[(0,t.jsxs)(I.Button,{variant:"secondary",onClick:()=>N(Math.max(1,w-1)),disabled:1===w,children:[(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiArrowLeft,{size:16})}),"Previous"]}),(0,t.jsx)(i.HStack,{gap:"1.5",p:"1",bg:"gray.50",borderRadius:"md",align:"center",children:eR.map(e=>(0,t.jsx)(I.Button,{size:"sm",variant:w===e.id?"primary":"ghost",onClick:()=>N(e.id),children:e.id},e.id))}),(0,t.jsxs)(I.Button,{variant:"primary",onClick:()=>N(Math.min(eR.length,w+1)),disabled:w===eR.length,children:["Next",(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiArrowRight,{size:16})})]})]})]})]}),(0,t.jsxs)(R.Modal,{isOpen:K,onClose:()=>{V(!1),Y(P),Z("")},title:"Update Application Status",size:"small",closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,t.jsx)(R.ModalHeader,{children:(0,t.jsxs)(i.HStack,{gap:"3",align:"center",mb:"1",children:[(0,t.jsx)(r.Box,{p:"2",borderRadius:"lg",bgGradient:"linear(to-br, orange.100, orange.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiEdit3,{size:16,color:"#DD6B20"})})}),(0,t.jsxs)(o.VStack,{align:"start",gap:"0",children:[(0,t.jsx)(j.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",children:"Update Application Status"}),(0,t.jsx)(j.Typography,{fontSize:"sm",color:"gray.600",mt:"0.5",children:"Change the status of this application"})]})]})}),(0,t.jsx)(R.ModalBody,{children:(0,t.jsxs)(o.VStack,{gap:"5",align:"stretch",children:[(0,t.jsxs)(p.Field.Root,{children:[(0,t.jsx)(p.Field.Label,{fontSize:"sm",fontWeight:"600",color:"gray.700",mb:"2",children:"New Status"}),(0,t.jsx)(r.Box,{position:"relative",children:(0,t.jsxs)("select",{value:J,onChange:e=>Y(e.target.value),style:{width:"100%",padding:"10px 12px",fontSize:"14px",borderRadius:"8px",border:"1.5px solid #E2E8F0",backgroundColor:"white",color:"#1A202C",fontWeight:"500",cursor:"pointer",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",paddingRight:"36px"},children:[(0,t.jsx)("option",{value:"",children:"Select status..."}),(0,t.jsx)("option",{value:"SUBMITTED",children:"Submitted"}),(0,t.jsx)("option",{value:"IN PROGRESS",children:"In Progress"}),(0,t.jsx)("option",{value:"RISK REVIEW",children:"Risk Review"}),(0,t.jsx)("option",{value:"COMPLETE",children:"Complete"}),(0,t.jsx)("option",{value:"DECLINED",children:"Declined"}),(0,t.jsx)("option",{value:"INCOMPLETE",children:"Incomplete"})]})})]}),(0,t.jsxs)(p.Field.Root,{children:[(0,t.jsxs)(p.Field.Label,{fontSize:"sm",fontWeight:"600",color:"gray.700",mb:"2",children:["Notes ",(0,t.jsx)(j.Typography,{as:"span",color:"gray.400",fontWeight:"400",children:"(Optional)"})]}),(0,t.jsx)(d.Textarea,{placeholder:"Add notes about this status change...",value:Q,onChange:e=>Z(e.target.value),rows:4,borderRadius:"md",borderWidth:"1.5px",borderColor:"gray.300",fontSize:"sm",color:"gray.900",_focus:{borderColor:"orange.400",boxShadow:"0 0 0 1px orange.400"}})]})]})}),(0,t.jsx)(R.ModalFooter,{children:(0,t.jsxs)(i.HStack,{gap:"3",justify:"flex-end",w:"full",children:[(0,t.jsx)(I.Button,{variant:"secondary",onClick:()=>{V(!1),Y(P),Z("")},children:"Cancel"}),(0,t.jsx)(I.Button,{variant:"primary",onClick:eC,disabled:X||!J,children:"Update Status"})]})})]}),(0,t.jsxs)(R.Modal,{isOpen:G,onClose:()=>{q(!1),Z("")},title:"Add Comment",size:"small",closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,t.jsx)(R.ModalHeader,{children:(0,t.jsxs)(i.HStack,{gap:"3",align:"center",mb:"1",children:[(0,t.jsx)(r.Box,{p:"2",borderRadius:"lg",bgGradient:"linear(to-br, blue.100, blue.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,t.jsx)(T.IconWrapper,{children:(0,t.jsx)(u.FiMessageSquare,{size:16,color:"#3182CE"})})}),(0,t.jsxs)(o.VStack,{align:"start",gap:"0",children:[(0,t.jsx)(j.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",children:"Add Comment"}),(0,t.jsx)(j.Typography,{fontSize:"sm",color:"gray.600",mt:"0.5",children:"Add a comment or note to this application"})]})]})}),(0,t.jsx)(R.ModalBody,{children:(0,t.jsxs)(p.Field.Root,{children:[(0,t.jsx)(p.Field.Label,{fontSize:"sm",fontWeight:"600",color:"gray.700",mb:"2",children:"Comment"}),(0,t.jsx)(d.Textarea,{placeholder:"Enter your comment here...",value:Q,onChange:e=>Z(e.target.value),rows:6,borderRadius:"md",borderWidth:"1.5px",borderColor:"gray.300",fontSize:"sm",color:"gray.900",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})}),(0,t.jsx)(R.ModalFooter,{children:(0,t.jsxs)(i.HStack,{gap:"3",justify:"flex-end",w:"full",children:[(0,t.jsx)(I.Button,{variant:"secondary",onClick:()=>{q(!1),Z("")},children:"Cancel"}),(0,t.jsx)(I.Button,{variant:"primary",onClick:eI,disabled:et||!Q.trim(),children:"Add Comment"})]})})]}),(0,t.jsx)(C.DocumentViewer,{isOpen:ep,onClose:()=>{eu(!1),eh(null),ex(""),ef(void 0),ew(void 0)},documentUrl:eg,fileName:ey,documentType:em,fileSize:eb,onDownload:()=>{eg&&window.open(eg,"_blank")}})]})}e.s(["default",()=>N],661855)}]);

//# debugId=7880312e-e405-1486-1ecb-b900088928ec
//# sourceMappingURL=7e85efd0c4ae0ac6.js.map