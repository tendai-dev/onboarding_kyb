;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="72e6aa93-9e91-6904-737b-b2b6f307e2db")}catch(e){}}();
module.exports=[918622,(e,t,a)=>{t.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},556704,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},324725,(e,t,a)=>{t.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},224361,(e,t,a)=>{t.exports=e.x("util",()=>require("util"))},814747,(e,t,a)=>{t.exports=e.x("path",()=>require("path"))},160626,e=>{"use strict";var t=e.i(747909),a=e.i(174017),s=e.i(996250),r=e.i(759756),n=e.i(561916),i=e.i(114444),o=e.i(837092),c=e.i(869741),l=e.i(316795),d=e.i(487718),p=e.i(995169),u=e.i(47587),m=e.i(666012),_=e.i(570101),h=e.i(626937),v=e.i(10372),g=e.i(193695);e.i(52474);var R=e.i(600220),C=e.i(89171),f=e.i(79832),x=e.i(50377);async function w(e){try{let t=await (0,f.auth)(),a=e.nextUrl.searchParams.get("partnerId"),s=`/api/proxy/api/v1/projections/dashboard${a?`?partnerId=${a}`:""}`,r=new URL(s,e.url),n={"Content-Type":"application/json"};if(t?.user){let e=t.user;e.email&&(n["X-User-Email"]=e.email),e.name&&(n["X-User-Name"]=e.name),e.id&&(n["X-User-Id"]=e.id),e.role&&(n["X-User-Role"]=e.role)}let i=await fetch(r.toString(),{method:"GET",headers:n,cache:"no-store",signal:AbortSignal.timeout(3e4)});if(!i.ok){let e="",t=null;try{e=await i.text();try{t=JSON.parse(e)}catch{}}catch{e="Failed to read error response"}return x.logger.error(Error(`Dashboard API error: ${i.status} ${i.statusText}`),"Dashboard API error",{tags:{error_type:"api_backend_error"},extra:{url:r.toString(),errorText:e,errorJson:t}}),C.NextResponse.json({error:`API request failed: ${i.status} ${i.statusText}`,details:t?.message||t?.error||e,backendError:t},{status:i.status})}let o=await i.json(),c={generatedAt:o.generated_at||o.generatedAt,partnerId:o.partner_id||o.partnerId,partnerName:o.partner_name||o.partnerName,cases:{totalCases:o.cases?.total_cases??o.cases?.totalCases??0,activeCases:o.cases?.active_cases??o.cases?.activeCases??0,completedCases:o.cases?.completed_cases??o.cases?.completedCases??0,rejectedCases:o.cases?.rejected_cases??o.cases?.rejectedCases??0,pendingReviewCases:o.cases?.pending_review_cases??o.cases?.pendingReviewCases??0,overdueCases:o.cases?.overdue_cases??o.cases?.overdueCases??0,individualCases:o.cases?.individual_cases??o.cases?.individualCases??0,corporateCases:o.cases?.corporate_cases??o.cases?.corporateCases??0,trustCases:o.cases?.trust_cases??o.cases?.trustCases??0,partnershipCases:o.cases?.partnership_cases??o.cases?.partnershipCases??0,newCasesThisMonth:o.cases?.new_cases_this_month??o.cases?.newCasesThisMonth??0,newCasesLastMonth:o.cases?.new_cases_last_month??o.cases?.newCasesLastMonth??0,newCasesGrowthPercentage:o.cases?.new_cases_growth_percentage??o.cases?.newCasesGrowthPercentage??0,completedCasesThisMonth:o.cases?.completed_cases_this_month??o.cases?.completedCasesThisMonth??0,completedCasesLastMonth:o.cases?.completed_cases_last_month??o.cases?.completedCasesLastMonth??0,completedCasesGrowthPercentage:o.cases?.completed_cases_growth_percentage??o.cases?.completedCasesGrowthPercentage??0},performance:{averageCompletionTimeHours:o.performance?.average_completion_time_hours??o.performance?.averageCompletionTimeHours??0,medianCompletionTimeHours:o.performance?.median_completion_time_hours??o.performance?.medianCompletionTimeHours??0,completionRate:o.performance?.completion_rate??o.performance?.completionRate??0,approvalRate:o.performance?.approval_rate??o.performance?.approvalRate??0,rejectionRate:o.performance?.rejection_rate??o.performance?.rejectionRate??0,slaComplianceRate:o.performance?.sla_compliance_rate??o.performance?.slaComplianceRate??0,casesBreachingSla:o.performance?.cases_breaching_sla??o.performance?.casesBreachingSla??0,averageResponseTimeHours:o.performance?.average_response_time_hours??o.performance?.averageResponseTimeHours??0},risk:{highRiskCases:o.risk?.high_risk_cases??o.risk?.highRiskCases??0,mediumRiskCases:o.risk?.medium_risk_cases??o.risk?.mediumRiskCases??0,lowRiskCases:o.risk?.low_risk_cases??o.risk?.lowRiskCases??0,averageRiskScore:o.risk?.average_risk_score??o.risk?.averageRiskScore??0,riskFactorDistribution:o.risk?.risk_factor_distribution??o.risk?.riskFactorDistribution??{},casesRequiringManualReview:o.risk?.cases_requiring_manual_review??o.risk?.casesRequiringManualReview??0,escalatedCases:o.risk?.escalated_cases??o.risk?.escalatedCases??0},compliance:{amlScreeningsPending:o.compliance?.aml_screenings_pending??o.compliance?.amlScreeningsPending??0,amlScreeningsCompleted:o.compliance?.aml_screenings_completed??o.compliance?.amlScreeningsCompleted??0,pepMatches:o.compliance?.pep_matches??o.compliance?.pepMatches??0,sanctionsMatches:o.compliance?.sanctions_matches??o.compliance?.sanctionsMatches??0,adverseMediaMatches:o.compliance?.adverse_media_matches??o.compliance?.adverseMediaMatches??0,documentsAwaitingVerification:o.compliance?.documents_awaiting_verification??o.compliance?.documentsAwaitingVerification??0,documentsVerified:o.compliance?.documents_verified??o.compliance?.documentsVerified??0,documentsRejected:o.compliance?.documents_rejected??o.compliance?.documentsRejected??0,documentVerificationRate:o.compliance?.document_verification_rate??o.compliance?.documentVerificationRate??0,auditEventsToday:o.compliance?.audit_events_today??o.compliance?.auditEventsToday??0,criticalAuditEvents:o.compliance?.critical_audit_events??o.compliance?.criticalAuditEvents??0},recentActivities:(o.recent_activities||o.recentActivities||[]).map(e=>({id:e.id,type:e.type,description:e.description,caseId:e.case_id||e.caseId,userId:e.user_id||e.userId,userName:e.user_name||e.userName,timestamp:e.timestamp,severity:e.severity,icon:e.icon,color:e.color})),dailyTrends:(o.daily_trends||o.dailyTrends||[]).map(e=>({date:e.date,newCases:e.new_cases??e.newCases??0,completedCases:e.completed_cases??e.completedCases??0,rejectedCases:e.rejected_cases??e.rejectedCases??0,averageRiskScore:e.average_risk_score??e.averageRiskScore??0,completionRate:e.completion_rate??e.completionRate??0,highRiskCases:e.high_risk_cases??e.highRiskCases??0}))};return C.NextResponse.json(c)}catch(t){let e=t instanceof Error?t.message:"Unknown error";return t instanceof Error&&t.stack,x.logger.error(t,"Dashboard API route error",{tags:{error_type:"api_route_error"},extra:{name:t instanceof Error?t.name:void 0}}),C.NextResponse.json({error:"Failed to fetch dashboard data",message:e,details:void 0},{status:500})}}e.s(["GET",()=>w],532933);var k=e.i(532933);let y=new t.AppRouteRouteModule({definition:{kind:a.RouteKind.APP_ROUTE,page:"/api/dashboard/route",pathname:"/api/dashboard",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/dashboard/route.ts",nextConfigOutput:"",userland:k}),{workAsyncStorage:E,workUnitAsyncStorage:b,serverHooks:T}=y;function A(){return(0,s.patchFetch)({workAsyncStorage:E,workUnitAsyncStorage:b})}async function j(e,t,s){y.isDev&&(0,r.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let C="/api/dashboard/route";C=C.replace(/\/index$/,"")||"/";let f=await y.prepare(e,t,{srcPage:C,multiZoneDraftMode:!1});if(!f)return t.statusCode=400,t.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve()),null;let{buildId:x,params:w,nextConfig:k,parsedUrl:E,isDraftMode:b,prerenderManifest:T,routerServerContext:A,isOnDemandRevalidate:j,revalidateOnlyGenerated:P,resolvedPathname:M,clientReferenceManifest:S,serverActionsManifest:N}=f,I=(0,c.normalizeAppPath)(C),q=!!(T.dynamicRoutes[I]||T.routes[M]),H=async()=>((null==A?void 0:A.render404)?await A.render404(e,t,E,!1):t.end("This page could not be found"),null);if(q&&!b){let e=!!T.routes[M],t=T.dynamicRoutes[I];if(t&&!1===t.fallback&&!e){if(k.experimental.adapterPath)return await H();throw new g.NoFallbackError}}let U=null;!q||y.isDev||b||(U="/index"===(U=M)?"/":U);let O=!0===y.isDev||!q,D=q&&!O;N&&S&&(0,i.setReferenceManifestsSingleton)({page:C,clientReferenceManifest:S,serverActionsManifest:N,serverModuleMap:(0,o.createServerModuleMap)({serverActionsManifest:N})});let $=e.method||"GET",F=(0,n.getTracer)(),L=F.getActiveScopeSpan(),G={params:w,prerenderManifest:T,renderOpts:{experimental:{authInterrupts:!!k.experimental.authInterrupts},cacheComponents:!!k.cacheComponents,supportsDynamicResponse:O,incrementalCache:(0,r.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:k.cacheLife,waitUntil:s.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,a,s)=>y.onRequestError(e,t,s,A)},sharedContext:{buildId:x}},V=new l.NodeNextRequest(e),K=new l.NodeNextResponse(t),B=d.NextRequestAdapter.fromNodeNextRequest(V,(0,d.signalFromNodeResponse)(t));try{let i=async e=>y.handle(B,G).finally(()=>{if(!e)return;e.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let a=F.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==p.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let s=a.get("next.route");if(s){let t=`${$} ${s}`;e.setAttributes({"next.route":s,"http.route":s,"next.span_name":t}),e.updateName(t)}else e.updateName(`${$} ${C}`)}),o=!!(0,r.getRequestMeta)(e,"minimalMode"),c=async r=>{var n,c;let l=async({previousCacheEntry:a})=>{try{if(!o&&j&&P&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let n=await i(r);e.fetchMetrics=G.renderOpts.fetchMetrics;let c=G.renderOpts.pendingWaitUntil;c&&s.waitUntil&&(s.waitUntil(c),c=void 0);let l=G.renderOpts.collectedTags;if(!q)return await (0,m.sendResponse)(V,K,n,G.renderOpts.pendingWaitUntil),null;{let e=await n.blob(),t=(0,_.toNodeOutgoingHttpHeaders)(n.headers);l&&(t[v.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let a=void 0!==G.renderOpts.collectedRevalidate&&!(G.renderOpts.collectedRevalidate>=v.INFINITE_CACHE)&&G.renderOpts.collectedRevalidate,s=void 0===G.renderOpts.collectedExpire||G.renderOpts.collectedExpire>=v.INFINITE_CACHE?void 0:G.renderOpts.collectedExpire;return{value:{kind:R.CachedRouteKind.APP_ROUTE,status:n.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:a,expire:s}}}}catch(t){throw(null==a?void 0:a.isStale)&&await y.onRequestError(e,t,{routerKind:"App Router",routePath:C,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:j})},A),t}},d=await y.handleResponse({req:e,nextConfig:k,cacheKey:U,routeKind:a.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:T,isRoutePPREnabled:!1,isOnDemandRevalidate:j,revalidateOnlyGenerated:P,responseGenerator:l,waitUntil:s.waitUntil,isMinimalMode:o});if(!q)return null;if((null==d||null==(n=d.value)?void 0:n.kind)!==R.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==d||null==(c=d.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});o||t.setHeader("x-nextjs-cache",j?"REVALIDATED":d.isMiss?"MISS":d.isStale?"STALE":"HIT"),b&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let p=(0,_.fromNodeOutgoingHttpHeaders)(d.value.headers);return o&&q||p.delete(v.NEXT_CACHE_TAGS_HEADER),!d.cacheControl||t.getHeader("Cache-Control")||p.get("Cache-Control")||p.set("Cache-Control",(0,h.getCacheControlHeader)(d.cacheControl)),await (0,m.sendResponse)(V,K,new Response(d.value.body,{headers:p,status:d.value.status||200})),null};L?await c(L):await F.withPropagatedContext(e.headers,()=>F.trace(p.BaseServerSpan.handleRequest,{spanName:`${$} ${C}`,kind:n.SpanKind.SERVER,attributes:{"http.method":$,"http.target":e.url}},c))}catch(t){if(t instanceof g.NoFallbackError||await y.onRequestError(e,t,{routerKind:"App Router",routePath:I,routeType:"route",revalidateReason:(0,u.getRevalidateReason)({isStaticGeneration:D,isOnDemandRevalidate:j})}),q)throw t;return await (0,m.sendResponse)(V,K,new Response(null,{status:500})),null}}e.s(["handler",()=>j,"patchFetch",()=>A,"routeModule",()=>y,"serverHooks",()=>T,"workAsyncStorage",()=>E,"workUnitAsyncStorage",()=>b],160626)},234177,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_node:inspector_7a4283c6._.js"].map(t=>e.l(t))).then(()=>t(237221)))},171374,e=>{e.v(t=>Promise.all(["server/chunks/a9bf9_@opentelemetry_resources_build_esm_detectors_platform_node_machine-id_5fd8c034._.js"].map(t=>e.l(t))).then(()=>t(993759)))},556544,e=>{e.v(t=>Promise.all(["server/chunks/0bf35_build_esm_detectors_platform_node_machine-id_getMachineId-linux_6b4e949a.js"].map(t=>e.l(t))).then(()=>t(231934)))},247753,e=>{e.v(t=>Promise.all(["server/chunks/a9bf9_@opentelemetry_resources_build_esm_detectors_platform_node_machine-id_559309af._.js"].map(t=>e.l(t))).then(()=>t(380191)))},110998,e=>{e.v(t=>Promise.all(["server/chunks/a9bf9_@opentelemetry_resources_build_esm_detectors_platform_node_machine-id_3c882e41._.js"].map(t=>e.l(t))).then(()=>t(403191)))},748044,e=>{e.v(t=>Promise.all(["server/chunks/0bf35_build_esm_detectors_platform_node_machine-id_getMachineId-unsupported_c81aba5d.js"].map(t=>e.l(t))).then(()=>t(404141)))}];

//# debugId=72e6aa93-9e91-6904-737b-b2b6f307e2db
//# sourceMappingURL=%5Broot-of-the-server%5D__82b0a326._.js.map