;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="087e5624-1915-979e-7429-38ccc7794038")}catch(e){}}();
module.exports=[305856,a=>{"use strict";var b=a.i(187924),c=a.i(50944),d=a.i(718402);a.i(525985);var e=a.i(376978),f=a.i(138340),g=a.i(247290),h=a.i(688294),i=a.i(397225),j=a.i(394761),k=a.i(727348),l=a.i(173029);function m(){let a=(0,c.useRouter)(),{data:m}=(0,d.useSession)(),{condensed:n,setCondensed:o}=(0,l.useSidebar)(),p=m?.user?.name||"Admin",q=m?.user?.email||"admin@mukuru.com";return p.split(" ")[0]?.toLowerCase(),(0,b.jsx)(g.Box,{position:"fixed",top:"0",left:n?"72px":"280px",right:"0",height:"90px",bg:"white",zIndex:"999",px:"6",py:"4",pl:"6",transition:"left 0.3s ease, width 0.3s ease",className:"portal-header",borderBottom:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",children:(0,b.jsxs)(i.Flex,{justify:"space-between",align:"center",width:"full",height:"full",children:[(0,b.jsx)(h.HStack,{gap:"4",align:"center",children:(0,b.jsx)(j.Button,{variant:"ghost",onClick:()=>o(!n),p:"2",borderRadius:"full",minW:"40px",h:"40px",bg:"gray.100",_hover:{bg:"gray.200"},"aria-label":"Toggle sidebar",border:"none",_focus:{boxShadow:"none",outline:"none"},_active:{bg:"gray.200"},children:(0,b.jsx)(f.IconWrapper,{children:(0,b.jsx)(k.FiArrowLeft,{size:20,color:"#F05423"})})})}),(0,b.jsx)(h.HStack,{gap:"4",align:"center",children:(0,b.jsx)(e.ProfileMenu,{user:p,menuItems:[{id:0,label:q,value:"email"},{id:1,label:"My Profile",value:"profile",onSelect:()=>a.push("/profile")},{id:2,label:"Settings",value:"settings",onSelect:()=>a.push("/settings")},{id:3,label:"Log Out",value:"logout",onSelect:()=>a.push("/api/auth/logout")}]})})]})})}a.s(["default",()=>m])},556704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},909270,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.AppRouterContext},736313,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.HooksClientContext},818341,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.ServerInsertedHtml},992539,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944);a.i(525985);var e=a.i(862760),f=a.i(676851),g=a.i(508010),h=a.i(201526),i=a.i(438452),j=a.i(327382),k=a.i(535895),l=a.i(804871),m=a.i(585425),n=a.i(883970),o=a.i(247290),p=a.i(173029);function q(){let a=(0,d.usePathname)(),q=(0,d.useRouter)(),{condensed:r,setCondensed:s}=(0,p.useSidebar)(),[t,u]=(0,c.useState)("dashboard");(0,c.useEffect)(()=>{"/dashboard"===a?u("dashboard"):a?.startsWith("/work-queue")?u("work-queue"):a?.startsWith("/applications")?u("applications"):a?.startsWith("/review")||a?.startsWith("/risk-review")||a?.startsWith("/approvals")?u("reviews"):a?.startsWith("/documents")?u("documents"):a?.startsWith("/requirements")?u("requirements"):a?.startsWith("/entity-types")?u("entity-types"):a?.startsWith("/checklists")?u("checklists"):a?.startsWith("/wizard-configurations")?u("wizard-configurations"):a?.startsWith("/rules-and-permissions")?u("rules-and-permissions"):a?.startsWith("/audit-log")?u("audit-log"):a?.startsWith("/messages")?u("messages"):a?.startsWith("/notifications")?u("notifications"):a?.startsWith("/data-migration")?u("data-migration"):a?.startsWith("/refreshes")?u("refreshes"):a?.startsWith("/reports")?u("reports"):a?.startsWith("/profile")?u("profile"):a?.startsWith("/settings")&&u("settings")},[a]);let v=(0,c.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,b.jsx)(f.ProductIcon,{width:"20",height:"20"}),onClick:()=>{u("dashboard"),q.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,b.jsx)(m.FilterIcon,{width:"20",height:"20"}),onClick:()=>{u("work-queue"),q.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,b.jsx)(k.AppIcon,{width:"20",height:"20"}),onClick:()=>{u("applications"),q.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,b.jsx)(h.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{u("reviews"),q.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{u("reviews"),q.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{u("reviews"),q.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,b.jsx)(l.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{u("documents"),q.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,b.jsx)(i.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{u("configuration"),q.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{u("configuration"),q.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{u("configuration"),q.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{u("configuration"),q.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{u("configuration"),q.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{u("configuration"),q.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,b.jsx)(n.WarningIcon,{width:"20",height:"20"}),onClick:()=>{u("system"),q.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{u("system"),q.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{u("system"),q.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{u("system"),q.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{u("system"),q.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{u("system"),q.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,b.jsx)(h.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{u("reports"),q.push("/reports")}},{id:"profile",label:"Profile",icon:(0,b.jsx)(g.UserIcon,{width:"20",height:"20"}),onClick:()=>{u("profile"),q.push("/profile")}}],[q]),w={id:"help-centre",label:"Help Centre",icon:(0,b.jsx)(j.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,b.jsx)(o.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:r?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,b.jsx)(e.PortalNavigationSidebar,{navigationItems:v,helpCentreItem:w,activeItemId:t,condensed:r,onToggleCollapse:s,onLogoClick:()=>{u("dashboard"),q.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}a.s(["default",()=>q])},566701,a=>{"use strict";let{withContext:b,PropsProvider:c}=(0,a.i(472292).createRecipeContext)({key:"container"}),d=b("div");a.s(["Container",()=>d])},154462,a=>{"use strict";var b=a.i(226934);let{withContext:c,PropsProvider:d}=(0,a.i(472292).createRecipeContext)({key:"textarea"}),e=c(b.Field.Textarea);a.s(["Textarea",()=>e])},255145,a=>{"use strict";var b=a.i(865524);let c=new class{isDevelopment=!1;isProduction=!0;debug(a,...b){this.isDevelopment&&console.debug(`[DEBUG] ${a}`,...b)}info(a,...c){this.isDevelopment&&console.info(`[INFO] ${a}`,...c),this.isProduction&&(0,b.addBreadcrumb)(a,"info","info",{args:c})}warn(a,c){console.warn(`[WARN] ${a}`),this.isProduction&&(0,b.reportWarning)(a,{tags:c?.tags,extra:c?.extra})}error(a,c,d){let e=c||(a instanceof Error?a.message:String(a));console.error(`[ERROR] ${e}`,a);let f=d?.level==="warn"?"warning":d?.level==="error"?"error":d?.level==="info"?"info":"error";(0,b.reportError)(a,{tags:d?.tags,extra:d?.extra,level:f})}log(a,c,d="info"){if(this.isDevelopment&&console.log(`[${d.toUpperCase()}] ${a}`,c||""),this.isProduction&&"debug"!==d){let e="warn"===d?"warning":"error"===d?"error":"info";(0,b.addBreadcrumb)(a,"log",e,c)}}};a.s(["logger",0,c])},495964,a=>{"use strict";var b=a.i(718402);let c=process.env.CHECKLIST_API_BASE_URL||process.env.NEXT_PUBLIC_CHECKLIST_API_BASE_URL||"http://127.0.0.1:8086",d=new class{async getAuthHeaders(){let a=await (0,b.getSession)(),c={"Content-Type":"application/json"};return a?.user?.email&&(c["X-User-Email"]=a.user.email),a?.user?.name&&(c["X-User-Name"]=a.user.name),a?.user?.role&&(c["X-User-Role"]=a.user.role),c}async request(a,b){let c=await this.getAuthHeaders();try{let d=new Promise((a,b)=>{setTimeout(()=>b(Error("Request timeout")),15e3)}),e=fetch(a,{...b,headers:{...c,...b?.headers}}),f=await Promise.race([e,d]);if(!f.ok){let a=await f.text(),b=`Checklist API request failed: ${f.status} ${f.statusText}`;try{let c=JSON.parse(a);c.message?b=c.message:c.error&&(b=c.error)}catch{a&&a.trim().length>0&&(b=a.length>200?a.substring(0,200)+"...":a)}throw Error(b)}if(204===f.status)return null;return f.json()}catch(a){if(a instanceof TypeError||a instanceof Error&&a.message.includes("timeout"))throw Error("Unable to connect to Checklist service. Please ensure the service is running.");throw a}}mapChecklistDto(a){let b=a.caseId||a.case_id||"",c=a.createdAt||a.created_at||new Date().toISOString(),d=a.completedAt||a.completed_at,e=a.type||"";console.log("[ChecklistApi] Mapping DTO:",{id:a.id,caseId:b,type:e,rawCaseId:a.caseId,rawCase_id:a.case_id});let f=this.extractEntityType(e,b);console.log("[ChecklistApi] Extracted entity type:",f,"from caseId:",b,"type:",e);let g=`${f} Checklist`,h=`Checklist for ${f.toLowerCase()} onboarding`,i=(a.items||[]).map(a=>({id:a.id,description:a.description||a.name,isRequired:a.isRequired,category:a.category,order:a.order,guidelines:a.notes||void 0})),j=d||c;try{let a=new Date(j);j=isNaN(a.getTime())?new Date().toISOString():a.toISOString()}catch{j=new Date().toISOString()}return{id:a.id,name:g,entityType:f,description:h,items:i,lastUpdated:j,isActive:"Completed"!==a.status&&"Cancelled"!==a.status,version:this.calculateVersion(c),createdBy:"System"}}extractEntityType(a,b){if(b&&b.trim()){let a=b.toUpperCase().trim();if(console.log("[extractEntityType] Checking case ID:",b,"->",a),a.includes("CASE-NPO")||a.includes("-NPO-"))return console.log("[extractEntityType] Matched NPO from case ID"),"NPO";if(a.includes("CASE-GOV")||a.includes("-GOV-"))return console.log("[extractEntityType] Matched Government from case ID"),"Government";if(a.includes("CASE-PUBLIC")||a.includes("-PUBLIC-"))return console.log("[extractEntityType] Matched Publicly Listed from case ID"),"Publicly Listed";if(a.includes("CASE-PRIVATE")||a.includes("-PRIVATE-"))return console.log("[extractEntityType] Matched Private Company from case ID"),"Private Company";if(a.includes("NPO")&&!a.includes("NONPROFIT")&&!a.includes("PRIVATE"))return console.log("[extractEntityType] Matched NPO from substring"),"NPO";if(a.includes("GOV")&&!a.includes("PRIVATE"))return console.log("[extractEntityType] Matched Government from substring"),"Government";if(a.includes("PUBLIC")&&!a.includes("PRIVATE"))return console.log("[extractEntityType] Matched Publicly Listed from substring"),"Publicly Listed";if(a.includes("PRIVATE"))return console.log("[extractEntityType] Matched Private Company from substring"),"Private Company";console.warn("[extractEntityType] No match found for case ID:",b)}let c=(a||"").toUpperCase().trim();return(console.log("[extractEntityType] Falling back to type:",a,"->",c),c.includes("PRIVATE")||c.includes("COMPANY")&&!c.includes("PUBLIC"))?"Private Company":c.includes("NPO")||c.includes("NONPROFIT")?"NPO":c.includes("GOVERNMENT")||c.includes("GOV")?"Government":c.includes("PUBLICLY")||c.includes("LISTED")||c.includes("PUBLIC")&&c.includes("COMPANY")?"Publicly Listed":(c.includes("CORPORATE")?console.warn("[extractEntityType] Corporate type found, defaulting to Private Company"):console.warn("[extractEntityType] No match found, defaulting to Private Company"),"Private Company")}calculateVersion(a){try{let b=new Date(a);if(isNaN(b.getTime()))return"1.0";let c=Math.floor(b.getTime()/864e5),d=Math.floor(c/1e3)+1;return`${d}.${(c%100/10).toFixed(1)}`}catch{return"1.0"}}transformBackendDto(a){return{id:a.id||a.Id,caseId:a.caseId||a.case_id||a.CaseId,case_id:a.case_id||a.caseId,type:a.type||a.Type,status:a.status||a.Status,partnerId:a.partnerId||a.partner_id||a.PartnerId,partner_id:a.partner_id||a.partnerId,createdAt:a.createdAt||a.created_at||a.CreatedAt,created_at:a.created_at||a.createdAt,completedAt:a.completedAt||a.completed_at||a.CompletedAt,completed_at:a.completed_at||a.completedAt,completionPercentage:a.completionPercentage||a.completion_percentage||a.CompletionPercentage||0,completion_percentage:a.completion_percentage||a.completionPercentage,requiredCompletionPercentage:a.requiredCompletionPercentage||a.required_completion_percentage||a.RequiredCompletionPercentage||0,required_completion_percentage:a.required_completion_percentage||a.requiredCompletionPercentage,items:(a.items||[]).map(a=>({id:a.id||a.Id,name:a.name||a.Name,description:a.description||a.Description,category:a.category||a.Category,isRequired:void 0!==a.isRequired?a.isRequired:void 0!==a.is_required&&a.is_required,order:a.order||a.Order||0,status:a.status||a.Status,createdAt:a.createdAt||a.created_at||a.CreatedAt,completedAt:a.completedAt||a.completed_at||a.CompletedAt,completedBy:a.completedBy||a.completed_by||a.CompletedBy,notes:a.notes||a.Notes,skipReason:a.skipReason||a.skip_reason||a.SkipReason}))}}async getAllChecklists(){let a=`${c}/api/checklist/checklists`;try{let b=await this.request(a);if(console.log("[ChecklistApi] getAllChecklists - Raw response:",b),!b||!Array.isArray(b))return console.log("[ChecklistApi] No response or not an array"),[];let c=b.map(a=>{let b=this.transformBackendDto(a);console.log("[ChecklistApi] Transformed DTO:",{raw:a,transformed:b});let c=this.mapChecklistDto(b);return console.log("[ChecklistApi] Mapped checklist:",{originalCaseId:b.caseId||b.case_id,originalType:b.type,mappedEntityType:c.entityType,mappedName:c.name}),c});return console.log("[ChecklistApi] Final mapped checklists:",c),c}catch(a){if(a instanceof Error&&(a.message.includes("404")||a.message.includes("500")))return console.warn("No checklists found or service error:",a.message),[];throw a}}async getChecklistById(a){let b=`${c}/api/checklist/checklists/${a}`;try{let a=await this.request(b);return this.mapChecklistDto(a)}catch(a){if(a instanceof Error&&a.message.includes("404"))return null;throw a}}async getChecklistByCase(a){let b=`${c}/api/checklist/checklists/case/${encodeURIComponent(a)}`;try{let a=await this.request(b);return this.mapChecklistDto(a)}catch(a){if(a instanceof Error&&a.message.includes("404"))return null;throw a}}};a.s(["checklistApiService",0,d])}];

//# debugId=087e5624-1915-979e-7429-38ccc7794038
//# sourceMappingURL=%5Broot-of-the-server%5D__df0627ee._.js.map