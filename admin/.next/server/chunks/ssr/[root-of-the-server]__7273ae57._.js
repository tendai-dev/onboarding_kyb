;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a849cc2b-0488-c3bf-d89e-ca54982bc43a")}catch(e){}}();
module.exports=[556704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},909270,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.AppRouterContext},736313,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.HooksClientContext},818341,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.ServerInsertedHtml},738783,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored["react-ssr"].ReactServerDOMTurbopackClient},25065,a=>{"use strict";let b=process.env.NEXT_PUBLIC_ENTITY_CONFIG_API_BASE_URL||"http://localhost:8001",c=new class{async getAuthHeaders(){return{"Content-Type":"application/json"}}async request(a,c){let d;d=`${b}/api/v1`;let e=`${d}${a}`,f=await this.getAuthHeaders();try{let a=new Promise((a,b)=>{setTimeout(()=>b(Error("Request timeout")),1e4)}),b=fetch(e,{...c,headers:{...f,...c?.headers}}),d=await Promise.race([b,a]);if(!d.ok){let a=await d.text(),b=`Entity Config API request failed: ${d.status} ${d.statusText}`;try{let c=JSON.parse(a);c.message?b=c.message:c.error&&(b=c.error)}catch{a&&a.trim().length>0&&(b=a.length>200?a.substring(0,200)+"...":a)}throw Error(b)}if(204===d.status)return null;return d.json()}catch(a){if(a instanceof TypeError||a instanceof Error&&a.message.includes("timeout"))throw Error("Unable to connect to Entity Configuration service");throw a}}async getEntityTypes(a=!1,b=!0){let c=new URLSearchParams;a&&c.append("includeInactive","true"),b&&c.append("includeRequirements","true");let d=c.toString();return(await this.request(`/entity-types${d?`?${d}`:""}`)).map(a=>{let b=a.requirements||a.Requirements||[];return Array.isArray(b)&&b.length>0&&(b=b.map(a=>({id:a.id||a.Id,requirementId:a.requirementId||a.RequirementId||a.requirement_id,isRequired:void 0!==a.isRequired?a.isRequired:void 0!==a.IsRequired?a.IsRequired:void 0!==a.is_required&&a.is_required,displayOrder:a.displayOrder||a.DisplayOrder||a.display_order||0,requirement:a.requirement||a.Requirement}))),{id:a.id||a.Id,code:a.code||a.Code,displayName:a.displayName||a.DisplayName||a.display_name||a.code||"Unnamed",description:a.description||a.Description||a.description||"",icon:a.icon||a.Icon,isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active,createdAt:a.createdAt||a.CreatedAt||a.created_at||"",updatedAt:a.updatedAt||a.UpdatedAt||a.updated_at||"",requirements:b}})}async getEntityType(a,b=!0){let c=b?`/entity-types/${a}?includeRequirements=true`:`/entity-types/${a}`;return this.request(c)}async getEntityTypeByCode(a,b=!0){let c=a.trim();console.log("[EntityConfigAPI] Fetching entity type by code (as-is from application):",c);try{let a=await this.request(`/entity-types/by-code/${encodeURIComponent(c)}`);return console.log("[EntityConfigAPI] âœ… Successfully fetched entity type:",a?.code),a}catch(a){return null}}async createEntityType(a){return this.request("/entity-types",{method:"POST",body:JSON.stringify(a)})}async updateEntityType(a,b){return this.request(`/entity-types/${a}`,{method:"PUT",body:JSON.stringify(b)})}async deleteEntityType(a){return this.request(`/entity-types/${a}`,{method:"DELETE"})}async getRequirements(a=!1){return(await this.request(`/requirements${a?"?includeInactive=true":""}`)).map(a=>({id:a.id||a.Id,code:a.code||a.Code,displayName:a.displayName||a.DisplayName||a.display_name||a.code||"Unnamed",description:a.description||a.Description||a.description||"",type:a.type||a.Type||a.type||"",fieldType:a.fieldType||a.FieldType||a.field_type||"",validationRules:a.validationRules||a.ValidationRules||a.validation_rules,helpText:a.helpText||a.HelpText||a.help_text,isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active,createdAt:a.createdAt||a.CreatedAt||a.created_at||"",updatedAt:a.updatedAt||a.UpdatedAt||a.updated_at||"",options:a.options||a.Options||[]}))}async getRequirement(a){return this.request(`/requirements/${a}`)}async createRequirement(a){return this.request("/requirements",{method:"POST",body:JSON.stringify(a)})}async updateRequirement(a,b){return this.request(`/requirements/${a}`,{method:"PUT",body:JSON.stringify(b)})}async deleteRequirement(a){return this.request(`/requirements/${a}`,{method:"DELETE"})}async getRequirementsMetadata(){return this.request("/requirements/metadata")}async getRequirementOptions(a){return this.request(`/requirements/${a}/options`)}async addRequirementOption(a,b){return this.request(`/requirements/${a}/options`,{method:"POST",body:JSON.stringify(b)})}async updateRequirementOption(a,b,c){return this.request(`/requirements/${a}/options/${b}`,{method:"PUT",body:JSON.stringify(c)})}async deleteRequirementOption(a,b){return this.request(`/requirements/${a}/options/${b}`,{method:"DELETE"})}async addRequirementToEntityType(a,b){return this.request(`/entity-types/${a}/requirements`,{method:"POST",body:JSON.stringify(b)})}async removeRequirementFromEntityType(a,b){return this.request(`/entity-types/${a}/requirements/${b}`,{method:"DELETE"})}async getWizardConfigurations(a=!1){return(await this.request(`/wizardconfigurations${a?"?includeInactive=true":""}`)).map(a=>({id:a.id,entityTypeId:a.entity_type_id||a.entityTypeId,entityTypeDisplayName:a.entity_type_display_name||a.entityTypeDisplayName,isActive:void 0!==a.is_active?a.is_active:a.isActive,createdAt:a.created_at||a.createdAt,updatedAt:a.updated_at||a.updatedAt,steps:(a.steps||[]).map(a=>({id:a.id,title:a.title,subtitle:a.subtitle,requirementTypes:a.requirement_types||a.requirementTypes||[],checklistCategory:a.checklist_category||a.checklistCategory||"",stepNumber:a.step_number||a.stepNumber||0,isActive:void 0!==a.is_active?a.is_active:a.isActive}))}))}async getWizardConfiguration(a){let b=await this.request(`/wizardconfigurations/${a}`);return{id:b.id,entityTypeId:b.entity_type_id||b.entityTypeId,entityTypeDisplayName:b.entity_type_display_name||b.entityTypeDisplayName,isActive:void 0!==b.is_active?b.is_active:b.isActive,createdAt:b.created_at||b.createdAt,updatedAt:b.updated_at||b.updatedAt,steps:(b.steps||[]).map(a=>({id:a.id,title:a.title,subtitle:a.subtitle,requirementTypes:a.requirement_types||a.requirementTypes||[],checklistCategory:a.checklist_category||a.checklistCategory||"",stepNumber:a.step_number||a.stepNumber||0,isActive:void 0!==a.is_active?a.is_active:a.isActive}))}}async getWizardConfigurationByEntityType(a){try{return this.request(`/wizardconfigurations/by-entity-type/${a}`)}catch(a){return null}}async createWizardConfiguration(a){return this.request("/wizardconfigurations",{method:"POST",body:JSON.stringify(a)})}async updateWizardConfiguration(a,b){return this.request(`/wizardconfigurations/${a}`,{method:"PUT",body:JSON.stringify(b)})}async deleteWizardConfiguration(a){return this.request(`/wizardconfigurations/${a}`,{method:"DELETE"})}};a.s(["FieldType",0,{Text:"Text",Email:"Email",Phone:"Phone",Number:"Number",Date:"Date",Select:"Select",MultiSelect:"MultiSelect",Radio:"Radio",Checkbox:"Checkbox",Textarea:"Textarea",File:"File",Country:"Country",Currency:"Currency",Address:"Address"},"RequirementType",0,{Information:1,Document:2,ProofOfIdentity:3,ProofOfAddress:4,OwnershipStructure:5,BoardDirectors:6,AuthorizedSignatories:7},"entityConfigApiService",0,c])},992539,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944);a.i(525985);var e=a.i(862760),f=a.i(676851),g=a.i(508010),h=a.i(201526),i=a.i(438452),j=a.i(327382),k=a.i(535895),l=a.i(804871),m=a.i(585425),n=a.i(883970),o=a.i(247290),p=a.i(173029);function q(){let a=(0,d.usePathname)(),q=(0,d.useRouter)(),{condensed:r,setCondensed:s}=(0,p.useSidebar)(),[t,u]=(0,c.useState)("dashboard");(0,c.useEffect)(()=>{"/dashboard"===a?u("dashboard"):a?.startsWith("/work-queue")?u("work-queue"):a?.startsWith("/applications")?u("applications"):a?.startsWith("/review")||a?.startsWith("/risk-review")||a?.startsWith("/approvals")?u("reviews"):a?.startsWith("/documents")?u("documents"):a?.startsWith("/requirements")?u("requirements"):a?.startsWith("/entity-types")?u("entity-types"):a?.startsWith("/checklists")?u("checklists"):a?.startsWith("/wizard-configurations")?u("wizard-configurations"):a?.startsWith("/rules-and-permissions")?u("rules-and-permissions"):a?.startsWith("/audit-log")?u("audit-log"):a?.startsWith("/messages")?u("messages"):a?.startsWith("/notifications")?u("notifications"):a?.startsWith("/data-migration")?u("data-migration"):a?.startsWith("/refreshes")?u("refreshes"):a?.startsWith("/reports")?u("reports"):a?.startsWith("/profile")?u("profile"):a?.startsWith("/settings")&&u("settings")},[a]);let v=(0,c.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,b.jsx)(f.ProductIcon,{width:"20",height:"20"}),onClick:()=>{u("dashboard"),q.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,b.jsx)(m.FilterIcon,{width:"20",height:"20"}),onClick:()=>{u("work-queue"),q.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,b.jsx)(k.AppIcon,{width:"20",height:"20"}),onClick:()=>{u("applications"),q.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,b.jsx)(h.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{u("reviews"),q.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{u("reviews"),q.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{u("reviews"),q.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,b.jsx)(l.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{u("documents"),q.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,b.jsx)(i.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{u("configuration"),q.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{u("configuration"),q.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{u("configuration"),q.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{u("configuration"),q.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{u("configuration"),q.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{u("configuration"),q.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,b.jsx)(n.WarningIcon,{width:"20",height:"20"}),onClick:()=>{u("system"),q.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{u("system"),q.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{u("system"),q.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{u("system"),q.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{u("system"),q.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{u("system"),q.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,b.jsx)(h.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{u("reports"),q.push("/reports")}},{id:"profile",label:"Profile",icon:(0,b.jsx)(g.UserIcon,{width:"20",height:"20"}),onClick:()=>{u("profile"),q.push("/profile")}}],[q]),w={id:"help-centre",label:"Help Centre",icon:(0,b.jsx)(j.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,b.jsx)(o.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:r?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,b.jsx)(e.PortalNavigationSidebar,{navigationItems:v,helpCentreItem:w,activeItemId:t,condensed:r,onToggleCollapse:s,onLogoClick:()=>{u("dashboard"),q.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}a.s(["default",()=>q])},566701,a=>{"use strict";let{withContext:b,PropsProvider:c}=(0,a.i(472292).createRecipeContext)({key:"container"}),d=b("div");a.s(["Container",()=>d])},332938,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(644246),e=a.i(276699),f=a.i(912939);let g=(0,c.forwardRef)(function(a,c){var g,h,i;let{columns:j,minChildWidth:k,...l}=a,m=(0,d.useChakraContext)(),n=k?(g=k,h=m,(0,e.mapObject)(g,a=>{let b=h.tokens.getVar(`sizes.${a}`,"number"==typeof a?`${a}px`:a);return null===a?null:`repeat(auto-fit, minmax(${b}, 1fr))`})):(i=j,(0,e.mapObject)(i,a=>null===a?null:`repeat(${a}, minmax(0, 1fr))`));return(0,b.jsx)(f.Grid,{ref:c,templateColumns:n,...l})});a.s(["SimpleGrid",()=>g])},154462,a=>{"use strict";var b=a.i(226934);let{withContext:c,PropsProvider:d}=(0,a.i(472292).createRecipeContext)({key:"textarea"}),e=c(b.Field.Textarea);a.s(["Textarea",()=>e])},922757,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(687556),e=a.i(477656);let f=(0,c.forwardRef)(function(a,c){let{align:f,fit:g="cover",...h}=a;return(0,b.jsx)(d.chakra.img,{ref:c,objectFit:g,objectPosition:f,className:(0,e.cx)("chakra-image",a.className),...h})});a.s(["Image",()=>f])},968653,a=>{"use strict";var b=a.i(718402);let c=process.env.RISK_API_BASE_URL||"http://localhost:8000",d=new class{async getAuthHeaders(){let a=await (0,b.getSession)(),c={"Content-Type":"application/json"};return a?.user?.email&&(c["X-User-Email"]=a.user.email),a?.user?.name&&(c["X-User-Name"]=a.user.name),a?.user?.role&&(c["X-User-Role"]=a.user.role),c}async request(a,b){let c=await this.getAuthHeaders();try{let d=new Promise((a,b)=>{setTimeout(()=>b(Error("Request timeout")),15e3)}),e=fetch(a,{...b,headers:{...c,...b?.headers}}),f=await Promise.race([e,d]);if(!f.ok){let a=await f.text(),b=`Risk API request failed: ${f.status} ${f.statusText}`;try{let c=JSON.parse(a);c.message?b=c.message:c.error&&(b=c.error)}catch{a&&a.trim().length>0&&(b=a.length>200?a.substring(0,200)+"...":a)}throw Error(b)}if(204===f.status)return null;return f.json()}catch(a){if(a instanceof TypeError||a instanceof Error&&a.message.includes("timeout"))throw Error("Unable to connect to Risk service. Please ensure the service is running.");throw a}}async getCaseDetails(a){try{let b=await this.getAuthHeaders(),c=`http://127.0.0.1:8007/api/v1/cases/${encodeURIComponent(a)}`,d=await fetch(c,{headers:b});if(!d.ok){if(404===d.status)return null;throw Error(`Failed to fetch case details: ${d.statusText}`)}return d.json()}catch(b){return console.warn(`Failed to fetch case details for ${a}:`,b),null}}mapRiskLevel(a,b){let c=a.toUpperCase();return"UNKNOWN"!==c&&a&&""!==a.trim()?"LOW"===c||"MEDIUMLOW"===c?"LOW":"MEDIUM"===c||"MEDIUMHIGH"===c?"MEDIUM":"HIGH"===c?void 0!==b&&b>=90?"CRITICAL":"HIGH":"CRITICAL"===c?"CRITICAL":"UNKNOWN":"UNKNOWN"}mapRiskLevelToBackend(a){let b=a.toUpperCase();return"UNKNOWN"===b?"Unknown":"LOW"===b?"Low":"MEDIUM"===b?"Medium":"HIGH"===b||"CRITICAL"===b?"High":"Unknown"}mapStatus(a){let b=a.toUpperCase();return"INPROGRESS"===b||"REQUIRESREVIEW"===b?"IN_REVIEW":"COMPLETED"===b?"APPROVED":"REJECTED"===b?"REJECTED":"PENDING"}getEntityTypeDisplay(a){if(!a)return"Unknown";if(a.metadataJson)try{let b=JSON.parse(a.metadataJson);if(b.entityType)return b.entityType}catch{}return a.type||"Unknown"}getCompanyName(a){return a?a.businessLegalName?a.businessLegalName:a.applicantFirstName||a.applicantLastName?`${a.applicantFirstName||""} ${a.applicantLastName||""}`.trim()||"Individual Applicant":"Unknown Company":"Unknown Company"}async listRiskAssessments(a){let b=new URLSearchParams;a?.partnerId&&b.append("partnerId",a.partnerId),a?.riskLevel&&b.append("riskLevel",a.riskLevel),a?.status&&b.append("status",a.status),a?.caseId&&b.append("caseId",a.caseId);let d=b.toString(),e=`${c}/api/risk/risk-assessments${d?`?${d}`:""}`,f=await this.request(e);return await Promise.all(f.map(async a=>{let b=await this.getCaseDetails(a.caseId),c=Number(a.riskScore);return{id:a.id,applicationId:a.caseId,caseId:a.caseId,companyName:this.getCompanyName(b),entityType:this.getEntityTypeDisplay(b),riskLevel:this.mapRiskLevel(a.overallRiskLevel,c),riskScore:c,status:this.mapStatus(a.status),assignedTo:b?.assignedToName||b?.assignedTo||"Unassigned",submittedDate:b?.submittedAt||a.createdAt,reviewDate:a.completedAt,reviewer:a.assessedBy,riskFactors:a.factors.map(a=>a.description),recommendations:a.notes?[a.notes]:[]}}))}async getRiskAssessment(a){let b=`${c}/api/risk/risk-assessments/${a}`,d=await this.request(b);if(!d)return null;let e=await this.getCaseDetails(d.caseId),f=Number(d.riskScore);return{id:d.id,applicationId:d.caseId,caseId:d.caseId,companyName:this.getCompanyName(e),entityType:this.getEntityTypeDisplay(e),riskLevel:this.mapRiskLevel(d.overallRiskLevel,f),riskScore:f,status:this.mapStatus(d.status),assignedTo:e?.assignedToName||e?.assignedTo||"Unassigned",submittedDate:e?.submittedAt||d.createdAt,reviewDate:d.completedAt,reviewer:d.assessedBy,riskFactors:d.factors.map(a=>a.description),recommendations:d.notes?[d.notes]:[]}}async getRiskAssessmentByCase(a){let b=`${c}/api/risk/risk-assessments/case/${encodeURIComponent(a)}`,d=await this.request(b);if(!d)return null;let e=await this.getCaseDetails(d.caseId),f=Number(d.riskScore);return{id:d.id,applicationId:d.caseId,caseId:d.caseId,companyName:this.getCompanyName(e),entityType:this.getEntityTypeDisplay(e),riskLevel:this.mapRiskLevel(d.overallRiskLevel,f),riskScore:f,status:this.mapStatus(d.status),assignedTo:e?.assignedToName||e?.assignedTo||"Unassigned",submittedDate:e?.submittedAt||d.createdAt,reviewDate:d.completedAt,reviewer:d.assessedBy,riskFactors:d.factors.map(a=>a.description),recommendations:d.notes?[d.notes]:[]}}async setManualRiskLevel(a,b,d){let e=`${c}/api/risk/risk-assessments/${a}/set-risk-level`,f=this.mapRiskLevelToBackend(b);return this.request(e,{method:"POST",body:JSON.stringify({riskLevel:f,justification:d})})}async completeRiskAssessment(a,b){let d=`${c}/api/risk/risk-assessments/${a}/complete`;return this.request(d,{method:"POST",body:JSON.stringify({notes:b})})}async rejectRiskAssessment(a,b){let d=`${c}/api/risk/risk-assessments/${a}/reject`;return this.request(d,{method:"POST",body:JSON.stringify({reason:b})})}async createRiskAssessment(a,b){let d=`${c}/api/risk/risk-assessments`;return this.request(d,{method:"POST",body:JSON.stringify({caseId:a,partnerId:b})})}};a.s(["riskApiService",0,d])},476428,a=>{a.v(b=>Promise.all(["server/chunks/ssr/src_services_utils_csvExport_ts_5ff67e85._.js"].map(b=>a.l(b))).then(()=>b(872194)))},639567,a=>{a.v(a=>Promise.resolve().then(()=>a(292939)))}];

//# debugId=a849cc2b-0488-c3bf-d89e-ca54982bc43a
//# sourceMappingURL=%5Broot-of-the-server%5D__7273ae57._.js.map