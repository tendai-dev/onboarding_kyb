;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="49fe36f8-f874-ec85-6b4f-ee7f3d4d54a9")}catch(e){}}();
module.exports=[268552,a=>{"use strict";var b=a.i(187924),c=a.i(247290),d=a.i(566701),e=a.i(480916),f=a.i(688294),g=a.i(135758),h=a.i(397225),i=a.i(547203),j=a.i(15631),k=a.i(332938),l=a.i(635772);a.i(525985);var m=a.i(831551),n=a.i(492180),o=a.i(138340),p=a.i(652167),q=a.i(259580),r=a.i(727348),s=a.i(992539),t=a.i(572131),u=a.i(50944),v=a.i(25065);function w({params:a}){let w=(0,u.useRouter)(),{id:x}=(0,t.use)(a),[y,z]=(0,t.useState)({entityTypeId:"",isActive:!0}),[A,B]=(0,t.useState)([]),[C,D]=(0,t.useState)([]),[E,F]=(0,t.useState)(null),[G,H]=(0,t.useState)(null),[I,J]=(0,t.useState)(null),[K,L]=(0,t.useState)([]),[M,N]=(0,t.useState)(!0),[O,P]=(0,t.useState)(!1),[Q,R]=(0,t.useState)(null);(0,t.useEffect)(()=>{S()},[x]),(0,t.useEffect)(()=>{y.entityTypeId?T(y.entityTypeId):(J(null),L([]))},[y.entityTypeId]);let S=async()=>{try{N(!0),R(null);let[a,b,c]=await Promise.all([v.entityConfigApiService.getWizardConfiguration(x),v.entityConfigApiService.getEntityTypes(!1,!1),v.entityConfigApiService.getRequirementsMetadata()]);H(a),D(b),F(c),z({entityTypeId:a.entityTypeId,isActive:a.isActive});let d=[...a.steps].sort((a,b)=>a.stepNumber-b.stepNumber);B(d.map(a=>({title:a.title,subtitle:a.subtitle,requirementTypes:a.requirementTypes,requirementIds:[],checklistCategory:a.checklistCategory,stepNumber:a.stepNumber,isActive:a.isActive})))}catch(a){R(a instanceof Error?a.message:"Failed to load wizard configuration"),console.error("Error loading data:",a)}finally{N(!1)}},T=async a=>{try{let b=(await v.entityConfigApiService.getEntityTypes(!1,!0)).find(b=>b.id===a);if(b)if(J(b),b.requirements&&b.requirements.length>0){let a=b.requirements.map(a=>a.requirementId),c=(await v.entityConfigApiService.getRequirements(!1)).filter(b=>a.includes(b.id));L(c),B(a=>a.map(a=>{let b=c.filter(b=>a.requirementTypes.includes(b.type)).map(a=>a.id);return{...a,requirementIds:b}}))}else L([]);else J(null),L([])}catch(a){console.error("Error loading entity type requirements:",a),J(null),L([])}},U=(a,b)=>{B(c=>{let d=[...c],e="up"===b?a-1:a+1;return e<0||e>=d.length?c:([d[a],d[e]]=[d[e],d[a]],d.map((a,b)=>({...a,stepNumber:b+1})))})},V=(a,b,c)=>{B(d=>d.map((d,e)=>e===a?{...d,[b]:c}:d))},W=async()=>{if(R(null),0===A.length)return void R("Please add at least one step");for(let a=0;a<A.length;a++){let b=A[a];if(!b.title||!b.title.trim())return void R(`Step ${a+1}: Title is required`);if(!b.subtitle||!b.subtitle.trim())return void R(`Step ${a+1}: Subtitle is required`);if(0===b.requirementIds.length)return void R(`Step ${a+1}: Please select at least one requirement`)}try{P(!0),R(null),await v.entityConfigApiService.updateWizardConfiguration(x,{isActive:y.isActive,steps:A.map(a=>({title:a.title.trim(),subtitle:a.subtitle.trim(),requirementTypes:a.requirementTypes,checklistCategory:a.checklistCategory.trim()||"",stepNumber:a.stepNumber,isActive:a.isActive}))}),w.push("/wizard-configurations")}catch(b){let a="Failed to update wizard configuration";b instanceof Error||b?.message?a=b.message:"string"==typeof b&&(a=b),R(a),console.error("Error updating wizard configuration:",b),window.scrollTo({top:0,behavior:"smooth"})}finally{P(!1)}};if(M)return(0,b.jsxs)(h.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(s.default,{}),(0,b.jsx)(c.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsxs)(e.VStack,{gap:"4",children:[(0,b.jsx)(j.Spinner,{size:"xl",color:"orange.500"}),(0,b.jsx)(m.Typography,{color:"gray.700",fontWeight:"500",children:"Loading wizard configuration..."})]})})]});if(!G)return(0,b.jsxs)(h.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(s.default,{}),(0,b.jsx)(c.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsxs)(e.VStack,{gap:"4",children:[(0,b.jsx)(m.Typography,{color:"red.600",fontSize:"lg",children:"Wizard configuration not found"}),(0,b.jsx)(n.Button,{onClick:()=>w.push("/wizard-configurations"),children:"Back to Wizard Configurations"})]})})]});let X=["Basic Information","Business Details","Legal Documents","Financial Information","Ownership Structure","Compliance","Additional Documents"];return(0,b.jsxs)(h.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(s.default,{}),(0,b.jsxs)(c.Box,{flex:"1",ml:"280px",children:[(0,b.jsx)(c.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",py:"6",children:(0,b.jsx)(d.Container,{maxW:"6xl",children:(0,b.jsxs)(e.VStack,{align:"start",gap:"2",children:[(0,b.jsx)(m.Typography,{as:"h1",fontSize:"2xl",fontWeight:"bold",color:"gray.900",children:"Edit Wizard Configuration"}),(0,b.jsxs)(m.Typography,{color:"gray.700",fontSize:"sm",fontWeight:"500",children:["Update wizard configuration for ",G.entityTypeDisplayName||"Entity Type"]})]})})}),Q&&(0,b.jsx)(d.Container,{maxW:"6xl",py:"4",children:(0,b.jsx)(p.AlertBar,{status:"error",title:"Error!",description:Q})}),(0,b.jsx)(d.Container,{maxW:"6xl",py:"6",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"stretch",children:[(0,b.jsx)(c.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"gray.200",p:"5",children:(0,b.jsxs)(e.VStack,{align:"stretch",gap:"3",children:[(0,b.jsx)(m.Typography,{fontSize:"lg",fontWeight:"bold",color:"gray.900",children:"Basic Information"}),(0,b.jsxs)(i.Field.Root,{children:[(0,b.jsx)(i.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Entity Type"}),(0,b.jsx)("input",{type:"text",value:C.find(a=>a.id===y.entityTypeId)?.displayName||G?.entityTypeDisplayName||G?.entity_type_display_name||"Loading...",readOnly:!0,style:{width:"100%",backgroundColor:"#F3F4F6",border:"1px solid #D1D5DB",borderRadius:"6px",padding:"12px",fontSize:"14px",color:"#111827",fontWeight:"600",cursor:"not-allowed",outline:"none"}}),(0,b.jsx)(m.Typography,{fontSize:"xs",color:"gray.600",fontWeight:"500",children:"Entity type cannot be changed after creation"})]}),(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsx)(m.Typography,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Active (available for use)"}),(0,b.jsx)(n.Button,{onClick:()=>z(a=>({...a,isActive:!a.isActive})),variant:y.isActive?"primary":"secondary",size:"md",bg:y.isActive?"#22C55E":"white",border:y.isActive?"none":"1px solid",borderColor:y.isActive?"transparent":"gray.300",fontWeight:"600",_hover:y.isActive?{bg:"#16A34A"}:{bg:"gray.50"},children:(0,b.jsx)(m.Typography,{as:"span",color:y.isActive?"white":"gray.700",fontWeight:"600",children:y.isActive?"Active":"Inactive"})})]})]})}),(0,b.jsx)(c.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"gray.200",p:"5",children:(0,b.jsxs)(e.VStack,{align:"stretch",gap:"3",children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsx)(m.Typography,{fontSize:"lg",fontWeight:"bold",color:"gray.900",children:"Wizard Steps"}),(0,b.jsxs)(n.Button,{onClick:()=>{B(a=>[...a,{title:"",subtitle:"",requirementTypes:[],requirementIds:[],checklistCategory:"",stepNumber:a.length+1,isActive:!0}])},size:"sm",variant:"secondary",bg:"#FF6B35",fontWeight:"600",_hover:{bg:"#E55A2B"},children:[(0,b.jsx)(o.IconWrapper,{children:(0,b.jsx)(r.FiPlus,{size:16})}),(0,b.jsx)(m.Typography,{as:"span",color:"white",fontWeight:"600",children:"Add Step"})]})]}),A.map((a,d)=>{let h;return(0,b.jsx)(c.Box,{border:"1px",borderColor:"gray.200",borderRadius:"md",p:"4",bg:"gray.50",children:(0,b.jsxs)(e.VStack,{align:"stretch",gap:"3",children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsxs)(q.Tag,{variant:"info",style:{backgroundColor:"#3B82F6",color:"#FFFFFF",fontWeight:"600",padding:"4px 12px",fontSize:"12px"},children:["Step ",a.stepNumber]}),(0,b.jsxs)(f.HStack,{gap:"2",children:[(0,b.jsx)(n.Button,{size:"sm",variant:"ghost",onClick:()=>U(d,"up"),disabled:0===d,children:(0,b.jsx)(o.IconWrapper,{children:(0,b.jsx)(r.FiArrowUp,{size:16})})}),(0,b.jsx)(n.Button,{size:"sm",variant:"ghost",onClick:()=>U(d,"down"),disabled:d===A.length-1,children:(0,b.jsx)(o.IconWrapper,{children:(0,b.jsx)(r.FiArrowDown,{size:16})})}),A.length>1&&(0,b.jsx)(n.Button,{size:"sm",variant:"ghost",onClick:()=>{B(a=>a.filter((a,b)=>b!==d).map((a,b)=>({...a,stepNumber:b+1})))},children:(0,b.jsx)(o.IconWrapper,{children:(0,b.jsx)(r.FiTrash2,{size:16})})})]})]}),(0,b.jsxs)(k.SimpleGrid,{columns:2,gap:"3",children:[(0,b.jsxs)(i.Field.Root,{children:[(0,b.jsx)(i.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Title *"}),(0,b.jsx)(g.Input,{value:a.title,onChange:a=>V(d,"title",a.target.value),placeholder:"e.g., Business Information",bg:"white",borderColor:"gray.300",borderWidth:"1px",borderRadius:"md",py:"3",px:"3",fontSize:"sm",color:"gray.900",fontWeight:"500",_focus:{borderColor:"orange.500",boxShadow:"0 0 0 1px #FF6B35"},_placeholder:{color:"gray.400"},required:!0})]}),(0,b.jsxs)(i.Field.Root,{children:[(0,b.jsx)(i.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Subtitle *"}),(0,b.jsx)(g.Input,{value:a.subtitle,onChange:a=>V(d,"subtitle",a.target.value),placeholder:"e.g., Enter your business details",bg:"white",borderColor:"gray.300",borderWidth:"1px",borderRadius:"md",py:"3",px:"3",fontSize:"sm",color:"gray.900",fontWeight:"500",_focus:{borderColor:"orange.500",boxShadow:"0 0 0 1px #FF6B35"},_placeholder:{color:"gray.400"},required:!0})]})]}),(0,b.jsxs)(i.Field.Root,{children:[(0,b.jsx)(i.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Checklist Category"}),(0,b.jsxs)("select",{value:a.checklistCategory,onChange:a=>V(d,"checklistCategory",a.target.value),style:{backgroundColor:"white",border:"1px solid #d1d5db",borderRadius:"6px",padding:"10px 12px",fontSize:"14px",width:"100%",color:"#111827",fontWeight:"500"},children:[(0,b.jsx)("option",{value:"",children:"Select category (optional)"}),X.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsxs)(i.Field.Root,{children:[(0,b.jsx)(i.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Requirements * (Select individual requirements)"}),I?0===K.length?(0,b.jsx)(c.Box,{bg:"gray.50",border:"1px",borderColor:"gray.300",borderRadius:"lg",p:"4",children:(0,b.jsx)(m.Typography,{fontSize:"sm",color:"gray.700",fontWeight:"500",textAlign:"center",children:"No requirements configured for this entity type yet"})}):(0,b.jsx)(c.Box,{bg:"white",border:"1px",borderColor:"gray.300",borderRadius:"md",p:"3",maxH:"300px",overflowY:"auto",children:(h={},K.forEach(a=>{let b=a.type||"Other";h[b]||(h[b]=[]),h[b].push(a)}),(0,b.jsx)(e.VStack,{align:"stretch",gap:"4",children:Object.entries(h).map(([g,h])=>(0,b.jsxs)(c.Box,{border:"1px",borderColor:"gray.200",borderRadius:"md",p:"3",bg:"gray.50",children:[(0,b.jsx)(m.Typography,{fontSize:"sm",fontWeight:"bold",color:"gray.900",mb:"2",children:g}),(0,b.jsx)(e.VStack,{align:"stretch",gap:"2",children:h.map(c=>(0,b.jsxs)(f.HStack,{gap:"2",align:"start",children:[(0,b.jsx)(l.Checkbox.Root,{checked:a.requirementIds.includes(c.id),onCheckedChange:()=>{var a;return a=c.id,void B(b=>b.map((b,c)=>{let e,f;if(c!==d)return b;let g=K.find(b=>b.id===a);return g?(b.requirementIds.includes(a)?(e=b.requirementIds.filter(b=>b!==a),f=0===K.filter(b=>b.type===g.type&&b.id!==a&&e.includes(b.id)).length?b.requirementTypes.filter(a=>a!==g.type):b.requirementTypes):(e=[...b.requirementIds,a],f=b.requirementTypes.includes(g.type)?b.requirementTypes:[...b.requirementTypes,g.type]),{...b,requirementIds:e,requirementTypes:f}):b}))},children:(0,b.jsx)(l.Checkbox.Control,{children:(0,b.jsx)(l.Checkbox.Indicator,{})})}),(0,b.jsxs)(e.VStack,{align:"start",gap:"0",flex:"1",children:[(0,b.jsx)(m.Typography,{fontSize:"sm",fontWeight:"600",color:"gray.900",children:c.displayName}),c.description&&(0,b.jsx)(m.Typography,{fontSize:"xs",color:"gray.700",fontWeight:"500",style:{display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden"},children:c.description})]})]},c.id))})]},g))}))}):(0,b.jsx)(c.Box,{bg:"gray.50",border:"1px",borderColor:"gray.300",borderRadius:"lg",p:"4",children:(0,b.jsx)(m.Typography,{fontSize:"sm",color:"gray.700",fontWeight:"500",textAlign:"center",children:"Loading entity requirements..."})}),a.requirementIds.length>0&&(0,b.jsxs)(m.Typography,{fontSize:"xs",color:"gray.700",fontWeight:"600",mt:"2",children:[a.requirementIds.length," requirement",1!==a.requirementIds.length?"s":""," selected"]})]}),(0,b.jsxs)(i.Field.Root,{children:[(0,b.jsx)(i.Field.Label,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Requirement Types (Auto-selected based on requirements above)"}),(0,b.jsx)(c.Box,{bg:"gray.50",border:"1px",borderColor:"gray.300",borderRadius:"lg",p:"4",children:a.requirementTypes.length>0?(0,b.jsx)(f.HStack,{gap:"2",flexWrap:"wrap",children:a.requirementTypes.map(a=>(0,b.jsx)(q.Tag,{variant:"warning",style:{backgroundColor:"#F59E0B",color:"#FFFFFF",fontWeight:"600",padding:"4px 12px",fontSize:"12px"},children:a},a))}):(0,b.jsx)(m.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"500",children:"Select requirements above to see requirement types"})})]}),(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsx)(m.Typography,{fontSize:"sm",fontWeight:"bold",color:"gray.800",children:"Step Active"}),(0,b.jsx)(n.Button,{onClick:()=>V(d,"isActive",!a.isActive),variant:a.isActive?"primary":"secondary",size:"sm",bg:a.isActive?"#22C55E":"white",border:a.isActive?"none":"1px solid",borderColor:a.isActive?"transparent":"gray.300",fontWeight:"600",_hover:a.isActive?{bg:"#16A34A"}:{bg:"gray.50"},children:(0,b.jsx)(m.Typography,{as:"span",color:a.isActive?"white":"gray.700",fontWeight:"600",children:a.isActive?"Active":"Inactive"})})]})]})},d)})]})}),(0,b.jsxs)(h.Flex,{gap:"3",justify:"start",pt:"3",children:[(0,b.jsxs)(n.Button,{onClick:W,variant:"primary",size:"md",disabled:M||O,bg:"#FF6B35",fontWeight:"600",_hover:{bg:"#E55A2B"},_active:{bg:"#CC4A1F"},children:[(0,b.jsx)(o.IconWrapper,{children:(0,b.jsx)(r.FiSettings,{size:16})}),(0,b.jsx)(m.Typography,{as:"span",color:"white",fontWeight:"600",children:O?"Updating...":"Update"})]}),(0,b.jsxs)(n.Button,{onClick:()=>{w.push("/wizard-configurations")},variant:"secondary",size:"md",disabled:O||M,bg:"white",border:"1px solid",borderColor:"gray.300",fontWeight:"600",_hover:{bg:"gray.50",borderColor:"gray.400"},children:[(0,b.jsx)(o.IconWrapper,{children:(0,b.jsx)(r.FiX,{size:16})}),(0,b.jsx)(m.Typography,{as:"span",color:"gray.700",fontWeight:"600",children:"Cancel"})]})]})]})})]})]})}a.s(["default",()=>w])}];

//# debugId=49fe36f8-f874-ec85-6b4f-ee7f3d4d54a9
//# sourceMappingURL=src_app_wizard-configurations_edit_%5Bid%5D_page_tsx_c75e49ba._.js.map