;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="af3d93af-88bb-03f6-5771-bfba3321c589")}catch(e){}}();
module.exports=[556704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},832319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},120635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},909270,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.AppRouterContext},736313,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.HooksClientContext},818341,(a,b,c)=>{"use strict";b.exports=a.r(342602).vendored.contexts.ServerInsertedHtml},992539,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(50944);a.i(525985);var e=a.i(862760),f=a.i(676851),g=a.i(508010),h=a.i(201526),i=a.i(438452),j=a.i(327382),k=a.i(535895),l=a.i(804871),m=a.i(585425),n=a.i(883970),o=a.i(247290),p=a.i(173029);function q(){let a=(0,d.usePathname)(),q=(0,d.useRouter)(),{condensed:r,setCondensed:s}=(0,p.useSidebar)(),[t,u]=(0,c.useState)("dashboard");(0,c.useEffect)(()=>{"/dashboard"===a?u("dashboard"):a?.startsWith("/work-queue")?u("work-queue"):a?.startsWith("/applications")?u("applications"):a?.startsWith("/review")||a?.startsWith("/risk-review")||a?.startsWith("/approvals")?u("reviews"):a?.startsWith("/documents")?u("documents"):a?.startsWith("/requirements")?u("requirements"):a?.startsWith("/entity-types")?u("entity-types"):a?.startsWith("/checklists")?u("checklists"):a?.startsWith("/wizard-configurations")?u("wizard-configurations"):a?.startsWith("/rules-and-permissions")?u("rules-and-permissions"):a?.startsWith("/audit-log")?u("audit-log"):a?.startsWith("/messages")?u("messages"):a?.startsWith("/notifications")?u("notifications"):a?.startsWith("/data-migration")?u("data-migration"):a?.startsWith("/refreshes")?u("refreshes"):a?.startsWith("/reports")?u("reports"):a?.startsWith("/profile")?u("profile"):a?.startsWith("/settings")&&u("settings")},[a]);let v=(0,c.useMemo)(()=>[{id:"dashboard",label:"Dashboard",icon:(0,b.jsx)(f.ProductIcon,{width:"20",height:"20"}),onClick:()=>{u("dashboard"),q.push("/dashboard")}},{id:"work-queue",label:"Work Queue",icon:(0,b.jsx)(m.FilterIcon,{width:"20",height:"20"}),onClick:()=>{u("work-queue"),q.push("/work-queue")}},{id:"applications",label:"Applications",icon:(0,b.jsx)(k.AppIcon,{width:"20",height:"20"}),onClick:()=>{u("applications"),q.push("/applications")}},{id:"reviews",label:"Reviews",icon:(0,b.jsx)(h.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{u("reviews"),q.push("/review")},subItems:[{id:"risk-review",label:"Risk Review",onClick:()=>{u("reviews"),q.push("/risk-review")}},{id:"approvals",label:"Approvals",onClick:()=>{u("reviews"),q.push("/approvals")}}]},{id:"documents",label:"Documents",icon:(0,b.jsx)(l.FileOpenIcon,{width:"20",height:"20"}),onClick:()=>{u("documents"),q.push("/documents")}},{id:"configuration",label:"Configuration",icon:(0,b.jsx)(i.SettingsIcon,{width:"20",height:"20"}),onClick:()=>{u("configuration"),q.push("/requirements")},subItems:[{id:"requirements",label:"Requirements",onClick:()=>{u("configuration"),q.push("/requirements")}},{id:"entity-types",label:"Entity Types",onClick:()=>{u("configuration"),q.push("/entity-types")}},{id:"checklists",label:"Checklists",onClick:()=>{u("configuration"),q.push("/checklists")}},{id:"wizard-configurations",label:"Wizard Configurations",onClick:()=>{u("configuration"),q.push("/wizard-configurations")}},{id:"rules-and-permissions",label:"Rules & Permissions",onClick:()=>{u("configuration"),q.push("/rules-and-permissions")}}]},{id:"system",label:"System",icon:(0,b.jsx)(n.WarningIcon,{width:"20",height:"20"}),onClick:()=>{u("system"),q.push("/audit-log")},subItems:[{id:"audit-log",label:"Audit Log",onClick:()=>{u("system"),q.push("/audit-log")}},{id:"messages",label:"Messages",onClick:()=>{u("system"),q.push("/messages")}},{id:"notifications",label:"Notifications",onClick:()=>{u("system"),q.push("/notifications")}},{id:"data-migration",label:"Data Migration",onClick:()=>{u("system"),q.push("/data-migration")}},{id:"refreshes",label:"Refreshes",onClick:()=>{u("system"),q.push("/refreshes")}}]},{id:"reports",label:"Reports",icon:(0,b.jsx)(h.DocumentIcon,{width:"20",height:"20"}),onClick:()=>{u("reports"),q.push("/reports")}},{id:"profile",label:"Profile",icon:(0,b.jsx)(g.UserIcon,{width:"20",height:"20"}),onClick:()=>{u("profile"),q.push("/profile")}}],[q]),w={id:"help-centre",label:"Help Centre",icon:(0,b.jsx)(j.HelpIcon,{width:"20",height:"20"}),onClick:()=>{console.log("Help Centre")}};return(0,b.jsx)(o.Box,{position:"fixed",left:"0",top:"0",height:"100vh",width:r?"72px":"280px",borderRight:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",zIndex:"1000",className:"sidebar-wrapper",bg:"#F9FAFB",overflowY:"auto",transition:"width 0.3s ease",children:(0,b.jsx)(e.PortalNavigationSidebar,{navigationItems:v,helpCentreItem:w,activeItemId:t,condensed:r,onToggleCollapse:s,onLogoClick:()=>{u("dashboard"),q.push("/dashboard")},expandedWidth:"280px",condensedWidth:"72px"})})}a.s(["default",()=>q])},566701,a=>{"use strict";let{withContext:b,PropsProvider:c}=(0,a.i(472292).createRecipeContext)({key:"container"}),d=b("div");a.s(["Container",()=>d])},305856,a=>{"use strict";var b=a.i(187924),c=a.i(50944),d=a.i(718402);a.i(525985);var e=a.i(376978),f=a.i(138340),g=a.i(247290),h=a.i(688294),i=a.i(397225),j=a.i(394761),k=a.i(727348),l=a.i(173029);function m(){let a=(0,c.useRouter)(),{data:m}=(0,d.useSession)(),{condensed:n,setCondensed:o}=(0,l.useSidebar)(),p=m?.user?.name||"Admin",q=m?.user?.email||"admin@mukuru.com";return p.split(" ")[0]?.toLowerCase(),(0,b.jsx)(g.Box,{position:"fixed",top:"0",left:n?"72px":"280px",right:"0",height:"90px",bg:"white",zIndex:"999",px:"6",py:"4",pl:"6",transition:"left 0.3s ease, width 0.3s ease",className:"portal-header",borderBottom:"1px solid",borderColor:"rgba(55, 58, 54, 0.15)",children:(0,b.jsxs)(i.Flex,{justify:"space-between",align:"center",width:"full",height:"full",children:[(0,b.jsx)(h.HStack,{gap:"4",align:"center",children:(0,b.jsx)(j.Button,{variant:"ghost",onClick:()=>o(!n),p:"2",borderRadius:"full",minW:"40px",h:"40px",bg:"gray.100",_hover:{bg:"gray.200"},"aria-label":"Toggle sidebar",border:"none",_focus:{boxShadow:"none",outline:"none"},_active:{bg:"gray.200"},children:(0,b.jsx)(f.IconWrapper,{children:(0,b.jsx)(k.FiArrowLeft,{size:20,color:"#F05423"})})})}),(0,b.jsx)(h.HStack,{gap:"4",align:"center",children:(0,b.jsx)(e.ProfileMenu,{user:p,menuItems:[{id:0,label:q,value:"email"},{id:1,label:"My Profile",value:"profile",onSelect:()=>a.push("/profile")},{id:2,label:"Settings",value:"settings",onSelect:()=>a.push("/settings")},{id:3,label:"Log Out",value:"logout",onSelect:()=>a.push("/api/auth/logout")}]})})]})})}a.s(["default",()=>m])},922757,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(687556),e=a.i(477656);let f=(0,c.forwardRef)(function(a,c){let{align:f,fit:g="cover",...h}=a;return(0,b.jsx)(d.chakra.img,{ref:c,objectFit:g,objectPosition:f,className:(0,e.cx)("chakra-image",a.className),...h})});a.s(["Image",()=>f])},796218,a=>{"use strict";var b=a.i(187924),c=a.i(247290),d=a.i(566701),e=a.i(480916),f=a.i(688294),g=a.i(397225),h=a.i(15631),i=a.i(922757);a.i(525985);var j=a.i(805204),k=a.i(831551),l=a.i(142519),m=a.i(790355),n=a.i(200610),o=a.i(492180),p=a.i(832141),q=a.i(652167),r=a.i(259580),s=a.i(138340),t=a.i(937859),u=a.i(727348),v=a.i(572131),w=a.i(992539),x=a.i(305856),y=a.i(173029);let z=a=>({1:"Passport",2:"Driver's License",3:"National ID",4:"Proof of Address",5:"Bank Statement",6:"Tax Document",7:"Business Registration",8:"Articles of Incorporation",9:"Shareholder Registry",10:"Financial Statements",99:"Other"})[a]||"Unknown",A=a=>{if(0===a)return"0 Bytes";let b=Math.floor(Math.log(a)/Math.log(1024));return Math.round(a/Math.pow(1024,b)*100)/100+" "+["Bytes","KB","MB","GB"][b]};function B(){var a,B;let{condensed:C}=(0,y.useSidebar)(),[D,E]=(0,v.useState)([]),[F,G]=(0,v.useState)(!1),[H,I]=(0,v.useState)(null),[J,K]=(0,v.useState)(""),[L,M]=(0,v.useState)(0),[N,O]=(0,v.useState)(1),[P,Q]=(0,v.useState)(null),[R,S]=(0,v.useState)(!1),[T,U]=(0,v.useState)(null),[V,W]=(0,v.useState)(null),[X,Y]=(0,v.useState)(0),Z=(a,b,c="info",d=5e3)=>{Q({title:a,description:b,type:c}),setTimeout(()=>Q(null),d)},$=(0,v.useCallback)(async()=>{try{G(!0),I(null),console.log("[Documents Page] Loading documents...",{page:N,pageSize:50});let a=(N-1)*50,b=`/api/documents?skip=${a}&take=50`,c=await fetch(b);if(!c.ok){let a=await c.json().catch(()=>({}));throw Error(a.error||`Failed to load documents: ${c.statusText}`)}let d=await c.json();E(d.items||d||[]),M(d.total||d.totalCount||(d.items||d||[]).length),console.log("[Documents Page] Documents loaded:",(d.items||d||[]).length)}catch(b){console.error("[Documents Page] Error loading documents:",b);let a=b instanceof Error?b.message:"Failed to load documents";I(a),E([]),Z("Error loading documents",a,"error",5e3)}finally{G(!1)}},[N]);(0,v.useEffect)(()=>{$()},[$,X]);let _=(0,v.useCallback)(a=>{K(a)},[]),aa=async a=>{try{return`/api/proxy-document?storageKey=${encodeURIComponent(a.storageKey)}`}catch(a){return console.error("Error getting document URL:",a),null}},ab=async a=>{try{U(a),S(!0);let b=await aa(a);b?W(b):(Z("View failed","Could not load document. Please try downloading instead.","error",5e3),S(!1),U(null))}catch(a){console.error("Error viewing document:",a),Z("View failed",a instanceof Error?a.message:"Failed to view document","error",5e3)}},ac=async a=>{try{let b=await aa(a);if(b)window.open(b,"_blank");else throw Error("No download URL returned")}catch(a){console.error("Error downloading document:",a),Z("Download failed",a instanceof Error?a.message:"Failed to download document","error",5e3)}},ad=D.filter(a=>{if(!J)return!0;let b=J.toLowerCase();return a.fileName.toLowerCase().includes(b)||a.documentNumber.toLowerCase().includes(b)||a.caseId.toLowerCase().includes(b)||z(a.type).toLowerCase().includes(b)||a.uploadedBy.toLowerCase().includes(b)}),ae=Math.ceil(L/50),af=[{field:"fileName",header:"File Name",sortable:!0,minWidth:"250px",render:(a,c)=>(0,b.jsxs)(f.HStack,{gap:"2",children:[(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiFileText,{size:16,color:"#DD6B20"})}),(0,b.jsx)(k.Typography,{fontSize:"sm",fontWeight:"medium",color:"orange.600",cursor:"pointer",onClick:()=>ab(c),style:{textDecoration:"none"},_hover:{textDecoration:"underline"},children:c.fileName})]})},{field:"type",header:"Type",sortable:!0,minWidth:"120px",render:a=>(0,b.jsx)(r.Tag,{variant:"info",children:z(a)})},{field:"caseId",header:"Case ID",sortable:!0,minWidth:"150px",render:(a,c)=>(0,b.jsx)(l.Link,{href:`/applications/${c.caseId}`,children:(0,b.jsxs)(k.Typography,{fontSize:"sm",color:"orange.600",_hover:{textDecoration:"underline"},children:[c.caseId.substring(0,8),"..."]})})},{field:"sizeBytes",header:"Size",sortable:!0,minWidth:"100px",render:a=>(0,b.jsx)(k.Typography,{fontSize:"sm",color:"gray.600",children:A(a)})},{field:"uploadedBy",header:"Uploaded By",sortable:!0,minWidth:"150px",render:a=>(0,b.jsx)(k.Typography,{fontSize:"sm",color:"gray.600",children:a})},{field:"uploadedAt",header:"Uploaded At",sortable:!0,minWidth:"150px",render:a=>(0,b.jsxs)(f.HStack,{gap:"2",children:[(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiCalendar,{size:16,color:"#9CA3AF"})}),(0,b.jsx)(k.Typography,{fontSize:"sm",color:"gray.600",children:new Date(a).toLocaleDateString()})]})}];return(0,b.jsxs)(g.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(w.default,{}),(0,b.jsxs)(c.Box,{ml:C?"72px":"280px",mt:"90px",minH:"calc(100vh - 90px)",width:C?"calc(100% - 72px)":"calc(100% - 280px)",bg:"gray.50",overflowX:"hidden",transition:"margin-left 0.3s ease, width 0.3s ease",children:[(0,b.jsx)(x.default,{}),(0,b.jsx)(d.Container,{maxW:"100%",px:"8",py:"6",width:"full",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"stretch",children:[(0,b.jsxs)(g.Flex,{justify:"space-between",align:"center",mb:"4",children:[(0,b.jsxs)(e.VStack,{align:"start",gap:"1",children:[(0,b.jsx)(k.Typography,{fontSize:"3xl",fontWeight:"bold",color:"gray.800",children:"Documents"}),(0,b.jsx)(k.Typography,{color:"gray.600",children:"View and manage all uploaded documents"})]}),(0,b.jsxs)(o.Button,{variant:"secondary",size:"sm",onClick:()=>Y(a=>a+1),className:"mukuru-primary-button",children:[(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiRefreshCw,{size:16})}),"Refresh"]})]}),P&&(0,b.jsx)(q.AlertBar,{status:P.type,title:P.title,description:P.description,onClose:()=>Q(null)}),H&&(0,b.jsx)(q.AlertBar,{status:"error",title:"Error loading documents",children:H}),(0,b.jsx)(c.Box,{width:"100%",maxW:"800px",children:(0,b.jsx)(m.Search,{placeholder:"Search documents by name, case ID, type, or uploader...",onSearchChange:_})}),(0,b.jsx)(c.Box,{className:"work-queue-table-wrapper",width:"100%",children:(0,b.jsx)(n.DataTable,{data:ad,columns:af,actionColumn:{header:"Actions",width:"150px",render:a=>(0,b.jsxs)(f.HStack,{gap:"2",children:[(0,b.jsx)(t.Tooltip,{content:"View document",children:(0,b.jsx)("button",{onClick:()=>ab(a),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#111827",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiEye,{size:14})})})}),(0,b.jsx)(t.Tooltip,{content:"Download document",children:(0,b.jsx)("button",{onClick:()=>ac(a),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#111827",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiDownload,{size:14})})})}),(0,b.jsx)(t.Tooltip,{content:"View application",children:(0,b.jsx)("button",{onClick:()=>window.open(`/applications/${a.caseId}`,"_blank"),style:{padding:"6px 12px",borderRadius:"6px",border:"1px solid #E5E7EB",backgroundColor:"white",color:"#111827",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiFileText,{size:14})})})})]})},loading:F})}),ae>1&&(0,b.jsx)(j.Pagination,{currentPage:N,totalPages:ae,onPageChange:O,totalItems:L,pageSize:50})]})})]}),(0,b.jsxs)(p.Modal,{isOpen:R,onClose:()=>{S(!1),U(null),W(null)},size:"large",closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,b.jsx)(p.ModalHeader,{children:(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",width:"full",children:[(0,b.jsxs)(e.VStack,{align:"start",gap:"0",children:[(0,b.jsx)(k.Typography,{fontSize:"lg",fontWeight:"700",children:T?.fileName}),(0,b.jsxs)(k.Typography,{fontSize:"sm",color:"gray.600",children:[T&&z(T.type)," â€¢ ",T&&A(T.sizeBytes)]})]}),(0,b.jsxs)(f.HStack,{gap:"2",children:[T&&(0,b.jsxs)(o.Button,{variant:"secondary",size:"sm",onClick:()=>ac(T),children:[(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiDownload,{size:16})}),"Download"]}),(0,b.jsx)(o.Button,{variant:"secondary",size:"sm",onClick:()=>{S(!1),U(null),W(null)},children:(0,b.jsx)(s.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:16})})})]})]})}),(0,b.jsx)(p.ModalBody,{children:V&&T?(a=T.fileName,B=T.contentType,[".jpg",".jpeg",".png",".gif",".bmp",".webp"].includes(a.toLowerCase().substring(a.lastIndexOf(".")))||B.startsWith("image/"))?(0,b.jsx)(c.Box,{p:"4",bg:"gray.50",display:"flex",justifyContent:"center",alignItems:"center",minH:"400px",children:(0,b.jsx)(i.Image,{src:V,alt:T.fileName,maxW:"100%",maxH:"70vh",objectFit:"contain",borderRadius:"md"})}):(0,b.jsx)(c.Box,{p:"4",bg:"gray.50",minH:"400px",children:(0,b.jsx)("iframe",{src:V,style:{width:"100%",height:"70vh",border:"none",borderRadius:"8px"},title:T.fileName})}):(0,b.jsx)(g.Flex,{justify:"center",align:"center",minH:"400px",children:(0,b.jsxs)(e.VStack,{gap:"4",children:[(0,b.jsx)(h.Spinner,{size:"xl",color:"orange.500"}),(0,b.jsx)(k.Typography,{color:"gray.600",children:"Loading document..."})]})})})]})]})}a.s(["default",()=>B])}];

//# debugId=af3d93af-88bb-03f6-5771-bfba3321c589
//# sourceMappingURL=%5Broot-of-the-server%5D__a5204a6c._.js.map