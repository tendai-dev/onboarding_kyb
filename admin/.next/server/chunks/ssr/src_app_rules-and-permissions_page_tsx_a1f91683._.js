;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="c46645f4-cea3-dc4f-79b2-c99e6af4db7f")}catch(e){}}();
module.exports=[785535,a=>{"use strict";var b=a.i(187924),c=a.i(247290),d=a.i(566701),e=a.i(480916),f=a.i(688294),g=a.i(397225),h=a.i(15631),i=a.i(154462),j=a.i(547203),k=a.i(332938),l=a.i(825055),m=a.i(635772);a.i(525985);var n=a.i(790355),o=a.i(831551),p=a.i(492180),q=a.i(259580),r=a.i(138340),s=a.i(652167),t=a.i(790932),u=a.i(727348),v=a.i(992539),w=a.i(572131);let x=process.env.NEXT_PUBLIC_ENTITY_CONFIG_API_BASE_URL||"http://localhost:8003",y=new class{async getAuthHeaders(){return{"Content-Type":"application/json"}}async request(a,b){let c=`${x}/api/v1`,d=`${c}${a}`,e=await this.getAuthHeaders();try{let a=new Promise((a,b)=>{setTimeout(()=>b(Error("Request timeout")),1e4)}),c=fetch(d,{...b,headers:{...e,...b?.headers}}),f=await Promise.race([c,a]);if(!f.ok){let a=await f.text(),b=`Rules and Permissions API request failed: ${f.status} ${f.statusText}`;try{let c=JSON.parse(a);c.message?b=c.message:c.error&&(b=c.error)}catch{a&&a.trim().length>0&&(b=a.length>200?a.substring(0,200)+"...":a)}throw Error(b)}if(204===f.status)return null;return f.json()}catch(a){if(a instanceof TypeError||a instanceof Error&&a.message.includes("timeout"))throw Error("Unable to connect to Entity Configuration service");throw a}}async getAllUsers(a=!0){let b=new URLSearchParams;a&&b.append("includePermissions","true"),b.append("page","1"),b.append("pageSize","1000");let c=b.toString(),d=await this.request(`/users${c?`?${c}`:""}`);return d&&d.users&&Array.isArray(d.users)?d.users.map(a=>({id:a.id||a.Id,email:a.email||a.Email||"",name:a.name||a.Name||a.fullName||"",firstLoginAt:a.firstLoginAt||a.firstLogin||a.lastLogin||"",lastLoginAt:a.lastLoginAt||a.lastLogin||"",createdAt:a.createdAt||a.CreatedAt||"",permissions:(a.permissions||a.Permissions||[]).map(a=>({id:a.id||a.Id||"",permissionName:a.permissionName||a.PermissionName||a.permission_name||"",resource:a.resource||a.Resource||void 0,description:a.description||a.Description||void 0,isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active,createdAt:a.createdAt||a.CreatedAt||a.created_at||"",createdBy:a.createdBy||a.CreatedBy||a.created_by||void 0})),roles:(a.roles||[]).map(a=>({id:"",roleId:"",roleName:a,roleDisplayName:a,isActive:!0,createdAt:""}))})):Array.isArray(d)?d.map(a=>({id:a.id||a.Id||"",email:a.email||a.Email||"",name:a.name||a.Name||a.fullName||"",firstLoginAt:a.firstLoginAt||a.firstLogin||a.first_login_at||a.first_login||"",lastLoginAt:a.lastLoginAt||a.lastLogin||a.last_login_at||a.last_login||"",createdAt:a.createdAt||a.CreatedAt||a.created_at||"",permissions:(a.permissions||a.Permissions||[]).map(a=>({id:a.id||a.Id||"",permissionName:a.permissionName||a.PermissionName||a.permission_name||"",resource:a.resource||a.Resource||void 0,description:a.description||a.Description||void 0,isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active,createdAt:a.createdAt||a.CreatedAt||a.created_at||"",createdBy:a.createdBy||a.CreatedBy||a.created_by||void 0})),roles:(a.roles||a.Roles||[]).map(a=>({id:a.id||a.Id||"",roleId:a.roleId||a.RoleId||a.role_id||"",roleName:a.roleName||a.RoleName||a.role_name||"",roleDisplayName:a.roleDisplayName||a.RoleDisplayName||a.role_display_name||a.roleName||"",isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active,createdAt:a.createdAt||a.CreatedAt||a.created_at||""}))})):[]}async getUserByEmail(a){try{return await this.request(`/users/by-email/${encodeURIComponent(a)}`)}catch(a){if(a instanceof Error&&a.message.includes("404"))return null;throw a}}async createOrUpdateUser(a){return this.request("/users",{method:"POST",body:JSON.stringify(a)})}async grantPermission(a,b){return this.request(`/users/${a}/permissions`,{method:"POST",body:JSON.stringify(b)})}async revokePermission(a){return this.request(`/users/permissions/${a}`,{method:"DELETE"})}async getAllRoles(a=!0){let b=new URLSearchParams;a&&b.append("includePermissions","true");let c=b.toString(),d=await this.request(`/roles${c?`?${c}`:""}`);return d&&d.roles&&Array.isArray(d.roles)?d.roles.map(a=>({id:a.id||a.Id||"",name:a.name||a.Name||"",displayName:a.displayName||a.DisplayName||a.display_name||a.name||a.Name||"",description:a.description||a.Description||a.description||"",isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active,createdAt:a.createdAt||a.CreatedAt||a.created_at||new Date().toISOString(),updatedAt:a.updatedAt||a.UpdatedAt||a.updated_at||new Date().toISOString(),permissions:(a.permissions||a.Permissions||[]).map(a=>({id:a.id||a.Id||"",permissionName:a.permissionName||a.PermissionName||a.permission_name||"",resource:a.resource||a.Resource||a.resource||void 0,isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active}))})):Array.isArray(d)?d.map(a=>({id:a.id||a.Id||"",name:a.name||a.Name||"",displayName:a.displayName||a.DisplayName||a.display_name||a.name||a.Name||"",description:a.description||a.Description||a.description||"",isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active,createdAt:a.createdAt||a.CreatedAt||a.created_at||new Date().toISOString(),updatedAt:a.updatedAt||a.UpdatedAt||a.updated_at||new Date().toISOString(),permissions:(a.permissions||a.Permissions||[]).map(a=>({id:a.id||a.Id||"",permissionName:a.permissionName||a.PermissionName||a.permission_name||a.permissionName||"",resource:a.resource||a.Resource||a.resource||void 0,isActive:void 0!==a.isActive?a.isActive:void 0!==a.IsActive?a.IsActive:void 0===a.is_active||a.is_active}))})):[]}async getRoleById(a,b=!0){let c=new URLSearchParams;b&&c.append("includePermissions","true");let d=c.toString();return this.request(`/roles/${a}${d?`?${d}`:""}`)}async createRole(a){return this.request("/roles",{method:"POST",body:JSON.stringify(a)})}async updateRole(a,b){return this.request(`/roles/${a}`,{method:"PUT",body:JSON.stringify(b)})}async deleteRole(a){return this.request(`/roles/${a}`,{method:"DELETE"})}async addPermissionToRole(a,b){return this.request(`/roles/${a}/permissions`,{method:"POST",body:JSON.stringify(b)})}async removePermissionFromRole(a,b){return this.request(`/roles/${a}/permissions/${b}`,{method:"DELETE"})}async assignRoleToUser(a,b){return this.request(`/users/${a}/roles`,{method:"POST",body:JSON.stringify({roleId:b})})}async removeRoleFromUser(a,b){return this.request(`/users/${a}/roles/${b}`,{method:"DELETE"})}};var z=a.i(151342);let A=[{category:"View Permissions",permissions:[{value:"view_dashboard",label:"View Dashboard"},{value:"view_reports",label:"View Reports"},{value:"view_applications",label:"View Applications"},{value:"view_work_queue",label:"View Work Queue"},{value:"view_messages",label:"View Messages"},{value:"view_audit_log",label:"View Audit Log"},{value:"view_entity_types",label:"View Entity Types"},{value:"view_users",label:"View Users"},{value:"view_roles",label:"View Roles"},{value:"view_requirements",label:"View Requirements"},{value:"view_checklists",label:"View Checklists"},{value:"view_notifications",label:"View Notifications"},{value:"view_risk_review",label:"View Risk Review"},{value:"view_approvals",label:"View Approvals"},{value:"view_refreshes",label:"View Refreshes"}]},{category:"Create Permissions",permissions:[{value:"create_application",label:"Create Application"},{value:"create_entity_type",label:"Create Entity Type"},{value:"create_requirement",label:"Create Requirement"},{value:"create_role",label:"Create Role"},{value:"create_user",label:"Create User"},{value:"create_checklist",label:"Create Checklist"},{value:"create_notification",label:"Create Notification"}]},{category:"Edit Permissions",permissions:[{value:"edit_application",label:"Edit Application"},{value:"edit_entity_type",label:"Edit Entity Type"},{value:"edit_requirement",label:"Edit Requirement"},{value:"edit_role",label:"Edit Role"},{value:"edit_user",label:"Edit User"},{value:"edit_checklist",label:"Edit Checklist"},{value:"edit_notification",label:"Edit Notification"}]},{category:"Delete Permissions",permissions:[{value:"delete_application",label:"Delete Application"},{value:"delete_entity_type",label:"Delete Entity Type"},{value:"delete_requirement",label:"Delete Requirement"},{value:"delete_role",label:"Delete Role"},{value:"delete_user",label:"Delete User"},{value:"delete_checklist",label:"Delete Checklist"},{value:"delete_notification",label:"Delete Notification"}]},{category:"Action Permissions",permissions:[{value:"approve_application",label:"Approve Application"},{value:"reject_application",label:"Reject Application"},{value:"assign_work_item",label:"Assign Work Item"},{value:"complete_work_item",label:"Complete Work Item"},{value:"grant_permission",label:"Grant Permission"},{value:"revoke_permission",label:"Revoke Permission"},{value:"assign_role",label:"Assign Role"},{value:"remove_role",label:"Remove Role"}]},{category:"Admin Permissions",permissions:[{value:"admin_access",label:"Admin Access"},{value:"manage_users",label:"Manage Users"},{value:"manage_roles",label:"Manage Roles"},{value:"manage_permissions",label:"Manage Permissions"},{value:"manage_configuration",label:"Manage Configuration"},{value:"export_data",label:"Export Data"},{value:"import_data",label:"Import Data"}]}];A.flatMap(a=>a.permissions);let B=[{value:"applications",label:"Applications"},{value:"entity_types",label:"Entity Types"},{value:"requirements",label:"Requirements"},{value:"roles",label:"Roles"},{value:"users",label:"Users"},{value:"reports",label:"Reports"},{value:"work_queue",label:"Work Queue"},{value:"messages",label:"Messages"},{value:"audit_log",label:"Audit Log"},{value:"checklists",label:"Checklists"},{value:"notifications",label:"Notifications"},{value:"risk_review",label:"Risk Review"},{value:"approvals",label:"Approvals"}];function C(){let[a,x]=(0,w.useState)("roles"),[C,D]=(0,w.useState)([]),[E,F]=(0,w.useState)(!0),[G,H]=(0,w.useState)(null),[I,J]=(0,w.useState)(""),[K,L]=(0,w.useState)(!1),[M,N]=(0,w.useState)(!1),[O,P]=(0,w.useState)(!1),[Q,R]=(0,w.useState)({permissionName:"",resource:"",description:""}),[S,T]=(0,w.useState)([]),[U,V]=(0,w.useState)(!0),[W,X]=(0,w.useState)(null),[Y,Z]=(0,w.useState)(!1),[$,_]=(0,w.useState)(!1),[aa,ab]=(0,w.useState)(!1),[ac,ad]=(0,w.useState)({name:"",displayName:"",description:""}),[ae,af]=(0,w.useState)({permissionName:"",resource:""}),[ag,ah]=(0,w.useState)(new Set),[ai,aj]=(0,w.useState)(null);(0,w.useEffect)(()=>{"users"===a?ak():al()},[a]),(0,w.useEffect)(()=>{al()},[]);let ak=async()=>{try{F(!0),aj(null);let a=await y.getAllUsers(!0);D(a)}catch(a){aj(a instanceof Error?a.message:"Failed to load users"),console.error("Error loading users:",a)}finally{F(!1)}},al=async()=>{try{V(!0),aj(null);let a=await y.getAllRoles(!0);T(a)}catch(a){aj(a instanceof Error?a.message:"Failed to load roles"),console.error("Error loading roles:",a)}finally{V(!1)}},am=async()=>{if(!G||!Q.permissionName.trim())return void aj("Please select a user and enter a permission name");try{P(!0),aj(null),z.SweetAlert.loading("Granting...","Please wait while we grant the permission."),await y.grantPermission(G.id,{permissionName:Q.permissionName,resource:Q.resource||void 0,description:Q.description||void 0}),await ak(),z.SweetAlert.close(),await z.SweetAlert.success("Granted!","Permission has been granted successfully."),ax()}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to grant permission";aj(a),console.error("Error granting permission:",b),await z.SweetAlert.error("Grant Failed",a)}finally{P(!1)}},an=async(a,b)=>{if((await z.SweetAlert.confirm("Revoke Permission",`Are you sure you want to revoke the permission "${b}"?`,"Yes, revoke it!","Cancel","warning")).isConfirmed)try{aj(null),z.SweetAlert.loading("Revoking...","Please wait while we revoke the permission."),await y.revokePermission(a),await ak(),z.SweetAlert.close(),await z.SweetAlert.success("Revoked!","Permission has been revoked successfully.")}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to revoke permission";aj(a),console.error("Error revoking permission:",b),await z.SweetAlert.error("Revoke Failed",a)}},ao=async()=>{if(!ac.name.trim()||!ac.displayName.trim())return void aj("Please enter role name and display name");try{aj(null),z.SweetAlert.loading("Creating...","Please wait while we create the role."),await y.createRole({name:ac.name,displayName:ac.displayName,description:ac.description||void 0}),await al(),z.SweetAlert.close(),await z.SweetAlert.success("Created!","Role has been created successfully."),ay()}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to create role";aj(a),console.error("Error creating role:",b),await z.SweetAlert.error("Create Failed",a)}},ap=async()=>{if(!W||!ac.displayName.trim())return void aj("Please enter a display name");try{aj(null),z.SweetAlert.loading("Updating...","Please wait while we update the role."),await y.updateRole(W.id,{displayName:ac.displayName,description:ac.description||void 0}),await al(),z.SweetAlert.close(),await z.SweetAlert.success("Updated!","Role has been updated successfully."),az()}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to update role";aj(a),console.error("Error updating role:",b),await z.SweetAlert.error("Update Failed",a)}},aq=async(a,b)=>{if((await z.SweetAlert.confirm("Delete Role",`Are you sure you want to delete the role "${b}"? This action cannot be undone.`,"Yes, delete it!","Cancel","warning")).isConfirmed)try{aj(null),z.SweetAlert.loading("Deleting...","Please wait while we delete the role."),await y.deleteRole(a),await al(),z.SweetAlert.close(),await z.SweetAlert.success("Deleted!","Role has been deleted successfully.")}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to delete role";aj(a),console.error("Error deleting role:",b),await z.SweetAlert.error("Delete Failed",a)}},ar=async()=>{if(!W||0===ag.size)return void aj("Please select at least one permission");try{aj(null),z.SweetAlert.loading("Adding...","Please wait while we add the permissions.");let a=Array.from(ag).map(a=>y.addPermissionToRole(W.id,{permissionName:a,resource:ae.resource||void 0}));await Promise.all(a),await al(),z.SweetAlert.close(),await z.SweetAlert.success("Added!",`${ag.size} permission(s) have been added to the role successfully.`),ah(new Set),af({permissionName:"",resource:""})}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to add permission";aj(a),console.error("Error adding permission:",b),await z.SweetAlert.error("Add Failed",a)}},as=a=>{ah(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},at=async(a,b,c)=>{if((await z.SweetAlert.confirm("Remove Permission",`Are you sure you want to remove the permission "${c}" from this role?`,"Yes, remove it!","Cancel","warning")).isConfirmed)try{aj(null),z.SweetAlert.loading("Removing...","Please wait while we remove the permission."),await y.removePermissionFromRole(a,b),await al(),z.SweetAlert.close(),await z.SweetAlert.success("Removed!","Permission has been removed from the role successfully.")}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to remove permission";aj(a),console.error("Error removing permission:",b),await z.SweetAlert.error("Remove Failed",a)}},au=async a=>{if(G)try{aj(null),z.SweetAlert.loading("Assigning...","Please wait while we assign the role."),await y.assignRoleToUser(G.id,a),await ak(),z.SweetAlert.close(),await z.SweetAlert.success("Assigned!","Role has been assigned to the user successfully."),N(!1)}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to assign role";aj(a),console.error("Error assigning role:",b),await z.SweetAlert.error("Assign Failed",a)}},av=async(a,b)=>{if((await z.SweetAlert.confirm("Remove Role",`Are you sure you want to remove the role "${b}" from this user?`,"Yes, remove it!","Cancel","warning")).isConfirmed&&G)try{aj(null),z.SweetAlert.loading("Removing...","Please wait while we remove the role."),await y.removeRoleFromUser(G.id,a),await ak(),z.SweetAlert.close(),await z.SweetAlert.success("Removed!","Role has been removed from the user successfully.")}catch(b){z.SweetAlert.close();let a=b instanceof Error?b.message:"Failed to remove role";aj(a),console.error("Error removing role:",b),await z.SweetAlert.error("Remove Failed",a)}},aw=()=>{let a=new Map;return S.forEach(b=>{b.permissions.forEach(b=>{let c=b.resource?`${b.permissionName}::${b.resource}`:b.permissionName;a.has(c)||a.set(c,{permissionName:b.permissionName,resource:b.resource||void 0})})}),Array.from(a.values()).map(a=>{let b=a.resource?`${a.permissionName} (${a.resource})`:a.permissionName;return{value:a.permissionName,label:b,resource:a.resource}}).sort((a,b)=>a.label.localeCompare(b.label))},ax=()=>{L(!1),H(null),R({permissionName:"",resource:"",description:""})},ay=()=>{Z(!1),ad({name:"",displayName:"",description:""})},az=()=>{_(!1),X(null),ad({name:"",displayName:"",description:""})},aA=()=>{ab(!1),X(null),af({permissionName:"",resource:""}),ah(new Set)},aB=C.filter(a=>a.email.toLowerCase().includes(I.toLowerCase())||a.name?.toLowerCase().includes(I.toLowerCase())),aC=S.filter(a=>a.name.toLowerCase().includes(I.toLowerCase())||a.displayName.toLowerCase().includes(I.toLowerCase()));return E&&"users"===a?(0,b.jsxs)(g.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(v.default,{}),(0,b.jsx)(c.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsxs)(e.VStack,{gap:"4",children:[(0,b.jsx)(h.Spinner,{size:"xl",color:"orange.500"}),(0,b.jsx)(o.Typography,{color:"gray.600",children:"Loading users and permissions..."})]})})]}):U&&"roles"===a?(0,b.jsxs)(g.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(v.default,{}),(0,b.jsx)(c.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsxs)(e.VStack,{gap:"4",children:[(0,b.jsx)(h.Spinner,{size:"xl",color:"orange.500"}),(0,b.jsx)(o.Typography,{color:"gray.600",children:"Loading roles..."})]})})]}):(0,b.jsxs)(g.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(v.default,{}),(0,b.jsxs)(c.Box,{flex:"1",ml:"240px",children:[(0,b.jsx)(c.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",py:"6",children:(0,b.jsx)(d.Container,{maxW:"8xl",children:(0,b.jsx)(g.Flex,{justify:"space-between",align:"center",children:(0,b.jsxs)(f.HStack,{gap:"3",align:"center",children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiLock,{size:24,color:"#FF6B35"})}),(0,b.jsxs)(e.VStack,{align:"start",gap:"1",children:[(0,b.jsx)(o.Typography,{as:"h1",fontSize:"2xl",fontWeight:"bold",color:"black",children:"Rules and Permissions"}),(0,b.jsx)(o.Typography,{color:"black",fontSize:"md",children:"Manage roles, permissions, and user access"})]})]})})})}),ai&&(0,b.jsx)(d.Container,{maxW:"8xl",py:"4",children:(0,b.jsx)(s.AlertBar,{status:"error",title:"Error!",description:ai,icon:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiLock,{size:20})})})}),(0,b.jsx)(d.Container,{maxW:"8xl",py:"6",children:(0,b.jsxs)(l.Tabs.Root,{value:a,onValueChange:a=>x(a.value),children:[(0,b.jsxs)(l.Tabs.List,{children:[(0,b.jsx)(l.Tabs.Trigger,{value:"roles",children:"Roles"}),(0,b.jsx)(l.Tabs.Trigger,{value:"users",children:"Users"})]}),(0,b.jsx)(l.Tabs.Content,{value:"roles",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"stretch",mt:"4",children:[(0,b.jsxs)(g.Flex,{justify:"space-between",align:"center",children:[(0,b.jsx)(c.Box,{flex:"1",maxW:"400px",mr:"4",children:(0,b.jsx)(n.Search,{placeholder:"Search roles by name...",onSearchChange:a=>J(a)})}),(0,b.jsxs)(p.Button,{variant:"primary",onClick:()=>{ad({name:"",displayName:"",description:""}),Z(!0)},children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiPlus,{size:16})}),"Create Role"]})]}),0===aC.length?(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"8",textAlign:"center",children:(0,b.jsxs)(e.VStack,{gap:"2",children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiShield,{size:32,color:"#A0AEC0"})}),(0,b.jsx)(o.Typography,{color:"black",children:"No roles found"})]})}):(0,b.jsx)(k.SimpleGrid,{columns:{base:1,lg:2},gap:"6",children:aC.map(a=>(0,b.jsx)(c.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"#E5E7EB",p:"6",_hover:{boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",borderColor:"#F05423"},transition:"all 0.2s",children:(0,b.jsxs)(e.VStack,{align:"stretch",gap:"4",children:[(0,b.jsxs)(g.Flex,{justify:"space-between",align:"start",children:[(0,b.jsxs)(e.VStack,{align:"start",gap:"2",flex:"1",children:[(0,b.jsx)(o.Typography,{fontSize:"xl",fontWeight:"bold",color:"#111827",children:a.displayName}),(0,b.jsx)(o.Typography,{fontSize:"sm",color:"#6B7280",fontFamily:"mono",children:a.name}),a.description&&(0,b.jsx)(o.Typography,{fontSize:"sm",color:"#4B5563",mt:"1",lineHeight:"1.5",children:a.description})]}),(0,b.jsx)(q.Tag,{variant:a.isActive?"success":"inactive",style:{backgroundColor:a.isActive?"#10B981":"#EF4444",color:"white",padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"600"},children:a.isActive?"Active":"Inactive"})]}),(0,b.jsxs)(c.Box,{bg:"#F9FAFB",borderRadius:"md",p:"4",border:"1px",borderColor:"#E5E7EB",children:[(0,b.jsxs)(o.Typography,{fontSize:"sm",fontWeight:"semibold",color:"#111827",mb:"3",children:["Permissions (",a.permissions.length,")"]}),0===a.permissions.length?(0,b.jsx)(q.Tag,{variant:"info",size:"md",style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"6px 12px",borderRadius:"6px",fontSize:"13px"},children:"No permissions"}):(0,b.jsx)(c.Box,{maxH:"120px",overflowY:"auto",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:(0,b.jsxs)(f.HStack,{gap:"2",wrap:"wrap",children:[a.permissions.slice(0,8).map(a=>(0,b.jsxs)(q.Tag,{variant:"info",size:"md",style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500",border:"1px solid #E0E7FF"},children:[a.permissionName,a.resource&&` (${a.resource})`]},a.id)),a.permissions.length>8&&(0,b.jsxs)(q.Tag,{variant:"info",size:"md",style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"4px 10px",borderRadius:"6px",fontSize:"12px",fontWeight:"500"},children:["+",a.permissions.length-8," more"]})]})})]}),(0,b.jsxs)(f.HStack,{gap:"2",justify:"flex-end",pt:"2",borderTop:"1px",borderColor:"#E5E7EB",children:[(0,b.jsxs)(p.Button,{size:"sm",variant:"primary",onClick:()=>{let b;return X(a),af({permissionName:"",resource:""}),b=new Set,void(a.permissions&&a.permissions.length>0&&a.permissions.forEach(a=>{let c=a.permissionName||a.permission_name||a.PermissionName;c&&b.add(c)}),ah(b),ab(!0))},children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiPlus,{size:16})}),"Manage Permissions"]}),(0,b.jsxs)(p.Button,{size:"sm",variant:"secondary",onClick:()=>{X(a),ad({name:a.name,displayName:a.displayName,description:a.description||""}),_(!0)},style:{backgroundColor:"white",color:"#374151",border:"1px solid #D1D5DB",fontWeight:"500",padding:"8px 16px",borderRadius:"6px"},children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiEdit3,{size:16})}),"Edit"]}),(0,b.jsx)(p.Button,{size:"sm",variant:"ghost",onClick:()=>aq(a.id,a.displayName),style:{backgroundColor:"transparent",color:"#EF4444",fontWeight:"500",padding:"8px 12px",borderRadius:"6px"},_hover:{bg:"#FEF2F2"},children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiTrash2,{size:16})})})]})]})},a.id))})]})}),(0,b.jsx)(l.Tabs.Content,{value:"users",children:(0,b.jsxs)(e.VStack,{gap:"6",align:"stretch",mt:"4",children:[(0,b.jsx)(c.Box,{bg:"white",borderRadius:"lg",border:"1px",borderColor:"#E5E7EB",p:"4",boxShadow:"sm",children:(0,b.jsx)(n.Search,{placeholder:"Search users by email or name...",onSearchChange:a=>J(a)})}),0===aB.length?(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"8",textAlign:"center",children:(0,b.jsxs)(e.VStack,{gap:"2",children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiUser,{size:32,color:"#A0AEC0"})}),(0,b.jsx)(o.Typography,{color:"black",children:"No users found"})]})}):(0,b.jsx)(e.VStack,{gap:"4",align:"stretch",children:aB.map(a=>(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"#E5E7EB",p:"8",boxShadow:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",_hover:{boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",borderColor:"#F05423",transform:"translateY(-2px)"},transition:"all 0.3s ease",children:(0,b.jsxs)(g.Flex,{direction:"column",gap:"6",children:[(0,b.jsxs)(g.Flex,{justify:"space-between",align:"start",pb:"4",borderBottom:"2px",borderColor:"#F3F4F6",children:[(0,b.jsxs)(e.VStack,{align:"start",gap:"3",flex:"1",children:[(0,b.jsxs)(f.HStack,{gap:"3",align:"center",children:[(0,b.jsx)(c.Box,{bg:"#FEF3F2",borderRadius:"full",p:"2",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiMail,{size:20,color:"#F05423"})})}),(0,b.jsxs)(e.VStack,{align:"start",gap:"0",children:[(0,b.jsx)(o.Typography,{fontSize:"xl",fontWeight:"bold",color:"#111827",children:a.email}),a.name&&(0,b.jsx)(o.Typography,{color:"#6B7280",fontSize:"sm",fontWeight:"400",children:a.name})]})]}),(0,b.jsxs)(f.HStack,{gap:"6",mt:"2",children:[(0,b.jsxs)(c.Box,{children:[(0,b.jsx)(o.Typography,{fontSize:"xs",color:"#9CA3AF",mb:"1",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",children:"First Login"}),(0,b.jsx)(o.Typography,{fontSize:"sm",color:"#111827",fontWeight:"600",children:a.firstLoginAt?new Date(a.firstLoginAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never"})]}),(0,b.jsxs)(c.Box,{children:[(0,b.jsx)(o.Typography,{fontSize:"xs",color:"#9CA3AF",mb:"1",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px",children:"Last Login"}),(0,b.jsx)(o.Typography,{fontSize:"sm",color:"#111827",fontWeight:"600",children:a.lastLoginAt?new Date(a.lastLoginAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"Never"})]})]})]}),(0,b.jsxs)(f.HStack,{gap:"2",children:[(0,b.jsxs)(p.Button,{size:"sm",variant:"secondary",onClick:()=>{H(a),N(!0)},style:{backgroundColor:"white",color:"#374151",border:"1px solid #D1D5DB",fontWeight:"600",padding:"10px 18px",borderRadius:"8px",fontSize:"14px"},_hover:{backgroundColor:"#F9FAFB",borderColor:"#9CA3AF"},children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiPlus,{size:16})}),"Assign Role"]}),(0,b.jsxs)(p.Button,{size:"sm",variant:"primary",onClick:()=>{H(a),R({permissionName:"",resource:"",description:""}),L(!0),0===S.length&&al()},style:{fontWeight:"600",padding:"10px 18px",borderRadius:"8px",fontSize:"14px"},children:[(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiPlus,{size:16})}),"Grant Permission"]})]})]}),(0,b.jsxs)(c.Box,{children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",mb:"3",children:[(0,b.jsx)(o.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",textTransform:"uppercase",letterSpacing:"0.5px",children:"Roles"}),(0,b.jsx)(q.Tag,{style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:a.roles.length})]}),0===a.roles.length?(0,b.jsx)(c.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",border:"1px dashed #D1D5DB",textAlign:"center",children:(0,b.jsx)(o.Typography,{color:"#9CA3AF",fontSize:"sm",children:"No roles assigned"})}):(0,b.jsx)(f.HStack,{gap:"2",wrap:"wrap",children:a.roles.map(a=>(0,b.jsxs)(f.HStack,{gap:"2",bg:"#EEF2FF",borderRadius:"lg",p:"2",border:"1px solid #E0E7FF",_hover:{bg:"#E0E7FF"},transition:"all 0.2s",children:[(0,b.jsx)(q.Tag,{variant:"info",size:"md",style:{backgroundColor:"transparent",color:"#4F46E5",padding:"0",fontSize:"13px",fontWeight:"600",border:"none"},children:a.roleDisplayName}),(0,b.jsx)(p.Button,{size:"sm",variant:"ghost",onClick:()=>av(a.id,a.roleDisplayName),style:{minWidth:"auto",padding:"2px 4px",backgroundColor:"transparent",height:"20px",width:"20px"},_hover:{bg:"#FEF2F2"},children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:12,color:"#EF4444"})})})]},a.id))})]}),(0,b.jsxs)(c.Box,{children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",mb:"3",children:[(0,b.jsx)(o.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",textTransform:"uppercase",letterSpacing:"0.5px",children:"Permissions"}),(0,b.jsx)(q.Tag,{style:{backgroundColor:"#FEF3C7",color:"#92400E",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:a.permissions.filter(a=>a.isActive).length})]}),0===a.permissions.filter(a=>a.isActive).length?(0,b.jsx)(c.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",border:"1px dashed #D1D5DB",textAlign:"center",children:(0,b.jsx)(o.Typography,{color:"#9CA3AF",fontSize:"sm",children:"No permissions assigned"})}):(0,b.jsx)(c.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",border:"1px solid #E5E7EB",children:(0,b.jsxs)(c.Box,{maxH:"240px",overflowY:"auto",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:[(0,b.jsx)(k.SimpleGrid,{columns:{base:2,md:3,lg:4},gap:"2",children:a.permissions.filter(a=>a.isActive).slice(0,24).map(a=>(0,b.jsxs)(f.HStack,{gap:"1",bg:"white",borderRadius:"md",p:"2",border:"1px solid #E5E7EB",justify:"space-between",_hover:{borderColor:"#F05423",bg:"#FEF3F2"},transition:"all 0.2s",children:[(0,b.jsx)(c.Box,{flex:"1",minW:"0",children:(0,b.jsxs)(o.Typography,{fontSize:"12px",fontWeight:"500",color:"#111827",title:a.permissionName+(a.resource?` (${a.resource})`:""),style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[a.permissionName,a.resource&&(0,b.jsxs)("span",{style:{color:"#6B7280",fontSize:"11px"},children:[" ","(",a.resource,")"]})]})}),(0,b.jsx)(p.Button,{size:"sm",variant:"ghost",onClick:()=>an(a.id,a.permissionName),style:{minWidth:"auto",padding:"2px 4px",backgroundColor:"transparent",flexShrink:0,height:"20px",width:"20px"},_hover:{bg:"#FEF2F2"},children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:12,color:"#EF4444"})})})]},a.id))}),a.permissions.filter(a=>a.isActive).length>24&&(0,b.jsx)(c.Box,{mt:"3",textAlign:"center",children:(0,b.jsxs)(q.Tag,{variant:"info",size:"md",style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"6px 14px",borderRadius:"8px",fontSize:"13px",fontWeight:"600"},children:["+",a.permissions.filter(a=>a.isActive).length-24," more permissions"]})})]})})]})]})},a.id))})]})})]})})]}),Y&&(0,b.jsx)(c.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:"1000",display:"flex",alignItems:"center",justifyContent:"center",onClick:ay,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"500px",width:"90%",onClick:a=>a.stopPropagation(),boxShadow:"xl",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"stretch",children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsx)(o.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:"Create Role"}),(0,b.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:ay,children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:16})})})]}),(0,b.jsxs)(j.Field.Root,{required:!0,children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Role Name (Internal)"}),(0,b.jsx)(t.Input,{placeholder:"e.g., admin, reviewer",value:ac.name,onChange:a=>ad({...ac,name:a.target.value}),color:"black"})]}),(0,b.jsxs)(j.Field.Root,{required:!0,children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Display Name"}),(0,b.jsx)(t.Input,{placeholder:"e.g., Administrator, Reviewer",value:ac.displayName,onChange:a=>ad({...ac,displayName:a.target.value}),color:"black"})]}),(0,b.jsxs)(j.Field.Root,{children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Description (Optional)"}),(0,b.jsx)(i.Textarea,{placeholder:"Describe what this role allows...",value:ac.description,onChange:a=>ad({...ac,description:a.target.value}),rows:3,color:"black",_placeholder:{color:"gray.500"}})]}),(0,b.jsxs)(f.HStack,{gap:"3",justify:"flex-end",mt:"4",children:[(0,b.jsx)(p.Button,{variant:"ghost",onClick:ay,children:"Cancel"}),(0,b.jsx)(p.Button,{variant:"primary",onClick:ao,children:"Create Role"})]})]})})}),$&&W&&(0,b.jsx)(c.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:"1000",display:"flex",alignItems:"center",justifyContent:"center",onClick:az,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"500px",width:"90%",onClick:a=>a.stopPropagation(),boxShadow:"xl",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"stretch",children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsx)(o.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:"Edit Role"}),(0,b.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:az,children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:16})})})]}),(0,b.jsxs)(j.Field.Root,{required:!0,children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Display Name"}),(0,b.jsx)(t.Input,{value:ac.displayName,onChange:a=>ad({...ac,displayName:a.target.value}),color:"black"})]}),(0,b.jsxs)(j.Field.Root,{children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Description (Optional)"}),(0,b.jsx)(i.Textarea,{value:ac.description,onChange:a=>ad({...ac,description:a.target.value}),rows:3,color:"black"})]}),(0,b.jsxs)(f.HStack,{gap:"3",justify:"flex-end",mt:"4",children:[(0,b.jsx)(p.Button,{variant:"ghost",onClick:az,children:"Cancel"}),(0,b.jsx)(p.Button,{variant:"primary",onClick:ap,children:"Update Role"})]})]})})}),aa&&W&&(0,b.jsx)(c.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",onClick:aA,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"800px",maxH:"90vh",width:"90%",onClick:a=>a.stopPropagation(),boxShadow:"xl",overflowY:"auto",style:{maxHeight:"90vh",overflowY:"auto",zIndex:1e4},children:(0,b.jsxs)(e.VStack,{gap:"4",align:"stretch",children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsxs)(o.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:["Manage Permissions - ",W.displayName]}),(0,b.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:aA,children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:16})})})]}),(0,b.jsxs)(c.Box,{children:[(0,b.jsxs)(o.Typography,{fontSize:"sm",fontWeight:"bold",mb:"3",style:{color:"#000000",fontSize:"14px",fontWeight:"600",WebkitTextFillColor:"#000000"},children:["Current Permissions (",W.permissions.length,"):"]}),0===W.permissions.length?(0,b.jsx)(c.Box,{p:"4",bg:"gray.50",borderRadius:"md",border:"1px",borderColor:"gray.200",mb:"4",children:(0,b.jsx)(o.Typography,{style:{color:"#000000",fontSize:"14px",WebkitTextFillColor:"#000000"},children:"No permissions assigned"})}):(0,b.jsx)(c.Box,{maxH:"250px",overflowY:"auto",border:"1px",borderColor:"#E5E7EB",borderRadius:"md",p:"3",bg:"white",mb:"4",className:"current-permissions-list",style:{maxHeight:"250px",overflowY:"auto",backgroundColor:"#FFFFFF",border:"1px solid #E5E7EB",color:"#000000"},children:(0,b.jsx)(k.SimpleGrid,{columns:2,gap:"2",children:W.permissions.map(a=>(0,b.jsxs)(f.HStack,{justify:"space-between",p:"2.5",bg:"#F9FAFB",borderRadius:"md",border:"1px",borderColor:"#E5E7EB",_hover:{bg:"#F3F4F6",borderColor:"#F05423"},transition:"all 0.2s","data-permission-item":!0,style:{backgroundColor:"#F9FAFB",border:"1px solid #E5E7EB",padding:"10px",color:"#000000"},children:[(0,b.jsx)(c.Box,{flex:"1",style:{color:"#000000"},children:(0,b.jsxs)("span",{style:{color:"#000000 !important",fontSize:"13px",fontWeight:"500",lineHeight:"20px",WebkitTextFillColor:"#000000 !important",display:"block",fontFamily:"inherit"},children:[a.permissionName||a.permission_name||"Unnamed Permission",(a.resource||a.Resource)&&(0,b.jsxs)("span",{style:{color:"#000000 !important",fontSize:"11px",marginLeft:"6px",fontWeight:"400",opacity:"0.7",WebkitTextFillColor:"#000000 !important",fontFamily:"inherit"},children:["(",a.resource||a.Resource,")"]})]})}),(0,b.jsx)(p.Button,{size:"sm",variant:"ghost",onClick:b=>{b.stopPropagation(),at(W.id,a.id,a.permissionName)},minW:"auto",p:"1",_hover:{bg:"red.50"},style:{minWidth:"auto",padding:"4px",backgroundColor:"transparent"},children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:14,color:"#EF4444"})})})]},a.id))})})]}),(0,b.jsxs)(c.Box,{borderTop:"2px",borderColor:"#E5E7EB",pt:"6",mt:"6",children:[(0,b.jsx)(o.Typography,{fontSize:"md",fontWeight:"bold",color:"#111827",mb:"4",children:"Add Permissions"}),(0,b.jsxs)(j.Field.Root,{mb:"4",children:[(0,b.jsx)(j.Field.Label,{children:"Resource (Optional)"}),(0,b.jsxs)("select",{value:ae.resource,onChange:a=>af({...ae,resource:a.target.value}),style:{width:"100%",padding:"8px 12px",fontSize:"14px",borderRadius:"6px",border:"1px solid #E2E8F0",backgroundColor:"white",color:"#000000",WebkitAppearance:"none",MozAppearance:"none",appearance:"none"},children:[(0,b.jsx)("option",{value:"",style:{color:"#000000",backgroundColor:"white"},children:"None"}),B.map(a=>(0,b.jsx)("option",{value:a.value,style:{color:"#000000",backgroundColor:"white"},children:a.label},a.value))]})]}),(0,b.jsx)(c.Box,{maxH:"450px",overflowY:"auto",border:"1px",borderColor:"#E5E7EB",borderRadius:"lg",p:"5",bg:"white",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:(0,b.jsx)(e.VStack,{gap:"5",align:"stretch",children:A.map(a=>(0,b.jsxs)(c.Box,{children:[(0,b.jsx)(o.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",mb:"3",style:{fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px",color:"#6B7280"},children:a.category}),(0,b.jsx)(k.SimpleGrid,{columns:2,gap:"3",children:a.permissions.map(a=>{let d=W?.permissions?.some(b=>(b.permissionName||b.permission_name||b.PermissionName)===a.value)||!1,e=ag.has(a.value),g=d||e;return(0,b.jsxs)(f.HStack,{gap:"3",align:"start",p:"3",borderRadius:"lg",bg:d?"#FEF3F2":"white",border:d?"2px solid #F05423":"1px solid #E5E7EB",_hover:d?{bg:"#FEF3F2"}:{bg:"#F9FAFB",borderColor:"#D1D5DB"},transition:"all 0.2s",style:{boxShadow:d?"0 1px 3px 0 rgba(240, 84, 35, 0.1)":"none"},children:[(0,b.jsx)(c.Box,{flexShrink:0,onClick:b=>{b.stopPropagation(),d||as(a.value)},style:{paddingTop:"2px",cursor:d?"default":"pointer",pointerEvents:"auto",position:"relative",zIndex:10},children:(0,b.jsx)(m.Checkbox.Root,{checked:g,onCheckedChange:b=>{d||as(a.value)},colorScheme:"orange",id:`permission-checkbox-${a.value}`,name:`permission-checkbox-${a.value}`,value:a.value,onClick:b=>{b.stopPropagation(),d||as(a.value)},style:{cursor:d?"default":"pointer",pointerEvents:"auto",position:"relative",zIndex:11},children:(0,b.jsx)(m.Checkbox.Control,{onClick:b=>{b.stopPropagation(),d||as(a.value)},style:{backgroundColor:g?"#F05423":"white",borderColor:g?"#F05423":"#D1D5DB",borderWidth:"2px",width:"20px",height:"20px",borderRadius:"4px",cursor:d?"default":"pointer",pointerEvents:"auto",position:"relative",zIndex:12},children:(0,b.jsx)(m.Checkbox.Indicator,{style:{color:"white",fontSize:"14px",fontWeight:"bold"},children:"✓"})})})}),(0,b.jsx)(c.Box,{flex:"1",onClick:b=>{d||(b.stopPropagation(),as(a.value))},style:{cursor:d?"default":"pointer",pointerEvents:"auto"},children:(0,b.jsxs)(o.Typography,{fontSize:"sm",cursor:d?"default":"pointer",style:{color:d?"#F05423":"#111827",fontWeight:d?"600":"500",pointerEvents:"auto",lineHeight:"1.5"},children:[a.label,d&&(0,b.jsx)("span",{style:{color:"#F05423",fontSize:"11px",marginLeft:"8px",fontWeight:"600",backgroundColor:"#FEF3F2",padding:"3px 8px",borderRadius:"6px",border:"1px solid #F05423"},children:"✓ Assigned"})]})})]},a.value)})}),(0,b.jsx)(c.Box,{borderTop:"1px",borderColor:"gray.200",mt:"3"})]},a.category))})}),(0,b.jsx)(c.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"4",mb:"4",border:"1px",borderColor:"#E5E7EB",children:(0,b.jsx)(o.Typography,{fontSize:"sm",color:"#6B7280",fontWeight:"500",children:ag.size>0?(0,b.jsxs)("span",{style:{color:"#F05423",fontWeight:"600"},children:[ag.size," permission",1!==ag.size?"s":""," selected"]}):"No permissions selected"})}),(0,b.jsx)(p.Button,{variant:"primary",onClick:ar,disabled:0===ag.size,width:"full",children:(0,b.jsxs)(o.Typography,{as:"span",fontWeight:"600",children:["Add ",ag.size>0?`${ag.size} `:"","Permission",1!==ag.size?"s":""]})})]}),(0,b.jsx)(f.HStack,{gap:"3",justify:"flex-end",mt:"4",children:(0,b.jsx)(p.Button,{variant:"primary",onClick:aA,children:(0,b.jsx)(o.Typography,{as:"span",fontWeight:"600",children:"Close"})})})]})})}),M&&G&&(0,b.jsx)(c.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",onClick:()=>N(!1),style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",p:"8",maxW:"700px",maxH:"90vh",width:"90%",onClick:a=>a.stopPropagation(),boxShadow:"2xl",overflowY:"auto",style:{maxHeight:"90vh",overflowY:"auto",zIndex:1e4},children:(0,b.jsxs)(e.VStack,{gap:"6",align:"stretch",children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",pb:"4",borderBottom:"2px",borderColor:"#F3F4F6",children:[(0,b.jsx)(o.Typography,{fontSize:"2xl",fontWeight:"bold",color:"#111827",children:"Assign Role"}),(0,b.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:()=>N(!1),style:{minWidth:"auto",padding:"8px"},_hover:{bg:"#F3F4F6"},children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:20,color:"#6B7280"})})})]}),(0,b.jsx)(c.Box,{bg:"#FEF3F2",borderRadius:"lg",p:"4",border:"1px",borderColor:"#F05423",children:(0,b.jsxs)(f.HStack,{gap:"3",align:"center",children:[(0,b.jsx)(c.Box,{bg:"#F05423",borderRadius:"full",p:"2",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiMail,{size:18,color:"white"})})}),(0,b.jsxs)(e.VStack,{align:"start",gap:"0",children:[(0,b.jsx)(o.Typography,{fontSize:"xs",color:"#92400E",fontWeight:"600",textTransform:"uppercase",letterSpacing:"0.5px",children:"User"}),(0,b.jsx)(o.Typography,{fontWeight:"700",fontSize:"md",color:"#111827",children:G.email}),G.name&&(0,b.jsx)(o.Typography,{fontSize:"sm",color:"#6B7280",mt:"0.5",children:G.name})]})]})}),(0,b.jsxs)(c.Box,{children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",mb:"4",children:[(0,b.jsx)(o.Typography,{fontSize:"sm",fontWeight:"bold",color:"#111827",textTransform:"uppercase",letterSpacing:"0.5px",children:"Available Roles"}),(0,b.jsxs)(q.Tag,{style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"600"},children:[S.filter(a=>a.isActive&&!G.roles.some(b=>b.roleId===a.id)).length," available"]})]}),0===S.filter(a=>a.isActive&&!G.roles.some(b=>b.roleId===a.id)).length?(0,b.jsx)(c.Box,{bg:"#F9FAFB",borderRadius:"lg",p:"6",border:"1px dashed #D1D5DB",textAlign:"center",children:(0,b.jsx)(o.Typography,{color:"#9CA3AF",fontSize:"sm",children:"No available roles to assign. All roles have been assigned to this user."})}):(0,b.jsx)(k.SimpleGrid,{columns:1,gap:"3",maxH:"450px",overflowY:"auto",pr:"2",style:{scrollbarWidth:"thin",scrollbarColor:"#D1D5DB #F9FAFB"},children:S.filter(a=>a.isActive&&!G.roles.some(b=>b.roleId===a.id)).map(a=>(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",p:"5",border:"2px",borderColor:"#E5E7EB",cursor:"pointer",position:"relative",_hover:{borderColor:"#F05423",bg:"#FEF3F2",boxShadow:"0 4px 6px -1px rgba(240, 84, 35, 0.1)"},transition:"all 0.2s ease",onClick:()=>au(a.id),children:(0,b.jsxs)(g.Flex,{justify:"space-between",align:"start",gap:"4",children:[(0,b.jsxs)(e.VStack,{align:"start",gap:"2",flex:"1",minW:"0",children:[(0,b.jsx)(o.Typography,{fontWeight:"700",fontSize:"lg",color:"#111827",lineHeight:"1.3",children:a.displayName}),a.description&&(0,b.jsx)(o.Typography,{fontSize:"sm",color:"#6B7280",lineHeight:"1.5",children:a.description}),(0,b.jsxs)(f.HStack,{gap:"2",mt:"2",wrap:"wrap",children:[(0,b.jsxs)(q.Tag,{style:{backgroundColor:"#EEF2FF",color:"#4F46E5",padding:"5px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"600",border:"1px solid #E0E7FF"},children:[a.permissions?.length||0," permissions"]}),(0,b.jsx)(q.Tag,{style:{backgroundColor:"#F3F4F6",color:"#6B7280",padding:"5px 12px",borderRadius:"8px",fontSize:"12px",fontWeight:"500",fontFamily:"monospace"},children:a.name})]})]}),(0,b.jsx)(c.Box,{bg:"#F05423",borderRadius:"full",p:"3",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,style:{width:"40px",height:"40px"},_hover:{bg:"#E04513",transform:"scale(1.1)"},transition:"all 0.2s",children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiPlus,{size:20,color:"white"})})})]})},a.id))})]}),(0,b.jsx)(f.HStack,{gap:"3",justify:"flex-end",pt:"4",borderTop:"2px",borderColor:"#F3F4F6",children:(0,b.jsx)(p.Button,{variant:"ghost",onClick:()=>N(!1),style:{backgroundColor:"white",color:"#374151",border:"1px solid #D1D5DB",fontWeight:"600",padding:"10px 20px",borderRadius:"8px"},_hover:{backgroundColor:"#F9FAFB",borderColor:"#9CA3AF"},children:"Cancel"})})]})})}),K&&G&&(0,b.jsx)(c.Box,{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",bg:"rgba(0, 0, 0, 0.6)",zIndex:"1000",display:"flex",alignItems:"center",justifyContent:"center",onClick:ax,style:{backdropFilter:"blur(8px)",WebkitBackdropFilter:"blur(8px)"},children:(0,b.jsx)(c.Box,{bg:"white",borderRadius:"xl",p:"6",maxW:"500px",width:"90%",onClick:a=>a.stopPropagation(),boxShadow:"xl",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"stretch",children:[(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",children:[(0,b.jsx)(o.Typography,{fontSize:"xl",fontWeight:"bold",color:"black",children:"Grant Permission"}),(0,b.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:ax,children:(0,b.jsx)(r.IconWrapper,{children:(0,b.jsx)(u.FiX,{size:16})})})]}),(0,b.jsxs)(c.Box,{children:[(0,b.jsx)(o.Typography,{fontSize:"sm",color:"black",mb:"2",children:"User:"}),(0,b.jsx)(o.Typography,{fontWeight:"medium",fontSize:"md",color:"black",children:G.email})]}),(0,b.jsxs)(j.Field.Root,{required:!0,children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Permission Name"}),0===S.length?(0,b.jsx)(c.Box,{p:"4",bg:"gray.50",borderRadius:"md",border:"1px",borderColor:"gray.200",children:(0,b.jsx)(o.Typography,{fontSize:"sm",color:"gray.600",children:"No roles found. Please create a role with permissions first."})}):0===aw().length?(0,b.jsx)(c.Box,{p:"4",bg:"gray.50",borderRadius:"md",border:"1px",borderColor:"gray.200",children:(0,b.jsx)(o.Typography,{fontSize:"sm",color:"gray.600",children:"No permissions found in existing roles. Please add permissions to roles first."})}):(0,b.jsxs)("select",{value:Q.resource?`${Q.permissionName}::${Q.resource}`:Q.permissionName,onChange:a=>{let b=aw().find(b=>(b.resource?`${b.value}::${b.resource}`:b.value)===a.target.value);b&&R({permissionName:b.value,resource:b.resource||"",description:""})},style:{width:"100%",padding:"8px 12px",fontSize:"14px",borderRadius:"6px",border:"1px solid #E2E8F0",backgroundColor:"white",color:"#000000"},children:[(0,b.jsx)("option",{value:"",style:{color:"#000000",backgroundColor:"white"},children:"Select a permission from existing roles"}),aw().map((a,c)=>{let d=a.resource?`${a.value}::${a.resource}`:a.value;return(0,b.jsx)("option",{value:d,style:{color:"#000000",backgroundColor:"white"},children:a.label},`${a.value}-${a.resource||"none"}-${c}`)})]})]}),(0,b.jsxs)(j.Field.Root,{children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Resource (Optional)"}),(0,b.jsx)(t.Input,{placeholder:"Resource (auto-filled from selected permission)",value:Q.resource,onChange:a=>R({...Q,resource:a.target.value}),color:"black"}),(0,b.jsx)(o.Typography,{fontSize:"xs",color:"gray.500",mt:"1",children:"Resource is automatically set from the selected permission if available, but can be overridden if needed."})]}),(0,b.jsxs)(j.Field.Root,{children:[(0,b.jsx)(j.Field.Label,{color:"black",fontWeight:"medium",children:"Description (Optional)"}),(0,b.jsx)(i.Textarea,{placeholder:"Describe what this permission allows...",value:Q.description,onChange:a=>R({...Q,description:a.target.value}),rows:3,color:"black",_placeholder:{color:"black"}})]}),(0,b.jsxs)(f.HStack,{gap:"3",justify:"flex-end",mt:"4",children:[(0,b.jsx)(p.Button,{variant:"ghost",onClick:ax,children:"Cancel"}),(0,b.jsx)(p.Button,{variant:"primary",onClick:am,disabled:O,children:O?"Granting...":"Grant Permission"})]})]})})})]})}a.s(["default",()=>C],785535)}];

//# debugId=c46645f4-cea3-dc4f-79b2-c99e6af4db7f
//# sourceMappingURL=src_app_rules-and-permissions_page_tsx_a1f91683._.js.map