;!function(){try { var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&((e._debugIds|| (e._debugIds={}))[n]="a000a652-489a-5184-6449-341c006cee54")}catch(e){}}();
module.exports=[246665,a=>{"use strict";var b=a.i(187924),c=a.i(247290),d=a.i(566701),e=a.i(480916),f=a.i(688294),g=a.i(397225),h=a.i(271466),i=a.i(332938),j=a.i(154462),k=a.i(2488),l=a.i(547203),m=a.i(727348),n=a.i(346271),o=a.i(238246),p=a.i(50944),q=a.i(572131),r=a.i(992539),s=a.i(151342),t=a.i(868887),u=a.i(135758);a.i(525985);var v=a.i(831551),w=a.i(259580);function x({field:a,readOnly:d=!0,onDocumentClick:e}){return(0,b.jsxs)(c.Box,{children:[(0,b.jsxs)(v.Typography,{fontSize:"sm",fontWeight:"medium",color:"gray.700",mb:"2",children:[a.label,a.isRequired&&(0,b.jsx)(v.Typography,{as:"span",color:"red.500",ml:"1",children:"*"})]}),(()=>{switch(a.type){case"Text":case"Email":case"Phone":return(0,b.jsx)(u.Input,{value:a.value||"",placeholder:a.placeholder,readOnly:d,type:"Email"===a.type?"email":"Phone"===a.type?"tel":"text",bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});case"Textarea":return(0,b.jsx)(j.Textarea,{value:a.value||"",placeholder:a.placeholder,readOnly:d,rows:4,bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});case"Number":return(0,b.jsx)(u.Input,{value:a.value||"",placeholder:a.placeholder,readOnly:d,type:"number",bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300"});case"Date":return(0,b.jsx)(u.Input,{value:a.value?new Date(a.value).toISOString().split("T")[0]:"",placeholder:a.placeholder||"mm/dd/yyyy",readOnly:d,type:"date",bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});case"Select":case"MultiSelect":if(a.options&&a.options.length>0)if("MultiSelect"===a.type){let c=Array.isArray(a.value)?a.value:a.value?[a.value]:[];return(0,b.jsx)(f.HStack,{wrap:"wrap",gap:"2",children:c.length>0?c.map((c,d)=>{let e=a.options?.find(a=>a.value===c);return(0,b.jsx)(w.Tag,{variant:"info",children:e?.label||c},d)}):(0,b.jsx)(v.Typography,{color:"gray.400",fontSize:"sm",children:"No selection"})})}else{let c=a.options.find(b=>b.value===a.value);return(0,b.jsx)(u.Input,{value:c?.label||a.value||"",placeholder:a.placeholder,readOnly:!0,bg:"gray.50",borderColor:"gray.200"})}return(0,b.jsx)(u.Input,{value:a.value||"",placeholder:a.placeholder,readOnly:d,bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300"});case"Checkbox":return(0,b.jsxs)(f.HStack,{children:[(0,b.jsx)("input",{type:"checkbox",checked:!0===a.value||"true"===a.value,readOnly:d,disabled:d}),(0,b.jsx)(v.Typography,{fontSize:"sm",color:"gray.600",children:!0===a.value||"true"===a.value?"Yes":"No"})]});case"File":let g=null;if(a.value)try{"string"==typeof a.value&&a.value.startsWith("{")?g=JSON.parse(a.value):"object"==typeof a.value&&(g=a.value)}catch(a){}return(0,b.jsx)(c.Box,{children:a.value?(0,b.jsxs)(f.HStack,{gap:"2",children:[(0,b.jsx)(v.Typography,{fontSize:"sm",color:"orange.600",cursor:"pointer",_hover:{textDecoration:"underline"},onClick:()=>{if(e&&g)e(g);else if(g&&g.fileName){let a=(window.location.pathname.match(/\/applications\/([^\/]+)/)||[])[1];a?fetch(`/api/proxy/api/v1/documents/case/${a}`).then(a=>a.json()).then(a=>{let b=Array.isArray(a)?a.find(a=>a.fileName===g.fileName||a.documentNumber===g.requirementCode):null;if(b&&b.storageKey)return fetch(`/api/proxy/api/v1/documents/download/${encodeURIComponent(b.storageKey)}`);throw Error("Document not found")}).then(a=>a.json()).then(a=>{a.url&&window.open(a.url,"_blank")}).catch(a=>{console.error("Error viewing document:",a),alert("Document viewing is not available for this file. Please use the Documents page to view it.")}):alert("Document viewing is not available for this file. Please use the Documents page to view it.")}},children:g?.fileName||("string"==typeof a.value?a.value:"File attached")}),g?.fileSize&&(0,b.jsxs)(v.Typography,{fontSize:"xs",color:"gray.500",children:["(",(g.fileSize/1024/1024).toFixed(2)," MB)"]})]}):(0,b.jsx)(v.Typography,{fontSize:"sm",color:"gray.400",children:"Not provided"})});case"Country":return(0,b.jsx)(u.Input,{value:a.value||"",placeholder:a.placeholder||"Country code",readOnly:d,bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300"});case"Currency":return(0,b.jsx)(u.Input,{value:a.value?"number"==typeof a.value?a.value.toLocaleString("en-US",{style:"currency",currency:"USD"}):a.value:"",placeholder:a.placeholder,readOnly:d,bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300"});case"Address":return(0,b.jsx)(j.Textarea,{value:a.value||"",placeholder:a.placeholder,readOnly:d,rows:3,bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300",borderWidth:"1px",borderRadius:"md",px:"3",py:"2",fontSize:"sm",_readOnly:{cursor:"default",opacity:1}});default:return(0,b.jsx)(u.Input,{value:a.value||"",placeholder:a.placeholder,readOnly:d,bg:d?"gray.50":"white",borderColor:d?"gray.200":"gray.300"})}})(),a.helpText&&(0,b.jsx)(v.Typography,{fontSize:"xs",color:"gray.500",mt:"1.5",children:a.helpText})]})}var y=a.i(986189),z=a.i(492180),A=a.i(898799),B=a.i(832141),C=a.i(652167),D=a.i(138340),E=a.i(255145);let F=(0,n.motion)(c.Box);function G(){let a=(0,p.useParams)(),n=a?.id,[u,G]=(0,q.useState)(1),[H,I]=(0,q.useState)(null),[J,K]=(0,q.useState)(!0),[L,M]=(0,q.useState)(null),[N,O]=(0,q.useState)(""),[P,Q]=(0,q.useState)(""),[R,S]=(0,q.useState)({score:65,factors:[{name:"Business Type",score:70,weight:25},{name:"Geographic Risk",score:80,weight:20},{name:"Volume Risk",score:60,weight:30},{name:"Documentation",score:50,weight:25}]}),[T,U]=(0,q.useState)(!1),[V,W]=(0,q.useState)(!1),[X,Y]=(0,q.useState)(""),[Z,$]=(0,q.useState)(""),[_,aa]=(0,q.useState)(!1),[ab,ac]=(0,q.useState)(!1),[ad,ae]=(0,q.useState)(!1),[af,ag]=(0,q.useState)(null),[ah,ai]=(0,q.useState)(!1),[aj,ak]=(0,q.useState)(null),[al,am]=(0,q.useState)(!1),[an,ao]=(0,q.useState)(null),[ap,aq]=(0,q.useState)(""),[ar,as]=(0,q.useState)(void 0),[at,au]=(0,q.useState)(void 0);(0,q.useEffect)(()=>{aw()},[n]);let av=async a=>{try{if(!a)return void await s.SweetAlert.warning("Document Not Found","Document information is not available.");if(!n)return void await s.SweetAlert.warning("Application Not Found","Cannot find application ID.");E.logger.debug("Fetching documents for case",{caseId:n});let b=await fetch(`/api/proxy/api/v1/documents/case/${n}`);if(!b.ok){let a=await b.text();throw E.logger.error(Error(`Failed to fetch documents: ${b.status}`),"Failed to fetch documents",{tags:{error_type:"documents_fetch_error"},extra:{status:b.status,errorText:a}}),Error(`Failed to fetch documents: ${b.status} ${b.statusText}`)}let c=await b.json();if(E.logger.debug("Documents received",{count:c?.length||0}),!Array.isArray(c)){E.logger.error(Error("Documents response is not an array"),"Invalid documents response",{tags:{error_type:"documents_format_error"},extra:{documents:c}}),await s.SweetAlert.warning("Invalid Response","The server returned an invalid response. Please try again.");return}if(0===c.length){E.logger.warn("No documents found for case",{tags:{warning_type:"no_documents"},extra:{caseId:n}});let b=await fetch("/api/proxy/api/v1/documents?skip=0&take=1000");if(!b.ok)return void await s.SweetAlert.warning("No Documents",`No documents found for this application (ID: ${n}).

Please check if documents have been uploaded.`);{let d=(await b.json()).items||[];E.logger.debug("Found total documents in system",{count:d.length});let e=d.filter(a=>{let b=String(a.caseId||"").toLowerCase(),c=String(n||"").toLowerCase();return b===c||a.caseId===n});if(E.logger.debug("Found documents by caseId match",{count:e.length}),0===e.length&&a?.fileName){let b=a.fileName.toLowerCase(),c=b.substring(0,b.lastIndexOf("."));e=d.filter(a=>{let d=a.fileName?.toLowerCase()||"",e=d.substring(0,d.lastIndexOf("."));if(d===b||d.includes(b)||b.includes(d)||c&&e&&(e===c||e.includes(c)||c.includes(e)))return!0;let f=c.split(/[._-]/).filter(a=>a.length>2),g=e.split(/[._-]/).filter(a=>a.length>2);return!!f.some(a=>g.includes(a))}),E.logger.debug("Found documents by filename",{count:e.length,fileName:a.fileName})}if(0===e.length&&1===d.length&&(E.logger.debug("Only 1 document in system, using it as fallback"),e=d),0===e.length&&d.length>0&&a?.fileName&&/\.(png|jpg|jpeg|gif|bmp|webp|svg)$/i.test(a.fileName)&&(e=d.filter(a=>{let b=a.fileName?.toLowerCase()||"";return/\.(png|jpg|jpeg|gif|bmp|webp|svg)$/i.test(b)}),E.logger.debug("Found image documents as fallback",{count:e.length})),e.length>0)c.push(...e),E.logger.debug("Using fallback documents (caseId may not match)",{documents:c.map(a=>({fileName:a.fileName,caseId:a.caseId,searchingFor:n}))});else{E.logger.debug("All documents in system",{documents:d.map(a=>({fileName:a.fileName,caseId:a.caseId})),searchingFor:n,fileData:a?.fileName});let b=`No documents found for application ${n}.

`;0===d.length?(b+="The document database is empty. ",a?.fileName?b+=`

The application metadata references a file "${a.fileName}", but the document record was deleted (possibly when applications were cleared).

Please re-upload the document if needed.`:b+=`

If you expected documents to be here, they may have been deleted. Please upload new documents.`):b+=`Found ${d.length} total document(s) in system, but none are linked to this application.

If you uploaded a document, it may not be linked to this application. Please check the Documents page to verify.`,await s.SweetAlert.warning("No Documents Found",b);return}}}let d=a.fileName||("string"==typeof a?a:""),e=a.requirementCode,f=c.find(a=>{let b=a.fileName?.toLowerCase()||"",c=d?.toLowerCase()||"";if(a.fileName===d||b===c||b.includes(c)||c.includes(b)||e&&(a.documentNumber===e||a.documentNumber?.includes(e)))return!0;let f=b.substring(b.lastIndexOf(".")),g=c.substring(c.lastIndexOf("."));if(f&&g&&f===g){let a=b.replace(f,""),d=c.replace(g,"");if(a.includes(d)||d.includes(a))return!0}return!1});if(!f&&d){let a=d.toLowerCase().split(/[._-]/);f=c.find(b=>{let c=b.fileName?.toLowerCase()||"";return a.some(a=>a.length>3&&c.includes(a))})}if(!f&&c.length>0&&(f=c[0]),!f||!f.storageKey)return void await s.SweetAlert.warning("Document Not Found",`Could not find document "${d}" in the system. Found ${c.length} document(s) for this application.`);let g=null;try{let a=await fetch(`/api/proxy/api/v1/documents/download/${encodeURIComponent(f.storageKey)}`);if(a.ok){let b=await a.json();E.logger.debug("Download URL response received"),(g=b.downloadUrl||b.DownloadUrl||b.url||b.presignedUrl||b.presignedDownloadUrl||b.downloadURL||("string"==typeof b?b:null)||null)&&f.storageKey?(g=`/api/proxy-document?storageKey=${encodeURIComponent(f.storageKey)}`,E.logger.debug("Using proxy endpoint for document",{downloadUrl:g})):g&&(g=`/api/proxy-document?url=${encodeURIComponent(g)}`,E.logger.debug("Using proxy endpoint with URL",{downloadUrl:g})),E.logger.debug("Extracted download URL",{downloadUrl:g}),g||E.logger.error(Error("Could not extract URL from response"),"Failed to extract download URL",{tags:{error_type:"url_extraction_error"},extra:{downloadData:b}})}else{let b=await a.text();E.logger.warn("Download URL request failed",{tags:{warning_type:"download_url_failed"},extra:{status:a.status,errorText:b}})}}catch(a){E.logger.warn("Failed to get download URL from storage key",{tags:{warning_type:"storage_key_download_failed"},extra:{error:a}})}if(!g&&f.id)try{let a=await fetch(`/api/proxy/api/v1/documents/${f.id}/download`);if(a.ok){let b=await a.json();(g=b.downloadUrl||b.DownloadUrl||b.url||b.presignedUrl||null)&&f.storageKey?g=`/api/proxy-document?storageKey=${encodeURIComponent(f.storageKey)}`:g&&(g=`/api/proxy-document?url=${encodeURIComponent(g)}`),E.logger.debug("Download URL from document ID",{downloadUrl:g})}}catch(a){E.logger.warn("Failed to get download URL from document ID",{tags:{warning_type:"document_id_download_failed"},extra:{error:a}})}if(!g&&f.storageKey)try{let a=await fetch("/api/proxy/api/v1/documents/download-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({storageKey:f.storageKey,bucketName:f.bucketName||"kyb-docs"})});if(a.ok){let b=await a.json();(g=b.downloadUrl||b.DownloadUrl||b.url||b.presignedUrl||b.presignedDownloadUrl||b.downloadURL||null)&&f.storageKey?g=`/api/proxy-document?storageKey=${encodeURIComponent(f.storageKey)}`:g&&(g=`/api/proxy-document?url=${encodeURIComponent(g)}`),E.logger.debug("Download URL from POST endpoint",{downloadUrl:g})}else{let b=await a.text();E.logger.warn("POST download URL request failed",{tags:{warning_type:"post_download_failed"},extra:{status:a.status,errorText:b}})}}catch(a){E.logger.warn("Failed to get download URL from POST endpoint",{tags:{warning_type:"post_endpoint_failed"},extra:{error:a}})}if(!g)throw E.logger.error(Error("All download URL methods failed"),"Failed to get download URL",{tags:{error_type:"all_download_methods_failed"},extra:{document:f}}),Error(`Failed to get download URL for document. StorageKey: ${f.storageKey}, DocumentId: ${f.id}`);aq(f.fileName||d),as(f.type?String(f.type):void 0),au(f.sizeBytes||a.fileSize),ao(g),am(!0)}catch(a){E.logger.error(a,"Error viewing document",{tags:{error_type:"document_view_error"}}),await s.SweetAlert.error("View Failed",a instanceof Error?a.message:"Failed to view document. Please try again.")}},aw=async()=>{try{K(!0),M(null);let a=await fetch(`/api/applications/${n}`);if(!a.ok){if(404===a.status)return void M("Application not found");throw Error(`Failed to fetch application: ${a.status}`)}let b=await a.json();ak(b);let c=b.metadataJson?JSON.parse(b.metadataJson):{},d=c.entity_type_code||c.entityTypeCode||null;d&&("string"==typeof d&&d.includes(",")&&(d=d.split(",")[0].trim()),d=String(d).trim(),""===d&&(d=null)),E.logger.debug("[Application Loader] Entity type code from metadata",{raw:c.entity_type_code||c.entityTypeCode,cleaned:d});let e={id:b.caseId||b.id,legalName:b.businessLegalName||`${b.applicantFirstName||""} ${b.applicantLastName||""}`.trim()||"Unknown",entityType:b.type||c.entity_type_display_name||"Unknown",country:b.businessCountryOfRegistration||b.applicantCountry||"Unknown",status:{Draft:"IN PROGRESS",InProgress:"IN PROGRESS",PendingReview:"RISK REVIEW",Submitted:"SUBMITTED",Approved:"COMPLETE",Rejected:"DECLINED",Cancelled:"DECLINED"}[b.status]||"IN PROGRESS",created:b.createdAt||new Date().toISOString(),updated:b.updatedAt||b.createdAt||new Date().toISOString(),submittedBy:b.applicantEmail||"Unknown",riskScore:b.riskScore||0,documents:[],businessInfo:{registrationNumber:b.businessRegistrationNumber||c.registrationNumber||"",taxId:b.businessTaxId||c.taxNumber||"",businessAddress:b.businessAddress||c.businessAddress||"",industry:b.businessIndustry||c.industry||"",employees:b.businessNumberOfEmployees||0,annualRevenue:b.businessAnnualRevenue||0},contactInfo:{primaryContact:`${b.applicantFirstName||""} ${b.applicantLastName||""}`.trim(),email:b.applicantEmail||"",phone:b.applicantPhone||"",address:b.applicantAddress||""}};I(e),Q(e.status),Y(e.status),d?(E.logger.debug("[Application Loader] Using entity_type_code from application metadata",{entityTypeCode:d}),await ax(d,b)):E.logger.error(Error("No entity_type_code found in application metadata"),"[Application Loader] Missing entity type code",{tags:{error_type:"missing_entity_type_code"},extra:{availableKeys:Object.keys(c)}})}catch(a){M("Failed to load application"),E.logger.error(a,"Error loading application",{tags:{error_type:"application_load_error"}})}finally{K(!1)}},ax=async(a,b)=>{try{if(ai(!0),E.logger.debug("[Schema Loader] Using entity type code directly from application",{entityTypeCode:a}),!a||""===a.trim())return void E.logger.error(Error("Entity type code is empty or invalid"),"[Schema Loader] Invalid entity type code",{tags:{error_type:"invalid_entity_type_code"}});let c=await (0,t.fetchEntitySchema)(a.trim(),b);c?(E.logger.debug("[Schema Loader] Successfully loaded entity schema",{sectionsCount:c.sections.length,sections:c.sections.map((a,b)=>({index:b+1,title:a.title,fieldsCount:a.fields.length}))}),ag(c)):E.logger.error(Error(`No entity schema found for: ${a}`),"[Schema Loader] Missing entity schema",{tags:{error_type:"missing_entity_schema"},extra:{entityTypeCode:a}})}catch(a){E.logger.error(a,"[Schema Loader] Error loading entity schema",{tags:{error_type:"schema_load_error"},extra:{stack:a instanceof Error?a.stack:"No stack trace"}})}finally{ai(!1)}},ay=async()=>{if(H&&X){aa(!0);try{let a=await fetch(`/api/applications/${H.id}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:X,notes:Z||""})});if(!a.ok){let b=await a.json();throw Error(b.error||`Failed to update status: ${a.status}`)}Q(X),await aw(),U(!1),Y(""),$(""),await s.SweetAlert.success("Status Updated",`Application status has been updated to ${X}`)}catch(a){E.logger.error(a,"Error updating status",{tags:{error_type:"status_update_error"}}),await s.SweetAlert.error("Update Failed",a instanceof Error?a.message:"Failed to update status")}finally{aa(!1)}}},az=async()=>{if(Z.trim()&&H){ac(!0);try{let a=H.id,b=await fetch(`/api/workqueue/${a}/comments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:Z})});if(b.ok)O(Z),W(!1),$(""),await s.SweetAlert.success("Comment Added","Your comment has been added successfully");else{let a=await b.json().catch(()=>({}));throw Error(a.error||`Failed to add comment: ${b.status}`)}}catch(a){E.logger.error(a,"Error adding comment",{tags:{error_type:"comment_add_error"}}),await s.SweetAlert.error("Comment Failed",a instanceof Error?a.message:"Failed to add comment")}finally{ac(!1)}}},aA=async()=>{if(H){ae(!0);try{let a={applicationId:H.id,legalName:H.legalName,entityType:H.entityType,country:H.country,status:H.status,submittedDate:H.created,lastUpdated:H.updated,applicant:H.submittedBy,riskScore:H.riskScore||0,businessInfo:H.businessInfo,contactInfo:H.contactInfo,documents:H.documents},b=JSON.stringify(a,null,2),c=new Blob([b],{type:"application/json"}),d=window.URL.createObjectURL(c),e=document.createElement("a");e.href=d,e.download=`application_${H.id}_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(e),e.click(),window.URL.revokeObjectURL(d),document.body.removeChild(e),await s.SweetAlert.success("Export Successful","Application data has been exported")}catch(a){E.logger.error(a,"Error exporting data",{tags:{error_type:"data_export_error"}}),await s.SweetAlert.error("Export Failed",a instanceof Error?a.message:"Failed to export data")}finally{ae(!1)}}},aB=af&&af.sections&&0!==af.sections.length?[...af.sections].sort((a,b)=>a.order-b.order).map((a,b)=>{let c=m.FiFileText,d=a.title.toUpperCase();return d.includes("OVERVIEW")||d.includes("INFORMATION")?c=m.FiFileText:d.includes("DOCUMENT")?c=m.FiFolder:d.includes("OWNERSHIP")||d.includes("SHAREHOLDER")?c=m.FiUsers:d.includes("DIRECTOR")||d.includes("BOARD")||d.includes("IDENTITY")||d.includes("PROOF")?c=m.FiUserCheck:d.includes("ADDRESS")?c=m.FiHome:(d.includes("SIGNATORY")||d.includes("AUTHORIZED"))&&(c=m.FiUsers),{id:b+1,title:a.title,subtitle:a.description||`${a.title} details`,icon:c,active:!0,sectionId:a.id,sectionOrder:a.order}}):[{id:1,title:"Overview",subtitle:"Application summary",icon:m.FiFileText,active:!0}],aC=a=>({SUBMITTED:"blue","IN PROGRESS":"orange",COMPLETE:"green",DECLINED:"red","RISK REVIEW":"yellow",INCOMPLETE:"gray"})[a]||"gray";return J?(0,b.jsxs)(g.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(r.default,{}),(0,b.jsx)(c.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsxs)(e.VStack,{gap:"4",children:[(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiFileText,{size:32,color:"#DD6B20"})}),(0,b.jsx)(v.Typography,{color:"gray.600",children:"Loading application details..."})]})})]}):L||!H?(0,b.jsxs)(g.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(r.default,{}),(0,b.jsx)(c.Box,{flex:"1",ml:"280px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsxs)(e.VStack,{gap:"4",children:[(0,b.jsx)(C.AlertBar,{status:"error",title:"Error!",description:L||"Application not found"}),(0,b.jsx)(o.default,{href:"/work-queue",children:(0,b.jsxs)(z.Button,{variant:"secondary",children:[(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiArrowLeft,{size:16})}),"Back to Work Queue"]})})]})})]}):(0,b.jsxs)(g.Flex,{minH:"100vh",bg:"gray.50",children:[(0,b.jsx)(r.default,{}),(0,b.jsxs)(c.Box,{flex:"1",ml:"240px",bg:"gradient-to-br",bgGradient:"linear(to-br, gray.50, white)",children:[(0,b.jsx)(c.Box,{bg:"white",borderBottom:"1px",borderColor:"gray.200",py:"5",boxShadow:"sm",position:"sticky",top:"0",zIndex:"10",children:(0,b.jsxs)(d.Container,{maxW:"8xl",children:[(0,b.jsxs)(g.Flex,{justify:"space-between",align:"center",mb:"4",children:[(0,b.jsxs)(f.HStack,{gap:"3",align:"center",children:[(0,b.jsx)(c.Box,{p:"2.5",borderRadius:"lg",bgGradient:"linear(to-br, orange.400, orange.600)",boxShadow:"md",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiFileText,{size:20,color:"white"})})}),(0,b.jsxs)(e.VStack,{align:"start",gap:"0.5",children:[(0,b.jsx)(v.Typography,{as:"h1",fontSize:"2xl",fontWeight:"800",color:"gray.900",letterSpacing:"-0.02em",lineHeight:"1.2",children:"Application Review"}),(0,b.jsxs)(f.HStack,{gap:"2",align:"center",children:[(0,b.jsx)(v.Typography,{color:"gray.600",fontSize:"sm",fontWeight:"500",children:H.legalName}),(0,b.jsx)(v.Typography,{color:"gray.400",fontSize:"xs",children:"â€¢"}),(0,b.jsx)(v.Typography,{color:"gray.500",fontSize:"sm",fontWeight:"500",children:H.entityType})]})]})]}),(0,b.jsxs)(f.HStack,{gap:"3",align:"center",children:[(0,b.jsx)(w.Tag,{variant:"green"===aC(H.status)?"success":"red"===aC(H.status)?"danger":"info",children:H.status}),(0,b.jsx)(o.default,{href:"/work-queue",children:(0,b.jsxs)(z.Button,{variant:"secondary",size:"md",children:[(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiArrowLeft,{size:16})}),"Back to Queue"]})})]})]}),(0,b.jsx)(c.Box,{py:"3",children:(0,b.jsx)(g.Flex,{direction:"column",gap:"3",align:"stretch",children:(0,b.jsx)(f.HStack,{gap:"2",justify:"space-between",align:"flex-start",position:"relative",w:"full",children:aB.map((a,d)=>(0,b.jsxs)(g.Flex,{align:"stretch",gap:"0",flex:"1",position:"relative",direction:"column",children:[(0,b.jsxs)(g.Flex,{align:"center",justify:"center",w:"full",position:"relative",mb:"2",children:[(0,b.jsx)(h.Circle,{size:"44px",bg:u>=a.id?"linear-gradient(135deg, orange.400, orange.600)":"gray.100",bgGradient:u>=a.id?"linear(to-br, orange.400, orange.600)":void 0,color:u>=a.id?"white":"gray.400",cursor:"pointer",onClick:()=>G(a.id),transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",_hover:{transform:"scale(1.08)",boxShadow:u>=a.id?"0 6px 16px rgba(237, 137, 54, 0.4)":"0 3px 10px rgba(0, 0, 0, 0.1)"},boxShadow:u>=a.id?"0 4px 12px rgba(237, 137, 54, 0.3)":"0 2px 6px rgba(0, 0, 0, 0.05)",border:u===a.id?"3px solid":"none",borderColor:u===a.id?"orange.300":"transparent",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,mx:"auto",children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(a.icon,{size:20})})}),d<aB.length-1&&(0,b.jsx)(c.Box,{position:"absolute",left:"calc(50% + 22px)",top:"50%",transform:"translateY(-50%)",width:"calc(100% - 44px)",height:"3px",borderRadius:"full",bg:u>a.id?"linear-gradient(90deg, orange.400, orange.500)":"gray.200",bgGradient:u>a.id?"linear(to-r, orange.400, orange.500)":void 0,transition:"all 0.4s ease",zIndex:"0"})]}),(0,b.jsxs)(e.VStack,{align:"center",gap:"0.5",w:"full",cursor:"pointer",onClick:()=>G(a.id),transition:"all 0.2s",_hover:{transform:"translateY(-1px)"},px:"1",children:[(0,b.jsx)(v.Typography,{fontSize:"xs",fontWeight:u===a.id?"700":"600",color:u===a.id?"gray.900":"gray.700",transition:"all 0.2s",textAlign:"center",lineHeight:"1.3",whiteSpace:"nowrap",w:"full",children:a.title}),(0,b.jsx)(v.Typography,{fontSize:"10px",color:u===a.id?"gray.600":"gray.500",fontWeight:u===a.id?"500":"400",transition:"all 0.2s",textAlign:"center",lineHeight:"1.2",whiteSpace:"nowrap",w:"full",children:a.subtitle})]})]},a.id))})})})]})}),(0,b.jsxs)(d.Container,{maxW:"8xl",py:"4",px:"6",children:[(0,b.jsx)(F,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:(()=>{let a=aB.find(a=>a.id===u);if(ah||!af)return(0,b.jsx)(e.VStack,{gap:"6",align:"stretch",w:"full",children:(0,b.jsx)(A.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",w:"full",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"center",py:"8",w:"full",children:[(0,b.jsx)(c.Box,{p:"3",borderRadius:"lg",bgGradient:"linear(to-br, orange.100, orange.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiFileText,{size:24,color:"#DD6B20"})})}),(0,b.jsx)(v.Typography,{fontSize:"md",color:"gray.700",fontWeight:"600",textAlign:"center",children:"Loading entity schema from database..."}),(0,b.jsx)(k.Progress.Root,{value:void 0,size:"md",colorScheme:"orange",w:"full",maxW:"300px",children:(0,b.jsx)(k.Progress.Track,{children:(0,b.jsx)(k.Progress.Range,{})})})]})})});if(!a)return(0,b.jsx)(e.VStack,{gap:"6",align:"stretch",w:"full",children:(0,b.jsx)(A.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"yellow.200",p:"6",boxShadow:"md",bgGradient:"linear(to-br, white, yellow.50)",w:"full",children:(0,b.jsx)(C.AlertBar,{status:"warning",title:"Step Not Found",description:`Step ${u} could not be found in the schema.`})})});let d=af.sections.find(b=>a.sectionId===b.id||b.title===a.title&&a.sectionOrder===b.order)||af.sections.find(b=>b.title===a.title)||af.sections[u-1];return d?(0,b.jsxs)(e.VStack,{gap:"6",align:"stretch",w:"full",children:[ah?(0,b.jsx)(A.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",w:"full",children:(0,b.jsxs)(e.VStack,{gap:"4",align:"center",py:"8",w:"full",children:[(0,b.jsx)(c.Box,{p:"3",borderRadius:"lg",bgGradient:"linear(to-br, orange.100, orange.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiFileText,{size:24,color:"#DD6B20"})})}),(0,b.jsx)(v.Typography,{fontSize:"md",color:"gray.700",fontWeight:"600",textAlign:"center",children:"Loading entity schema from database..."}),(0,b.jsx)(k.Progress.Root,{value:void 0,size:"md",colorScheme:"orange",w:"full",maxW:"300px",children:(0,b.jsx)(k.Progress.Track,{children:(0,b.jsx)(k.Progress.Range,{})})})]})}):(0,b.jsxs)(A.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",transition:"all 0.2s",w:"full",children:[(0,b.jsx)(c.Box,{pb:"4",borderBottom:"1px",borderColor:"gray.100",mb:"4",children:(0,b.jsxs)(f.HStack,{justify:"space-between",align:"flex-start",w:"full",children:[(0,b.jsxs)(e.VStack,{align:"start",gap:"1.5",flex:"1",children:[(0,b.jsxs)(f.HStack,{gap:"2.5",align:"center",children:[(0,b.jsx)(c.Box,{p:"1.5",borderRadius:"md",bgGradient:"linear(to-br, blue.100, blue.200)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(a.icon,{size:16,color:"#3182CE"})})}),(0,b.jsx)(v.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",letterSpacing:"-0.01em",lineHeight:"1.3",children:d.title})]}),d.description&&(0,b.jsx)(v.Typography,{fontSize:"sm",color:"gray.600",fontWeight:"500",pl:"8",lineHeight:"1.4",children:d.description})]}),(0,b.jsx)(w.Tag,{variant:"success",children:"Schema-Driven"})]})}),(0,b.jsx)(c.Box,{pt:"6",children:(0,b.jsx)(i.SimpleGrid,{columns:{base:1,md:2},gap:"6",w:"full",children:d.fields.map(a=>(0,b.jsx)(c.Box,{w:"full",children:(0,b.jsx)(x,{field:a,readOnly:!0,onDocumentClick:av})},a.code))})})]}),1===u&&(0,b.jsxs)(A.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"gray.200",p:"6",boxShadow:"md",w:"full",children:[(0,b.jsx)(c.Box,{pb:"4",mb:"4",children:(0,b.jsxs)(f.HStack,{gap:"2.5",align:"center",children:[(0,b.jsx)(c.Box,{p:"1.5",borderRadius:"md",bgGradient:"linear(to-br, purple.100, purple.200)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiCheckSquare,{size:16,color:"#805AD5"})})}),(0,b.jsx)(v.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",letterSpacing:"-0.01em",lineHeight:"1.3",children:"Quick Actions"})]})}),(0,b.jsx)(c.Box,{pt:"0",children:(0,b.jsxs)(f.HStack,{gap:"3",wrap:"wrap",align:"center",children:[(0,b.jsxs)(z.Button,{variant:"primary",onClick:()=>U(!0),children:[(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiEdit3,{size:16})}),"Update Status"]}),(0,b.jsxs)(z.Button,{variant:"secondary",onClick:()=>W(!0),children:[(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiMessageSquare,{size:16})}),"Add Comment"]}),(0,b.jsxs)(z.Button,{variant:"secondary",onClick:aA,disabled:ad,children:[(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiDownload,{size:16})}),ad?"Exporting...":"Export Data"]})]})})]})]}):(0,b.jsx)(e.VStack,{gap:"6",align:"stretch",w:"full",children:(0,b.jsx)(A.Card,{bg:"white",borderRadius:"xl",border:"1px",borderColor:"yellow.200",p:"6",boxShadow:"md",bgGradient:"linear(to-br, white, yellow.50)",w:"full",children:(0,b.jsx)(C.AlertBar,{status:"warning",title:"Section Not Found",description:`The section for step "${a.title}" could not be found in the schema.`})})})})()},u),(0,b.jsxs)(f.HStack,{justify:"space-between",align:"center",mt:"6",p:"3",bg:"white",borderRadius:"lg",boxShadow:"sm",border:"1px",borderColor:"gray.200",w:"full",children:[(0,b.jsxs)(z.Button,{variant:"secondary",onClick:()=>G(Math.max(1,u-1)),disabled:1===u,children:[(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiArrowLeft,{size:16})}),"Previous"]}),(0,b.jsx)(f.HStack,{gap:"1.5",p:"1",bg:"gray.50",borderRadius:"md",align:"center",children:aB.map(a=>(0,b.jsx)(z.Button,{size:"sm",variant:u===a.id?"primary":"ghost",onClick:()=>G(a.id),children:a.id},a.id))}),(0,b.jsxs)(z.Button,{variant:"primary",onClick:()=>G(Math.min(aB.length,u+1)),disabled:u===aB.length,children:["Next",(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiArrowRight,{size:16})})]})]})]})]}),(0,b.jsxs)(B.Modal,{isOpen:T,onClose:()=>{U(!1),Y(P),$("")},title:"Update Application Status",size:"small",closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,b.jsx)(B.ModalHeader,{children:(0,b.jsxs)(f.HStack,{gap:"3",align:"center",mb:"1",children:[(0,b.jsx)(c.Box,{p:"2",borderRadius:"lg",bgGradient:"linear(to-br, orange.100, orange.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiEdit3,{size:16,color:"#DD6B20"})})}),(0,b.jsxs)(e.VStack,{align:"start",gap:"0",children:[(0,b.jsx)(v.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",children:"Update Application Status"}),(0,b.jsx)(v.Typography,{fontSize:"sm",color:"gray.600",mt:"0.5",children:"Change the status of this application"})]})]})}),(0,b.jsx)(B.ModalBody,{children:(0,b.jsxs)(e.VStack,{gap:"5",align:"stretch",children:[(0,b.jsxs)(l.Field.Root,{children:[(0,b.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"600",color:"gray.700",mb:"2",children:"New Status"}),(0,b.jsx)(c.Box,{position:"relative",children:(0,b.jsxs)("select",{value:X,onChange:a=>Y(a.target.value),style:{width:"100%",padding:"10px 12px",fontSize:"14px",borderRadius:"8px",border:"1.5px solid #E2E8F0",backgroundColor:"white",color:"#1A202C",fontWeight:"500",cursor:"pointer",appearance:"none",backgroundImage:"url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9L1 4h10z'/%3E%3C/svg%3E\")",backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",paddingRight:"36px"},children:[(0,b.jsx)("option",{value:"",children:"Select status..."}),(0,b.jsx)("option",{value:"SUBMITTED",children:"Submitted"}),(0,b.jsx)("option",{value:"IN PROGRESS",children:"In Progress"}),(0,b.jsx)("option",{value:"RISK REVIEW",children:"Risk Review"}),(0,b.jsx)("option",{value:"COMPLETE",children:"Complete"}),(0,b.jsx)("option",{value:"DECLINED",children:"Declined"}),(0,b.jsx)("option",{value:"INCOMPLETE",children:"Incomplete"})]})})]}),(0,b.jsxs)(l.Field.Root,{children:[(0,b.jsxs)(l.Field.Label,{fontSize:"sm",fontWeight:"600",color:"gray.700",mb:"2",children:["Notes ",(0,b.jsx)(v.Typography,{as:"span",color:"gray.400",fontWeight:"400",children:"(Optional)"})]}),(0,b.jsx)(j.Textarea,{placeholder:"Add notes about this status change...",value:Z,onChange:a=>$(a.target.value),rows:4,borderRadius:"md",borderWidth:"1.5px",borderColor:"gray.300",fontSize:"sm",color:"gray.900",_focus:{borderColor:"orange.400",boxShadow:"0 0 0 1px orange.400"}})]})]})}),(0,b.jsx)(B.ModalFooter,{children:(0,b.jsxs)(f.HStack,{gap:"3",justify:"flex-end",w:"full",children:[(0,b.jsx)(z.Button,{variant:"secondary",onClick:()=>{U(!1),Y(P),$("")},children:"Cancel"}),(0,b.jsx)(z.Button,{variant:"primary",onClick:ay,disabled:_||!X,children:"Update Status"})]})})]}),(0,b.jsxs)(B.Modal,{isOpen:V,onClose:()=>{W(!1),$("")},title:"Add Comment",size:"small",closeOnBackdropClick:!0,closeOnEsc:!0,children:[(0,b.jsx)(B.ModalHeader,{children:(0,b.jsxs)(f.HStack,{gap:"3",align:"center",mb:"1",children:[(0,b.jsx)(c.Box,{p:"2",borderRadius:"lg",bgGradient:"linear(to-br, blue.100, blue.200)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,b.jsx)(D.IconWrapper,{children:(0,b.jsx)(m.FiMessageSquare,{size:16,color:"#3182CE"})})}),(0,b.jsxs)(e.VStack,{align:"start",gap:"0",children:[(0,b.jsx)(v.Typography,{fontSize:"lg",fontWeight:"700",color:"gray.900",children:"Add Comment"}),(0,b.jsx)(v.Typography,{fontSize:"sm",color:"gray.600",mt:"0.5",children:"Add a comment or note to this application"})]})]})}),(0,b.jsx)(B.ModalBody,{children:(0,b.jsxs)(l.Field.Root,{children:[(0,b.jsx)(l.Field.Label,{fontSize:"sm",fontWeight:"600",color:"gray.700",mb:"2",children:"Comment"}),(0,b.jsx)(j.Textarea,{placeholder:"Enter your comment here...",value:Z,onChange:a=>$(a.target.value),rows:6,borderRadius:"md",borderWidth:"1.5px",borderColor:"gray.300",fontSize:"sm",color:"gray.900",_focus:{borderColor:"blue.400",boxShadow:"0 0 0 1px blue.400"}})]})}),(0,b.jsx)(B.ModalFooter,{children:(0,b.jsxs)(f.HStack,{gap:"3",justify:"flex-end",w:"full",children:[(0,b.jsx)(z.Button,{variant:"secondary",onClick:()=>{W(!1),$("")},children:"Cancel"}),(0,b.jsx)(z.Button,{variant:"primary",onClick:az,disabled:ab||!Z.trim(),children:"Add Comment"})]})})]}),(0,b.jsx)(y.DocumentViewer,{isOpen:al,onClose:()=>{am(!1),ao(null),aq(""),as(void 0),au(void 0)},documentUrl:an,fileName:ap,documentType:ar,fileSize:at,onDownload:()=>{an&&window.open(an,"_blank")}})]})}a.s(["default",()=>G],246665)}];

//# debugId=a000a652-489a-5184-6449-341c006cee54
//# sourceMappingURL=src_app_applications_%5Bid%5D_page_tsx_327fedf2._.js.map